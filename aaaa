(function(){/*
    2020 Photon Storm Ltd.
 @license      {@link https://opensource.org/licenses/MIT|MIT License}
    2020 Photon Storm Ltd.
 @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
    2018 CodeAndWeb GmbH
 @copyright    2020 Photon Storm Ltd.
 @license      {@link https://opensource.org/licenses/MIT|MIT License}
    2018 Photon Storm Ltd.
 @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
      {@link https://opensource.org/licenses/MIT|MIT License}
    2021 Photon Storm Ltd.
 @license      {@link https://opensource.org/licenses/MIT|MIT License}
    2021 RoboWhale
 @license      {@link https://opensource.org/licenses/MIT|MIT License}
*/
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(aa){var da=0;return function(){return da<aa.length?{done:!1,value:aa[da++]}:{done:!0}}};$jscomp.arrayIterator=function(aa){return{next:$jscomp.arrayIteratorImpl(aa)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(aa,da,ca){if(aa==Array.prototype||aa==Object.prototype)return aa;aa[da]=ca.value;return aa};$jscomp.getGlobal=function(aa){aa=["object"==typeof globalThis&&globalThis,aa,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var da=0;da<aa.length;++da){var ca=aa[da];if(ca&&ca.Math==Math)return ca}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(aa,da){var ca=$jscomp.propertyToPolyfillSymbol[da];if(null==ca)return aa[da];ca=aa[ca];return void 0!==ca?ca:aa[da]};
$jscomp.polyfill=function(aa,da,ca,ea){da&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(aa,da,ca,ea):$jscomp.polyfillUnisolated(aa,da,ca,ea))};$jscomp.polyfillUnisolated=function(aa,da,ca,ea){ca=$jscomp.global;aa=aa.split(".");for(ea=0;ea<aa.length-1;ea++){var p=aa[ea];if(!(p in ca))return;ca=ca[p]}aa=aa[aa.length-1];ea=ca[aa];da=da(ea);da!=ea&&null!=da&&$jscomp.defineProperty(ca,aa,{configurable:!0,writable:!0,value:da})};
$jscomp.polyfillIsolated=function(aa,da,ca,ea){var p=aa.split(".");aa=1===p.length;ea=p[0];ea=!aa&&ea in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var u=0;u<p.length-1;u++){var a=p[u];if(!(a in ea))return;ea=ea[a]}p=p[p.length-1];ca=$jscomp.IS_SYMBOL_NATIVE&&"es6"===ca?ea[p]:null;da=da(ca);null!=da&&(aa?$jscomp.defineProperty($jscomp.polyfills,p,{configurable:!0,writable:!0,value:da}):da!==ca&&(void 0===$jscomp.propertyToPolyfillSymbol[p]&&(ca=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[p]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(p):$jscomp.POLYFILL_PREFIX+ca+"$"+p),$jscomp.defineProperty(ea,$jscomp.propertyToPolyfillSymbol[p],{configurable:!0,writable:!0,value:da})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(aa){if(aa)return aa;var da=function(u,a){this.$jscomp$symbol$id_=u;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};da.prototype.toString=function(){return this.$jscomp$symbol$id_};var ca="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",ea=0,p=function(u){if(this instanceof p)throw new TypeError("Symbol is not a constructor");return new da(ca+(u||"")+"_"+ea++,u)};return p},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(aa){if(aa)return aa;aa=Symbol("Symbol.iterator");for(var da="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ca=0;ca<da.length;ca++){var ea=$jscomp.global[da[ca]];"function"===typeof ea&&"function"!=typeof ea.prototype[aa]&&$jscomp.defineProperty(ea.prototype,aa,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return aa},
"es6","es3");$jscomp.iteratorPrototype=function(aa){aa={next:aa};aa[Symbol.iterator]=function(){return this};return aa};$jscomp.polyfill("Number.EPSILON",function(aa){return Math.pow(2,-52)},"es6","es3");$jscomp.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");$jscomp.polyfill("Number.MIN_SAFE_INTEGER",function(){return-9007199254740991},"es6","es3");
$jscomp.iteratorFromArray=function(aa,da){aa instanceof String&&(aa+="");var ca=0,ea=!1,p={next:function(){if(!ea&&ca<aa.length){var u=ca++;return{value:da(u,aa[u]),done:!1}}ea=!0;return{done:!0,value:void 0}}};p[Symbol.iterator]=function(){return p};return p};$jscomp.polyfill("Array.prototype.values",function(aa){return aa?aa:function(){return $jscomp.iteratorFromArray(this,function(da,ca){return ca})}},"es8","es3");
$jscomp.polyfill("Array.prototype.entries",function(aa){return aa?aa:function(){return $jscomp.iteratorFromArray(this,function(da,ca){return[da,ca]})}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(aa){return aa?aa:function(){return $jscomp.iteratorFromArray(this,function(da){return da})}},"es6","es3");
$jscomp.checkStringArgs=function(aa,da,ca){if(null==aa)throw new TypeError("The 'this' value for String.prototype."+ca+" must not be null or undefined");if(da instanceof RegExp)throw new TypeError("First argument to String.prototype."+ca+" must not be a regular expression");return aa+""};
$jscomp.polyfill("String.prototype.repeat",function(aa){return aa?aa:function(da){var ca=$jscomp.checkStringArgs(this,null,"repeat");if(0>da||1342177279<da)throw new RangeError("Invalid count value");da|=0;for(var ea="";da;)if(da&1&&(ea+=ca),da>>>=1)ca+=ca;return ea}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(aa){return aa?aa:function(da,ca,ea){var p=this.length||0;0>ca&&(ca=Math.max(0,p+ca));if(null==ea||ea>p)ea=p;ea=Number(ea);0>ea&&(ea=Math.max(0,p+ea));for(ca=Number(ca||0);ca<ea;ca++)this[ca]=da;return this}},"es6","es3");$jscomp.typedArrayFill=function(aa){return aa?aa:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.findInternal=function(aa,da,ca){aa instanceof String&&(aa=String(aa));for(var ea=aa.length,p=0;p<ea;p++){var u=aa[p];if(da.call(ca,u,p,aa))return{i:p,v:u}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(aa){return aa?aa:function(da,ca){return $jscomp.findInternal(this,da,ca).v}},"es6","es3");
$jscomp.polyfill("Array.from",function(aa){return aa?aa:function(da,ca,ea){ca=null!=ca?ca:function(h){return h};var p=[],u="undefined"!=typeof Symbol&&Symbol.iterator&&da[Symbol.iterator];if("function"==typeof u){da=u.call(da);for(var a=0;!(u=da.next()).done;)p.push(ca.call(ea,u.value,a++))}else for(u=da.length,a=0;a<u;a++)p.push(ca.call(ea,da[a],a));return p}},"es6","es3");$jscomp.underscoreProtoCanBeSet=function(){var aa={a:!0},da={};try{return da.__proto__=aa,da.a}catch(ca){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(aa,da){aa.__proto__=da;if(aa.__proto__!==da)throw new TypeError(aa+" is not extensible");return aa}:null;$jscomp.polyfill("Object.setPrototypeOf",function(aa){return aa||$jscomp.setPrototypeOf},"es6","es5");$jscomp.polyfill("Reflect",function(aa){return aa?aa:{}},"es6","es3");
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(aa){var da=function(){};da.prototype=aa;return new da};
$jscomp.getConstructImplementation=function(){function aa(){function ca(){}new ca;Reflect.construct(ca,[],function(){});return new ca instanceof ca}if($jscomp.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(aa())return Reflect.construct;var da=Reflect.construct;return function(ca,ea,p){ca=da(ca,ea);p&&Reflect.setPrototypeOf(ca,p.prototype);return ca}}return function(ca,ea,p){void 0===p&&(p=ca);p=$jscomp.objectCreate(p.prototype||Object.prototype);return Function.prototype.apply.call(ca,
p,ea)||p}};$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf();$jscomp.polyfill("Reflect.construct",function(aa){return $jscomp.construct},"es6","es3");$jscomp.polyfill("Math.log2",function(aa){return aa?aa:function(da){return Math.log(da)/Math.LN2}},"es6","es3");
$jscomp.polyfill("Math.fround",function(aa){if(aa)return aa;if($jscomp.SIMPLE_FROUND_POLYFILL||"function"!==typeof Float32Array)return function(ca){return ca};var da=new Float32Array(1);return function(ca){da[0]=ca;return da[0]}},"es6","es3");$jscomp.owns=function(aa,da){return Object.prototype.hasOwnProperty.call(aa,da)};$jscomp.polyfill("Object.entries",function(aa){return aa?aa:function(da){var ca=[],ea;for(ea in da)$jscomp.owns(da,ea)&&ca.push([ea,da[ea]]);return ca}},"es8","es3");
(function(){function aa(ea){var p=ca[ea];if(void 0!==p)return p.exports;p=ca[ea]={exports:{}};da[ea].call(p.exports,p,p.exports,aa);return p.exports}var da={260:function(ea){(function(p,u){ea.exports=u()})(this,function(){return function(p){function u(h){if(a[h])return a[h].exports;var f=a[h]={i:h,l:!1,exports:{}};p[h].call(f.exports,f,f.exports,u);f.l=!0;return f.exports}var a={};u.m=p;u.c=a;u.d=function(h,f,c){u.o(h,f)||Object.defineProperty(h,f,{enumerable:!0,get:c})};u.r=function(h){"undefined"!==
typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"});Object.defineProperty(h,"__esModule",{value:!0})};u.t=function(h,f){f&1&&(h=u(h));if(f&8||f&4&&"object"===typeof h&&h&&h.__esModule)return h;var c=Object.create(null);u.r(c);Object.defineProperty(c,"default",{enumerable:!0,value:h});if(f&2&&"string"!=typeof h)for(var b in h)u.d(c,b,function(d){return h[d]}.bind(null,b));return c};u.n=function(h){var f=h&&h.__esModule?function(){return h["default"]}:function(){return h};
u.d(f,"a",f);return f};u.o=function(h,f){return Object.prototype.hasOwnProperty.call(h,f)};u.p="";return u(u.s=1528)}([function(p,u){function a(c,b,d,g){for(var e in b)if(b.hasOwnProperty(e)){var l;var k=(l=d)?b[e]:Object.getOwnPropertyDescriptor(b,e);!l&&k.value&&"object"===typeof k.value&&(k=k.value);k&&(k.get&&"function"===typeof k.get||k.set&&"function"===typeof k.set)?("undefined"===typeof k.enumerable&&(k.enumerable=!0),"undefined"===typeof k.configurable&&(k.configurable=!0),l=k):l=!1;if(!1!==
l){(k=Object.getOwnPropertyDescriptor((g||c).prototype,e))?(k.value&&"object"===typeof k.value&&(k=k.value),k=!1===k.configurable?!0:!1):k=!1;if(k){if(f.ignoreFinals)continue;throw Error("cannot override final property '"+e+"', set Class.ignoreFinals = true to skip");}Object.defineProperty(c.prototype,e,l)}else c.prototype[e]=b[e]}}function h(c,b){if(b){Array.isArray(b)||(b=[b]);for(var d=0;d<b.length;d++)a(c,b[d].prototype||b[d])}}function f(c){c||(c={});if(c.initialize){if("function"!==typeof c.initialize)throw Error("initialize must be a function");
var b=c.initialize;delete c.initialize}else if(c.Extends){var d=c.Extends;b=function(){d.apply(this,arguments)}}else b=function(){};if(c.Extends){b.prototype=Object.create(c.Extends.prototype);b.prototype.constructor=b;var g=c.Extends;delete c.Extends}else b.prototype.constructor=b;var e=null;c.Mixins&&(e=c.Mixins,delete c.Mixins);h(b,e);a(b,c,!0,g);return b}f.extend=a;f.mixin=h;f.ignoreFinals=!1;p.exports=f},function(p,u){p.exports=function(){}},function(p,u){p.exports=function(a,h,f){var c=typeof a;
return a&&"number"!==c&&"string"!==c?a.hasOwnProperty(h)&&void 0!==a[h]?a[h]:f:f}},function(p,u,a){u=a(0);var h=a(124),f=new u({initialize:function(c,b){this.y=this.x=0;"object"===typeof c?(this.x=c.x||0,this.y=c.y||0):(void 0===b&&(b=c),this.x=c||0,this.y=b||0)},clone:function(){return new f(this.x,this.y)},copy:function(c){this.x=c.x||0;this.y=c.y||0;return this},setFromObject:function(c){this.x=c.x||0;this.y=c.y||0;return this},set:function(c,b){void 0===b&&(b=c);this.x=c;this.y=b;return this},
setTo:function(c,b){return this.set(c,b)},setToPolar:function(c,b){null==b&&(b=1);this.x=Math.cos(c)*b;this.y=Math.sin(c)*b;return this},equals:function(c){return this.x===c.x&&this.y===c.y},fuzzyEquals:function(c,b){return h(this.x,c.x,b)&&h(this.y,c.y,b)},angle:function(){var c=Math.atan2(this.y,this.x);0>c&&(c+=2*Math.PI);return c},setAngle:function(c){return this.setToPolar(c,this.length())},add:function(c){this.x+=c.x;this.y+=c.y;return this},subtract:function(c){this.x-=c.x;this.y-=c.y;return this},
multiply:function(c){this.x*=c.x;this.y*=c.y;return this},scale:function(c){isFinite(c)?(this.x*=c,this.y*=c):this.y=this.x=0;return this},divide:function(c){this.x/=c.x;this.y/=c.y;return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},distance:function(c){var b=c.x-this.x;c=c.y-this.y;return Math.sqrt(b*b+c*c)},distanceSq:function(c){var b=c.x-this.x;c=c.y-this.y;return b*b+c*c},length:function(){var c=this.x,b=this.y;return Math.sqrt(c*c+b*b)},setLength:function(c){return this.normalize().scale(c)},
lengthSq:function(){var c=this.x,b=this.y;return c*c+b*b},normalize:function(){var c=this.x,b=this.y,d=c*c+b*b;0<d&&(d=1/Math.sqrt(d),this.x=c*d,this.y=b*d);return this},normalizeRightHand:function(){var c=this.x;this.x=-1*this.y;this.y=c;return this},normalizeLeftHand:function(){var c=this.x;this.x=this.y;this.y=-1*c;return this},dot:function(c){return this.x*c.x+this.y*c.y},cross:function(c){return this.x*c.y-this.y*c.x},lerp:function(c,b){void 0===b&&(b=0);var d=this.x,g=this.y;this.x=d+b*(c.x-
d);this.y=g+b*(c.y-g);return this},transformMat3:function(c){var b=this.x,d=this.y;c=c.val;this.x=c[0]*b+c[3]*d+c[6];this.y=c[1]*b+c[4]*d+c[7];return this},transformMat4:function(c){var b=this.x,d=this.y;c=c.val;this.x=c[0]*b+c[4]*d+c[12];this.y=c[1]*b+c[5]*d+c[13];return this},reset:function(){this.y=this.x=0;return this},limit:function(c){var b=this.length();b&&b>c&&this.scale(c/b);return this},reflect:function(c){c=c.clone().normalize();return this.subtract(c.scale(2*this.dot(c)))},mirror:function(c){return this.reflect(c).negate()},
rotate:function(c){var b=Math.cos(c);c=Math.sin(c);return this.set(b*this.x-c*this.y,c*this.x+b*this.y)}});f.ZERO=new f;f.RIGHT=new f(1,0);f.LEFT=new f(-1,0);f.UP=new f(0,-1);f.DOWN=new f(0,1);f.ONE=new f(1,1);p.exports=f},function(p,u,a){u=a(0);var h=a(56);a=new u({initialize:function(f,c){void 0===f&&(f=0);void 0===c&&(c=f);this.type=h.POINT;this.x=f;this.y=c},setTo:function(f,c){void 0===f&&(f=0);void 0===c&&(c=f);this.x=f;this.y=c;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(24),
f=a(20),c=new u({initialize:function(b){this.scene=b;this.systems=b.sys;this.events=b.sys.events;this.events.once(f.BOOT,this.boot,this);this.events.on(f.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList;this.updateList=this.systems.updateList;this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},existing:function(b){(b.renderCanvas||b.renderWebGL)&&this.displayList.add(b);b.preUpdate&&this.updateList.add(b);
return b},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.events.off(f.START,this.start,this);this.updateList=this.displayList=this.events=this.systems=this.scene=null}});c.register=function(b,d){c.prototype.hasOwnProperty(b)||(c.prototype[b]=d)};c.remove=function(b){c.prototype.hasOwnProperty(b)&&delete c.prototype[b]};h.register("GameObjectFactory",c,"add");p.exports=c},function(p,u){p.exports=function(a,h,f){if(a&&"number"!==typeof a){if(a.hasOwnProperty(h))return a[h];
if(-1!==h.indexOf(".")){h=h.split(".");for(var c=f,b=0;b<h.length;b++)if(a.hasOwnProperty(h[b]))c=a[h[b]],a=a[h[b]];else{c=f;break}return c}}return f}},function(p,u){p.exports=function(a){if("object"!==typeof a||a.nodeType||a===a.window)return!1;try{if(a.constructor&&!{}.hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(h){return!1}return!0}},function(p,u){var a={};p.exports={install:function(h){for(var f in a)h[f]=a[f]},register:function(h,f){a[h]=f},destroy:function(){a=
{}}}},function(p,u,a){function h(){}function f(l,k,m){this.fn=l;this.context=k;this.once=m||!1}function c(l,k,m,n,q){if("function"!==typeof m)throw new TypeError("The listener must be a function");m=new f(m,n||l,q);k=e?e+k:k;l._events[k]?l._events[k].fn?l._events[k]=[l._events[k],m]:l._events[k].push(m):(l._events[k]=m,l._eventsCount++);return l}function b(l,k){0===--l._eventsCount?l._events=new h:delete l._events[k]}function d(){this._events=new h;this._eventsCount=0}var g=Object.prototype.hasOwnProperty,
e="~";Object.create&&(h.prototype=Object.create(null),(new h).__proto__||(e=!1));d.prototype.eventNames=function(){var l=[],k,m;if(0===this._eventsCount)return l;for(m in k=this._events)g.call(k,m)&&l.push(e?m.slice(1):m);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(k)):l};d.prototype.listeners=function(l){l=this._events[e?e+l:l];if(!l)return[];if(l.fn)return[l.fn];for(var k=0,m=l.length,n=Array(m);k<m;k++)n[k]=l[k].fn;return n};d.prototype.listenerCount=function(l){return(l=
this._events[e?e+l:l])?l.fn?1:l.length:0};d.prototype.emit=function(l,k,m,n,q,r){var t=e?e+l:l;if(!this._events[t])return!1;t=this._events[t];var w=arguments.length,v;if(t.fn){t.once&&this.removeListener(l,t.fn,void 0,!0);switch(w){case 1:return t.fn.call(t.context),!0;case 2:return t.fn.call(t.context,k),!0;case 3:return t.fn.call(t.context,k,m),!0;case 4:return t.fn.call(t.context,k,m,n),!0;case 5:return t.fn.call(t.context,k,m,n,q),!0;case 6:return t.fn.call(t.context,k,m,n,q,r),!0}var x=1;for(v=
Array(w-1);x<w;x++)v[x-1]=arguments[x];t.fn.apply(t.context,v)}else{var y=t.length;for(x=0;x<y;x++)switch(t[x].once&&this.removeListener(l,t[x].fn,void 0,!0),w){case 1:t[x].fn.call(t[x].context);break;case 2:t[x].fn.call(t[x].context,k);break;case 3:t[x].fn.call(t[x].context,k,m);break;case 4:t[x].fn.call(t[x].context,k,m,n);break;default:if(!v){var A=1;for(v=Array(w-1);A<w;A++)v[A-1]=arguments[A]}t[x].fn.apply(t[x].context,v)}}return!0};d.prototype.on=function(l,k,m){return c(this,l,k,m,!1)};d.prototype.once=
function(l,k,m){return c(this,l,k,m,!0)};d.prototype.removeListener=function(l,k,m,n){l=e?e+l:l;if(!this._events[l])return this;if(!k)return b(this,l),this;var q=this._events[l];if(q.fn)q.fn!==k||n&&!q.once||m&&q.context!==m||b(this,l);else{for(var r=0,t=[],w=q.length;r<w;r++)(q[r].fn!==k||n&&!q[r].once||m&&q[r].context!==m)&&t.push(q[r]);t.length?this._events[l]=1===t.length?t[0]:t:b(this,l)}return this};d.prototype.removeAllListeners=function(l){l?(l=e?e+l:l,this._events[l]&&b(this,l)):(this._events=
new h,this._eventsCount=0);return this};d.prototype.off=d.prototype.removeListener;d.prototype.addListener=d.prototype.on;d.prefixed=e;d.EventEmitter=d;p.exports=d},function(p,u,a){u=a(0);var h=a(57),f=a(171),c=a(306),b=a(56),d=a(47),g=a(174);a=new u({initialize:function(e,l,k,m){void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=0);void 0===m&&(m=0);this.type=b.RECTANGLE;this.x=e;this.y=l;this.width=k;this.height=m},contains:function(e,l){return h(this,e,l)},getPoint:function(e,l){return f(this,
e,l)},getPoints:function(e,l,k){return c(this,e,l,k)},getRandomPoint:function(e){return g(this,e)},setTo:function(e,l,k,m){this.x=e;this.y=l;this.width=k;this.height=m;return this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(e,l){void 0===l&&(l=e);this.x=e;this.y=l;return this},setSize:function(e,l){void 0===l&&(l=e);this.width=e;this.height=l;return this},isEmpty:function(){return 0>=this.width||0>=this.height},getLineA:function(e){void 0===e&&(e=new d);e.setTo(this.x,this.y,
this.right,this.y);return e},getLineB:function(e){void 0===e&&(e=new d);e.setTo(this.right,this.y,this.right,this.bottom);return e},getLineC:function(e){void 0===e&&(e=new d);e.setTo(this.right,this.bottom,this.x,this.bottom);return e},getLineD:function(e){void 0===e&&(e=new d);e.setTo(this.x,this.bottom,this.x,this.y);return e},left:{get:function(){return this.x},set:function(e){this.width=e>=this.right?0:this.right-e;this.x=e}},right:{get:function(){return this.x+this.width},set:function(e){this.width=
e<=this.x?0:e-this.x}},top:{get:function(){return this.y},set:function(e){this.height=e>=this.bottom?0:this.bottom-e;this.y=e}},bottom:{get:function(){return this.y+this.height},set:function(e){this.height=e<=this.y?0:e-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(e){this.x=e-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(e){this.y=e-this.height/2}}});p.exports=a},function(p,u,a){p.exports={Alpha:a(607),AlphaSingle:a(303),BlendMode:a(304),
ComputedSize:a(608),Crop:a(609),Depth:a(305),Flip:a(610),GetBounds:a(611),Mask:a(309),Origin:a(632),PathFollower:a(633),Pipeline:a(167),ScrollFactor:a(312),Size:a(634),Texture:a(635),TextureCrop:a(636),Tint:a(637),ToJSON:a(176),Transform:a(313),TransformMatrix:a(25),Visible:a(314)}},function(p,u){p.exports={getTintFromFloats:function(a,h,f,c){return(((255*c|0)&255)<<24|((255*a|0)&255)<<16|((255*h|0)&255)<<8|(255*f|0)&255)>>>0},getTintAppendFloatAlpha:function(a,h){return(((255*h|0)&255)<<24|a)>>>
0},getTintAppendFloatAlphaAndSwap:function(a,h){return(((255*h|0)&255)<<24|((a|0)&255)<<16|((a>>8|0)&255)<<8|(a>>16|0)&255)>>>0},getFloatsFromUintRGB:function(a){return[((a>>16|0)&255)/255,((a>>8|0)&255)/255,((a|0)&255)/255]},checkShaderMax:function(a,h){h&&-1!==h||(h=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS));for(var f=a.createShader(a.FRAGMENT_SHADER);;){for(var c="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}".replace,b="",d=0;d<h;++d)0<
d&&(b+="\nelse "),d<h-1&&(b+="if(test == "+d+".0){}");c=c.call("precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}",/%forloop%/gi,b);a.shaderSource(f,c);a.compileShader(f);if(a.getShaderParameter(f,a.COMPILE_STATUS))break;else h=h/2|0}return h},parseFragmentShaderMaxTextures:function(a,h){if(!a)return"";for(var f="",c=0;c<h;c++)0<c&&(f+="\n\telse "),c<h-1&&(f+="if (outTexId < "+c+".5)"),f+="\n\t{",f+="\n\t\ttexture = texture2D(uMainSampler["+c+"], outTexCoord);",
f+="\n\t}";a=a.replace(/%count%/gi,h.toString());return a.replace(/%forloop%/gi,f)}}},function(p,u,a){var h=a(193),f=a(6);p.exports=function(c,b,d){c=f(c,b,null);if(null===c)return d;if(Array.isArray(c))return h.RND.pick(c);if("object"===typeof c){if(c.hasOwnProperty("randInt"))return h.RND.integerInRange(c.randInt[0],c.randInt[1]);if(c.hasOwnProperty("randFloat"))return h.RND.realInRange(c.randFloat[0],c.randFloat[1])}else if("function"===typeof c)return c(b);return c}},function(p,u){p.exports={PI2:2*
Math.PI,TAU:.5*Math.PI,EPSILON:1E-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991}},function(p,u,a){u=a(0);var h=a(176),f=a(101),c=a(9),b=a(75),d=a(20),g=new u({Extends:c,initialize:function(e,l){c.call(this);this.scene=e;this.displayList=null;this.type=l;this.state=0;this.parentContainer=null;this.name="";this.active=!0;this.tabIndex=-1;this.data=null;this.renderFlags=15;
this.cameraFilter=0;this.body=this.input=null;this.ignoreDestroy=!1;this.on(b.ADDED_TO_SCENE,this.addedToScene,this);this.on(b.REMOVED_FROM_SCENE,this.removedFromScene,this);e.sys.queueDepthSort()},setActive:function(e){this.active=e;return this},setName:function(e){this.name=e;return this},setState:function(e){this.state=e;return this},setDataEnabled:function(){this.data||(this.data=new f(this));return this},setData:function(e,l){this.data||(this.data=new f(this));this.data.set(e,l);return this},
incData:function(e,l){this.data||(this.data=new f(this));this.data.inc(e,l);return this},toggleData:function(e){this.data||(this.data=new f(this));this.data.toggle(e);return this},getData:function(e){this.data||(this.data=new f(this));return this.data.get(e)},setInteractive:function(e,l,k){this.scene.sys.input.enable(this,e,l,k);return this},disableInteractive:function(){this.input&&(this.input.enabled=!1);return this},removeInteractive:function(){this.scene.sys.input.clear(this);this.input=void 0;
return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(e){return!(g.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&e.id)},getIndexList:function(){for(var e=this,l=this.parentContainer,k=[];l;)if(k.unshift(l.getIndex(e)),e=l,l.parentContainer)l=l.parentContainer;else break;this.displayList?k.unshift(this.displayList.getIndex(e)):k.unshift(this.scene.sys.displayList.getIndex(e));return k},
addToDisplayList:function(e){void 0===e&&(e=this.scene.sys.displayList);this.displayList&&this.displayList!==e&&this.removeFromDisplayList();e.exists(this)||(this.displayList=e,e.add(this,!0),e.queueDepthSort(),this.emit(b.ADDED_TO_SCENE,this,this.scene),e.events.emit(d.ADDED_TO_SCENE,this,this.scene));return this},addToUpdateList:function(){this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this);return this},removeFromDisplayList:function(){var e=this.displayList||this.scene.sys.displayList;
e.exists(this)&&(e.remove(this,!0),e.queueDepthSort(),this.displayList=null,this.emit(b.REMOVED_FROM_SCENE,this,this.scene),e.events.emit(d.REMOVED_FROM_SCENE,this,this.scene));return this},removeFromUpdateList:function(){this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this);return this},destroy:function(e){this.scene&&!this.ignoreDestroy&&(void 0===e&&(e=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(b.DESTROY,this,e),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),
this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.visible=this.active=!1,this.parentContainer=this.scene=void 0)}});g.RENDER_MASK=15;p.exports=g},function(p,u,a){u=a(0);var h=a(24),f=a(20),c=new u({initialize:function(b){this.scene=b;this.systems=b.sys;this.events=b.sys.events;this.events.once(f.BOOT,this.boot,this);this.events.on(f.START,
this.start,this)},boot:function(){this.displayList=this.systems.displayList;this.updateList=this.systems.updateList;this.events.once(f.DESTROY,this.destroy,this)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.events.off(f.START,this.start,this);this.updateList=this.displayList=this.events=this.systems=this.scene=null}});c.register=function(b,d){c.prototype.hasOwnProperty(b)||
(c.prototype[b]=d)};c.remove=function(b){c.prototype.hasOwnProperty(b)&&delete c.prototype[b]};h.register("GameObjectCreator",c,"make");p.exports=c},function(p,u,a){var h=a(7),f=function(){var c,b,d,g=arguments[0]||{},e=1,l=arguments.length,k=!1;"boolean"===typeof g&&(k=g,g=arguments[1]||{},e=2);l===e&&(g=this,--e);for(;e<l;e++)if(null!=(c=arguments[e]))for(b in c){var m=g[b];var n=c[b];g!==n&&(k&&n&&(h(n)||(d=Array.isArray(n)))?(d?(d=!1,m=m&&Array.isArray(m)?m:[]):m=m&&h(m)?m:{},g[b]=f(k,m,n)):void 0!==
n&&(g[b]=n))}return g};p.exports=f},function(p,u){p.exports=function(a,h,f){return Math.max(h,Math.min(f,a))}},function(p,u,a){u=a(25);var h=new u,f=new u,c=new u,b={camera:h,sprite:f,calc:c};p.exports=function(d,g,e){f.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);h.copyFrom(g.matrix);e?(h.multiplyWithOffset(e,-g.scrollX*d.scrollFactorX,-g.scrollY*d.scrollFactorY),f.e=d.x,f.f=d.y):(f.e-=g.scrollX*d.scrollFactorX,f.f-=g.scrollY*d.scrollFactorY);h.multiply(f,c);return b}},function(p,u,a){p.exports=
{ADDED_TO_SCENE:a(656),BOOT:a(657),CREATE:a(658),DESTROY:a(659),PAUSE:a(660),POST_UPDATE:a(661),PRE_RENDER:a(662),PRE_UPDATE:a(663),READY:a(664),REMOVED_FROM_SCENE:a(665),RENDER:a(666),RESUME:a(667),SHUTDOWN:a(668),SLEEP:a(669),START:a(670),TRANSITION_COMPLETE:a(671),TRANSITION_INIT:a(672),TRANSITION_OUT:a(673),TRANSITION_START:a(674),TRANSITION_WAKE:a(675),UPDATE:a(676),WAKE:a(677)}},function(p,u){p.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,
FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(p,u,a){p.exports={BLUR:a(612),BOOT:a(613),CONTEXT_LOST:a(614),CONTEXT_RESTORED:a(615),DESTROY:a(616),FOCUS:a(617),HIDDEN:a(618),PAUSE:a(619),POST_RENDER:a(620),POST_STEP:a(621),PRE_RENDER:a(622),PRE_STEP:a(623),READY:a(624),RESUME:a(625),STEP:a(626),VISIBLE:a(627)}},function(p,u,a){u=a(0);var h=a(21),f=a(95),c=a(2),b=a(155),d=a(240),g=a(517),
e=a(156);a=new u({initialize:function(l,k){this.loader=l;this.cache=c(k,"cache",!1);this.type=c(k,"type",!1);var m=this.key=c(k,"key",!1);l.prefix&&""!==l.prefix&&(this.key=l.prefix+m);if(!this.type||!this.key)throw Error("Invalid Loader."+this.type+" key");var n=c(k,"url");void 0===n?n=l.path+m+"."+c(k,"extension",""):"string"!==typeof n||n.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(n=l.path+n);this.url=n;this.src="";this.xhrSettings=e(c(k,"responseType",void 0));c(k,"xhrSettings",!1)&&
(this.xhrSettings=d(this.xhrSettings,c(k,"xhrSettings",{})));this.xhrLoader=null;this.state="function"===typeof this.url?h.FILE_POPULATED:h.FILE_PENDING;this.bytesTotal=0;this.percentComplete=this.bytesLoaded=-1;this.data=this.crossOrigin=void 0;this.config=c(k,"config",{})},setLink:function(l){this.linkFile=l;l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===h.FILE_POPULATED?
this.loader.nextFile(this,!0):(this.state=h.FILE_LOADING,this.src=b(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=g(this,this.loader.xhr))},onLoad:function(l,k){var m=l.responseURL&&(0===l.responseURL.indexOf("file://")||0===l.responseURL.indexOf("capacitor://"))&&0===k.target.status;k=!(k.target&&200!==k.target.status)||m;4===l.readyState&&400<=l.status&&599>=l.status&&(k=!1);this.state=h.FILE_LOADED;this.resetXHR();
this.loader.nextFile(this,k)},onError:function(){this.resetXHR();this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(f.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=h.FILE_PROCESSING;this.onProcessComplete()},onProcessComplete:function(){this.state=h.FILE_COMPLETE;if(this.multiFile)this.multiFile.onFileComplete(this);
this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=h.FILE_ERRORED;if(this.multiFile)this.multiFile.onFileFailed(this);this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data);this.pendingDestroy()},pendingDestroy:function(l){void 0===l&&(l=this.data);var k=this.key,m=this.type;this.loader.emit(f.FILE_COMPLETE,k,m,l);this.loader.emit(f.FILE_KEY_COMPLETE+
m+"-"+k,k,m,l);this.loader.flagForRemoval(this)},destroy:function(){this.data=this.linkFile=this.multiFile=this.xhrSettings=this.cache=this.loader=null}});a.createObjectURL=function(l,k,m){if("function"===typeof URL)l.src=URL.createObjectURL(k);else{var n=new FileReader;n.onload=function(){l.removeAttribute("crossOrigin");l.src="data:"+(k.type||m)+";base64,"+n.result.split(",")[1]};n.onerror=l.onerror;n.readAsDataURL(k)}};a.revokeObjectURL=function(l){"function"===typeof URL&&URL.revokeObjectURL(l.src)};
p.exports=a},function(p,u){var a={},h={};p.exports={register:function(f,c,b,d){void 0===d&&(d=!1);a[f]={plugin:c,mapping:b,custom:d}},registerCustom:function(f,c,b,d){h[f]={plugin:c,mapping:b,data:d}},hasCore:function(f){return a.hasOwnProperty(f)},hasCustom:function(f){return h.hasOwnProperty(f)},getCore:function(f){return a[f]},getCustom:function(f){return h[f]},getCustomClass:function(f){return h.hasOwnProperty(f)?h[f].plugin:null},remove:function(f){a.hasOwnProperty(f)&&delete a[f]},removeCustom:function(f){h.hasOwnProperty(f)&&
delete h[f]},destroyCorePlugins:function(){for(var f in a)a.hasOwnProperty(f)&&delete a[f]},destroyCustomPlugins:function(){for(var f in h)h.hasOwnProperty(f)&&delete h[f]}}},function(p,u,a){u=a(0);var h=a(14),f=a(3);a=new u({initialize:function(c,b,d,g,e,l){void 0===c&&(c=1);void 0===b&&(b=0);void 0===d&&(d=0);void 0===g&&(g=1);void 0===e&&(e=0);void 0===l&&(l=0);this.matrix=new Float32Array([c,b,d,g,e,l,0,0,1]);this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},
set:function(c){this.matrix[0]=c}},b:{get:function(){return this.matrix[1]},set:function(c){this.matrix[1]=c}},c:{get:function(){return this.matrix[2]},set:function(c){this.matrix[2]=c}},d:{get:function(){return this.matrix[3]},set:function(c){this.matrix[3]=c}},e:{get:function(){return this.matrix[4]},set:function(c){this.matrix[4]=c}},f:{get:function(){return this.matrix[5]},set:function(c){this.matrix[5]=c}},tx:{get:function(){return this.matrix[4]},set:function(c){this.matrix[4]=c}},ty:{get:function(){return this.matrix[5]},
set:function(c){this.matrix[5]=c}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(0>Math.atan(-this.c/this.a)?-1:1)}},rotationNormalized:{get:function(){var c=this.matrix,b=c[0],d=c[1],g=c[2];c=c[3];return b||d?0<d?Math.acos(b/this.scaleX):-Math.acos(b/this.scaleX):g||c?h.TAU-(0<c?Math.acos(-g/this.scaleY):-Math.acos(g/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var c=
this.matrix;c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return this},translate:function(c,b){var d=this.matrix;d[4]=d[0]*c+d[2]*b+d[4];d[5]=d[1]*c+d[3]*b+d[5];return this},scale:function(c,b){var d=this.matrix;d[0]*=c;d[1]*=c;d[2]*=b;d[3]*=b;return this},rotate:function(c){var b=Math.sin(c);c=Math.cos(c);var d=this.matrix,g=d[0],e=d[1],l=d[2],k=d[3];d[0]=g*c+l*b;d[1]=e*c+k*b;d[2]=g*-b+l*c;d[3]=e*-b+k*c;return this},multiply:function(c,b){var d=this.matrix,g=c.matrix;c=d[0];var e=d[1],l=d[2],k=d[3],
m=d[4];d=d[5];var n=g[0],q=g[1],r=g[2],t=g[3],w=g[4];g=g[5];b=void 0===b?this:b;b.a=n*c+q*l;b.b=n*e+q*k;b.c=r*c+t*l;b.d=r*e+t*k;b.e=w*c+g*l+m;b.f=w*e+g*k+d;return b},multiplyWithOffset:function(c,b,d){var g=this.matrix,e=c.matrix;c=g[0];var l=g[1],k=g[2],m=g[3],n=g[4],q=g[5],r=e[0],t=e[1],w=e[2],v=e[3],x=e[4];e=e[5];g[0]=r*c+t*k;g[1]=r*l+t*m;g[2]=w*c+v*k;g[3]=w*l+v*m;g[4]=x*c+e*k+(b*c+d*k+n);g[5]=x*l+e*m+(b*l+d*m+q);return this},transform:function(c,b,d,g,e,l){var k=this.matrix,m=k[0],n=k[1],q=k[2],
r=k[3],t=k[4],w=k[5];k[0]=c*m+b*q;k[1]=c*n+b*r;k[2]=d*m+g*q;k[3]=d*n+g*r;k[4]=e*m+l*q+t;k[5]=e*n+l*r+w;return this},transformPoint:function(c,b,d){void 0===d&&(d={x:0,y:0});var g=this.matrix,e=g[1],l=g[3],k=g[5];d.x=c*g[0]+b*g[2]+g[4];d.y=c*e+b*l+k;return d},invert:function(){var c=this.matrix,b=c[0],d=c[1],g=c[2],e=c[3],l=c[4],k=c[5],m=b*e-d*g;c[0]=e/m;c[1]=-d/m;c[2]=-g/m;c[3]=b/m;c[4]=(g*k-e*l)/m;c[5]=-(b*k-d*l)/m;return this},copyFrom:function(c){var b=this.matrix;b[0]=c.a;b[1]=c.b;b[2]=c.c;b[3]=
c.d;b[4]=c.e;b[5]=c.f;return this},copyFromArray:function(c){var b=this.matrix;b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];return this},copyToContext:function(c){var b=this.matrix;c.transform(b[0],b[1],b[2],b[3],b[4],b[5]);return c},setToContext:function(c){var b=this.matrix;c.setTransform(b[0],b[1],b[2],b[3],b[4],b[5]);return c},copyToArray:function(c){var b=this.matrix;void 0===c?c=[b[0],b[1],b[2],b[3],b[4],b[5]]:(c[0]=b[0],c[1]=b[1],c[2]=b[2],c[3]=b[3],c[4]=b[4],c[5]=b[5]);return c},
setTransform:function(c,b,d,g,e,l){var k=this.matrix;k[0]=c;k[1]=b;k[2]=d;k[3]=g;k[4]=e;k[5]=l;return this},decomposeMatrix:function(){var c=this.decomposedMatrix,b=this.matrix,d=b[0],g=b[1],e=b[2],l=b[3],k=d*l-g*e;c.translateX=b[4];c.translateY=b[5];d||g?(e=Math.sqrt(d*d+g*g),c.rotation=0<g?Math.acos(d/e):-Math.acos(d/e),c.scaleX=e,c.scaleY=k/e):e||l?(d=Math.sqrt(e*e+l*l),c.rotation=.5*Math.PI-(0<l?Math.acos(-e/d):-Math.acos(e/d)),c.scaleX=k/d,c.scaleY=d):(c.rotation=0,c.scaleX=0,c.scaleY=0);return c},
applyITRS:function(c,b,d,g,e){var l=this.matrix,k=Math.sin(d);d=Math.cos(d);l[4]=c;l[5]=b;l[0]=d*g;l[1]=k*g;l[2]=-k*e;l[3]=d*e;return this},applyInverse:function(c,b,d){void 0===d&&(d=new f);var g=this.matrix,e=g[0],l=g[1],k=g[2],m=g[3],n=g[4];g=g[5];var q=1/(e*m+k*-l);d.x=m*q*c+-k*q*b+(g*k-n*m)*q;d.y=e*q*b+-l*q*c+(-g*e+n*l)*q;return d},getX:function(c,b){return c*this.a+b*this.c+this.e},getY:function(c,b){return c*this.b+b*this.d+this.f},getXRound:function(c,b,d){c=this.getX(c,b);d&&(c=Math.round(c));
return c},getYRound:function(c,b,d){c=this.getY(c,b);d&&(c=Math.round(c));return c},getCSSMatrix:function(){var c=this.matrix;return"matrix("+c[0]+","+c[1]+","+c[2]+","+c[3]+","+c[4]+","+c[5]+")"},destroy:function(){this.decomposedMatrix=this.matrix=null}});p.exports=a},function(p,u,a){var h=a(2);p.exports=function(f,c,b,d,g,e){void 0===f&&(f=0);void 0===c&&(c=0);void 0===b&&(b=e.width);void 0===d&&(d=e.height);g||(g={});var l=h(g,"isNotEmpty",!1),k=h(g,"isColliding",!1);g=h(g,"hasInterestingFace",
!1);0>f&&(b+=f,f=0);0>c&&(d+=c,c=0);f+b>e.width&&(b=Math.max(e.width-f,0));c+d>e.height&&(d=Math.max(e.height-c,0));for(var m=[],n=c;n<c+d;n++)for(var q=f;q<f+b;q++){var r=e.data[n][q];null===r||l&&-1===r.index||!(k&&!r.collides||g&&!r.hasInterestingFace)&&m.push(r)}return m}},function(p,u){p.exports=function(a,h,f,c,b,d){void 0===c&&(c=0);void 0===b&&(b=0);void 0===d&&(d=1);var g=0,e=a.length;if(1===d)for(;b<e;b++)a[b][h]=f+g*c,g++;else for(;0<=b;b--)a[b][h]=f+g*c,g++;return a}},function(p,u,a){var h=
a(35),f=a(13);p.exports=function(c,b,d){b.x=f(d,"x",0);b.y=f(d,"y",0);b.depth=f(d,"depth",0);b.flipX=f(d,"flipX",!1);b.flipY=f(d,"flipY",!1);var g=f(d,"scale",null);"number"===typeof g?b.setScale(g):null!==g&&(b.scaleX=f(g,"x",1),b.scaleY=f(g,"y",1));g=f(d,"scrollFactor",null);"number"===typeof g?b.setScrollFactor(g):null!==g&&(b.scrollFactorX=f(g,"x",1),b.scrollFactorY=f(g,"y",1));b.rotation=f(d,"rotation",0);g=f(d,"angle",null);null!==g&&(b.angle=g);b.alpha=f(d,"alpha",1);var e=f(d,"origin",null);
"number"===typeof e?b.setOrigin(e):null!==e&&(g=f(e,"x",.5),e=f(e,"y",.5),b.setOrigin(g,e));b.blendMode=f(d,"blendMode",h.NORMAL);b.visible=f(d,"visible",!0);f(d,"add",!0)&&c.sys.displayList.add(b);b.preUpdate&&c.sys.updateList.add(b);return b}},function(p,u){p.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(p,u,a){var h=a(19);p.exports=function(f,c,b,d,g){var e=d.alpha*b.alpha;if(0>=e)return!1;d=h(b,d,g).calc;c.globalCompositeOperation=f.blendModes[b.blendMode];c.globalAlpha=
e;c.save();d.setToContext(c);c.imageSmoothingEnabled=!(!f.antialias||b.frame&&b.frame.source.scaleMode);return!0}},function(p,u,a){var h=a(33),f=a(192),c=[],b=!1;p.exports=function(){var d=function(l,k,m,n,q){void 0===k&&(k=1);void 0===m&&(m=1);void 0===n&&(n=h.CANVAS);void 0===q&&(q=!1);var r=g(n);null===r?(r={parent:l,canvas:document.createElement("canvas"),type:n},n===h.CANVAS&&c.push(r)):r.parent=l;l=r.canvas;q&&(r.parent=l);l.width=k;l.height=m;b&&n===h.CANVAS&&f.disable(l.getContext("2d"));
return l},g=function(l){void 0===l&&(l=h.CANVAS);if(l===h.WEBGL)return null;for(var k=0;k<c.length;k++){var m=c[k];if(!m.parent&&m.type===l)return m}return null},e=function(){var l=0;c.forEach(function(k){k.parent&&l++});return l};return{create2D:function(l,k,m){return d(l,k,m,h.CANVAS)},create:d,createWebGL:function(l,k,m){return d(l,k,m,h.WEBGL)},disableSmoothing:function(){b=!0},enableSmoothing:function(){b=!1},first:g,free:function(){return c.length-e()},pool:c,remove:function(l){var k=l instanceof
HTMLCanvasElement;c.forEach(function(m){if(k&&m.canvas===l||!k&&m.parent===l)m.parent=null,m.canvas.width=1,m.canvas.height=1})},total:e}}()},function(p,u){var a={};p.exports=a;(function(){a._nextId=0;a._seed=0;a._nowStartTime=+new Date;a.extend=function(h,f){if("boolean"===typeof f){var c=2;var b=f}else c=1,b=!0;for(;c<arguments.length;c++){var d=arguments[c];if(d)for(var g in d)b&&d[g]&&d[g].constructor===Object?h[g]&&h[g].constructor!==Object?h[g]=d[g]:(h[g]=h[g]||{},a.extend(h[g],b,d[g])):h[g]=
d[g]}return h};a.clone=function(h,f){return a.extend({},f,h)};a.keys=function(h){if(Object.keys)return Object.keys(h);var f=[],c;for(c in h)f.push(c);return f};a.values=function(h){var f=[];if(Object.keys){for(var c=Object.keys(h),b=0;b<c.length;b++)f.push(h[c[b]]);return f}for(c in h)f.push(h[c]);return f};a.get=function(h,f,c,b){f=f.split(".").slice(c,b);for(c=0;c<f.length;c+=1)h=h[f[c]];return h};a.set=function(h,f,c,b,d){b=f.split(".").slice(b,d);return a.get(h,f,0,-1)[b[b.length-1]]=c};a.shuffle=
function(h){for(var f=h.length-1;0<f;f--){var c=Math.floor(a.random()*(f+1)),b=h[f];h[f]=h[c];h[c]=b}return h};a.choose=function(h){return h[Math.floor(a.random()*h.length)]};a.isElement=function(h){return"undefined"!==typeof HTMLElement?h instanceof HTMLElement:!!(h&&h.nodeType&&h.nodeName)};a.isArray=function(h){return"[object Array]"===Object.prototype.toString.call(h)};a.isFunction=function(h){return"function"===typeof h};a.isPlainObject=function(h){return"object"===typeof h&&h.constructor===
Object};a.isString=function(h){return"[object String]"===Object.prototype.toString.call(h)};a.clamp=function(h,f,c){return h<f?f:h>c?c:h};a.sign=function(h){return 0>h?-1:1};a.now=function(){if("undefined"!==typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-a._nowStartTime};a.random=function(h,f){h="undefined"!==typeof h?h:0;a._seed=(9301*a._seed+49297)%233280;return h+
a._seed/233280*(("undefined"!==typeof f?f:1)-h)};a.colorToNumber=function(h){h=h.replace("#","");3==h.length&&(h=h.charAt(0)+h.charAt(0)+h.charAt(1)+h.charAt(1)+h.charAt(2)+h.charAt(2));return parseInt(h,16)};a.logLevel=1;a.log=function(){console&&0<a.logLevel&&3>=a.logLevel&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};a.info=function(){console&&0<a.logLevel&&2>=a.logLevel&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};
a.warn=function(){console&&0<a.logLevel&&3>=a.logLevel&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))};a.nextId=function(){return a._nextId++};a.indexOf=function(h,f){if(h.indexOf)return h.indexOf(f);for(var c=0;c<h.length;c++)if(h[c]===f)return c;return-1};a.map=function(h,f){if(h.map)return h.map(f);for(var c=[],b=0;b<h.length;b+=1)c.push(f(h[b]));return c};a.topologicalSort=function(h){var f=[],c=[],b=[],d;for(d in h)c[d]||b[d]||a._topologicalSort(d,c,
b,h,f);return f};a._topologicalSort=function(h,f,c,b,d){var g=b[h]||[];c[h]=!0;for(var e=0;e<g.length;e+=1){var l=g[e];c[l]||f[l]||a._topologicalSort(l,f,c,b,d)}c[h]=!1;f[h]=!0;d.push(h)};a.chain=function(){for(var h=[],f=0;f<arguments.length;f+=1){var c=arguments[f];c._chained?h.push.apply(h,c._chained):h.push(c)}f=function(){for(var b,d=Array(arguments.length),g=0,e=arguments.length;g<e;g++)d[g]=arguments[g];for(g=0;g<h.length;g+=1)e=h[g].apply(b,d),"undefined"!==typeof e&&(b=e);return b};f._chained=
h;return f};a.chainPathBefore=function(h,f,c){return a.set(h,f,a.chain(c,a.get(h,f)))};a.chainPathAfter=function(h,f,c){return a.set(h,f,a.chain(a.get(h,f),c))}})()},function(p,u,a){u={VERSION:"3.55.2",BlendModes:a(35),ScaleModes:a(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};p.exports=u},function(p,u,a){u=a(0);var h=a(11),f=a(15),c=a(47);a=new u({Extends:f,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Transform,
h.Visible],initialize:function(b,d,g){void 0===d&&(d="Shape");f.call(this,b,d);this.geom=g;this.pathData=[];this.pathIndexes=[];this.fillColor=16777215;this.fillAlpha=1;this.strokeColor=16777215;this.lineWidth=this.strokeAlpha=1;this.isStroked=this.isFilled=!1;this.closePath=!0;this._tempLine=new c;this.height=this.width=0;this.initPipeline()},setFillStyle:function(b,d){void 0===d&&(d=1);void 0===b?this.isFilled=!1:(this.fillColor=b,this.fillAlpha=d,this.isFilled=!0);return this},setStrokeStyle:function(b,
d,g){void 0===g&&(g=1);void 0===b?this.isStroked=!1:(this.lineWidth=b,this.strokeColor=d,this.strokeAlpha=g,this.isStroked=!0);return this},setClosePath:function(b){this.closePath=b;return this},setSize:function(b,d){this.width=b;this.height=d;return this},setDisplaySize:function(b,d){this.displayWidth=b;this.displayHeight=d;return this},preDestroy:function(){this._tempLine=this.geom=null;this.pathData=[];this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(b){this.scaleX=
b/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(b){this.scaleY=b/this.height}}});p.exports=a},function(p,u){p.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,
COPY:26,XOR:27}},function(p,u,a){var h=a(14);p.exports=function(f){return f*h.DEG_TO_RAD}},function(p,u,a){p.exports={DESTROY:a(743),FADE_IN_COMPLETE:a(744),FADE_IN_START:a(745),FADE_OUT_COMPLETE:a(746),FADE_OUT_START:a(747),FLASH_COMPLETE:a(748),FLASH_START:a(749),FOLLOW_UPDATE:a(750),PAN_COMPLETE:a(751),PAN_START:a(752),POST_RENDER:a(753),PRE_RENDER:a(754),ROTATE_COMPLETE:a(755),ROTATE_START:a(756),SHAKE_COMPLETE:a(757),SHAKE_START:a(758),ZOOM_COMPLETE:a(759),ZOOM_START:a(760)}},function(p,u,a){u=
a(0);var h=a(103),f=a(328),c=a(188),b=a(329),d=new u({initialize:function(g,e,l,k){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=255);this.b=this.g=this.r=0;this.a=255;this._v=this._s=this._h=0;this._locked=!1;this.gl=[0,0,0,1];this._color32=this._color=0;this._rgba="";this.setTo(g,e,l,k)},transparent:function(){this._locked=!0;this.alpha=this.blue=this.green=this.red=0;this._locked=!1;return this.update(!0)},setTo:function(g,e,l,k,m){void 0===k&&(k=255);void 0===m&&(m=!0);
this._locked=!0;this.red=g;this.green=e;this.blue=l;this.alpha=k;this._locked=!1;return this.update(m)},setGLTo:function(g,e,l,k){void 0===k&&(k=1);this.redGL=g;this.greenGL=e;this.blueGL=l;this.alphaGL=k;this._locked=!1;return this.update(!0)},setFromRGB:function(g){this._locked=!0;this.red=g.r;this.green=g.g;this.blue=g.b;g.hasOwnProperty("a")&&(this.alpha=g.a);this._locked=!1;return this.update(!0)},setFromHSV:function(g,e,l){return c(g,e,l,this)},update:function(g){void 0===g&&(g=!1);if(this._locked)return this;
var e=this.r,l=this.g,k=this.b,m=this.a;this._color=h(e,l,k);this._color32=f(e,l,k,m);this._rgba="rgba("+e+","+l+","+k+","+m/255+")";g&&b(e,l,k,this);return this},updateHSV:function(){b(this.r,this.g,this.b,this);return this},clone:function(){return new d(this.r,this.g,this.b,this.a)},gray:function(g){return this.setTo(g,g,g)},random:function(g,e){void 0===g&&(g=0);void 0===e&&(e=255);return this.setTo(Math.floor(g+Math.random()*(e-g)),Math.floor(g+Math.random()*(e-g)),Math.floor(g+Math.random()*
(e-g)))},randomGray:function(g,e){void 0===g&&(g=0);void 0===e&&(e=255);g=Math.floor(g+Math.random()*(e-g));return this.setTo(g,g,g)},saturate:function(g){this.s+=g/100;return this},desaturate:function(g){this.s-=g/100;return this},lighten:function(g){this.v+=g/100;return this},darken:function(g){this.v-=g/100;return this},brighten:function(g){var e=this.r,l=this.g,k=this.b;e=Math.max(0,Math.min(255,e-Math.round(255*-(g/100))));l=Math.max(0,Math.min(255,l-Math.round(255*-(g/100))));k=Math.max(0,Math.min(255,
k-Math.round(255*-(g/100))));return this.setTo(e,l,k)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(g){this.gl[0]=Math.min(Math.abs(g),1);this.r=Math.floor(255*this.gl[0]);this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(g){this.gl[1]=Math.min(Math.abs(g),1);this.g=Math.floor(255*this.gl[1]);this.update(!0)}},blueGL:{get:function(){return this.gl[2]},
set:function(g){this.gl[2]=Math.min(Math.abs(g),1);this.b=Math.floor(255*this.gl[2]);this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(g){this.gl[3]=Math.min(Math.abs(g),1);this.a=Math.floor(255*this.gl[3]);this.update()}},red:{get:function(){return this.r},set:function(g){g=Math.floor(Math.abs(g));this.r=Math.min(g,255);this.gl[0]=g/255;this.update(!0)}},green:{get:function(){return this.g},set:function(g){g=Math.floor(Math.abs(g));this.g=Math.min(g,255);this.gl[1]=g/255;
this.update(!0)}},blue:{get:function(){return this.b},set:function(g){g=Math.floor(Math.abs(g));this.b=Math.min(g,255);this.gl[2]=g/255;this.update(!0)}},alpha:{get:function(){return this.a},set:function(g){g=Math.floor(Math.abs(g));this.a=Math.min(g,255);this.gl[3]=g/255;this.update()}},h:{get:function(){return this._h},set:function(g){this._h=g;c(g,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(g){this._s=g;c(this._h,g,this._v,this)}},v:{get:function(){return this._v},set:function(g){this._v=
g;c(this._h,this._s,g,this)}}});p.exports=d},function(p,u,a){var h=new (a(0))({initialize:function(f,c,b){this.z=this.y=this.x=0;"object"===typeof f?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):(this.x=f||0,this.y=c||0,this.z=b||0)},up:function(){this.x=0;this.y=1;this.z=0;return this},min:function(f){this.x=Math.min(this.x,f.x);this.y=Math.min(this.y,f.y);this.z=Math.min(this.z,f.z);return this},max:function(f){this.x=Math.max(this.x,f.x);this.y=Math.max(this.y,f.y);this.z=Math.max(this.z,f.z);return this},
clone:function(){return new h(this.x,this.y,this.z)},addVectors:function(f,c){this.x=f.x+c.x;this.y=f.y+c.y;this.z=f.z+c.z;return this},crossVectors:function(f,c){var b=f.x,d=f.y;f=f.z;var g=c.x,e=c.y;c=c.z;this.x=d*c-f*e;this.y=f*g-b*c;this.z=b*e-d*g;return this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z},copy:function(f){this.x=f.x;this.y=f.y;this.z=f.z||0;return this},set:function(f,c,b){"object"===typeof f?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0):(this.x=f||0,this.y=
c||0,this.z=b||0);return this},setFromMatrixPosition:function(f){return this.fromArray(f.val,12)},setFromMatrixColumn:function(f,c){return this.fromArray(f.val,4*c)},fromArray:function(f,c){void 0===c&&(c=0);this.x=f[c];this.y=f[c+1];this.z=f[c+2];return this},add:function(f){this.x+=f.x;this.y+=f.y;this.z+=f.z||0;return this},addScalar:function(f){this.x+=f;this.y+=f;this.z+=f;return this},addScale:function(f,c){this.x+=f.x*c;this.y+=f.y*c;this.z+=f.z*c||0;return this},subtract:function(f){this.x-=
f.x;this.y-=f.y;this.z-=f.z||0;return this},multiply:function(f){this.x*=f.x;this.y*=f.y;this.z*=f.z||1;return this},scale:function(f){isFinite(f)?(this.x*=f,this.y*=f,this.z*=f):this.z=this.y=this.x=0;return this},divide:function(f){this.x/=f.x;this.y/=f.y;this.z/=f.z||1;return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},distance:function(f){var c=f.x-this.x,b=f.y-this.y;f=f.z-this.z||0;return Math.sqrt(c*c+b*b+f*f)},distanceSq:function(f){var c=f.x-this.x,b=
f.y-this.y;f=f.z-this.z||0;return c*c+b*b+f*f},length:function(){var f=this.x,c=this.y,b=this.z;return Math.sqrt(f*f+c*c+b*b)},lengthSq:function(){var f=this.x,c=this.y,b=this.z;return f*f+c*c+b*b},normalize:function(){var f=this.x,c=this.y,b=this.z,d=f*f+c*c+b*b;0<d&&(d=1/Math.sqrt(d),this.x=f*d,this.y=c*d,this.z=b*d);return this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z},cross:function(f){var c=this.x,b=this.y,d=this.z,g=f.x,e=f.y;f=f.z;this.x=b*f-d*e;this.y=d*g-c*f;this.z=c*e-b*
g;return this},lerp:function(f,c){void 0===c&&(c=0);var b=this.x,d=this.y,g=this.z;this.x=b+c*(f.x-b);this.y=d+c*(f.y-d);this.z=g+c*(f.z-g);return this},applyMatrix3:function(f){var c=this.x,b=this.y,d=this.z;f=f.val;this.x=f[0]*c+f[3]*b+f[6]*d;this.y=f[1]*c+f[4]*b+f[7]*d;this.z=f[2]*c+f[5]*b+f[8]*d;return this},applyMatrix4:function(f){var c=this.x,b=this.y,d=this.z;f=f.val;var g=1/(f[3]*c+f[7]*b+f[11]*d+f[15]);this.x=(f[0]*c+f[4]*b+f[8]*d+f[12])*g;this.y=(f[1]*c+f[5]*b+f[9]*d+f[13])*g;this.z=(f[2]*
c+f[6]*b+f[10]*d+f[14])*g;return this},transformMat3:function(f){var c=this.x,b=this.y,d=this.z;f=f.val;this.x=c*f[0]+b*f[3]+d*f[6];this.y=c*f[1]+b*f[4]+d*f[7];this.z=c*f[2]+b*f[5]+d*f[8];return this},transformMat4:function(f){var c=this.x,b=this.y,d=this.z;f=f.val;this.x=f[0]*c+f[4]*b+f[8]*d+f[12];this.y=f[1]*c+f[5]*b+f[9]*d+f[13];this.z=f[2]*c+f[6]*b+f[10]*d+f[14];return this},transformCoordinates:function(f){var c=this.x,b=this.y,d=this.z;f=f.val;var g=c*f[1]+b*f[5]+d*f[9]+f[13],e=c*f[2]+b*f[6]+
d*f[10]+f[14],l=c*f[3]+b*f[7]+d*f[11]+f[15];this.x=(c*f[0]+b*f[4]+d*f[8]+f[12])/l;this.y=g/l;this.z=e/l;return this},transformQuat:function(f){var c=this.x,b=this.y,d=this.z,g=f.x,e=f.y,l=f.z;f=f.w;var k=f*c+e*d-l*b,m=f*b+l*c-g*d,n=f*d+g*b-e*c;c=-g*c-e*b-l*d;this.x=k*f+c*-g+m*-l-n*-e;this.y=m*f+c*-e+n*-g-k*-l;this.z=n*f+c*-l+k*-e-m*-g;return this},project:function(f){var c=this.x,b=this.y,d=this.z;f=f.val;var g=f[1],e=f[2],l=f[5],k=f[6],m=f[9],n=f[10],q=f[13],r=f[14],t=1/(c*f[3]+b*f[7]+d*f[11]+f[15]);
this.x=(c*f[0]+b*f[4]+d*f[8]+f[12])*t;this.y=(c*g+b*l+d*m+q)*t;this.z=(c*e+b*k+d*n+r)*t;return this},projectViewMatrix:function(f,c){return this.applyMatrix4(f).applyMatrix4(c)},unprojectViewMatrix:function(f,c){return this.applyMatrix4(f).applyMatrix4(c)},unproject:function(f,c){var b=f.w,d=b-this.y-1-f.y,g=this.z;this.x=2*(this.x-f.x)/f.z-1;this.y=2*d/b-1;this.z=2*g-1;return this.project(c)},reset:function(){this.z=this.y=this.x=0;return this}});h.ZERO=new h;h.RIGHT=new h(1,0,0);h.LEFT=new h(-1,
0,0);h.UP=new h(0,-1,0);h.DOWN=new h(0,1,0);h.FORWARD=new h(0,0,1);h.BACK=new h(0,0,-1);h.ONE=new h(1,1,1);p.exports=h},function(p,u){p.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(p,u,a){var h={};p.exports=h;var f=a(64),c=a(83),b=a(165),d=a(32),g=a(84),e=a(271);(function(){h._inertiaScale=4;h._nextCollidingGroupId=1;h._nextNonCollidingGroupId=-1;h._nextCategory=1;h.create=function(k){var m={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,
y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,
axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!k.hasOwnProperty("position")&&k.hasOwnProperty("vertices")?
k.position=f.centre(k.vertices):k.hasOwnProperty("vertices")||(m.vertices=f.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));m=d.extend(m,k);l(m,k);m.setOnCollideWith=function(n,q){q?this.onCollideWith[n.id]=q:delete this.onCollideWith[n.id];return this};return m};h.nextGroup=function(k){return k?h._nextNonCollidingGroupId--:h._nextCollidingGroupId++};h.nextCategory=function(){h._nextCategory<<=1;return h._nextCategory};var l=function(k,m){m=m||{};h.set(k,{bounds:k.bounds||g.create(k.vertices),positionPrev:k.positionPrev||
c.clone(k.position),anglePrev:k.anglePrev||k.angle,vertices:k.vertices,parts:k.parts||[k],isStatic:k.isStatic,isSleeping:k.isSleeping,parent:k.parent||k});var n=k.bounds;f.rotate(k.vertices,k.angle,k.position);e.rotate(k.axes,k.angle);g.update(n,k.vertices,k.velocity);h.set(k,{axes:m.axes||k.axes,area:m.area||k.area,mass:m.mass||k.mass,inertia:m.inertia||k.inertia});if(1===k.parts.length){m=k.centerOfMass;var q=k.centerOffset,r=n.max.x-n.min.x,t=n.max.y-n.min.y;m.x=-(n.min.x-k.position.x)/r;m.y=-(n.min.y-
k.position.y)/t;q.x=r*m.x;q.y=t*m.y}};h.set=function(k,m,n){if("string"===typeof m){var q=m;m={};m[q]=n}for(q in m)if(Object.prototype.hasOwnProperty.call(m,q))switch(n=m[q],q){case "isStatic":h.setStatic(k,n);break;case "isSleeping":b.set(k,n);break;case "mass":h.setMass(k,n);break;case "density":h.setDensity(k,n);break;case "inertia":h.setInertia(k,n);break;case "vertices":h.setVertices(k,n);break;case "position":h.setPosition(k,n);break;case "angle":h.setAngle(k,n);break;case "velocity":h.setVelocity(k,
n);break;case "angularVelocity":h.setAngularVelocity(k,n);break;case "parts":h.setParts(k,n);break;case "centre":h.setCentre(k,n);break;default:k[q]=n}};h.setStatic=function(k,m){for(var n=0;n<k.parts.length;n++){var q=k.parts[n];(q.isStatic=m)?(q._original={restitution:q.restitution,friction:q.friction,mass:q.mass,inertia:q.inertia,density:q.density,inverseMass:q.inverseMass,inverseInertia:q.inverseInertia},q.restitution=0,q.friction=1,q.mass=q.inertia=q.density=Infinity,q.inverseMass=q.inverseInertia=
0,q.positionPrev.x=q.position.x,q.positionPrev.y=q.position.y,q.anglePrev=q.angle,q.angularVelocity=0,q.speed=0,q.angularSpeed=0,q.motion=0):q._original&&(q.restitution=q._original.restitution,q.friction=q._original.friction,q.mass=q._original.mass,q.inertia=q._original.inertia,q.density=q._original.density,q.inverseMass=q._original.inverseMass,q.inverseInertia=q._original.inverseInertia,q._original=null)}};h.setMass=function(k,m){k.inertia=k.inertia/(k.mass/6)*(m/6);k.inverseInertia=1/k.inertia;
k.mass=m;k.inverseMass=1/k.mass;k.density=k.mass/k.area};h.setDensity=function(k,m){h.setMass(k,m*k.area);k.density=m};h.setInertia=function(k,m){k.inertia=m;k.inverseInertia=1/k.inertia};h.setVertices=function(k,m){k.vertices=m[0].body===k?m:f.create(m,k);k.axes=e.fromVertices(k.vertices);k.area=f.area(k.vertices);h.setMass(k,k.density*k.area);m=f.centre(k.vertices);f.translate(k.vertices,m,-1);h.setInertia(k,h._inertiaScale*f.inertia(k.vertices,k.mass));f.translate(k.vertices,k.position);g.update(k.bounds,
k.vertices,k.velocity)};h.setParts=function(k,m,n){var q;m=m.slice(0);k.parts.length=0;k.parts.push(k);k.parent=k;for(q=0;q<m.length;q++){var r=m[q];r!==k&&(r.parent=k,k.parts.push(r))}if(1!==k.parts.length){if("undefined"!==typeof n?n:1){n=[];for(q=0;q<m.length;q++)n=n.concat(m[q].vertices);f.clockwiseSort(n);m=f.hull(n);q=f.centre(m);h.setVertices(k,m);f.translate(k.vertices,q)}m=h._totalProperties(k);q=m.centre.x;n=m.centre.y;r=k.bounds;var t=k.centerOfMass,w=k.centerOffset;g.update(r,k.vertices,
k.velocity);t.x=-(r.min.x-q)/(r.max.x-r.min.x);t.y=-(r.min.y-n)/(r.max.y-r.min.y);w.x=q;w.y=n;k.area=m.area;k.parent=k;k.position.x=q;k.position.y=n;k.positionPrev.x=q;k.positionPrev.y=n;h.setMass(k,m.mass);h.setInertia(k,m.inertia);h.setPosition(k,m.centre)}};h.setCentre=function(k,m,n){n?(k.positionPrev.x+=m.x,k.positionPrev.y+=m.y,k.position.x+=m.x,k.position.y+=m.y):(k.positionPrev.x=m.x-(k.position.x-k.positionPrev.x),k.positionPrev.y=m.y-(k.position.y-k.positionPrev.y),k.position.x=m.x,k.position.y=
m.y)};h.setPosition=function(k,m){m=c.sub(m,k.position);k.positionPrev.x+=m.x;k.positionPrev.y+=m.y;for(var n=0;n<k.parts.length;n++){var q=k.parts[n];q.position.x+=m.x;q.position.y+=m.y;f.translate(q.vertices,m);g.update(q.bounds,q.vertices,k.velocity)}};h.setAngle=function(k,m){m-=k.angle;k.anglePrev+=m;for(var n=0;n<k.parts.length;n++){var q=k.parts[n];q.angle+=m;f.rotate(q.vertices,m,k.position);e.rotate(q.axes,m);g.update(q.bounds,q.vertices,k.velocity);0<n&&c.rotateAbout(q.position,m,k.position,
q.position)}};h.setVelocity=function(k,m){k.positionPrev.x=k.position.x-m.x;k.positionPrev.y=k.position.y-m.y;k.velocity.x=m.x;k.velocity.y=m.y;k.speed=c.magnitude(k.velocity)};h.setAngularVelocity=function(k,m){k.anglePrev=k.angle-m;k.angularVelocity=m;k.angularSpeed=Math.abs(k.angularVelocity)};h.translate=function(k,m){h.setPosition(k,c.add(k.position,m))};h.rotate=function(k,m,n){if(n){var q=Math.cos(m),r=Math.sin(m),t=k.position.x-n.x,w=k.position.y-n.y;h.setPosition(k,{x:n.x+(t*q-w*r),y:n.y+
(t*r+w*q)})}h.setAngle(k,k.angle+m)};h.scale=function(k,m,n,q){var r=0,t=0;q=q||k.position;for(var w=0;w<k.parts.length;w++){var v=k.parts[w];v.scale.x=m;v.scale.y=n;f.scale(v.vertices,m,n,q);v.axes=e.fromVertices(v.vertices);v.area=f.area(v.vertices);h.setMass(v,k.density*v.area);f.translate(v.vertices,{x:-v.position.x,y:-v.position.y});h.setInertia(v,h._inertiaScale*f.inertia(v.vertices,v.mass));f.translate(v.vertices,{x:v.position.x,y:v.position.y});0<w&&(r+=v.area,t+=v.inertia);v.position.x=q.x+
(v.position.x-q.x)*m;v.position.y=q.y+(v.position.y-q.y)*n;g.update(v.bounds,v.vertices,k.velocity)}1<k.parts.length&&(k.area=r,k.isStatic||(h.setMass(k,k.density*r),h.setInertia(k,t)));k.circleRadius&&(k.circleRadius=m===n?k.circleRadius*m:null)};h.update=function(k,m,n,q){m=Math.pow(m*n*k.timeScale,2);n=1-k.frictionAir*n*k.timeScale;var r=k.position.y-k.positionPrev.y;k.velocity.x=(k.position.x-k.positionPrev.x)*n*q+k.force.x/k.mass*m;k.velocity.y=r*n*q+k.force.y/k.mass*m;k.positionPrev.x=k.position.x;
k.positionPrev.y=k.position.y;k.position.x+=k.velocity.x;k.position.y+=k.velocity.y;k.angularVelocity=(k.angle-k.anglePrev)*n*q+k.torque/k.inertia*m;k.anglePrev=k.angle;k.angle+=k.angularVelocity;k.speed=c.magnitude(k.velocity);k.angularSpeed=Math.abs(k.angularVelocity);for(q=0;q<k.parts.length;q++)m=k.parts[q],f.translate(m.vertices,k.velocity),0<q&&(m.position.x+=k.velocity.x,m.position.y+=k.velocity.y),0!==k.angularVelocity&&(f.rotate(m.vertices,k.angularVelocity,k.position),e.rotate(m.axes,k.angularVelocity),
0<q&&c.rotateAbout(m.position,k.angularVelocity,k.position,m.position)),g.update(m.bounds,m.vertices,k.velocity)};h.applyForce=function(k,m,n){k.force.x+=n.x;k.force.y+=n.y;k.torque+=(m.x-k.position.x)*n.y-(m.y-k.position.y)*n.x};h._totalProperties=function(k){for(var m={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===k.parts.length?0:1;n<k.parts.length;n++){var q=k.parts[n],r=Infinity!==q.mass?q.mass:1;m.mass+=r;m.area+=q.area;m.inertia+=q.inertia;m.centre=c.add(m.centre,c.mult(q.position,r))}m.centre=
c.div(m.centre,m.mass);return m}})()},function(p,u){p.exports=function(a){return a.y+a.height-a.height*a.originY}},function(p,u){p.exports=function(a){return a.x-a.width*a.originX}},function(p,u){p.exports=function(a){return a.x+a.width-a.width*a.originX}},function(p,u){p.exports=function(a){return a.y-a.height*a.originY}},function(p,u){p.exports=function(a,h,f,c,b,d){void 0===c&&(c=0);void 0===b&&(b=0);void 0===d&&(d=1);var g=0,e=a.length;if(1===d)for(;b<e;b++)a[b][h]+=f+g*c,g++;else for(;0<=b;b--)a[b][h]+=
f+g*c,g++;return a}},function(p,u,a){u=a(0);var h=a(307),f=a(172),c=a(56),b=a(173),d=a(3);a=new u({initialize:function(g,e,l,k){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=0);this.type=c.LINE;this.x1=g;this.y1=e;this.x2=l;this.y2=k},getPoint:function(g,e){return h(this,g,e)},getPoints:function(g,e,l){return f(this,g,e,l)},getRandomPoint:function(g){return b(this,g)},setTo:function(g,e,l,k){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=0);this.x1=g;this.y1=
e;this.x2=l;this.y2=k;return this},getPointA:function(g){void 0===g&&(g=new d);g.set(this.x1,this.y1);return g},getPointB:function(g){void 0===g&&(g=new d);g.set(this.x2,this.y2);return g},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(g){this.x1<=this.x2?this.x1=g:this.x2=g}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(g){this.x1>this.x2?this.x1=g:this.x2=g}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(g){this.y1<=this.y2?this.y1=
g:this.y2=g}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(g){this.y1>this.y2?this.y1=g:this.y2=g}}});p.exports=a},function(p,u){p.exports=function(a,h,f,c){f=f?f:h.fillColor;a.fillStyle="rgba("+((f&16711680)>>>16)+","+((f&65280)>>>8)+","+(f&255)+","+(c?c:h.fillAlpha)+")"}},function(p,u,a){u=new (a(0))({initialize:function(h,f,c,b){var d=[];b.forEach(function(g){g&&d.push(g)});this.loader=h;this.type=f;this.key=c;this.multiKeyIndex=h.multiKeyIndex++;this.files=d;this.complete=
!1;this.pending=d.length;this.failed=0;this.config={};this.baseURL=h.baseURL;this.path=h.path;this.prefix=h.prefix;for(h=0;h<d.length;h++)d[h].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(h){this.files.push(h);h.multiFile=this;this.pending++;this.complete=!1;return this},onFileComplete:function(h){-1!==this.files.indexOf(h)&&this.pending--},onFileFailed:function(h){-1!==this.files.indexOf(h)&&this.failed++}});p.exports=
u},function(p,u){p.exports=function(a,h,f,c){a-=f;h-=c;return Math.sqrt(a*a+h*h)}},function(p,u,a){p.exports={BOOT:a(922),DESTROY:a(923),DRAG_END:a(924),DRAG_ENTER:a(925),DRAG:a(926),DRAG_LEAVE:a(927),DRAG_OVER:a(928),DRAG_START:a(929),DROP:a(930),GAME_OUT:a(931),GAME_OVER:a(932),GAMEOBJECT_DOWN:a(933),GAMEOBJECT_DRAG_END:a(934),GAMEOBJECT_DRAG_ENTER:a(935),GAMEOBJECT_DRAG:a(936),GAMEOBJECT_DRAG_LEAVE:a(937),GAMEOBJECT_DRAG_OVER:a(938),GAMEOBJECT_DRAG_START:a(939),GAMEOBJECT_DROP:a(940),GAMEOBJECT_MOVE:a(941),
GAMEOBJECT_OUT:a(942),GAMEOBJECT_OVER:a(943),GAMEOBJECT_POINTER_DOWN:a(944),GAMEOBJECT_POINTER_MOVE:a(945),GAMEOBJECT_POINTER_OUT:a(946),GAMEOBJECT_POINTER_OVER:a(947),GAMEOBJECT_POINTER_UP:a(948),GAMEOBJECT_POINTER_WHEEL:a(949),GAMEOBJECT_UP:a(950),GAMEOBJECT_WHEEL:a(951),MANAGER_BOOT:a(952),MANAGER_PROCESS:a(953),MANAGER_UPDATE:a(954),POINTER_DOWN:a(955),POINTER_DOWN_OUTSIDE:a(956),POINTER_MOVE:a(957),POINTER_OUT:a(958),POINTER_OVER:a(959),POINTER_UP:a(960),POINTER_UP_OUTSIDE:a(961),POINTER_WHEEL:a(962),
POINTERLOCK_CHANGE:a(963),PRE_UPDATE:a(964),SHUTDOWN:a(965),START:a(966),UPDATE:a(967)}},function(p,u){p.exports=function(a,h){a.y=h+a.height*a.originY;return a}},function(p,u){p.exports=function(a,h){a.x=h+a.width*a.originX;return a}},function(p,u){p.exports=function(a,h){a.x=h-a.width+a.width*a.originX;return a}},function(p,u){p.exports=function(a,h){a.y=h-a.height+a.height*a.originY;return a}},function(p,u){p.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(p,
u){p.exports=function(a,h,f){return 0>=a.width||0>=a.height?!1:a.x<=h&&a.x+a.width>=h&&a.y<=f&&a.y+a.height>=f}},function(p,u,a){u=a(0);var h=a(175),f=a(9),c=a(374),b=a(2),d=a(69),g=a(91),e=a(141),l=a(12),k=a(375);a=new u({Extends:f,initialize:function(m){f.call(this);var n=m.game,q=n.renderer,r=q.gl;this.name=b(m,"name","WebGLPipeline");this.game=n;this.renderer=q;this.gl=r;this.view=n.canvas;this.vertexCapacity=this.vertexCount=this.height=this.width=0;this.topology=b(m,"topology",r.TRIANGLES);
this.active=!0;this.currentUnit=0;this.forceZero=b(m,"forceZero",!1);this.isPostFX=this.hasBooted=!1;this.renderTargets=[];this.shaders=[];this.projectionHeight=this.projectionWidth=0;this.config=m;this.glReset=!1},boot:function(){var m,n=this.gl,q=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=(new d).identity());var t=this.renderTargets,w=b(q,"renderTarget",!1);"boolean"===typeof w&&w&&(w=1);var v=r.width,x=r.height;if("number"===typeof w)for(m=0;m<w;m++)t.push(new e(r,v,x,1,
0,!0));else if(Array.isArray(w))for(m=0;m<w.length;m++){var y=b(w[m],"scale",1),A=b(w[m],"minFilter",0),B=b(w[m],"autoClear",1);t.push(new e(r,v,x,y,A,B))}t.length&&(this.currentRenderTarget=t[0]);this.setShadersFromConfig(q);t=this.shaders;for(m=w=0;m<t.length;m++)t[m].vertexSize>w&&(w=t[m].vertexSize);this.vertexCapacity=6*b(q,"batchSize",r.config.batchSize);this.vertexData=m=new ArrayBuffer(this.vertexCapacity*w);this.bytes=new Uint8Array(m);this.vertexViewF32=new Float32Array(m);this.vertexViewU32=
new Uint32Array(m);(q=b(q,"vertices",null))?(this.vertexViewF32.set(q),this.vertexBuffer=r.createVertexBuffer(m,n.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(m.byteLength,n.DYNAMIC_DRAW);this.setVertexBuffer();for(m=t.length-1;0<=m;m--)t[m].rebind();this.hasBooted=!0;r.on(g.RESIZE,this.resize,this);r.on(g.PRE_RENDER,this.onPreRender,this);r.on(g.RENDER,this.onRender,this);r.on(g.POST_RENDER,this.onPostRender,this);this.emit(c.BOOT,this);this.onBoot()},onBoot:function(){},onResize:function(){},
setShader:function(m,n){var q=this.renderer;if(m!==this.currentShader||q.currentProgram!==this.currentShader.program)this.flush(),q.resetTextures(),this.setVertexBuffer()&&!n&&(n=!0),m.bind(n,!1),this.currentShader=m;return this},getShaderByName:function(m){for(var n=this.shaders,q=0;q<n.length;q++)if(n[q].name===m)return n[q]},setShadersFromConfig:function(m){var n,q=this.shaders,r=this.renderer;for(n=0;n<q.length;n++)q[n].destroy();q=b(m,"vertShader",null);var t=l.parseFragmentShaderMaxTextures(b(m,
"fragShader",null),r.maxTextures),w=b(m,"attributes",null);m=b(m,"shaders",[]);var v=m.length;if(0===v)q&&t&&(this.shaders=[new k(this,"default",q,t,h(w))]);else{var x=[];for(n=0;n<v;n++){var y=m[n],A=b(y,"name","default"),B=b(y,"vertShader",q),z=l.parseFragmentShaderMaxTextures(b(y,"fragShader",t),r.maxTextures);y=b(y,"attributes",w);B&&z&&x.push(new k(this,A,B,z,h(y)))}this.shaders=x}0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0];
return this},setGameObject:function(m,n){void 0===n&&(n=m.frame);return this.currentUnit=this.renderer.setTextureSource(n.source)},shouldFlush:function(m){void 0===m&&(m=0);return this.vertexCount+m>this.vertexCapacity},resize:function(m,n){m===this.width&&n===this.height||this.flush();this.width=m;this.height=n;for(var q=this.renderTargets,r=0;r<q.length;r++)q[r].resize(m,n);this.setProjectionMatrix(m,n);this.emit(c.RESIZE,m,n,this);this.onResize(m,n);return this},setProjectionMatrix:function(m,
n){var q=this.projectionMatrix;if(!q)return this;this.projectionWidth=m;this.projectionHeight=n;q.ortho(0,m,n,0,-1E3,1E3);m=this.shaders;for(n=0;n<m.length;n++){var r=m[n];r.hasUniform("uProjectionMatrix")&&(r.resetUniform("uProjectionMatrix"),r.setMatrix4fv("uProjectionMatrix",!1,q.val,r))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var m=this.renderer.projectionWidth,n=this.renderer.projectionHeight;this.projectionWidth===m&&this.projectionHeight===n||this.setProjectionMatrix(m,
n)}},bind:function(m){void 0===m&&(m=this.currentShader);if(this.glReset)return this.rebind(m);var n=this.setVertexBuffer();m.bind(n);this.currentShader=m;this.emit(c.BIND,this,m);this.onActive(m);return this},rebind:function(m){this.setVertexBuffer();for(var n=this.shaders,q=n.length-1;0<=q;q--){var r=n[q].rebind();m&&r!==m||(this.currentShader=r)}this.emit(c.REBIND,this.currentShader);this.onActive(this.currentShader);this.onRebind();this.glReset=!1;return this},setVertexBuffer:function(){var m=
this.gl,n=this.vertexBuffer;return m.getParameter(m.ARRAY_BUFFER_BINDING)!==n?(m.bindBuffer(m.ARRAY_BUFFER,n),!0):!1},preBatch:function(m){this.currentRenderTarget&&this.currentRenderTarget.bind();this.onPreBatch(m);return this},postBatch:function(m){this.onDraw(this.currentRenderTarget);this.onPostBatch(m);return this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(m){void 0===m&&(m=!1);if(0<this.vertexCount){this.emit(c.BEFORE_FLUSH,
this,m);this.onBeforeFlush(m);var n=this.gl,q=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),q===this.vertexCapacity?n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,this.bytes.subarray(0,q*r)),n.drawArrays(this.topology,0,q));this.vertexCount=0;this.emit(c.AFTER_FLUSH,this,m);this.onAfterFlush(m)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},
onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(m,n,q,r,t,w,v){var x=this.vertexViewF32,y=this.vertexViewU32,A=this.vertexCount*this.currentShader.vertexComponentCount-1;x[++A]=m;x[++A]=n;x[++A]=q;x[++A]=r;x[++A]=t;x[++A]=w;y[++A]=v;this.vertexCount++},batchQuad:function(m,n,q,r,t,w,v,x,y,A,B,z,C,E,G,H,I,K,O,R){void 0===R&&(R=this.currentUnit);var F=!1;this.shouldFlush(6)&&(this.flush(),
F=!0,R=this.setTexture2D(O));this.batchVert(n,q,A,B,R,K,E);this.batchVert(r,t,A,C,R,K,H);this.batchVert(w,v,z,C,R,K,I);this.batchVert(n,q,A,B,R,K,E);this.batchVert(w,v,z,C,R,K,I);this.batchVert(x,y,z,B,R,K,G);this.onBatch(m);return F},batchTri:function(m,n,q,r,t,w,v,x,y,A,B,z,C,E,G,H,I){void 0===I&&(I=this.currentUnit);var K=!1;this.shouldFlush(3)&&(this.flush(),K=!0,I=this.setTexture2D(H));this.batchVert(n,q,x,y,I,G,z);this.batchVert(r,t,x,B,I,G,C);this.batchVert(w,v,A,B,I,G,E);this.onBatch(m);return K},
drawFillRect:function(m,n,q,r,t,w,v,x){void 0===v&&(v=this.renderer.whiteTexture.glTexture);void 0===x&&(x=!0);m=Math.floor(m);n=Math.floor(n);q=Math.floor(m+q);r=Math.floor(n+r);var y=this.setTexture2D(v);t=l.getTintAppendFloatAlphaAndSwap(t,w);w=0;var A=1;x&&(w=1,A=0);this.batchQuad(null,m,n,m,r,q,r,q,n,0,w,1,A,t,t,t,t,0,v,y)},setTexture2D:function(m){void 0===m&&(m=this.renderer.whiteTexture.glTexture);return this.currentUnit=this.renderer.setTexture2D(m)},bindTexture:function(m,n){void 0===n&&
(n=0);var q=this.gl;q.activeTexture(q.TEXTURE0+n);q.bindTexture(q.TEXTURE_2D,m);return this},bindRenderTarget:function(m,n){return this.bindTexture(m.texture,n)},setTime:function(m){this.set1f(m,this.game.loop.getDuration());return this},set1f:function(m,n,q){void 0===q&&(q=this.currentShader);q.set1f(m,n);return this},set2f:function(m,n,q,r){void 0===r&&(r=this.currentShader);r.set2f(m,n,q);return this},set3f:function(m,n,q,r,t){void 0===t&&(t=this.currentShader);t.set3f(m,n,q,r);return this},set4f:function(m,
n,q,r,t,w){void 0===w&&(w=this.currentShader);w.set4f(m,n,q,r,t);return this},set1fv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set1fv(m,n);return this},set2fv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set2fv(m,n);return this},set3fv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set3fv(m,n);return this},set4fv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set4fv(m,n);return this},set1iv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set1iv(m,n);return this},
set2iv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set2iv(m,n);return this},set3iv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set3iv(m,n);return this},set4iv:function(m,n,q){void 0===q&&(q=this.currentShader);q.set4iv(m,n);return this},set1i:function(m,n,q){void 0===q&&(q=this.currentShader);q.set1i(m,n);return this},set2i:function(m,n,q,r){void 0===r&&(r=this.currentShader);r.set2i(m,n,q);return this},set3i:function(m,n,q,r,t){void 0===t&&(t=this.currentShader);t.set3i(m,n,q,r);
return this},set4i:function(m,n,q,r,t,w){void 0===w&&(w=this.currentShader);w.set4i(m,n,q,r,t);return this},setMatrix2fv:function(m,n,q,r){void 0===r&&(r=this.currentShader);r.setMatrix2fv(m,n,q);return this},setMatrix3fv:function(m,n,q,r){void 0===r&&(r=this.currentShader);r.setMatrix3fv(m,n,q);return this},setMatrix4fv:function(m,n,q,r){void 0===r&&(r=this.currentShader);r.setMatrix4fv(m,n,q);return this},destroy:function(){this.emit(c.DESTROY,this);var m,n=this.shaders;for(m=0;m<n.length;m++)n[m].destroy();
n=this.renderTargets;for(m=0;m<n.length;m++)n[m].destroy();this.gl.deleteBuffer(this.vertexBuffer);m=this.renderer;m.off(g.RESIZE,this.resize,this);m.off(g.PRE_RENDER,this.onPreRender,this);m.off(g.RENDER,this.onRender,this);m.off(g.POST_RENDER,this.onPostRender,this);this.removeAllListeners();this.currentRenderTarget=this.currentShader=this.vertexBuffer=this.vertexData=this.vertexViewU32=this.vertexViewF32=this.bytes=this.renderTargets=this.shaders=this.view=this.gl=this.manager=this.renderer=this.game=
null;return this}});p.exports=a},function(p,u,a){function h(z,C,E){E=E||2;var G=C&&C.length,H=G?C[0]*E:z.length,I=f(z,0,H,E,!0),K=[];if(!I||I.next===I.prev)return K;var O;if(G){var R=E;G=[];var F;var J=0;for(F=C.length;J<F;J++){var N=C[J]*R;var Q=J<F-1?C[J+1]*R:z.length;N=f(z,N,Q,R,!1);N===N.next&&(N.steiner=!0);Q=G;var T=Q.push,S=N,W=N;do{if(S.x<W.x||S.x===W.x&&S.y<W.y)W=S;S=S.next}while(S!==N);T.call(Q,W)}G.sort(g);for(J=0;J<G.length;J++){R=G[J];C=I;if(C=e(R,C))R=v(C,R),c(C,C.next),c(R,R.next);
I=c(I,I.next)}}if(z.length>80*E){var X=O=z[0];var ba=G=z[1];for(R=E;R<H;R+=E)J=z[R],C=z[R+1],J<X&&(X=J),C<ba&&(ba=C),J>O&&(O=J),C>G&&(G=C);O=Math.max(O-X,G-ba);O=0!==O?1/O:0}b(I,K,E,X,ba,O);return K}function f(z,C,E,G,H){if(H===0<B(z,C,E,G))for(H=C;H<E;H+=G)var I=x(H,z[H],z[H+1],I);else for(H=E-G;H>=C;H-=G)I=x(H,z[H],z[H+1],I);I&&n(I,I.next)&&(y(I),I=I.next);return I}function c(z,C){if(!z)return z;C||(C=z);do{var E=!1;if(z.steiner||!n(z,z.next)&&0!==m(z.prev,z,z.next))z=z.next;else{y(z);z=C=z.prev;
if(z===z.next)break;E=!0}}while(E||z!==C);return C}function b(z,C,E,G,H,I,K){if(z){if(!K&&I){var O=z,R=O;do null===R.z&&(R.z=l(R.x,R.y,G,H,I)),R.prevZ=R.prev,R=R.nextZ=R.next;while(R!==O);R.prevZ.nextZ=null;R.prevZ=null;O=R;var F,J,N,Q,T=1;do{R=O;var S=O=null;for(J=0;R;){J++;var W=R;for(F=N=0;F<T&&(N++,W=W.nextZ,W);F++);for(Q=T;0<N||0<Q&&W;)0!==N&&(0===Q||!W||R.z<=W.z)?(F=R,R=R.nextZ,N--):(F=W,W=W.nextZ,Q--),S?S.nextZ=F:O=F,F.prevZ=S,S=F;R=W}S.nextZ=null;T*=2}while(1<J)}for(O=z;z.prev!==z.next;){R=
z.prev;W=z.next;if(I)S=d(z,G,H,I);else a:if(S=z,J=S.prev,N=S,T=S.next,0<=m(J,N,T))S=!1;else{for(F=S.next.next;F!==S.prev;){if(k(J.x,J.y,N.x,N.y,T.x,T.y,F.x,F.y)&&0<=m(F.prev,F,F.next)){S=!1;break a}F=F.next}S=!0}if(S)C.push(R.i/E),C.push(z.i/E),C.push(W.i/E),y(z),O=z=W.next;else if(z=W,z===O){if(!K)b(c(z),C,E,G,H,I,1);else if(1===K){z=c(z);K=C;O=E;R=z;do W=R.prev,S=R.next.next,!n(W,S)&&q(W,R,R.next,S)&&w(W,S)&&w(S,W)&&(K.push(W.i/O),K.push(R.i/O),K.push(S.i/O),y(R),y(R.next),R=z=S),R=R.next;while(R!==
z);z=c(R);b(z,C,E,G,H,I,2)}else if(2===K)a:{K=z;do{for(O=K.next.next;O!==K.prev;){if(R=K.i!==O.i){R=K;W=O;if(S=R.next.i!==W.i&&R.prev.i!==W.i){b:{S=R;do{if(S.i!==R.i&&S.next.i!==R.i&&S.i!==W.i&&S.next.i!==W.i&&q(S,S.next,R,W)){S=!0;break b}S=S.next}while(S!==R);S=!1}S=!S}if(S){if(S=w(R,W)&&w(W,R)){S=R;J=!1;N=(R.x+W.x)/2;T=(R.y+W.y)/2;do S.y>T!==S.next.y>T&&S.next.y!==S.y&&N<(S.next.x-S.x)*(T-S.y)/(S.next.y-S.y)+S.x&&(J=!J),S=S.next;while(S!==R);S=J}S=S&&(m(R.prev,R,W.prev)||m(R,W.prev,W))||n(R,W)&&
0<m(R.prev,R,R.next)&&0<m(W.prev,W,W.next)}R=S}if(R){z=v(K,O);K=c(K,K.next);z=c(z,z.next);b(K,C,E,G,H,I);b(z,C,E,G,H,I);break a}O=O.next}K=K.next}while(K!==z)}break}}}}function d(z,C,E,G){var H=z.prev,I=z.next;if(0<=m(H,z,I))return!1;var K=H.x>z.x?H.x>I.x?H.x:I.x:z.x>I.x?z.x:I.x,O=H.y>z.y?H.y>I.y?H.y:I.y:z.y>I.y?z.y:I.y,R=l(H.x<z.x?H.x<I.x?H.x:I.x:z.x<I.x?z.x:I.x,H.y<z.y?H.y<I.y?H.y:I.y:z.y<I.y?z.y:I.y,C,E,G);C=l(K,O,C,E,G);E=z.prevZ;for(G=z.nextZ;E&&E.z>=R&&G&&G.z<=C;){if(E!==z.prev&&E!==z.next&&
k(H.x,H.y,z.x,z.y,I.x,I.y,E.x,E.y)&&0<=m(E.prev,E,E.next))return!1;E=E.prevZ;if(G!==z.prev&&G!==z.next&&k(H.x,H.y,z.x,z.y,I.x,I.y,G.x,G.y)&&0<=m(G.prev,G,G.next))return!1;G=G.nextZ}for(;E&&E.z>=R;){if(E!==z.prev&&E!==z.next&&k(H.x,H.y,z.x,z.y,I.x,I.y,E.x,E.y)&&0<=m(E.prev,E,E.next))return!1;E=E.prevZ}for(;G&&G.z<=C;){if(G!==z.prev&&G!==z.next&&k(H.x,H.y,z.x,z.y,I.x,I.y,G.x,G.y)&&0<=m(G.prev,G,G.next))return!1;G=G.nextZ}return!0}function g(z,C){return z.x-C.x}function e(z,C){var E=C,G=z.x,H=z.y,I=
-Infinity;do{if(H<=E.y&&H>=E.next.y&&E.next.y!==E.y){var K=E.x+(H-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(K<=G&&K>I){I=K;if(K===G){if(H===E.y)return E;if(H===E.next.y)return E.next}var O=E.x<E.next.x?E:E.next}}E=E.next}while(E!==C);if(!O)return null;if(G===I)return O;C=O;K=O.x;var R=O.y,F=Infinity;E=O;do{if(G>=E.x&&E.x>=K&&G!==E.x&&k(H<R?G:I,H,K,R,H<R?I:G,H,E.x,E.y)){var J=Math.abs(H-E.y)/(G-E.x);var N;if((N=w(E,z))&&!(N=J<F)&&(N=J===F)&&!(N=E.x>O.x)&&(N=E.x===O.x)){N=O;var Q=E;N=0>m(N.prev,N,Q.prev)&&
0>m(Q.next,N,N.next)}N&&(O=E,F=J)}E=E.next}while(E!==C);return O}function l(z,C,E,G,H){z=32767*(z-E)*H;C=32767*(C-G)*H;z=(z|z<<8)&16711935;z=(z|z<<4)&252645135;z=(z|z<<2)&858993459;C=(C|C<<8)&16711935;C=(C|C<<4)&252645135;C=(C|C<<2)&858993459;return(z|z<<1)&1431655765|((C|C<<1)&1431655765)<<1}function k(z,C,E,G,H,I,K,O){return 0<=(H-K)*(C-O)-(z-K)*(I-O)&&0<=(z-K)*(G-O)-(E-K)*(C-O)&&0<=(E-K)*(I-O)-(H-K)*(G-O)}function m(z,C,E){return(C.y-z.y)*(E.x-C.x)-(C.x-z.x)*(E.y-C.y)}function n(z,C){return z.x===
C.x&&z.y===C.y}function q(z,C,E,G){var H=t(m(z,C,E)),I=t(m(z,C,G)),K=t(m(E,G,z)),O=t(m(E,G,C));return H!==I&&K!==O||0===H&&r(z,E,C)||0===I&&r(z,G,C)||0===K&&r(E,z,G)||0===O&&r(E,C,G)?!0:!1}function r(z,C,E){return C.x<=Math.max(z.x,E.x)&&C.x>=Math.min(z.x,E.x)&&C.y<=Math.max(z.y,E.y)&&C.y>=Math.min(z.y,E.y)}function t(z){return 0<z?1:0>z?-1:0}function w(z,C){return 0>m(z.prev,z,z.next)?0<=m(z,C,z.next)&&0<=m(z,z.prev,C):0>m(z,C,z.prev)||0>m(z,z.next,C)}function v(z,C){var E=new A(z.i,z.x,z.y),G=new A(C.i,
C.x,C.y),H=z.next,I=C.prev;z.next=C;C.prev=z;E.next=H;H.prev=E;G.next=E;E.prev=G;I.next=G;G.prev=I;return G}function x(z,C,E,G){z=new A(z,C,E);G?(z.next=G.next,z.prev=G,G.next.prev=z,G.next=z):(z.prev=z,z.next=z);return z}function y(z){z.next.prev=z.prev;z.prev.next=z.next;z.prevZ&&(z.prevZ.nextZ=z.nextZ);z.nextZ&&(z.nextZ.prevZ=z.prevZ)}function A(z,C,E){this.i=z;this.x=C;this.y=E;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function B(z,C,E,G){for(var H=0,I=E-G;C<E;C+=G)H+=
(z[I]-z[C])*(z[C+1]+z[I+1]),I=C;return H}h.deviation=function(z,C,E,G){var H=C&&C.length,I=Math.abs(B(z,0,H?C[0]*E:z.length,E));if(H){H=0;for(var K=C.length;H<K;H++)I-=Math.abs(B(z,C[H]*E,H<K-1?C[H+1]*E:z.length,E))}for(H=C=0;H<G.length;H+=3){K=G[H]*E;var O=G[H+1]*E,R=G[H+2]*E;C+=Math.abs((z[K]-z[R])*(z[O+1]-z[K+1])-(z[K]-z[O])*(z[R+1]-z[K+1]))}return 0===I&&0===C?0:Math.abs((C-I)/I)};h.flatten=function(z){for(var C=z[0][0].length,E={vertices:[],holes:[],dimensions:C},G=0,H=0;H<z.length;H++){for(var I=
0;I<z[H].length;I++)for(var K=0;K<C;K++)E.vertices.push(z[H][I][K]);0<H&&(G+=z[H-1].length,E.holes.push(G))}return E};p.exports=h},function(p,u){p.exports=function(a,h,f,c){f=f?f:h.strokeColor;a.strokeStyle="rgba("+((f&16711680)>>>16)+","+((f&65280)>>>8)+","+(f&255)+","+(c?c:h.strokeAlpha)+")";a.lineWidth=h.lineWidth}},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(6),g=a(7),e=new u({Extends:f,initialize:function(l,k,m,n,q){var r="json";if(g(k)){var t=k;k=b(t,"key");m=b(t,"url");n=b(t,
"xhrSettings");r=b(t,"extension",r);q=b(t,"dataKey",q)}f.call(this,l,{type:"json",cache:l.cacheManager.json,extension:r,responseType:"text",key:k,url:m,xhrSettings:n,config:q});g(m)&&(this.data=q?d(m,q):m,this.state=h.FILE_POPULATED)},onProcess:function(){if(this.state!==h.FILE_POPULATED){this.state=h.FILE_PROCESSING;try{var l=JSON.parse(this.xhrLoader.responseText)}catch(m){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),m;}var k=this.config;this.data="string"===typeof k?d(l,
k,l):l}this.onProcessComplete()}});c.register("json",function(l,k,m,n){if(Array.isArray(l))for(k=0;k<l.length;k++)this.addFile(new e(this,l[k]));else this.addFile(new e(this,l,k,n,m));return this});p.exports=e},function(p,u){p.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(p,u,a){var h=a(158),f=a(26);p.exports=function(c,b,d,g,e){for(var l=f(c,b,d,g,null,e),k=0;k<l.length;k++){var m=l[k];m&&(m.collides?
(c=h(m.x,m.y-1,!0,e),b=h(m.x,m.y+1,!0,e),d=h(m.x-1,m.y,!0,e),g=h(m.x+1,m.y,!0,e),m.faceTop=c&&c.collides?!1:!0,m.faceBottom=b&&b.collides?!1:!0,m.faceLeft=d&&d.collides?!1:!0,m.faceRight=g&&g.collides?!1:!0):m.resetFaces())}}},function(p,u,a){var h={};p.exports=h;var f=a(83),c=a(32);(function(){h.create=function(b,d){for(var g=[],e=0;e<b.length;e++){var l=b[e];l={x:l.x,y:l.y,index:e,body:d,isInternal:!1,contact:null,offset:null};l.contact={vertex:l,normalImpulse:0,tangentImpulse:0};g.push(l)}return g};
h.fromPath=function(b,d){var g=[];b.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,function(e,l,k){g.push({x:parseFloat(l),y:parseFloat(k)})});return h.create(g,d)};h.centre=function(b){for(var d=h.area(b,!0),g={x:0,y:0},e,l,k=0;k<b.length;k++)l=(k+1)%b.length,e=f.cross(b[k],b[l]),e=f.mult(f.add(b[k],b[l]),e),g=f.add(g,e);return f.div(g,6*d)};h.mean=function(b){for(var d={x:0,y:0},g=0;g<b.length;g++)d.x+=b[g].x,d.y+=b[g].y;return f.div(d,b.length)};h.area=function(b,d){for(var g=0,e=b.length-1,l=0;l<
b.length;l++)g+=(b[e].x-b[l].x)*(b[e].y+b[l].y),e=l;return d?g/2:Math.abs(g)/2};h.inertia=function(b,d){for(var g=0,e=0,l,k,m=0;m<b.length;m++)k=(m+1)%b.length,l=Math.abs(f.cross(b[k],b[m])),g+=l*(f.dot(b[k],b[k])+f.dot(b[k],b[m])+f.dot(b[m],b[m])),e+=l;return d/6*(g/e)};h.translate=function(b,d,g){var e;if(g)for(e=0;e<b.length;e++)b[e].x+=d.x*g,b[e].y+=d.y*g;else for(e=0;e<b.length;e++)b[e].x+=d.x,b[e].y+=d.y;return b};h.rotate=function(b,d,g){if(0!==d){var e=Math.cos(d);d=Math.sin(d);for(var l=
0;l<b.length;l++){var k=b[l],m=k.x-g.x,n=k.y-g.y;k.x=g.x+(m*e-n*d);k.y=g.y+(m*d+n*e)}return b}};h.contains=function(b,d){for(var g=0;g<b.length;g++){var e=b[g],l=b[(g+1)%b.length];if(0<(d.x-e.x)*(l.y-e.y)+(d.y-e.y)*(e.x-l.x))return!1}return!0};h.scale=function(b,d,g,e){if(1===d&&1===g)return b;e=e||h.centre(b);for(var l,k=0;k<b.length;k++)l=b[k],l=f.sub(l,e),b[k].x=e.x+l.x*d,b[k].y=e.y+l.y*g;return b};h.chamfer=function(b,d,g,e,l){d="number"===typeof d?[d]:d||[8];g="undefined"!==typeof g?g:-1;e=e||
2;l=l||14;for(var k=[],m=0;m<b.length;m++){var n=b[0<=m-1?m-1:b.length-1],q=b[m],r=b[(m+1)%b.length],t=d[m<d.length?m:d.length-1];if(0===t)k.push(q);else{n=f.normalise({x:q.y-n.y,y:n.x-q.x});var w=f.normalise({x:r.y-q.y,y:q.x-r.x}),v=Math.sqrt(2*Math.pow(t,2));r=f.mult(c.clone(n),t);var x=f.normalise(f.mult(f.add(n,w),.5));q=f.sub(q,f.mult(x,v));v=g;-1===g&&(v=1.75*Math.pow(t,.32));v=c.clamp(v,e,l);1===v%2&&(v+=1);t=Math.acos(f.dot(n,w))/v;for(n=0;n<v;n++)k.push(f.add(f.rotate(r,t*n),q))}}return k};
h.clockwiseSort=function(b){var d=h.mean(b);b.sort(function(g,e){return f.angle(d,g)-f.angle(d,e)});return b};h.isConvex=function(b){var d=0,g=b.length,e;if(3>g)return null;for(e=0;e<g;e++){var l=(e+1)%g;var k=(e+2)%g;var m=(b[l].x-b[e].x)*(b[k].y-b[l].y);m-=(b[l].y-b[e].y)*(b[k].x-b[l].x);0>m?d|=1:0<m&&(d|=2);if(3===d)return!1}return 0!==d?!0:null};h.hull=function(b){var d=[],g=[],e,l;b=b.slice(0);b.sort(function(k,m){var n=k.x-m.x;return 0!==n?n:k.y-m.y});for(l=0;l<b.length;l+=1){for(e=b[l];2<=
g.length&&0>=f.cross3(g[g.length-2],g[g.length-1],e);)g.pop();g.push(e)}for(l=b.length-1;0<=l;--l){for(e=b[l];2<=d.length&&0>=f.cross3(d[d.length-2],d[d.length-1],e);)d.pop();d.push(e)}d.pop();g.pop();return d.concat(g)}})()},function(p,u,a){u=a(0);var h=a(66),f=a(300),c=a(301),b=a(56),d=a(170);a=new u({initialize:function(g,e,l){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=0);this.type=b.CIRCLE;this.x=g;this.y=e;this._radius=l;this._diameter=2*l},contains:function(g,e){return h(this,g,e)},
getPoint:function(g,e){return f(this,g,e)},getPoints:function(g,e,l){return c(this,g,e,l)},getRandomPoint:function(g){return d(this,g)},setTo:function(g,e,l){this.x=g;this.y=e;this._radius=l;this._diameter=2*l;return this},setEmpty:function(){this._diameter=this._radius=0;return this},setPosition:function(g,e){void 0===e&&(e=g);this.x=g;this.y=e;return this},isEmpty:function(){return 0>=this._radius},radius:{get:function(){return this._radius},set:function(g){this._radius=g;this._diameter=2*g}},diameter:{get:function(){return this._diameter},
set:function(g){this._diameter=g;this._radius=.5*g}},left:{get:function(){return this.x-this._radius},set:function(g){this.x=g+this._radius}},right:{get:function(){return this.x+this._radius},set:function(g){this.x=g-this._radius}},top:{get:function(){return this.y-this._radius},set:function(g){this.y=g+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(g){this.y=g-this._radius}}});p.exports=a},function(p,u){p.exports=function(a,h,f){return 0<a.radius&&h>=a.left&&h<=a.right&&
f>=a.top&&f<=a.bottom?(a.x-h)*(a.x-h)+(a.y-f)*(a.y-f)<=a.radius*a.radius:!1}},function(p,u){p.exports=function(a){return Math.sqrt((a.x2-a.x1)*(a.x2-a.x1)+(a.y2-a.y1)*(a.y2-a.y1))}},function(p,u){p.exports=function(a,h,f){f-=h;return h+((a-h)%f+f)%f}},function(p,u,a){u=a(0);a=a(39);var h=new u({initialize:function(e){this.val=new Float32Array(16);e?this.copy(e):this.identity()},clone:function(){return new h(this)},set:function(e){return this.copy(e)},setValues:function(e,l,k,m,n,q,r,t,w,v,x,y,A,B,
z,C){var E=this.val;E[0]=e;E[1]=l;E[2]=k;E[3]=m;E[4]=n;E[5]=q;E[6]=r;E[7]=t;E[8]=w;E[9]=v;E[10]=x;E[11]=y;E[12]=A;E[13]=B;E[14]=z;E[15]=C;return this},copy:function(e){e=e.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(e){return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(e,
l,k){k=f.fromQuat(k).val;var m=l.x,n=l.y;l=l.z;return this.setValues(k[0]*m,k[1]*m,k[2]*m,0,k[4]*n,k[5]*n,k[6]*n,0,k[8]*l,k[9]*l,k[10]*l,0,e.x,e.y,e.z,1)},xyz:function(e,l,k){this.identity();var m=this.val;m[12]=e;m[13]=l;m[14]=k;return this},scaling:function(e,l,k){this.zero();var m=this.val;m[0]=e;m[5]=l;m[10]=k;m[15]=1;return this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var e=this.val,l=e[1],k=e[2],m=e[3],n=e[6],q=e[7],r=e[11];e[1]=e[4];
e[2]=e[8];e[3]=e[12];e[4]=l;e[6]=e[9];e[7]=e[13];e[8]=k;e[9]=n;e[11]=e[14];e[12]=m;e[13]=q;e[14]=r;return this},getInverse:function(e){this.copy(e);return this.invert()},invert:function(){var e=this.val,l=e[0],k=e[1],m=e[2],n=e[3],q=e[4],r=e[5],t=e[6],w=e[7],v=e[8],x=e[9],y=e[10],A=e[11],B=e[12],z=e[13],C=e[14];e=e[15];var E=l*r-k*q,G=l*t-m*q,H=l*w-n*q,I=k*t-m*r,K=k*w-n*r,O=m*w-n*t,R=v*z-x*B,F=v*C-y*B,J=v*e-A*B,N=x*C-y*z,Q=x*e-A*z,T=y*e-A*C,S=E*T-G*Q+H*N+I*J-K*F+O*R;if(!S)return this;S=1/S;return this.setValues((r*
T-t*Q+w*N)*S,(m*Q-k*T-n*N)*S,(z*O-C*K+e*I)*S,(y*K-x*O-A*I)*S,(t*J-q*T-w*F)*S,(l*T-m*J+n*F)*S,(C*H-B*O-e*G)*S,(v*O-y*H+A*G)*S,(q*Q-r*J+w*R)*S,(k*J-l*Q-n*R)*S,(B*K-z*H+e*E)*S,(x*H-v*K-A*E)*S,(r*F-q*N-t*R)*S,(l*N-k*F+m*R)*S,(z*G-B*I-C*E)*S,(v*I-x*G+y*E)*S)},adjoint:function(){var e=this.val,l=e[0],k=e[1],m=e[2],n=e[3],q=e[4],r=e[5],t=e[6],w=e[7],v=e[8],x=e[9],y=e[10],A=e[11],B=e[12],z=e[13],C=e[14];e=e[15];return this.setValues(r*(y*e-A*C)-x*(t*e-w*C)+z*(t*A-w*y),-(k*(y*e-A*C)-x*(m*e-n*C)+z*(m*A-n*y)),
k*(t*e-w*C)-r*(m*e-n*C)+z*(m*w-n*t),-(k*(t*A-w*y)-r*(m*A-n*y)+x*(m*w-n*t)),-(q*(y*e-A*C)-v*(t*e-w*C)+B*(t*A-w*y)),l*(y*e-A*C)-v*(m*e-n*C)+B*(m*A-n*y),-(l*(t*e-w*C)-q*(m*e-n*C)+B*(m*w-n*t)),l*(t*A-w*y)-q*(m*A-n*y)+v*(m*w-n*t),q*(x*e-A*z)-v*(r*e-w*z)+B*(r*A-w*x),-(l*(x*e-A*z)-v*(k*e-n*z)+B*(k*A-n*x)),l*(r*e-w*z)-q*(k*e-n*z)+B*(k*w-n*r),-(l*(r*A-w*x)-q*(k*A-n*x)+v*(k*w-n*r)),-(q*(x*C-y*z)-v*(r*C-t*z)+B*(r*y-t*x)),l*(x*C-y*z)-v*(k*C-m*z)+B*(k*y-m*x),-(l*(r*C-t*z)-q*(k*C-m*z)+B*(k*t-m*r)),l*(r*y-t*x)-
q*(k*y-m*x)+v*(k*t-m*r))},determinant:function(){var e=this.val,l=e[0],k=e[1],m=e[2],n=e[3],q=e[4],r=e[5],t=e[6],w=e[7],v=e[8],x=e[9],y=e[10],A=e[11],B=e[12],z=e[13],C=e[14];e=e[15];return(l*r-k*q)*(y*e-A*C)-(l*t-m*q)*(x*e-A*z)+(l*w-n*q)*(x*C-y*z)+(k*t-m*r)*(v*e-A*B)-(k*w-n*r)*(v*C-y*B)+(m*w-n*t)*(v*z-x*B)},multiply:function(e){var l=this.val,k=l[0],m=l[1],n=l[2],q=l[3],r=l[4],t=l[5],w=l[6],v=l[7],x=l[8],y=l[9],A=l[10],B=l[11],z=l[12],C=l[13],E=l[14],G=l[15];e=e.val;var H=e[0],I=e[1],K=e[2],O=e[3];
l[0]=H*k+I*r+K*x+O*z;l[1]=H*m+I*t+K*y+O*C;l[2]=H*n+I*w+K*A+O*E;l[3]=H*q+I*v+K*B+O*G;H=e[4];I=e[5];K=e[6];O=e[7];l[4]=H*k+I*r+K*x+O*z;l[5]=H*m+I*t+K*y+O*C;l[6]=H*n+I*w+K*A+O*E;l[7]=H*q+I*v+K*B+O*G;H=e[8];I=e[9];K=e[10];O=e[11];l[8]=H*k+I*r+K*x+O*z;l[9]=H*m+I*t+K*y+O*C;l[10]=H*n+I*w+K*A+O*E;l[11]=H*q+I*v+K*B+O*G;H=e[12];I=e[13];K=e[14];O=e[15];l[12]=H*k+I*r+K*x+O*z;l[13]=H*m+I*t+K*y+O*C;l[14]=H*n+I*w+K*A+O*E;l[15]=H*q+I*v+K*B+O*G;return this},multiplyLocal:function(e){var l=this.val;e=e.val;return this.setValues(l[0]*
e[0]+l[1]*e[4]+l[2]*e[8]+l[3]*e[12],l[0]*e[1]+l[1]*e[5]+l[2]*e[9]+l[3]*e[13],l[0]*e[2]+l[1]*e[6]+l[2]*e[10]+l[3]*e[14],l[0]*e[3]+l[1]*e[7]+l[2]*e[11]+l[3]*e[15],l[4]*e[0]+l[5]*e[4]+l[6]*e[8]+l[7]*e[12],l[4]*e[1]+l[5]*e[5]+l[6]*e[9]+l[7]*e[13],l[4]*e[2]+l[5]*e[6]+l[6]*e[10]+l[7]*e[14],l[4]*e[3]+l[5]*e[7]+l[6]*e[11]+l[7]*e[15],l[8]*e[0]+l[9]*e[4]+l[10]*e[8]+l[11]*e[12],l[8]*e[1]+l[9]*e[5]+l[10]*e[9]+l[11]*e[13],l[8]*e[2]+l[9]*e[6]+l[10]*e[10]+l[11]*e[14],l[8]*e[3]+l[9]*e[7]+l[10]*e[11]+l[11]*e[15],
l[12]*e[0]+l[13]*e[4]+l[14]*e[8]+l[15]*e[12],l[12]*e[1]+l[13]*e[5]+l[14]*e[9]+l[15]*e[13],l[12]*e[2]+l[13]*e[6]+l[14]*e[10]+l[15]*e[14],l[12]*e[3]+l[13]*e[7]+l[14]*e[11]+l[15]*e[15])},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,l){var k=e.val,m=l.val;l=k[0];e=k[4];var n=k[8],q=k[12],r=k[1],t=k[5],w=k[9],v=k[13],x=k[2],y=k[6],A=k[10],B=k[14],z=k[3],C=k[7],E=k[11];k=k[15];var G=m[0],H=m[4],I=m[8],K=m[12],O=m[1],R=m[5],F=m[9],J=m[13],N=m[2],Q=m[6],T=m[10],
S=m[14],W=m[3],X=m[7],ba=m[11];m=m[15];return this.setValues(l*G+e*O+n*N+q*W,r*G+t*O+w*N+v*W,x*G+y*O+A*N+B*W,z*G+C*O+E*N+k*W,l*H+e*R+n*Q+q*X,r*H+t*R+w*Q+v*X,x*H+y*R+A*Q+B*X,z*H+C*R+E*Q+k*X,l*I+e*F+n*T+q*ba,r*I+t*F+w*T+v*ba,x*I+y*F+A*T+B*ba,z*I+C*F+E*T+k*ba,l*K+e*J+n*S+q*m,r*K+t*J+w*S+v*m,x*K+y*J+A*S+B*m,z*K+C*J+E*S+k*m)},translate:function(e){return this.translateXYZ(e.x,e.y,e.z)},translateXYZ:function(e,l,k){var m=this.val;m[12]=m[0]*e+m[4]*l+m[8]*k+m[12];m[13]=m[1]*e+m[5]*l+m[9]*k+m[13];m[14]=m[2]*
e+m[6]*l+m[10]*k+m[14];m[15]=m[3]*e+m[7]*l+m[11]*k+m[15];return this},scale:function(e){return this.scaleXYZ(e.x,e.y,e.z)},scaleXYZ:function(e,l,k){var m=this.val;m[0]*=e;m[1]*=e;m[2]*=e;m[3]*=e;m[4]*=l;m[5]*=l;m[6]*=l;m[7]*=l;m[8]*=k;m[9]*=k;m[10]*=k;m[11]*=k;return this},makeRotationAxis:function(e,l){var k=Math.cos(l);l=Math.sin(l);var m=1-k,n=e.x,q=e.y;e=e.z;var r=m*n,t=m*q;return this.setValues(r*n+k,r*q-l*e,r*e+l*q,0,r*q+l*e,t*q+k,t*e-l*n,0,r*e-l*q,t*e+l*n,m*e*e+k,0,0,0,0,1)},rotate:function(e,
l){var k=this.val,m=l.x,n=l.y;l=l.z;var q=Math.sqrt(m*m+n*n+l*l);if(1E-6>Math.abs(q))return this;q=1/q;m*=q;n*=q;l*=q;var r=Math.sin(e),t=Math.cos(e),w=1-t;e=k[0];q=k[1];var v=k[2],x=k[3],y=k[4],A=k[5],B=k[6],z=k[7],C=k[8],E=k[9],G=k[10],H=k[11],I=m*m*w+t,K=n*m*w+l*r,O=l*m*w-n*r,R=m*n*w-l*r,F=n*n*w+t,J=l*n*w+m*r,N=m*l*w+n*r;m=n*l*w-m*r;n=l*l*w+t;return this.setValues(e*I+y*K+C*O,q*I+A*K+E*O,v*I+B*K+G*O,x*I+z*K+H*O,e*R+y*F+C*J,q*R+A*F+E*J,v*R+B*F+G*J,x*R+z*F+H*J,e*N+y*m+C*n,q*N+A*m+E*n,v*N+B*m+G*n,
x*N+z*m+H*n,k[12],k[13],k[14],k[15])},rotateX:function(e){var l=this.val,k=Math.sin(e);e=Math.cos(e);var m=l[4],n=l[5],q=l[6],r=l[7],t=l[8],w=l[9],v=l[10],x=l[11];l[4]=m*e+t*k;l[5]=n*e+w*k;l[6]=q*e+v*k;l[7]=r*e+x*k;l[8]=t*e-m*k;l[9]=w*e-n*k;l[10]=v*e-q*k;l[11]=x*e-r*k;return this},rotateY:function(e){var l=this.val,k=Math.sin(e);e=Math.cos(e);var m=l[0],n=l[1],q=l[2],r=l[3],t=l[8],w=l[9],v=l[10],x=l[11];l[0]=m*e-t*k;l[1]=n*e-w*k;l[2]=q*e-v*k;l[3]=r*e-x*k;l[8]=m*k+t*e;l[9]=n*k+w*e;l[10]=q*k+v*e;l[11]=
r*k+x*e;return this},rotateZ:function(e){var l=this.val,k=Math.sin(e);e=Math.cos(e);var m=l[0],n=l[1],q=l[2],r=l[3],t=l[4],w=l[5],v=l[6],x=l[7];l[0]=m*e+t*k;l[1]=n*e+w*k;l[2]=q*e+v*k;l[3]=r*e+x*k;l[4]=t*e-m*k;l[5]=w*e-n*k;l[6]=v*e-q*k;l[7]=x*e-r*k;return this},fromRotationTranslation:function(e,l){var k=e.x,m=e.y,n=e.z,q=e.w,r=k+k,t=m+m,w=n+n;e=k*r;var v=k*t;k*=w;var x=m*t;m*=w;n*=w;r*=q;t*=q;q*=w;return this.setValues(1-(x+n),v+q,k-t,0,v-q,1-(e+n),m+r,0,k+t,m-r,1-(e+x),0,l.x,l.y,l.z,1)},fromQuat:function(e){var l=
e.x,k=e.y,m=e.z,n=e.w,q=l+l,r=k+k,t=m+m;e=l*q;var w=l*r;l*=t;var v=k*r;k*=t;m*=t;q*=n;r*=n;n*=t;return this.setValues(1-(v+m),w+n,l-r,0,w-n,1-(e+m),k+q,0,l+r,k-q,1-(e+v),0,0,0,0,1)},frustum:function(e,l,k,m,n,q){var r=1/(l-e),t=1/(m-k),w=1/(n-q);return this.setValues(2*n*r,0,0,0,0,2*n*t,0,0,(l+e)*r,(m+k)*t,(q+n)*w,-1,0,0,q*n*2*w,0)},perspective:function(e,l,k,m){e=1/Math.tan(e/2);var n=1/(k-m);return this.setValues(e/l,0,0,0,0,e,0,0,0,0,(m+k)*n,-1,0,0,2*m*k*n,0)},perspectiveLH:function(e,l,k,m){return this.setValues(2*
k/e,0,0,0,0,2*k/l,0,0,0,0,-m/(k-m),1,0,0,k*m/(k-m),0)},ortho:function(e,l,k,m,n,q){var r=e-l,t=k-m,w=n-q;r=0===r?r:1/r;t=0===t?t:1/t;w=0===w?w:1/w;return this.setValues(-2*r,0,0,0,0,-2*t,0,0,0,0,2*w,0,(e+l)*r,(m+k)*t,(q+n)*w,1)},lookAtRH:function(e,l,k){var m=this.val;g.subVectors(e,l);0===g.getLengthSquared()&&(g.z=1);g.normalize();b.crossVectors(k,g);0===b.getLengthSquared()&&(1===Math.abs(k.z)?g.x+=1E-4:g.z+=1E-4,g.normalize(),b.crossVectors(k,g));b.normalize();d.crossVectors(g,b);m[0]=b.x;m[1]=
b.y;m[2]=b.z;m[4]=d.x;m[5]=d.y;m[6]=d.z;m[8]=g.x;m[9]=g.y;m[10]=g.z;return this},lookAt:function(e,l,k){var m=e.x,n=e.y;e=e.z;var q=k.x,r=k.y,t=k.z,w=l.x;k=l.y;var v=l.z;if(1E-6>Math.abs(m-w)&&1E-6>Math.abs(n-k)&&1E-6>Math.abs(e-v))return this.identity();l=m-w;k=n-k;v=e-v;w=1/Math.sqrt(l*l+k*k+v*v);l*=w;k*=w;v*=w;var x=r*v-t*k;t=t*l-q*v;q=q*k-r*l;(w=Math.sqrt(x*x+t*t+q*q))?(w=1/w,x*=w,t*=w,q*=w):q=t=x=0;r=k*q-v*t;var y=v*x-l*q,A=l*t-k*x;(w=Math.sqrt(r*r+y*y+A*A))?(w=1/w,r*=w,y*=w,A*=w):A=y=r=0;return this.setValues(x,
r,l,0,t,y,k,0,q,A,v,0,-(x*m+t*n+q*e),-(r*m+y*n+A*e),-(l*m+k*n+v*e),1)},yawPitchRoll:function(e,l,k){this.zero();f.zero();c.zero();var m=this.val,n=f.val,q=c.val,r=Math.sin(k);k=Math.cos(k);m[10]=1;m[15]=1;m[0]=k;m[1]=r;m[4]=-r;m[5]=k;r=Math.sin(l);k=Math.cos(l);n[0]=1;n[15]=1;n[5]=k;n[10]=k;n[9]=-r;n[6]=r;r=Math.sin(e);k=Math.cos(e);q[5]=1;q[15]=1;q[0]=k;q[2]=-r;q[8]=r;q[10]=k;this.multiplyLocal(f);this.multiplyLocal(c);return this},setWorldMatrix:function(e,l,k,m,n){this.yawPitchRoll(e.y,e.x,e.z);
f.scaling(k.x,k.y,k.z);c.xyz(l.x,l.y,l.z);this.multiplyLocal(f);this.multiplyLocal(c);m&&this.multiplyLocal(m);n&&this.multiplyLocal(n);return this},multiplyToMat4:function(e,l){var k=this.val;e=e.val;var m=k[0],n=k[1],q=k[2],r=k[3],t=k[4],w=k[5],v=k[6],x=k[7],y=k[8],A=k[9],B=k[10],z=k[11],C=k[12],E=k[13],G=k[14];k=k[15];var H=e[1],I=e[2],K=e[3],O=e[4],R=e[5],F=e[6],J=e[7],N=e[8],Q=e[9],T=e[10],S=e[11],W=e[12],X=e[13],ba=e[14],fa=e[15];return l.setValues(e[0]*m+H*t+I*y+K*C,H*n+H*w+I*A+K*E,I*q+H*v+
I*B+K*G,K*r+H*x+I*z+K*k,O*m+R*t+F*y+J*C,O*n+R*w+F*A+J*E,O*q+R*v+F*B+J*G,O*r+R*x+F*z+J*k,N*m+Q*t+T*y+S*C,N*n+Q*w+T*A+S*E,N*q+Q*v+T*B+S*G,N*r+Q*x+T*z+S*k,W*m+X*t+ba*y+fa*C,W*n+X*w+ba*A+fa*E,W*q+X*v+ba*B+fa*G,W*r+X*x+ba*z+fa*k)},fromRotationXYTranslation:function(e,l,k){var m=l.x,n=l.y;l=l.z;var q=Math.sin(e.x),r=Math.cos(e.x),t=Math.sin(e.y);e=Math.cos(e.y);var w=m,v=n,x=l,y=-q,A=-(y*t),B=-(r*t);y*=e;var z=r*e;k||(w=e*m+t*l,v=A*m+r*n+y*l,x=B*m+q*n+z*l);return this.setValues(e,A,B,0,0,r,q,0,t,y,z,0,
w,v,x,1)},getMaxScaleOnAxis:function(){var e=this.val;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}}),f=new h,c=new h,b=new a,d=new a,g=new a;p.exports=h},function(p,u,a){p.exports={COMPLETE:a(987),DECODED:a(988),DECODED_ALL:a(989),DESTROY:a(990),DETUNE:a(991),GLOBAL_DETUNE:a(992),GLOBAL_MUTE:a(993),GLOBAL_RATE:a(994),GLOBAL_VOLUME:a(995),LOOP:a(996),LOOPED:a(997),MUTE:a(998),PAN:a(999),PAUSE_ALL:a(1E3),PAUSE:a(1001),PLAY:a(1002),
RATE:a(1003),RESUME_ALL:a(1004),RESUME:a(1005),SEEK:a(1006),STOP_ALL:a(1007),STOP:a(1008),UNLOCKED:a(1009),VOLUME:a(1010)}},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function r(l,k,m,n,q){var t="png";if(d(k)){q=k;k=b(q,"key");m=b(q,"url");var w=b(q,"normalMap");n=b(q,"xhrSettings");t=b(q,"extension",t);q=b(q,"frameConfig")}Array.isArray(m)&&(w=m[1],m=m[0]);f.call(this,l,{type:"image",cache:l.textureManager,extension:t,responseType:"blob",key:k,url:m,
xhrSettings:n,config:q});w&&(k=new r(l,this.key,w,n,q),k.type="normalMap",this.setLink(k),l.addFile(k))},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=new Image;this.data.crossOrigin=this.crossOrigin;var l=this;this.data.onload=function(){f.revokeObjectURL(l.data);l.onProcessComplete()};this.data.onerror=function(){f.revokeObjectURL(l.data);l.onProcessError()};f.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var l=this.linkFile;if(l&&l.state===
h.FILE_COMPLETE){var k="image"===this.type?this.cache.addImage(this.key,this.data,l.data):this.cache.addImage(l.key,l.data,this.data);this.pendingDestroy(k);l.pendingDestroy(k)}else l||(k=this.cache.addImage(this.key,this.data),this.pendingDestroy(k))}});c.register("image",function(l,k,m){if(Array.isArray(l))for(k=0;k<l.length;k++)this.addFile(new g(this,l[k]));else this.addFile(new g(this,l,k,m));return this});p.exports=g},function(p,u){p.exports=function(a,h){h?a.setCollision(!0,!0,!0,!0,!1):a.resetCollision(!1)}},
function(p,u,a){var h=a(164);u=a(0);var f=a(11),c=a(15);a=a(1065);a=new u({Extends:c,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,a],initialize:function(b,d,g,e,l){c.call(this,b,"Sprite");this._crop=this.resetCropObject();this.anims=new h(this);this.setTexture(e,l);this.setPosition(d,g);this.setSizeToFrame();this.setOriginFromFrame();this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},
removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(b,d){this.anims.update(b,d)},play:function(b,d){return this.anims.play(b,d)},playReverse:function(b,d){return this.anims.playReverse(b,d)},playAfterDelay:function(b,d){return this.anims.playAfterDelay(b,d)},playAfterRepeat:function(b,d){return this.anims.playAfterRepeat(b,d)},chain:function(b){return this.anims.chain(b)},stop:function(){return this.anims.stop()},stopAfterDelay:function(b){return this.anims.stopAfterDelay(b)},
stopAfterRepeat:function(b){return this.anims.stopAfterRepeat(b)},stopOnFrame:function(b){return this.anims.stopOnFrame(b)},toJSON:function(){return f.ToJSON(this)},preDestroy:function(){this.anims.destroy();this.anims=void 0}});p.exports=a},function(p,u){p.exports=function(a,h){if(!(h>=a.length)){for(var f=a.length-1,c=a[h];h<f;h++)a[h]=a[h+1];a.length=f;return c}}},function(p,u,a){p.exports={ADDED_TO_SCENE:a(643),DESTROY:a(644),REMOVED_FROM_SCENE:a(645),VIDEO_COMPLETE:a(646),VIDEO_CREATED:a(647),
VIDEO_ERROR:a(648),VIDEO_LOOP:a(649),VIDEO_PLAY:a(650),VIDEO_SEEKED:a(651),VIDEO_SEEKING:a(652),VIDEO_STOP:a(653),VIDEO_TIMEOUT:a(654),VIDEO_UNLOCKED:a(655)}},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=0);if(0===h)return a;a=h*Math.floor((a-f)/h);return c?(f+a)/h:f+a}},function(p,u){p.exports=function(a){var h={},f;for(f in a)Array.isArray(a[f])?h[f]=a[f].slice(0):h[f]=a[f];return h}},function(p,u){p.exports=function(a,h,f,c){a=a.length;if(0>h||h>a||h>=f||f>a||h+f>a){if(c)throw Error("Range Error: Values outside acceptable range");
return!1}return!0}},function(p,u){function a(f,c){return String(f).localeCompare(c)}function h(f,c,b,d){var g=f.length,e=0,l=2*b,k,m;for(k=0;k<g;k+=l){var n=k+b;var q=n+b;n>g&&(n=g);q>g&&(q=g);var r=k;for(m=n;;)if(r<n&&m<q)0>=c(f[r],f[m])?d[e++]=f[r++]:d[e++]=f[m++];else if(r<n)d[e++]=f[r++];else if(m<q)d[e++]=f[m++];else break}}p.exports=function(f,c){void 0===c&&(c=a);var b=f;var d=b.length;if(!(1>=d))for(var g=Array(d),e=1;e<d;e*=2){h(b,c,e,g);var l=b;b=g;g=l}b!==f&&h(b,null,f.length,f);return f}},
function(p,u,a){var h=a(134),f=a(205);p.exports=function(c,b){var d=h.Power0;if("string"===typeof c)if(h.hasOwnProperty(c))d=h[c];else{var g="";c.indexOf(".")&&(g=c.substr(c.indexOf(".")+1),"in"===g.toLowerCase()?g="easeIn":"out"===g.toLowerCase()?g="easeOut":"inout"===g.toLowerCase()&&(g="easeInOut"));c=f(c.substr(0,c.indexOf(".")+1)+g);h.hasOwnProperty(c)&&(d=h[c])}else"function"===typeof c?d=c:Array.isArray(c);if(!b)return d;var e=b.slice(0);e.unshift(0);return function(l){e[0]=l;return d.apply(this,
e)}}},function(p,u,a){var h=a(12);p.exports=function(f,c,b,d,g){var e=f.strokeTint;b=h.getTintAppendFloatAlpha(c.strokeColor,c.strokeAlpha*b);e.TL=b;e.TR=b;e.BL=b;e.BR=b;e=c.pathData;b=e.length-1;var l=c.lineWidth,k=l/2,m=e[0]-d,n=e[1]-g;c.closePath||(b-=2);for(var q=2;q<b;q+=2){var r=e[q]-d,t=e[q+1]-g;f.batchLine(m,n,r,t,k,k,l,q-2,c.closePath?q===b-1:!1);m=r;n=t}}},function(p,u,a){u=a(0);var h=a(115),f=a(476),c=a(477),b=a(56),d=a(47),g=a(181);a=new u({initialize:function(e,l,k,m,n,q){void 0===e&&
(e=0);void 0===l&&(l=0);void 0===k&&(k=0);void 0===m&&(m=0);void 0===n&&(n=0);void 0===q&&(q=0);this.type=b.TRIANGLE;this.x1=e;this.y1=l;this.x2=k;this.y2=m;this.x3=n;this.y3=q},contains:function(e,l){return h(this,e,l)},getPoint:function(e,l){return f(this,e,l)},getPoints:function(e,l,k){return c(this,e,l,k)},getRandomPoint:function(e){return g(this,e)},setTo:function(e,l,k,m,n,q){void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=0);void 0===m&&(m=0);void 0===n&&(n=0);void 0===q&&(q=0);this.x1=
e;this.y1=l;this.x2=k;this.y2=m;this.x3=n;this.y3=q;return this},getLineA:function(e){void 0===e&&(e=new d);e.setTo(this.x1,this.y1,this.x2,this.y2);return e},getLineB:function(e){void 0===e&&(e=new d);e.setTo(this.x2,this.y2,this.x3,this.y3);return e},getLineC:function(e){void 0===e&&(e=new d);e.setTo(this.x3,this.y3,this.x1,this.y1);return e},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(e){e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-e:this.x2<=this.x1&&this.x2<=this.x3?
this.x2-e:this.x3-e;this.x1-=e;this.x2-=e;this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(e){e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-e:this.x2>=this.x1&&this.x2>=this.x3?this.x2-e:this.x3-e;this.x1-=e;this.x2-=e;this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(e){e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-e:this.y2<=this.y1&&this.y2<=this.y3?this.y2-e:this.y3-e;this.y1-=e;this.y2-=e;this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,
this.y2,this.y3)},set:function(e){e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-e:this.y2>=this.y1&&this.y2>=this.y3?this.y2-e:this.y3-e;this.y1-=e;this.y2-=e;this.y3-=e}}});p.exports=a},function(p,u){var a={};p.exports=a;(function(){a.create=function(h,f){return{x:h||0,y:f||0}};a.clone=function(h){return{x:h.x,y:h.y}};a.magnitude=function(h){return Math.sqrt(h.x*h.x+h.y*h.y)};a.magnitudeSquared=function(h){return h.x*h.x+h.y*h.y};a.rotate=function(h,f,c){var b=Math.cos(f);f=Math.sin(f);c||(c={});
var d=h.x*b-h.y*f;c.y=h.x*f+h.y*b;c.x=d;return c};a.rotateAbout=function(h,f,c,b){var d=Math.cos(f);f=Math.sin(f);b||(b={});var g=c.x+((h.x-c.x)*d-(h.y-c.y)*f);b.y=c.y+((h.x-c.x)*f+(h.y-c.y)*d);b.x=g;return b};a.normalise=function(h){var f=a.magnitude(h);return 0===f?{x:0,y:0}:{x:h.x/f,y:h.y/f}};a.dot=function(h,f){return h.x*f.x+h.y*f.y};a.cross=function(h,f){return h.x*f.y-h.y*f.x};a.cross3=function(h,f,c){return(f.x-h.x)*(c.y-h.y)-(f.y-h.y)*(c.x-h.x)};a.add=function(h,f,c){c||(c={});c.x=h.x+f.x;
c.y=h.y+f.y;return c};a.sub=function(h,f,c){c||(c={});c.x=h.x-f.x;c.y=h.y-f.y;return c};a.mult=function(h,f){return{x:h.x*f,y:h.y*f}};a.div=function(h,f){return{x:h.x/f,y:h.y/f}};a.perp=function(h,f){f=!0===f?-1:1;return{x:f*-h.y,y:f*h.x}};a.neg=function(h){return{x:-h.x,y:-h.y}};a.angle=function(h,f){return Math.atan2(f.y-h.y,f.x-h.x)};a._temp=[a.create(),a.create(),a.create(),a.create(),a.create(),a.create()]})()},function(p,u){var a={};p.exports=a;(function(){a.create=function(h){var f={min:{x:0,
y:0},max:{x:0,y:0}};h&&a.update(f,h);return f};a.update=function(h,f,c){h.min.x=Infinity;h.max.x=-Infinity;h.min.y=Infinity;h.max.y=-Infinity;for(var b=0;b<f.length;b++){var d=f[b];d.x>h.max.x&&(h.max.x=d.x);d.x<h.min.x&&(h.min.x=d.x);d.y>h.max.y&&(h.max.y=d.y);d.y<h.min.y&&(h.min.y=d.y)}c&&(0<c.x?h.max.x+=c.x:h.min.x+=c.x,0<c.y?h.max.y+=c.y:h.min.y+=c.y)};a.contains=function(h,f){return f.x>=h.min.x&&f.x<=h.max.x&&f.y>=h.min.y&&f.y<=h.max.y};a.overlaps=function(h,f){return h.min.x<=f.max.x&&h.max.x>=
f.min.x&&h.max.y>=f.min.y&&h.min.y<=f.max.y};a.translate=function(h,f){h.min.x+=f.x;h.max.x+=f.x;h.min.y+=f.y;h.max.y+=f.y};a.shift=function(h,f){var c=h.max.x-h.min.x,b=h.max.y-h.min.y;h.min.x=f.x;h.max.x=f.x+c;h.min.y=f.y;h.max.y=f.y+b}})()},function(p,u,a){var h=a(29);u=a(0);var f=a(11),c=a(502);a=new u({Mixins:[f.Alpha,f.Flip,f.Visible],initialize:function(b,d,g,e,l,k,m,n){this.layer=b;this.index=d;this.x=g;this.y=e;this.width=l;this.height=k;this.baseWidth=void 0!==m?m:l;this.baseHeight=void 0!==
n?n:k;this.pixelY=this.pixelX=0;this.updatePixelXY();this.properties={};this.rotation=0;this.faceBottom=this.faceTop=this.faceRight=this.faceLeft=this.collideDown=this.collideUp=this.collideRight=this.collideLeft=!1;this.collisionCallback=void 0;this.collisionCallbackContext=this;this.tint=16777215;this.physics={}},containsPoint:function(b,d){return!(b<this.pixelX||d<this.pixelY||b>this.right||d>this.bottom)},copy:function(b){this.index=b.index;this.alpha=b.alpha;this.properties=b.properties;this.visible=
b.visible;this.setFlip(b.flipX,b.flipY);this.tint=b.tint;this.rotation=b.rotation;this.collideUp=b.collideUp;this.collideDown=b.collideDown;this.collideLeft=b.collideLeft;this.collideRight=b.collideRight;this.collisionCallback=b.collisionCallback;this.collisionCallbackContext=b.collisionCallbackContext;return this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},
getLeft:function(b){var d=this.tilemapLayer;return d?d.tileToWorldX(this.x,b):this.x*this.baseWidth},getRight:function(b){var d=this.tilemapLayer;return d?this.getLeft(b)+this.width*d.scaleX:this.getLeft(b)+this.width},getTop:function(b){var d=this.tilemapLayer;return d?d.tileToWorldY(this.y,b)-(this.height-this.baseHeight)*d.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(b){var d=this.tilemapLayer;return d?this.getTop(b)+this.height*d.scaleY:this.getTop(b)+this.height},
getBounds:function(b,d){void 0===d&&(d=new c);d.x=this.getLeft();d.y=this.getTop();d.width=this.getRight()-d.x;d.height=this.getBottom()-d.y;return d},getCenterX:function(b){return(this.getLeft(b)+this.getRight(b))/2},getCenterY:function(b){return(this.getTop(b)+this.getBottom(b))/2},intersects:function(b,d,g,e){return!(g<=this.pixelX||e<=this.pixelY||b>=this.right||d>=this.bottom)},isInteresting:function(b,d){return b&&d?this.canCollide||this.hasInterestingFace:b?this.collides:d?this.hasInterestingFace:
!1},resetCollision:function(b){void 0===b&&(b=!0);this.faceRight=this.faceLeft=this.faceBottom=this.faceTop=this.collideDown=this.collideUp=this.collideRight=this.collideLeft=!1;b&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y);return this},resetFaces:function(){this.faceRight=this.faceLeft=this.faceBottom=this.faceTop=!1;return this},setCollision:function(b,d,g,e,l){void 0===d&&(d=b);void 0===g&&(g=b);void 0===e&&(e=b);void 0===l&&(l=!0);this.collideLeft=b;this.collideRight=
d;this.collideUp=g;this.collideDown=e;this.faceLeft=b;this.faceRight=d;this.faceTop=g;this.faceBottom=e;l&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y);return this},setCollisionCallback:function(b,d){null===b?this.collisionCallbackContext=this.collisionCallback=void 0:(this.collisionCallback=b,this.collisionCallbackContext=d);return this},setSize:function(b,d,g,e){void 0!==b&&(this.width=b);void 0!==d&&(this.height=d);void 0!==g&&(this.baseWidth=g);void 0!==e&&(this.baseHeight=
e);this.updatePixelXY();return this},updatePixelXY:function(){var b=this.layer.orientation;b===h.ORTHOGONAL?(this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight):b===h.ISOMETRIC?(this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5):b===h.STAGGERED?(this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.baseHeight/2*this.y):b===h.HEXAGONAL&&(b=this.layer.hexSideLength,b=(this.baseHeight-b)/2+b,this.pixelX=this.x*this.baseWidth+
this.y%2*(this.baseWidth/2),this.pixelY=this.y*b);this.right=this.pixelX+this.baseWidth;this.bottom=this.pixelY+this.baseHeight;return this},destroy:function(){this.properties=this.collisionCallbackContext=this.collisionCallback=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||
this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var b=this.layer.tilemapLayer;return b&&(b=b.gidMap[this.index])?b:null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var b=this.tilemapLayer;return b?b.tilemap:null}}});p.exports=a},function(p,u,a){var h={};p.exports=h;var f=a(64),c=a(32),b=a(41),d=a(84),g=a(83),e=a(1393);(function(){h.rectangle=function(l,k,m,n,q){q=q||{};l={label:"Rectangle Body",position:{x:l,y:k},vertices:f.fromPath("L 0 0 L "+
m+" 0 L "+m+" "+n+" L 0 "+n)};q.chamfer&&(k=q.chamfer,l.vertices=f.chamfer(l.vertices,k.radius,k.quality,k.qualityMin,k.qualityMax),delete q.chamfer);return b.create(c.extend({},l,q))};h.trapezoid=function(l,k,m,n,q,r){r=r||{};q*=.5;var t=m*q;m=t+(1-2*q)*m;var w=m+t;l={label:"Trapezoid Body",position:{x:l,y:k},vertices:f.fromPath(.5>q?"L 0 0 L "+t+" "+-n+" L "+m+" "+-n+" L "+w+" 0":"L 0 0 L "+m+" "+-n+" L "+w+" 0")};r.chamfer&&(k=r.chamfer,l.vertices=f.chamfer(l.vertices,k.radius,k.quality,k.qualityMin,
k.qualityMax),delete r.chamfer);return b.create(c.extend({},l,r))};h.circle=function(l,k,m,n,q){n=n||{};var r={label:"Circle Body",circleRadius:m};q=Math.ceil(Math.max(10,Math.min(q||25,m)));1===q%2&&(q+=1);return h.polygon(l,k,q,m,c.extend({},r,n))};h.polygon=function(l,k,m,n,q){q=q||{};if(3>m)return h.circle(l,k,n,q);for(var r=2*Math.PI/m,t="",w=.5*r,v=0;v<m;v+=1){var x=w+v*r,y=Math.sin(x)*n;t+="L "+(Math.cos(x)*n).toFixed(3)+" "+y.toFixed(3)+" "}l={label:"Polygon Body",position:{x:l,y:k},vertices:f.fromPath(t)};
q.chamfer&&(k=q.chamfer,l.vertices=f.chamfer(l.vertices,k.radius,k.quality,k.qualityMin,k.qualityMax),delete q.chamfer);return b.create(c.extend({},l,q))};h.fromVertices=function(l,k,m,n,q,r,t){var w,v;n=n||{};var x=[];q="undefined"!==typeof q?q:!1;r="undefined"!==typeof r?r:.01;t="undefined"!==typeof t?t:10;e||c.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull.");c.isArray(m[0])||(m=[m]);for(v=0;v<m.length;v+=1){var y=m[v];if((w=f.isConvex(y))||
!e)y=w?f.clockwiseSort(y):f.hull(y),x.push({position:{x:l,y:k},vertices:y});else for(w=y.map(function(B){return[B.x,B.y]}),e.makeCCW(w),!1!==r&&e.removeCollinearPoints(w,r),y=e.quickDecomp(w),w=0;w<y.length;w++){var A=y[w].map(function(B){return{x:B[0],y:B[1]}});0<t&&f.area(A)<t||x.push({position:f.centre(A),vertices:A})}}for(w=0;w<x.length;w++)x[w]=b.create(c.extend(x[w],n));q&&h.flagCoincidentParts(x,5);return 1<x.length?(m=b.create(c.extend({parts:x.slice(0)},n)),b.setPosition(m,{x:l,y:k}),m):
x[0]};h.flagCoincidentParts=function(l,k){void 0===k&&(k=5);for(var m=0;m<l.length;m++)for(var n=l[m],q=m+1;q<l.length;q++){var r=l[q];if(d.overlaps(n.bounds,r.bounds))for(var t=n.vertices,w=r.vertices,v=0;v<n.vertices.length;v++)for(var x=0;x<r.vertices.length;x++){var y=g.magnitudeSquared(g.sub(t[(v+1)%t.length],w[x])),A=g.magnitudeSquared(g.sub(t[v],w[(x+1)%w.length]));y<k&&A<k&&(t[v].isInternal=!0,w[x].isInternal=!0)}}return l}})()},function(p,u){p.exports=function(a){return a.x-a.width*a.originX+
.5*a.width}},function(p,u){p.exports=function(a,h){a.x=h+a.width*a.originX-.5*a.width;return a}},function(p,u){p.exports=function(a){return a.y-a.height*a.originY+.5*a.height}},function(p,u){p.exports=function(a,h){a.y=h+a.height*a.originY-.5*a.height;return a}},function(p,u,a){p.exports={POST_RENDER:a(628),PRE_RENDER:a(629),RENDER:a(630),RESIZE:a(631)}},function(p,u){p.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",
MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(p,u,a){var h=a(74);p.exports=function(f,c,b,d){void 0===d&&(d=f);if(!Array.isArray(c)){var g=f.indexOf(c);return-1!==g?(h(f,g),b&&b.call(d,c),c):null}for(var e=c.length-1,l=[];0<=e;){var k=c[e];g=f.indexOf(k);-1!==g&&(h(f,g),l.push(k),b&&b.call(d,k));e--}return l}},function(p,u,a){u=a(0);var h=a(199),f=a(10),c=a(3);a=new u({initialize:function(b){this.type=
b;this.defaultDivisions=5;this.arcLengthDivisions=100;this.cacheArcLengths=[];this.active=this.needsUpdate=!0;this._tmpVec2A=new c;this._tmpVec2B=new c},draw:function(b,d){void 0===d&&(d=32);return b.strokePoints(this.getPoints(d))},getBounds:function(b,d){b||(b=new f);void 0===d&&(d=16);var g=this.getLength();d>g&&(d=g/2);return h(this.getSpacedPoints(Math.max(1,Math.round(g/d))),b)},getDistancePoints:function(b){var d=this.getLength();return this.getSpacedPoints(Math.max(1,d/b))},getEndPoint:function(b){void 0===
b&&(b=new c);return this.getPointAt(1,b)},getLength:function(){var b=this.getLengths();return b[b.length-1]},getLengths:function(b){void 0===b&&(b=this.arcLengthDivisions);if(this.cacheArcLengths.length===b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var d=[],g=this.getPoint(0,this._tmpVec2A),e=0;d.push(0);for(var l=1;l<=b;l++){var k=this.getPoint(l/b,this._tmpVec2B);e+=k.distance(g);d.push(e);g.copy(k)}return this.cacheArcLengths=d},getPointAt:function(b,d){b=this.getUtoTmapping(b);
return this.getPoint(b,d)},getPoints:function(b,d,g){void 0===g&&(g=[]);b||(b=d?this.getLength()/d:this.defaultDivisions);for(d=0;d<=b;d++)g.push(this.getPoint(d/b));return g},getRandomPoint:function(b){void 0===b&&(b=new c);return this.getPoint(Math.random(),b)},getSpacedPoints:function(b,d,g){void 0===g&&(g=[]);b||(b=d?this.getLength()/d:this.defaultDivisions);for(d=0;d<=b;d++){var e=this.getUtoTmapping(d/b,null,b);g.push(this.getPoint(e))}return g},getStartPoint:function(b){void 0===b&&(b=new c);
return this.getPointAt(0,b)},getTangent:function(b,d){void 0===d&&(d=new c);var g=b-1E-4;b+=1E-4;0>g&&(g=0);1<b&&(b=1);this.getPoint(g,this._tmpVec2A);this.getPoint(b,d);return d.subtract(this._tmpVec2A).normalize()},getTangentAt:function(b,d){b=this.getUtoTmapping(b);return this.getTangent(b,d)},getTFromDistance:function(b,d){return 0>=b?0:this.getUtoTmapping(0,b,d)},getUtoTmapping:function(b,d,g){g=this.getLengths(g);var e=g.length;d=d?Math.min(d,g[e-1]):b*g[e-1];for(var l=0,k=e-1,m;l<=k;)if(b=
Math.floor(l+(k-l)/2),m=g[b]-d,0>m)l=b+1;else if(0<m)k=b-1;else{k=b;break}b=k;if(g[b]===d)return b/(e-1);l=g[b];return(b+(d-l)/(g[b+1]-l))/(e-1)},updateArcLengths:function(){this.needsUpdate=!0;this.getLengths()}});p.exports=a},function(p,u,a){p.exports={ADD:a(968),COMPLETE:a(969),FILE_COMPLETE:a(970),FILE_KEY_COMPLETE:a(971),FILE_LOAD_ERROR:a(972),FILE_LOAD:a(973),FILE_PROGRESS:a(974),POST_PROCESS:a(975),PROGRESS:a(976),START:a(977)}},function(p,u,a){var h=a(4);p.exports=function(f,c,b){void 0===
b&&(b=new h);var d=f.x1,g=f.y1,e=f.x2;f=f.y2;var l=c.x1,k=c.y1,m=c.x2,n=c.y2;c=(n-k)*(e-d)-(m-l)*(f-g);if(0===c)return!1;m=((m-l)*(g-k)-(n-k)*(d-l))/c;l=((e-d)*(g-k)-(f-g)*(d-l))/c;return 0<=m&&1>=m&&0<=l&&1>=l?(b.x=d+m*(e-d),b.y=g+m*(f-g),!0):!1}},function(p,u){p.exports=function(a){return Math.atan2(a.y2-a.y1,a.x2-a.x1)}},function(p,u,a){var h=a(18);p.exports=function(f,c,b){f=h(f,0,1);return(b-c)*f+c}},function(p,u){p.exports=function(a,h,f){return a?a.hasOwnProperty(h)?a[h]:f:f}},function(p,u){p.exports=
{CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(p,u,a){u=a(0);var h=a(315);a=new u({initialize:function(f,c){this.parent=f;this.events=c;c||(this.events=f.events?f.events:f);this.list={};this.values={};this._frozen=!1;if(!f.hasOwnProperty("sys")&&this.events)this.events.once(h.DESTROY,this.destroy,this)},get:function(f){var c=
this.list;if(Array.isArray(f)){for(var b=[],d=0;d<f.length;d++)b.push(c[f[d]]);return b}return c[f]},getAll:function(){var f={},c;for(c in this.list)this.list.hasOwnProperty(c)&&(f[c]=this.list[c]);return f},query:function(f){var c={},b;for(b in this.list)this.list.hasOwnProperty(b)&&b.match(f)&&(c[b]=this.list[b]);return c},set:function(f,c){if(this._frozen)return this;if("string"===typeof f)return this.setValue(f,c);for(var b in f)this.setValue(b,f[b]);return this},inc:function(f,c){if(this._frozen)return this;
void 0===c&&(c=1);var b=this.get(f);void 0===b&&(b=0);this.set(f,b+c);return this},toggle:function(f){if(this._frozen)return this;this.set(f,!this.get(f));return this},setValue:function(f,c){if(this._frozen)return this;if(this.has(f))this.values[f]=c;else{var b=this,d=this.list,g=this.events,e=this.parent;Object.defineProperty(this.values,f,{enumerable:!0,configurable:!0,get:function(){return d[f]},set:function(l){if(!b._frozen){var k=d[f];d[f]=l;g.emit(h.CHANGE_DATA,e,f,l,k);g.emit(h.CHANGE_DATA_KEY+
f,e,l,k)}}});d[f]=c;g.emit(h.SET_DATA,e,f,c)}return this},each:function(f,c){for(var b=[this.parent,null,void 0],d=1;d<arguments.length;d++)b.push(arguments[d]);for(var g in this.list)b[1]=g,b[2]=this.list[g],f.apply(c,b);return this},merge:function(f,c){void 0===c&&(c=!0);for(var b in f)f.hasOwnProperty(b)&&(c||!c&&!this.has(b))&&this.setValue(b,f[b]);return this},remove:function(f){if(this._frozen)return this;if(Array.isArray(f))for(var c=0;c<f.length;c++)this.removeValue(f[c]);else return this.removeValue(f);
return this},removeValue:function(f){if(this.has(f)){var c=this.list[f];delete this.list[f];delete this.values[f];this.events.emit(h.REMOVE_DATA,this.parent,f,c)}return this},pop:function(f){var c=void 0;!this._frozen&&this.has(f)&&(c=this.list[f],delete this.list[f],delete this.values[f],this.events.emit(h.REMOVE_DATA,this.parent,f,c));return c},has:function(f){return this.list.hasOwnProperty(f)},setFreeze:function(f){this._frozen=f;return this},reset:function(){for(var f in this.list)delete this.list[f],
delete this.values[f];this._frozen=!1;return this},destroy:function(){this.reset();this.events.off(h.CHANGE_DATA);this.events.off(h.SET_DATA);this.events.off(h.REMOVE_DATA);this.parent=null},freeze:{get:function(){return this._frozen},set:function(f){this._frozen=f?!0:!1}},count:{get:function(){var f=0,c;for(c in this.list)void 0!==this.list[c]&&f++;return f}}});p.exports=a},function(p,u,a){u=new (a(0))({initialize:function(h){this.entries={};this.size=0;if(Array.isArray(h))for(var f=0;f<h.length;f++)this.set(h[f][0],
h[f][1])},set:function(h,f){this.has(h)||this.size++;this.entries[h]=f;return this},get:function(h){if(this.has(h))return this.entries[h]},getArray:function(){var h=[],f=this.entries,c;for(c in f)h.push(f[c]);return h},has:function(h){return this.entries.hasOwnProperty(h)},delete:function(h){this.has(h)&&(delete this.entries[h],this.size--);return this},clear:function(){Object.keys(this.entries).forEach(function(h){delete this.entries[h]},this);this.size=0;return this},keys:function(){return Object.keys(this.entries)},
values:function(){var h=[],f=this.entries,c;for(c in f)h.push(f[c]);return h},dump:function(){var h=this.entries;console.group("Map");for(var f in h)console.log(f,h[f]);console.groupEnd()},each:function(h){var f=this.entries,c;for(c in f)if(!1===h(c,f[c]))break;return this},contains:function(h){var f=this.entries,c;for(c in f)if(f[c]===h)return!0;return!1},merge:function(h,f){void 0===f&&(f=!1);var c=this.entries;h=h.entries;for(var b in h)c.hasOwnProperty(b)&&f?c[b]=h[b]:this.set(b,h[b]);return this}});
p.exports=u},function(p,u){p.exports=function(a,h,f){return a<<16|h<<8|f}},function(p,u,a){p.exports={ENTER_FULLSCREEN:a(800),FULLSCREEN_FAILED:a(801),FULLSCREEN_UNSUPPORTED:a(802),LEAVE_FULLSCREEN:a(803),ORIENTATION_CHANGE:a(804),RESIZE:a(805)}},function(p,u,a){u=a(807);a={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};if("function"!==
typeof importScripts){var h=navigator.userAgent;/Windows/.test(h)?a.windows=!0:/Mac OS/.test(h)&&!/like Mac OS/.test(h)?navigator.maxTouchPoints&&2<navigator.maxTouchPoints?(a.iOS=!0,a.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),a.iOSVersion=parseInt(RegExp.$1,10)):a.macOS=!0:/Android/.test(h)?a.android=!0:/Linux/.test(h)?a.linux=!0:/iP[ao]d|iPhone/i.test(h)?(a.iOS=!0,navigator.appVersion.match(/OS (\d+)/),a.iOSVersion=parseInt(RegExp.$1,10),a.iPhone=-1!==h.toLowerCase().indexOf("iphone"),
a.iPad=-1!==h.toLowerCase().indexOf("ipad")):/Kindle/.test(h)||/\bKF[A-Z][A-Z]+/.test(h)||/Silk.*Mobile Safari/.test(h)?a.kindle=!0:/CrOS/.test(h)&&(a.chromeOS=!0);if(/Windows Phone/i.test(h)||/IEMobile/i.test(h))a.android=!1,a.iOS=!1,a.macOS=!1,a.windows=!0,a.windowsPhone=!0;var f=/Silk/.test(h);if(a.windows||a.macOS||a.linux&&!f||a.chromeOS)a.desktop=!0;if(a.windowsPhone||/Windows NT/i.test(h)&&/Touch/i.test(h))a.desktop=!1;navigator.standalone&&(a.webApp=!0);"function"!==typeof importScripts&&
(void 0!==window.cordova&&(a.cordova=!0),void 0!==window.ejecta&&(a.ejecta=!0));"undefined"!==typeof u&&u.versions&&u.versions.node&&(a.node=!0);a.node&&"object"===typeof u.versions&&(a.nodeWebkit=!!u.versions["node-webkit"],a.electron=!!u.versions.electron);/Crosswalk/.test(h)&&(a.crosswalk=!0);a.pixelRatio=window.devicePixelRatio||1}p.exports=a},function(p,u,a){p.exports={ADD:a(861),ERROR:a(862),LOAD:a(863),READY:a(864),REMOVE:a(865)}},function(p,u){p.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,
size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(p,u,a){u=a(0);var h=a(59),f=a(2),c=a(878),b=a(879),d=a(25),g=a(12),e=a(107),l=a(58);a=new u({Extends:l,initialize:function(k){var m=k.game.renderer,n=f(k,"fragShader",c);k.fragShader=g.parseFragmentShaderMaxTextures(n,m.maxTextures);k.vertShader=f(k,"vertShader",b);k.attributes=f(k,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",
size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:e.UNSIGNED_BYTE,normalized:!0}]);l.call(this,k);this._tempMatrix1=new d;this._tempMatrix2=new d;this._tempMatrix3=new d;this.calcMatrix=new d;this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}];this.strokeTint={TL:0,TR:0,BL:0,BR:0};this.fillTint={TL:0,TR:0,BL:0,BR:0};this.currentFrame={u0:0,v0:0,u1:1,v1:1};this.firstQuad=[0,0,0,0,0];this.prevQuad=[0,0,0,0,0];this.polygonCache=[]},boot:function(){l.prototype.boot.call(this);
this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(k,m,n){this.manager.set(this,k);var q=this._tempMatrix1,r=this._tempMatrix2,t=this._tempMatrix3,w=k.frame,v=w.glTexture,x=w.u0,y=w.v0,A=w.u1,B=w.v1,z=w.x,C=w.y,E=w.cutWidth,G=w.cutHeight,H=w.customPivot,I=k.displayOriginX,K=k.displayOriginY,O=-I+z;z=-K+C;k.isCropped&&(O=k._crop,O.flipX===k.flipX&&O.flipY===k.flipY||w.updateCropUVs(O,k.flipX,k.flipY),x=O.u0,y=O.v0,A=O.u1,B=O.v1,E=O.width,G=O.height,z=O.x,C=
O.y,O=-I+z,z=-K+C);var R=C=1;k.flipX&&(H||(O+=-w.realWidth+2*I),C=-1);if(k.flipY||w.source.isGLTexture&&!v.flipY)H||(z+=-w.realHeight+2*K),R=-1;r.applyITRS(k.x,k.y,k.rotation,k.scaleX*C,k.scaleY*R);q.copyFrom(m.matrix);n?(q.multiplyWithOffset(n,-m.scrollX*k.scrollFactorX,-m.scrollY*k.scrollFactorY),r.e=k.x,r.f=k.y):(r.e-=m.scrollX*k.scrollFactorX,r.f-=m.scrollY*k.scrollFactorY);q.multiply(r,t);I=O+E;E=z+G;K=m.roundPixels;G=t.getXRound(O,z,K);n=t.getYRound(O,z,K);q=t.getXRound(O,E,K);O=t.getYRound(O,
E,K);r=t.getXRound(I,E,K);E=t.getYRound(I,E,K);H=t.getXRound(I,z,K);t=t.getYRound(I,z,K);K=g.getTintAppendFloatAlpha;C=m.alpha;m=K(k.tintTopLeft,C*k._alphaTL);z=K(k.tintTopRight,C*k._alphaTR);I=K(k.tintBottomLeft,C*k._alphaBL);K=K(k.tintBottomRight,C*k._alphaBR);this.shouldFlush(6)&&this.flush();w=this.setGameObject(k,w);this.manager.preBatch(k);this.batchQuad(k,G,n,q,O,r,E,H,t,x,y,A,B,m,z,I,K,k.tintFill,v,w);this.manager.postBatch(k)},batchTexture:function(k,m,n,q,r,t,w,v,x,y,A,B,z,C,E,G,H,I,K,O,
R,F,J,N,Q,T,S,W,X,ba,fa,la){this.manager.set(this,k);var na=this._tempMatrix1,pa=this._tempMatrix2,ma=this._tempMatrix3,ta=I/n+S,xa=K/q+W,ya=(I+O)/n+S,Aa=(K+R)/q+W,Da=w,Ba=v;I=-G;K=-H;if(k.isCropped){ta=k._crop;ya=ta.width;Aa=ta.height;Da=ya;Ba=Aa;w=ya;v=Aa;I=ta.x;K=ta.y;var Ea=I,Fa=K;B&&(Ea=O-ta.x-ya);z&&(Fa=R-ta.y-Aa);ta=Ea/n+S;xa=Fa/q+W;ya=(Ea+ya)/n+S;Aa=(Fa+Aa)/q+W;I=-G+I;K=-H+K}z^=!fa&&m.isRenderTexture?1:0;B&&(Da*=-1,I+=w);z&&(Ba*=-1,K+=v);n=I+Da;Ba=K+Ba;pa.applyITRS(r,t,A,x,y);na.copyFrom(X.matrix);
ba?(na.multiplyWithOffset(ba,-X.scrollX*C,-X.scrollY*E),pa.e=r,pa.f=t):(pa.e-=X.scrollX*C,pa.f-=X.scrollY*E);na.multiply(pa,ma);y=X.roundPixels;r=ma.getXRound(I,K,y);t=ma.getYRound(I,K,y);x=ma.getXRound(I,Ba,y);A=ma.getYRound(I,Ba,y);C=ma.getXRound(n,Ba,y);E=ma.getYRound(n,Ba,y);X=ma.getXRound(n,K,y);ma=ma.getYRound(n,K,y);void 0===la&&(la=this.renderer.setTexture2D(m));k&&this.manager.preBatch(k);this.batchQuad(k,r,t,x,A,C,E,X,ma,ta,xa,ya,Aa,F,J,N,Q,T,m,la);k&&this.manager.postBatch(k)},batchTextureFrame:function(k,
m,n,q,r,t,w){this.manager.set(this);var v=this._tempMatrix1.copyFrom(t);t=this._tempMatrix2;var x=m+k.width,y=n+k.height;w?v.multiply(w,t):t=v;w=t.getX(m,n);v=t.getY(m,n);var A=t.getX(m,y);m=t.getY(m,y);var B=t.getX(x,y);y=t.getY(x,y);var z=t.getX(x,n);n=t.getY(x,n);t=this.renderer.setTextureSource(k.source);q=g.getTintAppendFloatAlpha(q,r);this.batchQuad(null,w,v,A,m,B,y,z,n,k.u0,k.v0,k.u1,k.v1,q,q,q,q,0,k.glTexture,t)},batchFillRect:function(k,m,n,q,r,t){this.renderer.pipelines.set(this);var w=
this.calcMatrix;t&&t.multiply(r,w);t=k+n;var v=m+q;q=w.getX(k,m);n=w.getY(k,m);r=w.getX(k,v);k=w.getY(k,v);var x=w.getX(t,v);v=w.getY(t,v);var y=w.getX(t,m);m=w.getY(t,m);w=this.fillTint;this.batchQuad(null,q,n,r,k,x,v,y,m,0,0,1,1,w.TL,w.TR,w.BL,w.BR,2)},batchFillTriangle:function(k,m,n,q,r,t,w,v){this.renderer.pipelines.set(this);var x=this.calcMatrix;v&&v.multiply(w,x);w=x.getX(k,m);k=x.getY(k,m);m=x.getX(n,q);n=x.getY(n,q);q=x.getX(r,t);r=x.getY(r,t);t=this.fillTint;this.batchTri(null,w,k,m,n,
q,r,0,0,1,1,t.TL,t.TR,t.BL,2)},batchStrokeTriangle:function(k,m,n,q,r,t,w,v,x){var y=this.tempTriangle;y[0].x=k;y[0].y=m;y[0].width=w;y[1].x=n;y[1].y=q;y[1].width=w;y[2].x=r;y[2].y=t;y[2].width=w;y[3].x=k;y[3].y=m;y[3].width=w;this.batchStrokePath(y,w,!1,v,x)},batchFillPath:function(k,m,n){this.renderer.pipelines.set(this);var q=this.calcMatrix;n&&n.multiply(m,q);m=k.length;n=this.polygonCache;for(var r,t=this.fillTint.TL,w=this.fillTint.TR,v=this.fillTint.BL,x=0;x<m;++x)r=k[x],n.push(r.x,r.y);k=
h(n);m=k.length;for(r=0;r<m;r+=3){var y=2*k[r+0];x=2*k[r+1];var A=2*k[r+2],B=n[y+0],z=n[y+1];y=n[x+0];var C=n[x+1];x=n[A+0];var E=n[A+1];A=q.getX(B,z);B=q.getY(B,z);z=q.getX(y,C);y=q.getY(y,C);C=q.getX(x,E);x=q.getY(x,E);this.batchTri(null,A,B,z,y,C,x,0,0,1,1,t,w,v,2)}n.length=0},batchStrokePath:function(k,m,n,q,r){this.renderer.pipelines.set(this);this.prevQuad[4]=0;this.firstQuad[4]=0;for(var t=k.length-1,w=0;w<t;w++){var v=k[w],x=k[w+1];this.batchLine(v.x,v.y,x.x,x.y,v.width/2,x.width/2,m,w,!n&&
w===t-1,q,r)}},batchLine:function(k,m,n,q,r,t,w,v,x,y,A){this.renderer.pipelines.set(this);var B=this.calcMatrix;A&&A.multiply(y,B);y=n-k;A=q-m;var z=Math.sqrt(y*y+A*A);y=r*(q-m)/z;A=r*(k-n)/z;var C=t*(q-m)/z,E=t*(k-n)/z;z=n-C;var G=q-E;t=k-y;r=m-A;n+=C;C=q+E;y=k+y;E=m+A;m=B.getX(z,G);k=B.getY(z,G);q=B.getX(t,r);t=B.getY(t,r);r=B.getX(n,C);n=B.getY(n,C);A=B.getX(y,E);B=B.getY(y,E);C=this.strokeTint;y=C.TL;z=C.TR;G=C.BL;C=C.BR;this.batchQuad(null,A,B,q,t,m,k,r,n,0,0,1,1,y,z,G,C,2);2>=w||(w=this.prevQuad,
E=this.firstQuad,0<v&&w[4]?this.batchQuad(null,A,B,q,t,w[0],w[1],w[2],w[3],0,0,1,1,y,z,G,C,2):(E[0]=A,E[1]=B,E[2]=q,E[3]=t,E[4]=1),x&&E[4]?this.batchQuad(null,m,k,r,n,E[0],E[1],E[2],E[3],0,0,1,1,y,z,G,C,2):(w[0]=m,w[1]=k,w[2]=r,w[3]=n,w[4]=1))}});p.exports=a},function(p,u,a){u=a(0);var h=a(18),f=a(17),c=new u({initialize:function(b,d,g,e,l,k,m){this.texture=b;this.name=d;this.source=b.source[g];this.sourceIndex=g;this.glTexture=this.source.glTexture;this.pivotY=this.pivotX=this.y=this.x=0;this.rotated=
this.customPivot=!1;this.autoRound=-1;this.customData={};this.v1=this.u1=this.v0=this.u0=0;this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}};this.setSize(k,m,e,l)},setSize:function(b,d,g,e){void 0===g&&(g=0);void 0===e&&(e=0);this.cutX=g;this.cutY=e;this.cutWidth=b;this.cutHeight=d;this.width=b;this.height=d;this.halfWidth=Math.floor(.5*b);this.halfHeight=Math.floor(.5*d);this.centerX=Math.floor(b/
2);this.centerY=Math.floor(d/2);var l=this.data,k=l.cut;k.x=g;k.y=e;k.w=b;k.h=d;k.r=g+b;k.b=e+d;l.sourceSize.w=b;l.sourceSize.h=d;l.spriteSourceSize.w=b;l.spriteSourceSize.h=d;l.radius=.5*Math.sqrt(b*b+d*d);l=l.drawImage;l.x=g;l.y=e;l.width=b;l.height=d;return this.updateUVs()},setTrim:function(b,d,g,e,l,k){var m=this.data,n=m.spriteSourceSize;m.trim=!0;m.sourceSize.w=b;m.sourceSize.h=d;n.x=g;n.y=e;n.w=l;n.h=k;n.r=g+l;n.b=e+k;this.x=g;this.y=e;this.width=l;this.height=k;this.halfWidth=.5*l;this.halfHeight=
.5*k;this.centerX=Math.floor(l/2);this.centerY=Math.floor(k/2);return this.updateUVs()},setCropUVs:function(b,d,g,e,l,k,m){var n=this.cutX,q=this.cutY,r=this.cutWidth,t=this.cutHeight,w=this.realWidth,v=this.realHeight;d=h(d,0,w);g=h(g,0,v);e=h(e,0,w-d);l=h(l,0,v-g);w=n+d;var x=q+g;v=e;var y=l,A=this.data;A.trim?(x=A.spriteSourceSize,e=h(e,0,r-d),l=h(l,0,t-g),v=d+e,w=g+l,x.r<d||x.b<g||x.x>v||x.y>w?y=v=x=w=0:(d=Math.max(x.x,d),g=Math.max(x.y,g),e=Math.min(x.r,v)-d,l=Math.min(x.b,w)-g,v=e,y=l,w=k?n+
(r-(d-x.x)-e):n+(d-x.x),x=m?q+(t-(g-x.y)-l):q+(g-x.y))):(k&&(w=n+(r-d-e)),m&&(x=q+(t-g-l)));n=this.source.width;q=this.source.height;b.u0=Math.max(0,w/n);b.v0=Math.max(0,x/q);b.u1=Math.min(1,(w+v)/n);b.v1=Math.min(1,(x+y)/q);b.x=d;b.y=g;b.cx=w;b.cy=x;b.cw=v;b.ch=y;b.width=e;b.height=l;b.flipX=k;b.flipY=m;return b},updateCropUVs:function(b,d,g){return this.setCropUVs(b,b.x,b.y,b.width,b.height,d,g)},setUVs:function(b,d,g,e,l,k){var m=this.data.drawImage;m.width=b;m.height=d;this.u0=g;this.v0=e;this.u1=
l;this.v1=k;return this},updateUVs:function(){var b=this.cutX,d=this.cutY,g=this.cutWidth,e=this.cutHeight,l=this.data.drawImage;l.width=g;l.height=e;l=this.source.width;var k=this.source.height;this.u0=b/l;this.v0=d/k;this.u1=(b+g)/l;this.v1=(d+e)/k;return this},updateUVsInverted:function(){var b=this.source.width,d=this.source.height;this.u0=(this.cutX+this.cutHeight)/b;this.v0=this.cutY/d;this.u1=this.cutX/b;this.v1=(this.cutY+this.cutWidth)/d;return this},clone:function(){var b=new c(this.texture,
this.name,this.sourceIndex);b.cutX=this.cutX;b.cutY=this.cutY;b.cutWidth=this.cutWidth;b.cutHeight=this.cutHeight;b.x=this.x;b.y=this.y;b.width=this.width;b.height=this.height;b.halfWidth=this.halfWidth;b.halfHeight=this.halfHeight;b.centerX=this.centerX;b.centerY=this.centerY;b.rotated=this.rotated;b.data=f(!0,b.data,this.data);b.updateUVs();return b},destroy:function(){this.data=this.customData=this.glTexture=this.texture=this.source=null},realWidth:{get:function(){return this.data.sourceSize.w}},
realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});p.exports=c},function(p,u,a){var h=a(208);u=a(0);var f=a(1),c=a(79);a=new u({initialize:function(b){this.parent=b;this.list=[];this.position=0;this.removeCallback=this.addCallback=f;this._sortKey=""},add:function(b,d){return d?h.Add(this.list,b):h.Add(this.list,b,0,this.addCallback,this)},
addAt:function(b,d,g){return g?h.AddAt(this.list,b,d):h.AddAt(this.list,b,d,0,this.addCallback,this)},getAt:function(b){return this.list[b]},getIndex:function(b){return this.list.indexOf(b)},sort:function(b,d){if(!b)return this;void 0===d&&(d=function(g,e){return g[b]-e[b]});c(this.list,d);return this},getByName:function(b){return h.GetFirst(this.list,"name",b)},getRandom:function(b,d){return h.GetRandom(this.list,b,d)},getFirst:function(b,d,g,e){return h.GetFirst(this.list,b,d,g,e)},getAll:function(b,
d,g,e){return h.GetAll(this.list,b,d,g,e)},count:function(b,d){return h.CountAllMatching(this.list,b,d)},swap:function(b,d){h.Swap(this.list,b,d)},moveTo:function(b,d){return h.MoveTo(this.list,b,d)},moveAbove:function(b,d){return h.MoveAbove(this.list,b,d)},moveBelow:function(b,d){return h.MoveBelow(this.list,b,d)},remove:function(b,d){return d?h.Remove(this.list,b):h.Remove(this.list,b,this.removeCallback,this)},removeAt:function(b,d){return d?h.RemoveAt(this.list,b):h.RemoveAt(this.list,b,this.removeCallback,
this)},removeBetween:function(b,d,g){return g?h.RemoveBetween(this.list,b,d):h.RemoveBetween(this.list,b,d,this.removeCallback,this)},removeAll:function(b){for(var d=this.list.length;d--;)this.remove(this.list[d],b);return this},bringToTop:function(b){return h.BringToTop(this.list,b)},sendToBack:function(b){return h.SendToBack(this.list,b)},moveUp:function(b){h.MoveUp(this.list,b);return b},moveDown:function(b){h.MoveDown(this.list,b);return b},reverse:function(){this.list.reverse();return this},
shuffle:function(){h.Shuffle(this.list);return this},replace:function(b,d){return h.Replace(this.list,b,d)},exists:function(b){return-1<this.list.indexOf(b)},setAll:function(b,d,g,e){h.SetAll(this.list,b,d,g,e);return this},each:function(b,d){for(var g=[null],e=2;e<arguments.length;e++)g.push(arguments[e]);for(e=0;e<this.list.length;e++)g[0]=this.list[e],b.apply(d,g)},shutdown:function(){this.removeAll();this.list=[]},destroy:function(){this.removeAll();this.removeCallback=this.addCallback=this.parent=
null},length:{get:function(){return this.list.length}},first:{get:function(){this.position=0;return 0<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});p.exports=a},function(p,u,a){u=a(0);var h=
a(112),f=a(445),c=a(446),b=a(56),d=a(180);a=new u({initialize:function(g,e,l,k){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=0);this.type=b.ELLIPSE;this.x=g;this.y=e;this.width=l;this.height=k},contains:function(g,e){return h(this,g,e)},getPoint:function(g,e){return f(this,g,e)},getPoints:function(g,e,l){return c(this,g,e,l)},getRandomPoint:function(g){return d(this,g)},setTo:function(g,e,l,k){this.x=g;this.y=e;this.width=l;this.height=k;return this},setEmpty:function(){this.height=
this.width=0;return this},setPosition:function(g,e){void 0===e&&(e=g);this.x=g;this.y=e;return this},setSize:function(g,e){void 0===e&&(e=g);this.width=g;this.height=e;return this},isEmpty:function(){return 0>=this.width||0>=this.height},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(g){this.x=g+this.width/2}},right:{get:function(){return this.x+
this.width/2},set:function(g){this.x=g-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(g){this.y=g+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(g){this.y=g-this.height/2}}});p.exports=a},function(p,u){p.exports=function(a,h,f){if(0>=a.width||0>=a.height)return!1;h=(h-a.x)/a.width;a=(f-a.y)/a.height;return.25>h*h+a*a}},function(p,u,a){var h=a(275);u=a(0);var f=a(75),c=a(9),b=a(207),d=a(2),g=a(6),e=a(7),l=a(437),k=a(149),m=a(73);a=new u({Extends:c,
initialize:function(n,q,r){c.call(this);r?q&&!Array.isArray(q)&&(q=[q]):Array.isArray(q)?e(q[0])&&(r=q,q=null):e(q)&&(r=q,q=null);this.scene=n;this.children=new k;this.isParent=!0;this.type="Group";this.classType=d(r,"classType",m);this.name=d(r,"name","");this.active=d(r,"active",!0);this.maxSize=d(r,"maxSize",-1);this.defaultKey=d(r,"defaultKey",null);this.defaultFrame=d(r,"defaultFrame",null);this.runChildUpdate=d(r,"runChildUpdate",!1);this.createCallback=d(r,"createCallback",null);this.removeCallback=
d(r,"removeCallback",null);this.createMultipleCallback=d(r,"createMultipleCallback",null);this.internalCreateCallback=d(r,"internalCreateCallback",null);this.internalRemoveCallback=d(r,"internalRemoveCallback",null);q&&this.addMultiple(q);r&&this.createMultiple(r);this.on(f.ADDED_TO_SCENE,this.addedToScene,this);this.on(f.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},
create:function(n,q,r,t,w,v){void 0===n&&(n=0);void 0===q&&(q=0);void 0===r&&(r=this.defaultKey);void 0===t&&(t=this.defaultFrame);void 0===w&&(w=!0);void 0===v&&(v=!0);if(this.isFull())return null;n=new this.classType(this.scene,n,q,r,t);n.addToDisplayList(this.scene.sys.displayList);n.addToUpdateList();n.visible=w;n.setActive(v);this.add(n);return n},createMultiple:function(n){if(this.isFull())return[];Array.isArray(n)||(n=[n]);var q=[];if(n[0].key)for(var r=0;r<n.length;r++){var t=this.createFromConfig(n[r]);
q=q.concat(t)}return q},createFromConfig:function(n){if(this.isFull())return[];this.classType=d(n,"classType",this.classType);var q=d(n,"key",void 0),r=d(n,"frame",null),t=d(n,"visible",!0),w=d(n,"active",!0),v=[];if(void 0===q)return v;Array.isArray(q)||(q=[q]);Array.isArray(r)||(r=[r]);var x=d(n,"repeat",0),y=d(n,"randomKey",!1),A=d(n,"randomFrame",!1),B=d(n,"yoyo",!1),z=d(n,"quantity",!1),C=d(n,"frameQuantity",1),E=d(n,"max",0);q=l(q,r,{max:E,qty:z?z:C,random:y,randomB:A,repeat:x,yoyo:B});n.createCallback&&
(this.createCallback=n.createCallback);n.removeCallback&&(this.removeCallback=n.removeCallback);for(r=0;r<q.length;r++){x=this.create(0,0,q[r].a,q[r].b,t,w);if(!x)break;v.push(x)}t=g(n,"setXY.x",0);w=g(n,"setXY.y",0);q=g(n,"setXY.stepX",0);r=g(n,"setXY.stepY",0);h.SetXY(v,t,w,q,r);t=g(n,"setRotation.value",0);w=g(n,"setRotation.step",0);h.SetRotation(v,t,w);t=g(n,"setScale.x",1);w=g(n,"setScale.y",t);q=g(n,"setScale.stepX",0);r=g(n,"setScale.stepY",0);h.SetScale(v,t,w,q,r);t=g(n,"setOrigin.x",.5);
w=g(n,"setOrigin.y",t);q=g(n,"setOrigin.stepX",0);r=g(n,"setOrigin.stepY",0);h.SetOrigin(v,t,w,q,r);t=g(n,"setAlpha.value",1);w=g(n,"setAlpha.step",0);h.SetAlpha(v,t,w);t=g(n,"setDepth.value",0);w=g(n,"setDepth.step",0);h.SetDepth(v,t,w);t=g(n,"setScrollFactor.x",1);w=g(n,"setScrollFactor.y",t);q=g(n,"setScrollFactor.stepX",0);r=g(n,"setScrollFactor.stepY",0);h.SetScrollFactor(v,t,w,q,r);t=d(n,"hitArea",null);w=d(n,"hitAreaCallback",null);t&&h.SetHitArea(v,t,w);(n=d(n,"gridAlign",!1))&&h.GridAlign(v,
n);this.createMultipleCallback&&this.createMultipleCallback.call(this,v);return v},preUpdate:function(n,q){if(this.runChildUpdate&&0!==this.children.size)for(var r=this.children.entries.slice(),t=0;t<r.length;t++){var w=r[t];w.active&&w.update(n,q)}},add:function(n,q){void 0===q&&(q=!1);if(this.isFull())return this;this.children.set(n);this.internalCreateCallback&&this.internalCreateCallback.call(this,n);this.createCallback&&this.createCallback.call(this,n);q&&(n.addToDisplayList(this.scene.sys.displayList),
n.addToUpdateList());n.on(f.DESTROY,this.remove,this);return this},addMultiple:function(n,q){void 0===q&&(q=!1);if(Array.isArray(n))for(var r=0;r<n.length;r++)this.add(n[r],q);return this},remove:function(n,q,r){void 0===q&&(q=!1);void 0===r&&(r=!1);if(!this.children.contains(n))return this;this.children.delete(n);this.internalRemoveCallback&&this.internalRemoveCallback.call(this,n);this.removeCallback&&this.removeCallback.call(this,n);n.off(f.DESTROY,this.remove,this);r?n.destroy():q&&(n.removeFromDisplayList(),
n.removeFromUpdateList());return this},clear:function(n,q){void 0===n&&(n=!1);void 0===q&&(q=!1);for(var r=this.children,t=0;t<r.size;t++){var w=r.entries[t];w.off(f.DESTROY,this.remove,this);q?w.destroy():n&&(w.removeFromDisplayList(),w.removeFromUpdateList())}this.children.clear();return this},contains:function(n){return this.children.contains(n)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(n,q,r,t){return b(this.children.entries,
n,q,r,t)},getFirst:function(n,q,r,t,w,v,x){return this.getHandler(!0,1,n,q,r,t,w,v,x)},getFirstNth:function(n,q,r,t,w,v,x,y){return this.getHandler(!0,n,q,r,t,w,v,x,y)},getLast:function(n,q,r,t,w,v,x){return this.getHandler(!1,1,n,q,r,t,w,v,x)},getLastNth:function(n,q,r,t,w,v,x,y){return this.getHandler(!1,n,q,r,t,w,v,x,y)},getHandler:function(n,q,r,t,w,v,x,y,A){void 0===r&&(r=!1);void 0===t&&(t=!1);var B=0,z=this.children.entries;if(n)for(n=0;n<z.length;n++){var C=z[n];if(C.active===r){if(B++,B===
q)break}else C=null}else for(n=z.length-1;0<=n;n--)if(C=z[n],C.active===r){if(B++,B===q)break}else C=null;return C?("number"===typeof w&&(C.x=w),"number"===typeof v&&(C.y=v),C):t?this.create(w,v,x,y,A):null},get:function(n,q,r,t,w){return this.getFirst(!1,!0,n,q,r,t,w)},getFirstAlive:function(n,q,r,t,w,v){return this.getFirst(!0,n,q,r,t,w,v)},getFirstDead:function(n,q,r,t,w,v){return this.getFirst(!1,n,q,r,t,w,v)},playAnimation:function(n,q){h.PlayAnimation(this.children.entries,n,q);return this},
isFull:function(){return-1===this.maxSize?!1:this.children.size>=this.maxSize},countActive:function(n){void 0===n&&(n=!0);for(var q=0,r=0;r<this.children.size;r++)this.children.entries[r].active===n&&q++;return q},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var n=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-n},setActive:function(n){this.active=n;return this},setName:function(n){this.name=n;return this},propertyValueSet:function(n,q,r,t,w){h.PropertyValueSet(this.children.entries,
n,q,r,t,w);return this},propertyValueInc:function(n,q,r,t,w){h.PropertyValueInc(this.children.entries,n,q,r,t,w);return this},setX:function(n,q){h.SetX(this.children.entries,n,q);return this},setY:function(n,q){h.SetY(this.children.entries,n,q);return this},setXY:function(n,q,r,t){h.SetXY(this.children.entries,n,q,r,t);return this},incX:function(n,q){h.IncX(this.children.entries,n,q);return this},incY:function(n,q){h.IncY(this.children.entries,n,q);return this},incXY:function(n,q,r,t){h.IncXY(this.children.entries,
n,q,r,t);return this},shiftPosition:function(n,q,r){h.ShiftPosition(this.children.entries,n,q,r);return this},angle:function(n,q){h.Angle(this.children.entries,n,q);return this},rotate:function(n,q){h.Rotate(this.children.entries,n,q);return this},rotateAround:function(n,q){h.RotateAround(this.children.entries,n,q);return this},rotateAroundDistance:function(n,q,r){h.RotateAroundDistance(this.children.entries,n,q,r);return this},setAlpha:function(n,q){h.SetAlpha(this.children.entries,n,q);return this},
setTint:function(n,q,r,t){h.SetTint(this.children.entries,n,q,r,t);return this},setOrigin:function(n,q,r,t){h.SetOrigin(this.children.entries,n,q,r,t);return this},scaleX:function(n,q){h.ScaleX(this.children.entries,n,q);return this},scaleY:function(n,q){h.ScaleY(this.children.entries,n,q);return this},scaleXY:function(n,q,r,t){h.ScaleXY(this.children.entries,n,q,r,t);return this},setDepth:function(n,q){h.SetDepth(this.children.entries,n,q);return this},setBlendMode:function(n){h.SetBlendMode(this.children.entries,
n);return this},setHitArea:function(n,q){h.SetHitArea(this.children.entries,n,q);return this},shuffle:function(){h.Shuffle(this.children.entries);return this},kill:function(n){this.children.contains(n)&&n.setActive(!1)},killAndHide:function(n){this.children.contains(n)&&(n.setActive(!1),n.setVisible(!1))},setVisible:function(n,q,r){h.SetVisible(this.children.entries,n,q,r);return this},toggleVisible:function(){h.ToggleVisible(this.children.entries);return this},destroy:function(n,q){void 0===n&&(n=
!1);void 0===q&&(q=!1);this.scene&&!this.ignoreDestroy&&(this.emit(f.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(q,n),this.children=this.scene=void 0)}});p.exports=a},function(p,u,a){var h=a(12);p.exports=function(f,c,b,d,g,e){d=h.getTintAppendFloatAlpha(b.fillColor,b.fillAlpha*d);for(var l=b.pathData,k=b.pathIndexes,m=0;m<k.length;m+=3){var n=2*k[m],q=2*k[m+1],r=2*k[m+2],t=l[n+0]-g,w=l[n+1]-e;n=l[q+0]-g;var v=l[q+1]-e;q=l[r+0]-g;var x=l[r+1]-e;r=c.getX(t,
w);t=c.getY(t,w);w=c.getX(n,v);n=c.getY(n,v);v=c.getX(q,x);q=c.getY(q,x);f.batchTri(b,r,t,w,n,v,q,0,0,1,1,d,d,d,2)}}},function(p,u){p.exports=function(a,h,f){var c=a.x3-a.x1,b=a.y3-a.y1,d=a.x2-a.x1,g=a.y2-a.y1;h-=a.x1;var e=f-a.y1;a=c*c+b*b;f=c*d+b*g;c=c*h+b*e;b=d*d+g*g;d=d*h+g*e;g=a*b-f*f;g=0===g?0:1/g;h=(b*c-f*d)*g;a=(a*d-f*c)*g;return 0<=h&&0<=a&&1>h+a}},function(p,u,a){function h(b,d,g,e){b-=g;d-=e;return Math.sqrt(b*b+d*d)}u=a(0);var f=a(10),c=a(3);a=new u({initialize:function(b,d,g){this.vertex1=
b;this.vertex2=d;this.vertex3=g;this.bounds=new f;this._inCenter=new c},getInCenter:function(b){void 0===b&&(b=!0);var d=this.vertex1,g=this.vertex2,e=this.vertex3;if(b){b=d.x;d=d.y;var l=g.x;g=g.y;var k=e.x;e=e.y}else b=d.vx,d=d.vy,l=g.vx,g=g.vy,k=e.vx,e=e.vy;var m=h(k,e,l,g),n=h(b,d,k,e),q=h(l,g,b,d),r=m+n+q;return this._inCenter.set((b*m+l*n+k*q)/r,(d*m+g*n+e*q)/r)},contains:function(b,d,g){var e=this.vertex1,l=this.vertex2,k=this.vertex3,m=e.vx,n=e.vy,q=l.vx,r=l.vy,t=k.vx,w=k.vy;if(g){t=g.a;w=
g.b;var v=g.c,x=g.d,y=g.e;g=g.f;m=e.vx*t+e.vy*v+y;n=e.vx*w+e.vy*x+g;q=l.vx*t+l.vy*v+y;r=l.vx*w+l.vy*x+g;t=k.vx*t+k.vy*v+y;w=k.vx*w+k.vy*x+g}e=t-m;l=w-n;q-=m;r-=n;b-=m;k=d-n;d=e*e+l*l;n=e*q+l*r;m=e*b+l*k;e=q*q+r*r;b=q*b+r*k;r=d*e-n*n;r=0===r?0:1/r;q=(e*m-n*b)*r;d=(d*b-n*m)*r;return 0<=q&&0<=d&&1>q+d},isCounterClockwise:function(b){var d=this.vertex1,g=this.vertex2,e=this.vertex3;d=(g.vx-d.vx)*(e.vy-d.vy)-(g.vy-d.vy)*(e.vx-d.vx);return 0>=b?0<=d:0>d},load:function(b,d,g,e,l){g=this.vertex1.load(b,d,
g,e,l);g=this.vertex2.load(b,d,g,e,l);return g=this.vertex3.load(b,d,g,e,l)},transformCoordinatesLocal:function(b,d,g,e){this.vertex1.transformCoordinatesLocal(b,d,g,e);this.vertex2.transformCoordinatesLocal(b,d,g,e);this.vertex3.transformCoordinatesLocal(b,d,g,e);return this},updateBounds:function(){var b=this.vertex1,d=this.vertex2,g=this.vertex3,e=this.bounds;e.x=Math.min(b.vx,d.vx,g.vx);e.y=Math.min(b.vy,d.vy,g.vy);e.width=Math.max(b.vx,d.vx,g.vx)-e.x;e.height=Math.max(b.vy,d.vy,g.vy)-e.y;return this},
isInView:function(b,d,g,e,l,k,m,n,q,r,t){var w=this.vertex1.update(l,k,m,n,q,r,t,e),v=this.vertex2.update(l,k,m,n,q,r,t,e);e=this.vertex3.update(l,k,m,n,q,r,t,e);if(0>=w.ta&&0>=v.ta&&0>=e.ta||d&&!this.isCounterClockwise(g))return!1;d=this.bounds;d.x=Math.min(w.tx,v.tx,e.tx);d.y=Math.min(w.ty,v.ty,e.ty);d.width=Math.max(w.tx,v.tx,e.tx)-d.x;d.height=Math.max(w.ty,v.ty,e.ty)-d.y;w=b.x+b.width;v=b.y+b.height;return 0>=d.width||0>=d.height||0>=b.width||0>=b.height?!1:!(d.right<b.x||d.bottom<b.y||d.x>w||
d.y>v)},translate:function(b,d){void 0===d&&(d=0);var g=this.vertex1,e=this.vertex2,l=this.vertex3;g.x+=b;g.y+=d;e.x+=b;e.y+=d;l.x+=b;l.y+=d;return this},x:{get:function(){return this.getInCenter().x},set:function(b){var d=this.getInCenter();this.translate(b-d.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(b){var d=this.getInCenter();this.translate(0,b-d.y)}},alpha:{get:function(){return(this.vertex1.alpha+this.vertex2.alpha+this.vertex3.alpha)/3},set:function(b){this.vertex1.alpha=
b;this.vertex2.alpha=b;this.vertex3.alpha=b}},depth:{get:function(){return(this.vertex1.vz+this.vertex2.vz+this.vertex3.vz)/3}},destroy:function(){this.vertex3=this.vertex2=this.vertex1=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(12),f=a(39);a=new u({Extends:f,initialize:function(c,b,d,g,e,l,k,m,n,q){void 0===l&&(l=16777215);void 0===k&&(k=1);void 0===m&&(m=0);void 0===n&&(n=0);void 0===q&&(q=0);f.call(this,c,b,d);this.vz=this.vy=this.vx=0;this.nx=m;this.ny=n;this.nz=q;this.u=g;this.v=e;this.color=
l;this.alpha=k;this.ta=this.ty=this.tx=0},setUVs:function(c,b){this.u=c;this.v=b;return this},transformCoordinatesLocal:function(c,b,d,g){var e=this.x,l=this.y,k=this.z;c=c.val;var m=e*c[1]+l*c[5]+k*c[9]+c[13],n=e*c[2]+l*c[6]+k*c[10]+c[14],q=e*c[3]+l*c[7]+k*c[11]+c[15];this.vx=(e*c[0]+l*c[4]+k*c[8]+c[12])/q*b;this.vy=-(m/q)*d;this.vz=0>=g?n/q:-(n/q)},update:function(c,b,d,g,e,l,k,m){c=this.vx*c+this.vy*d+e;b=this.vx*b+this.vy*g+l;k&&(c=Math.round(c),b=Math.round(b));this.tx=c;this.ty=b;this.ta=this.alpha*
m;return this},load:function(c,b,d,g,e){c[++d]=this.tx;c[++d]=this.ty;c[++d]=this.u;c[++d]=this.v;c[++d]=g;c[++d]=e;b[++d]=h.getTintAppendFloatAlpha(this.color,this.ta);return d}});p.exports=a},function(p,u,a){var h={};p.exports=h;var f=a(166),c=a(32),b=a(84),d=a(41);(function(){h.create=function(g){return c.extend({id:c.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},g)};h.setModified=function(g,e,l,k){f.trigger(g,"compositeModified",
g);g.isModified=e;l&&g.parent&&h.setModified(g.parent,e,l,k);if(k)for(var m=0;m<g.composites.length;m++)h.setModified(g.composites[m],e,l,k)};h.add=function(g,e){var l=[].concat(e);f.trigger(g,"beforeAdd",{object:e});for(var k=0;k<l.length;k++){var m=l[k];switch(m.type){case "body":if(m.parent!==m){c.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}h.addBody(g,m);break;case "constraint":h.addConstraint(g,m);break;case "composite":h.addComposite(g,
m);break;case "mouseConstraint":h.addConstraint(g,m.constraint)}}f.trigger(g,"afterAdd",{object:e});return g};h.remove=function(g,e,l){var k=[].concat(e);f.trigger(g,"beforeRemove",{object:e});for(var m=0;m<k.length;m++){var n=k[m];switch(n.type){case "body":h.removeBody(g,n,l);break;case "constraint":h.removeConstraint(g,n,l);break;case "composite":h.removeComposite(g,n,l);break;case "mouseConstraint":h.removeConstraint(g,n.constraint)}}f.trigger(g,"afterRemove",{object:e});return g};h.addComposite=
function(g,e){g.composites.push(e);e.parent=g;h.setModified(g,!0,!0,!1);return g};h.removeComposite=function(g,e,l){var k=g.composites.indexOf(e);-1!==k&&(h.removeCompositeAt(g,k),h.setModified(g,!0,!0,!1));if(l)for(l=0;l<g.composites.length;l++)h.removeComposite(g.composites[l],e,!0);return g};h.removeCompositeAt=function(g,e){g.composites.splice(e,1);h.setModified(g,!0,!0,!1);return g};h.addBody=function(g,e){g.bodies.push(e);h.setModified(g,!0,!0,!1);return g};h.removeBody=function(g,e,l){var k=
g.bodies.indexOf(e);-1!==k&&(h.removeBodyAt(g,k),h.setModified(g,!0,!0,!1));if(l)for(l=0;l<g.composites.length;l++)h.removeBody(g.composites[l],e,!0);return g};h.removeBodyAt=function(g,e){g.bodies.splice(e,1);h.setModified(g,!0,!0,!1);return g};h.addConstraint=function(g,e){g.constraints.push(e);h.setModified(g,!0,!0,!1);return g};h.removeConstraint=function(g,e,l){var k=g.constraints.indexOf(e);-1!==k&&h.removeConstraintAt(g,k);if(l)for(l=0;l<g.composites.length;l++)h.removeConstraint(g.composites[l],
e,!0);return g};h.removeConstraintAt=function(g,e){g.constraints.splice(e,1);h.setModified(g,!0,!0,!1);return g};h.clear=function(g,e,l){if(l)for(l=0;l<g.composites.length;l++)h.clear(g.composites[l],e,!0);e?g.bodies=g.bodies.filter(function(k){return k.isStatic}):g.bodies.length=0;g.constraints.length=0;g.composites.length=0;h.setModified(g,!0,!0,!1);return g};h.allBodies=function(g){for(var e=[].concat(g.bodies),l=0;l<g.composites.length;l++)e=e.concat(h.allBodies(g.composites[l]));return e};h.allConstraints=
function(g){for(var e=[].concat(g.constraints),l=0;l<g.composites.length;l++)e=e.concat(h.allConstraints(g.composites[l]));return e};h.allComposites=function(g){for(var e=[].concat(g.composites),l=0;l<g.composites.length;l++)e=e.concat(h.allComposites(g.composites[l]));return e};h.get=function(g,e,l){switch(l){case "body":var k=h.allBodies(g);break;case "constraint":k=h.allConstraints(g);break;case "composite":k=h.allComposites(g).concat(g)}if(!k)return null;g=k.filter(function(m){return m.id.toString()===
e.toString()});return 0===g.length?null:g[0]};h.move=function(g,e,l){h.remove(g,e);h.add(l,e);return g};h.rebase=function(g){for(var e=h.allBodies(g).concat(h.allConstraints(g)).concat(h.allComposites(g)),l=0;l<e.length;l++)e[l].id=c.nextId();h.setModified(g,!0,!0,!1);return g};h.translate=function(g,e,l){l=l?h.allBodies(g):g.bodies;for(var k=0;k<l.length;k++)d.translate(l[k],e);h.setModified(g,!0,!0,!1);return g};h.rotate=function(g,e,l,k){var m=Math.cos(e),n=Math.sin(e);k=k?h.allBodies(g):g.bodies;
for(var q=0;q<k.length;q++){var r=k[q],t=r.position.x-l.x,w=r.position.y-l.y;d.setPosition(r,{x:l.x+(t*m-w*n),y:l.y+(t*n+w*m)});d.rotate(r,e)}h.setModified(g,!0,!0,!1);return g};h.scale=function(g,e,l,k,m){m=m?h.allBodies(g):g.bodies;for(var n=0;n<m.length;n++){var q=m[n];d.setPosition(q,{x:k.x+(q.position.x-k.x)*e,y:k.y+(q.position.y-k.y)*l});d.scale(q,e,l)}h.setModified(g,!0,!0,!1);return g};h.bounds=function(g){g=h.allBodies(g);for(var e=[],l=0;l<g.length;l+=1){var k=g[l];e.push(k.bounds.min,k.bounds.max)}return b.create(e)}})()},
function(p,u){p.exports=function(a,h,f){return 0<=a&&a<f.width&&0<=h&&h<f.height}},function(p,u,a){u=a(0);var h=a(29),f=a(2);a=new u({initialize:function(c){void 0===c&&(c={});this.name=f(c,"name","layer");this.x=f(c,"x",0);this.y=f(c,"y",0);this.width=f(c,"width",0);this.height=f(c,"height",0);this.tileWidth=f(c,"tileWidth",0);this.tileHeight=f(c,"tileHeight",0);this.baseTileWidth=f(c,"baseTileWidth",this.tileWidth);this.baseTileHeight=f(c,"baseTileHeight",this.tileHeight);this.orientation=f(c,"orientation",
h.ORTHOGONAL);this.widthInPixels=f(c,"widthInPixels",this.width*this.baseTileWidth);this.heightInPixels=f(c,"heightInPixels",this.height*this.baseTileHeight);this.alpha=f(c,"alpha",1);this.visible=f(c,"visible",!0);this.properties=f(c,"properties",[]);this.indexes=f(c,"indexes",[]);this.collideIndexes=f(c,"collideIndexes",[]);this.callbacks=f(c,"callbacks",[]);this.bodies=f(c,"bodies",[]);this.data=f(c,"data",[]);this.tilemapLayer=f(c,"tilemapLayer",null);this.hexSideLength=f(c,"hexSideLength",0)}});
p.exports=a},function(p,u,a){u=a(0);var h=a(29),f=a(2);a=new u({initialize:function(c){void 0===c&&(c={});this.name=f(c,"name","map");this.width=f(c,"width",0);this.height=f(c,"height",0);this.infinite=f(c,"infinite",!1);this.tileWidth=f(c,"tileWidth",0);this.tileHeight=f(c,"tileHeight",0);this.widthInPixels=f(c,"widthInPixels",this.width*this.tileWidth);this.heightInPixels=f(c,"heightInPixels",this.height*this.tileHeight);this.format=f(c,"format",null);this.orientation=f(c,"orientation",h.ORTHOGONAL);
this.renderOrder=f(c,"renderOrder","right-down");this.version=f(c,"version","1");this.properties=f(c,"properties",{});this.layers=f(c,"layers",[]);this.images=f(c,"images",[]);this.objects=f(c,"objects",{});this.collision=f(c,"collision",{});this.tilesets=f(c,"tilesets",[]);this.imageCollections=f(c,"imageCollections",[]);this.tiles=f(c,"tiles",[]);this.hexSideLength=f(c,"hexSideLength",0)}});p.exports=a},function(p,u,a){u=new (a(0))({initialize:function(h,f,c,b,d,g,e,l){if(void 0===c||0>=c)c=32;
if(void 0===b||0>=b)b=32;void 0===d&&(d=0);void 0===g&&(g=0);void 0===e&&(e={});void 0===l&&(l={});this.name=h;this.firstgid=f;this.tileWidth=c;this.tileHeight=b;this.tileMargin=d;this.tileSpacing=g;this.tileProperties=e;this.tileData=l;this.glTexture=this.image=null;this.total=this.columns=this.rows=0;this.texCoordinates=[]},getTileProperties:function(h){return this.containsTileIndex(h)?this.tileProperties[h-this.firstgid]:null},getTileData:function(h){return this.containsTileIndex(h)?this.tileData[h-
this.firstgid]:null},getTileCollisionGroup:function(h){return(h=this.getTileData(h))&&h.objectgroup?h.objectgroup:null},containsTileIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},getTileTextureCoordinates:function(h){return this.containsTileIndex(h)?this.texCoordinates[h-this.firstgid]:null},setImage:function(h){this.image=h;this.glTexture=h.get().source.glTexture;this.updateTileData(this.image.source[0].width,this.image.source[0].height);return this},setTileSize:function(h,
f){void 0!==h&&(this.tileWidth=h);void 0!==f&&(this.tileHeight=f);this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height);return this},setSpacing:function(h,f){void 0!==h&&(this.tileMargin=h);void 0!==f&&(this.tileSpacing=f);this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height);return this},updateTileData:function(h,f){f=(f-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing);h=(h-2*this.tileMargin+this.tileSpacing)/
(this.tileWidth+this.tileSpacing);0===f%1&&0===h%1||console.warn("Image tile area not tile size multiple in: "+this.name);f=Math.floor(f);h=Math.floor(h);this.rows=f;this.columns=h;this.total=f*h;this.texCoordinates.length=0;f=h=this.tileMargin;for(var c=0;c<this.rows;c++){for(var b=0;b<this.columns;b++)this.texCoordinates.push({x:h,y:f}),h+=this.tileWidth+this.tileSpacing;h=this.tileMargin;f+=this.tileHeight+this.tileSpacing}return this}});p.exports=u},function(p,u){p.exports={TOP_LEFT:0,TOP_CENTER:1,
TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(p,u){p.exports=function(a,h,f){void 0===f&&(f=1E-4);return Math.abs(a-h)<f}},function(p,u,a){u=a(0);var h=a(11),f=a(15);a=a(1068);a=new u({Extends:f,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,a],initialize:function(c,b,d,g,e){f.call(this,
c,"Image");this._crop=this.resetCropObject();this.setTexture(g,e);this.setPosition(b,d);this.setSizeToFrame();this.setOriginFromFrame();this.initPipeline()}});p.exports=a},function(p,u){p.exports=function(a,h){return a.hasOwnProperty(h)}},function(p,u,a){var h=a(77);p.exports=function(f,c){f=h(f);for(var b in c)f.hasOwnProperty(b)||(f[b]=c[b]);return f}},function(p,u,a){var h={};p.exports=h;var f=a(64),c=a(83),b=a(165),d=a(84),g=a(271),e=a(32);(function(){h._warming=.4;h._torqueDampen=1;h._minLength=
1E-6;h.create=function(l){l.bodyA&&!l.pointA&&(l.pointA={x:0,y:0});l.bodyB&&!l.pointB&&(l.pointB={x:0,y:0});var k=l.bodyA?c.add(l.bodyA.position,l.pointA):l.pointA,m=l.bodyB?c.add(l.bodyB.position,l.pointB):l.pointB;k=c.magnitude(c.sub(k,m));l.length="undefined"!==typeof l.length?l.length:k;l.id=l.id||e.nextId();l.label=l.label||"Constraint";l.type="constraint";l.stiffness=l.stiffness||(0<l.length?1:.7);l.damping=l.damping||0;l.angularStiffness=l.angularStiffness||0;l.angleA=l.bodyA?l.bodyA.angle:
l.angleA;l.angleB=l.bodyB?l.bodyB.angle:l.angleB;l.plugin={};k={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};0===l.length&&.1<l.stiffness?(k.type="pin",k.anchors=!1):.9>l.stiffness&&(k.type="spring");l.render=e.extend(k,l.render);return l};h.preSolveAll=function(l){for(var k=0;k<l.length;k+=1){var m=l[k],n=m.constraintImpulse;m.isStatic||0===n.x&&0===n.y&&0===n.angle||(m.position.x+=n.x,m.position.y+=n.y,m.angle+=
n.angle)}};h.solveAll=function(l,k){for(var m=0;m<l.length;m+=1){var n=l[m],q=!n.bodyA||n.bodyA&&n.bodyA.isStatic;n=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(q||n)&&h.solve(l[m],k)}for(m=0;m<l.length;m+=1)n=l[m],q=!n.bodyA||n.bodyA&&n.bodyA.isStatic,n=!n.bodyB||n.bodyB&&n.bodyB.isStatic,q||n||h.solve(l[m],k)};h.solve=function(l,k){var m=l.bodyA,n=l.bodyB,q=l.pointA,r=l.pointB;if(m||n){m&&!m.isStatic&&(c.rotate(q,m.angle-l.angleA,q),l.angleA=m.angle);n&&!n.isStatic&&(c.rotate(r,n.angle-l.angleB,r),l.angleB=
n.angle);var t=q,w=r;m&&(t=c.add(m.position,q));n&&(w=c.add(n.position,r));if(t&&w){var v=c.sub(t,w),x=c.magnitude(v);x<h._minLength&&(x=h._minLength);k=c.mult(v,(x-l.length)/x*(1>l.stiffness?l.stiffness*k:l.stiffness));t=(m?m.inverseMass:0)+(n?n.inverseMass:0);w=t+((m?m.inverseInertia:0)+(n?n.inverseInertia:0));if(l.damping){var y=c.create();var A=c.div(v,x);y=c.sub(n&&c.sub(n.position,n.positionPrev)||y,m&&c.sub(m.position,m.positionPrev)||y);y=c.dot(A,y)}m&&!m.isStatic&&(v=m.inverseMass/t,m.constraintImpulse.x-=
k.x*v,m.constraintImpulse.y-=k.y*v,m.position.x-=k.x*v,m.position.y-=k.y*v,l.damping&&(m.positionPrev.x-=l.damping*A.x*y*v,m.positionPrev.y-=l.damping*A.y*y*v),q=c.cross(q,k)/w*h._torqueDampen*m.inverseInertia*(1-l.angularStiffness),m.constraintImpulse.angle-=q,m.angle-=q);n&&!n.isStatic&&(v=n.inverseMass/t,n.constraintImpulse.x+=k.x*v,n.constraintImpulse.y+=k.y*v,n.position.x+=k.x*v,n.position.y+=k.y*v,l.damping&&(n.positionPrev.x+=l.damping*A.x*y*v,n.positionPrev.y+=l.damping*A.y*y*v),q=c.cross(r,
k)/w*h._torqueDampen*n.inverseInertia*(1-l.angularStiffness),n.constraintImpulse.angle+=q,n.angle+=q)}}};h.postSolveAll=function(l){for(var k=0;k<l.length;k++){var m=l[k],n=m.constraintImpulse;if(!(m.isStatic||0===n.x&&0===n.y&&0===n.angle)){b.set(m,!1);for(var q=0;q<m.parts.length;q++){var r=m.parts[q];f.translate(r.vertices,n);0<q&&(r.position.x+=n.x,r.position.y+=n.y);0!==n.angle&&(f.rotate(r.vertices,n.angle,m.position),g.rotate(r.axes,n.angle),0<q&&c.rotateAbout(r.position,n.angle,m.position,
r.position));d.update(r.bounds,r.vertices,m.velocity)}n.angle*=h._warming;n.x*=h._warming;n.y*=h._warming}}};h.pointAWorld=function(l){return{x:(l.bodyA?l.bodyA.position.x:0)+l.pointA.x,y:(l.bodyA?l.bodyA.position.y:0)+l.pointA.y}};h.pointBWorld=function(l){return{x:(l.bodyB?l.bodyB.position.x:0)+l.pointB.x,y:(l.bodyB?l.bodyB.position.y:0)+l.pointB.y}}})()},function(p,u,a){var h=a(35),f=a(65),c=a(66);u=a(0);var b=a(11),d=a(15),g=a(10),e=a(57);a=new u({Extends:d,Mixins:[b.Depth,b.GetBounds,b.Origin,
b.Transform,b.ScrollFactor,b.Visible],initialize:function(l,k,m,n,q){void 0===n&&(n=1);void 0===q&&(q=n);d.call(this,l,"Zone");this.setPosition(k,m);this.width=n;this.height=q;this.blendMode=h.NORMAL;this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,k,m){void 0===m&&(m=!0);this.width=l;this.height=
k;this.updateDisplayOrigin();var n=this.input;m&&n&&!n.customHitArea&&(n.hitArea.width=l,n.hitArea.height=k);return this},setDisplaySize:function(l,k){this.displayWidth=l;this.displayHeight=k;return this},setCircleDropZone:function(l){return this.setDropZone(new f(0,0,l),c)},setRectangleDropZone:function(l,k){return this.setDropZone(new g(0,0,l,k),e)},setDropZone:function(l,k){void 0===l?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(l,k,!0);return this},setAlpha:function(){},
setBlendMode:function(){},renderCanvas:function(l,k,m){m.addToRenderList(k)},renderWebGL:function(l,k,m){m.addToRenderList(k)}});p.exports=a},function(p,u){p.exports=function(a){return 2*(a.width+a.height)}},function(p,u){p.exports=function(a){for(var h=a.length-1;0<h;h--){var f=Math.floor(Math.random()*(h+1)),c=a[h];a[h]=a[f];a[f]=c}return a}},function(p,u,a){p.exports={ADD_ANIMATION:a(724),ANIMATION_COMPLETE:a(725),ANIMATION_COMPLETE_KEY:a(726),ANIMATION_REPEAT:a(727),ANIMATION_RESTART:a(728),ANIMATION_START:a(729),
ANIMATION_STOP:a(730),ANIMATION_UPDATE:a(731),PAUSE_ALL:a(732),REMOVE_ANIMATION:a(733),RESUME_ALL:a(734)}},function(p,u,a){u=a(0);var h=a(11),f=a(36),c=a(9),b=a(37),d=a(10),g=a(25),e=a(187),l=a(3);a=new u({Extends:c,Mixins:[h.Alpha,h.Visible],initialize:function(k,m,n,q){void 0===k&&(k=0);void 0===m&&(m=0);void 0===n&&(n=0);void 0===q&&(q=0);c.call(this);this.id=0;this.name="";this.useBounds=this.roundPixels=!1;this.worldView=new d;this.dirty=!0;this._x=k;this._y=m;this._width=n;this._height=q;this._bounds=
new d;this._scrollY=this._scrollX=0;this._zoomY=this._zoomX=1;this._rotation=0;this.matrix=new g;this.transparent=!0;this.backgroundColor=e("rgba(0,0,0,0)");this.disableCull=!1;this.culledObjects=[];this.midPoint=new l(n/2,q/2);this.originY=this.originX=.5;this._customViewport=!1;this._maskCamera=this.mask=null;this.renderList=[]},addToRenderList:function(k){this.renderList.push(k)},setOrigin:function(k,m){void 0===k&&(k=.5);void 0===m&&(m=k);this.originX=k;this.originY=m;return this},getScroll:function(k,
m,n){void 0===n&&(n=new l);var q=.5*this.height;n.x=k-.5*this.width;n.y=m-q;this.useBounds&&(n.x=this.clampX(n.x),n.y=this.clampY(n.y));return n},centerOnX:function(k){var m=.5*this.width;this.midPoint.x=k;this.scrollX=k-m;this.useBounds&&(this.scrollX=this.clampX(this.scrollX));return this},centerOnY:function(k){var m=.5*this.height;this.midPoint.y=k;this.scrollY=k-m;this.useBounds&&(this.scrollY=this.clampY(this.scrollY));return this},centerOn:function(k,m){this.centerOnX(k);this.centerOnY(m);return this},
centerToBounds:function(){if(this.useBounds){var k=this._bounds,m=.5*this.width,n=.5*this.height;this.midPoint.set(k.centerX,k.centerY);this.scrollX=k.centerX-m;this.scrollY=k.centerY-n}return this},centerToSize:function(){this.scrollX=.5*this.width;this.scrollY=.5*this.height;return this},cull:function(k){if(this.disableCull)return k;var m=this.matrix.matrix,n=m[0],q=m[1],r=m[2],t=m[3];if(!(n*t-q*r))return k;var w=m[4];m=m[5];for(var v=this.scrollX,x=this.scrollY,y=this.y,A=y+this.height,B=this.x,
z=B+this.width,C=this.culledObjects,E=k.length,G=C.length=0;G<E;++G){var H=k[G];if(!H.hasOwnProperty("width")||H.parentContainer)C.push(H);else{var I=H.width,K=H.height,O=H.x-v*H.scrollFactorX-I*H.originX,R=H.y-x*H.scrollFactorY-K*H.originY,F=O*n+R*r+w,J=O*q+R*t+m,N=(O+I)*q+(R+K)*t+m;(O+I)*n+(R+K)*r+w>B&&F<z&&N>y&&J<A&&C.push(H)}}return C},getWorldPoint:function(k,m,n){void 0===n&&(n=new l);var q=this.matrix.matrix,r=q[0],t=q[1],w=q[2],v=q[3],x=q[4];q=q[5];var y=r*v-t*w;if(!y)return n.x=k,n.y=m,n;
y=1/y;var A=Math.cos(this.rotation),B=Math.sin(this.rotation),z=this.scrollX,C=this.scrollY;k+=(z*A-C*B)*this.zoomX;m+=(z*B+C*A)*this.zoomY;n.x=k*v*y+m*-w*y+(w*q-v*x)*y;n.y=k*-t*y+m*r*y+(t*x-r*q)*y;return n},ignore:function(k){var m=this.id;Array.isArray(k)||(k=[k]);for(var n=0;n<k.length;n++){var q=k[n];Array.isArray(q)?this.ignore(q):q.isParent?this.ignore(q.getChildren()):q.cameraFilter|=m}return this},preRender:function(){this.renderList.length=0;var k=this.width,m=this.height,n=.5*k,q=.5*m,r=
this.zoomX,t=this.zoomY,w=this.matrix,v=k*this.originX,x=m*this.originY,y=this.scrollX,A=this.scrollY;this.useBounds&&(y=this.clampX(y),A=this.clampY(A));this.roundPixels&&(v=Math.round(v),x=Math.round(x));this.scrollX=y;this.scrollY=A;n=y+n;q=A+q;this.midPoint.set(n,q);k/=r;m/=t;this.worldView.setTo(n-k/2,q-m/2,k,m);w.applyITRS(this.x+v,this.y+x,this.rotation,r,t);w.translate(-v,-x)},clampX:function(k){var m=this._bounds,n=this.displayWidth,q=m.x+(n-this.width)/2;m=Math.max(q,q+m.width-n);k<q?k=
q:k>m&&(k=m);return k},clampY:function(k){var m=this._bounds,n=this.displayHeight,q=m.y+(n-this.height)/2;m=Math.max(q,q+m.height-n);k<q?k=q:k>m&&(k=m);return k},removeBounds:function(){this.useBounds=!1;this.dirty=!0;this._bounds.setEmpty();return this},setAngle:function(k){void 0===k&&(k=0);this.rotation=f(k);return this},setBackgroundColor:function(k){void 0===k&&(k="rgba(0,0,0,0)");this.backgroundColor=e(k);this.transparent=0===this.backgroundColor.alpha;return this},setBounds:function(k,m,n,
q,r){void 0===r&&(r=!1);this._bounds.setTo(k,m,n,q);this.useBounds=this.dirty=!0;r?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY));return this},getBounds:function(k){void 0===k&&(k=new d);var m=this._bounds;k.setTo(m.x,m.y,m.width,m.height);return k},setName:function(k){void 0===k&&(k="");this.name=k;return this},setPosition:function(k,m){void 0===m&&(m=k);this.x=k;this.y=m;return this},setRotation:function(k){void 0===k&&(k=0);this.rotation=k;
return this},setRoundPixels:function(k){this.roundPixels=k;return this},setScene:function(k){this.scene&&this._customViewport&&this.sceneManager.customViewports--;this.scene=k;k=k.sys;this.sceneManager=k.game.scene;this.scaleManager=k.scale;this.cameraManager=k.cameras;this.updateSystem();return this},setScroll:function(k,m){void 0===m&&(m=k);this.scrollX=k;this.scrollY=m;return this},setSize:function(k,m){void 0===m&&(m=k);this.width=k;this.height=m;return this},setViewport:function(k,m,n,q){this.x=
k;this.y=m;this.width=n;this.height=q;return this},setZoom:function(k,m){void 0===k&&(k=1);void 0===m&&(m=k);0===k&&(k=.001);0===m&&(m=.001);this.zoomX=k;this.zoomY=m;return this},setMask:function(k,m){void 0===m&&(m=!0);this.mask=k;this._maskCamera=m?this.cameraManager.default:this;return this},clearMask:function(k){void 0===k&&(k=!1);k&&this.mask&&this.mask.destroy();this.mask=null;return this},toJSON:function(){var k={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,
rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};this.useBounds&&(k.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height});return k},update:function(){},updateSystem:function(){if(this.scaleManager){var k=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,m=this.sceneManager;k&&!this._customViewport?m.customViewports++:
!k&&this._customViewport&&m.customViewports--;this.dirty=!0;this._customViewport=k}},destroy:function(){this.emit(b.DESTROY,this);this.removeAllListeners();this.matrix.destroy();this.culledObjects=[];this._customViewport&&this.sceneManager.customViewports--;this.renderList=[];this.cameraManager=this.sceneManager=this.scaleManager=this.scene=this._bounds=null},x:{get:function(){return this._x},set:function(k){this._x=k;this.updateSystem()}},y:{get:function(){return this._y},set:function(k){this._y=
k;this.updateSystem()}},width:{get:function(){return this._width},set:function(k){this._width=k;this.updateSystem()}},height:{get:function(){return this._height},set:function(k){this._height=k;this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(k){this._scrollX=k;this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(k){this._scrollY=k;this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(k){this._zoomY=this._zoomX=k;
this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(k){this._zoomX=k;this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(k){this._zoomY=k;this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(k){this._rotation=k;this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/
this.zoomY}}});p.exports=a},function(p,u,a){u=a(334);var h=a(335),f=a(336),c=a(337),b=a(338),d=a(339),g=a(340),e=a(341),l=a(342),k=a(343),m=a(344);a=a(345);p.exports={Power0:g,Power1:e.Out,Power2:c.Out,Power3:l.Out,Power4:k.Out,Linear:g,Quad:e.Out,Cubic:c.Out,Quart:l.Out,Quint:k.Out,Sine:m.Out,Expo:d.Out,Circ:f.Out,Elastic:b.Out,Back:u.Out,Bounce:h.Out,Stepped:a,"Quad.easeIn":e.In,"Cubic.easeIn":c.In,"Quart.easeIn":l.In,"Quint.easeIn":k.In,"Sine.easeIn":m.In,"Expo.easeIn":d.In,"Circ.easeIn":f.In,
"Elastic.easeIn":b.In,"Back.easeIn":u.In,"Bounce.easeIn":h.In,"Quad.easeOut":e.Out,"Cubic.easeOut":c.Out,"Quart.easeOut":l.Out,"Quint.easeOut":k.Out,"Sine.easeOut":m.Out,"Expo.easeOut":d.Out,"Circ.easeOut":f.Out,"Elastic.easeOut":b.Out,"Back.easeOut":u.Out,"Bounce.easeOut":h.Out,"Quad.easeInOut":e.InOut,"Cubic.easeInOut":c.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":k.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":d.InOut,"Circ.easeInOut":f.InOut,"Elastic.easeInOut":b.InOut,"Back.easeInOut":u.InOut,
"Bounce.easeInOut":h.InOut}},function(p,u){p.exports=function(a,h,f){return(h-a)*f+a}},function(p,u,a){u=a(105);a={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};var h=navigator.userAgent;/Edge\/\d+/.test(h)?a.edge=!0:/Chrome\/(\d+)/.test(h)&&!u.windowsPhone?(a.chrome=!0,a.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(h)?(a.firefox=!0,a.firefoxVersion=parseInt(RegExp.$1,
10)):/AppleWebKit/.test(h)&&u.iOS?a.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(a.ie=!0,a.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(h)?a.opera=!0:/Safari/.test(h)&&!u.windowsPhone?a.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(a.ie=!0,a.trident=!0,a.tridentVersion=parseInt(RegExp.$1,10),a.ieVersion=parseInt(RegExp.$3,10));/Silk/.test(h)&&(a.silk=!0);p.exports=a},function(p,u){p.exports=function(a,h){return Math.random()*(h-a)+a}},function(p,u){p.exports=function(a,h){return 0<a&&
0===(a&a-1)&&0<h&&0===(h&h-1)}},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=0);if(0===h)return a;a=h*Math.ceil((a-f)/h);return c?(f+a)/h:f+a}},function(p,u,a){var h=new (a(0))({initialize:function(f,c,b,d){this.w=this.z=this.y=this.x=0;"object"===typeof f?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0,this.w=f.w||0):(this.x=f||0,this.y=c||0,this.z=b||0,this.w=d||0)},clone:function(){return new h(this.x,this.y,this.z,this.w)},copy:function(f){this.x=f.x;this.y=f.y;this.z=f.z||0;this.w=f.w||
0;return this},equals:function(f){return this.x===f.x&&this.y===f.y&&this.z===f.z&&this.w===f.w},set:function(f,c,b,d){"object"===typeof f?(this.x=f.x||0,this.y=f.y||0,this.z=f.z||0,this.w=f.w||0):(this.x=f||0,this.y=c||0,this.z=b||0,this.w=d||0);return this},add:function(f){this.x+=f.x;this.y+=f.y;this.z+=f.z||0;this.w+=f.w||0;return this},subtract:function(f){this.x-=f.x;this.y-=f.y;this.z-=f.z||0;this.w-=f.w||0;return this},scale:function(f){this.x*=f;this.y*=f;this.z*=f;this.w*=f;return this},
length:function(){var f=this.x,c=this.y,b=this.z,d=this.w;return Math.sqrt(f*f+c*c+b*b+d*d)},lengthSq:function(){var f=this.x,c=this.y,b=this.z,d=this.w;return f*f+c*c+b*b+d*d},normalize:function(){var f=this.x,c=this.y,b=this.z,d=this.w,g=f*f+c*c+b*b+d*d;0<g&&(g=1/Math.sqrt(g),this.x=f*g,this.y=c*g,this.z=b*g,this.w=d*g);return this},dot:function(f){return this.x*f.x+this.y*f.y+this.z*f.z+this.w*f.w},lerp:function(f,c){void 0===c&&(c=0);var b=this.x,d=this.y,g=this.z,e=this.w;this.x=b+c*(f.x-b);
this.y=d+c*(f.y-d);this.z=g+c*(f.z-g);this.w=e+c*(f.w-e);return this},multiply:function(f){this.x*=f.x;this.y*=f.y;this.z*=f.z||1;this.w*=f.w||1;return this},divide:function(f){this.x/=f.x;this.y/=f.y;this.z/=f.z||1;this.w/=f.w||1;return this},distance:function(f){var c=f.x-this.x,b=f.y-this.y,d=f.z-this.z||0;f=f.w-this.w||0;return Math.sqrt(c*c+b*b+d*d+f*f)},distanceSq:function(f){var c=f.x-this.x,b=f.y-this.y,d=f.z-this.z||0;f=f.w-this.w||0;return c*c+b*b+d*d+f*f},negate:function(){this.x=-this.x;
this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},transformMat4:function(f){var c=this.x,b=this.y,d=this.z,g=this.w;f=f.val;this.x=f[0]*c+f[4]*b+f[8]*d+f[12]*g;this.y=f[1]*c+f[5]*b+f[9]*d+f[13]*g;this.z=f[2]*c+f[6]*b+f[10]*d+f[14]*g;this.w=f[3]*c+f[7]*b+f[11]*d+f[15]*g;return this},transformQuat:function(f){var c=this.x,b=this.y,d=this.z,g=f.x,e=f.y,l=f.z;f=f.w;var k=f*c+e*d-l*b,m=f*b+l*c-g*d,n=f*d+g*b-e*c;c=-g*c-e*b-l*d;this.x=k*f+c*-g+m*-l-n*-e;this.y=m*f+c*-e+n*-g-k*-l;this.z=n*f+c*-l+
k*-e-m*-g;return this},reset:function(){this.w=this.z=this.y=this.x=0;return this}});h.prototype.sub=h.prototype.subtract;h.prototype.mul=h.prototype.multiply;h.prototype.div=h.prototype.divide;h.prototype.dist=h.prototype.distance;h.prototype.distSq=h.prototype.distanceSq;h.prototype.len=h.prototype.length;h.prototype.lenSq=h.prototype.lengthSq;p.exports=h},function(p,u,a){u=a(0);var h=a(91);a=new u({initialize:function(f,c,b,d,g,e,l){void 0===d&&(d=1);void 0===g&&(g=0);void 0===e&&(e=!0);void 0===
l&&(l=!1);this.renderer=f;this.texture=this.framebuffer=null;this.height=this.width=0;this.scale=d;this.minFilter=g;this.autoClear=e;this.autoResize=!1;this.resize(c,b);l&&this.setAutoResize(!0)},setAutoResize:function(f){f&&!this.autoResize?(this.renderer.on(h.RESIZE,this.resize,this),this.autoResize=!0):!f&&this.autoResize&&(this.renderer.off(h.RESIZE,this.resize,this),this.autoResize=!1);return this},resize:function(f,c){var b=c*this.scale;if(f*this.scale!==this.width||b!==this.height)b=this.renderer,
b.deleteFramebuffer(this.framebuffer),b.deleteTexture(this.texture),f*=this.scale,c*=this.scale,f=Math.round(f),c=Math.round(c),0>=f&&(f=1),0>=c&&(c=1),this.texture=b.createTextureFromSource(null,f,c,this.minFilter),this.framebuffer=b.createFramebuffer(f,c,this.texture,!1),this.width=f,this.height=c;return this},bind:function(f,c,b){void 0===f&&(f=!1);f&&this.renderer.flush();c&&b&&this.resize(c,b);this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1);f&&this.adjustViewport();this.autoClear&&(f=
this.renderer.gl,f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT))},adjustViewport:function(){var f=this.renderer.gl;f.viewport(0,0,this.width,this.height);f.disable(f.SCISSOR_TEST)},clear:function(){var f=this.renderer,c=f.gl;f.pushFramebuffer(this.framebuffer);c.disable(c.SCISSOR_TEST);c.clearColor(0,0,0,0);c.clear(c.COLOR_BUFFER_BIT);f.popFramebuffer();f.resetScissor()},unbind:function(f){void 0===f&&(f=!1);var c=this.renderer;f&&c.flush();return c.popFramebuffer()},destroy:function(){var f=this.renderer;
f.deleteFramebuffer(this.framebuffer);f.deleteTexture(this.texture);f.off(h.RESIZE,this.resize,this);this.texture=this.framebuffer=this.renderer=null}});p.exports=a},function(p,u){p.exports=function(a,h){var f;if(h)"string"===typeof h?f=document.getElementById(h):"object"===typeof h&&1===h.nodeType&&(f=h);else if(a.parentElement||null===h)return a;f||(f=document.body);f.appendChild(a);return a}},function(p,u){p.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,
SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,
X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(p,u){p.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(p,
u,a){u=a(0);var h=a(77),f=a(9),c=a(70),b=a(22),d=a(1),g=a(207),e=a(428);a=new u({Extends:f,initialize:function(l){f.call(this);this.game=l;this.jsonCache=l.cache.json;this.sounds=[];this.mute=!1;this.volume=1;this.pauseOnBlur=!0;this._rate=1;this._detune=0;this.locked=this.locked||!1;this.unlocked=!1;l.events.on(b.BLUR,this.onGameBlur,this);l.events.on(b.FOCUS,this.onGameFocus,this);l.events.on(b.PRE_STEP,this.update,this);l.events.once(b.DESTROY,this.destroy,this)},add:d,addAudioSprite:function(l,
k){void 0===k&&(k={});var m=this.add(l,k);m.spritemap=this.jsonCache.get(l).spritemap;for(var n in m.spritemap)if(m.spritemap.hasOwnProperty(n)){l=h(k);var q=m.spritemap[n];l.loop=q.hasOwnProperty("loop")?q.loop:!1;m.addMarker({name:n,start:q.start,duration:q.end-q.start,config:l})}return m},get:function(l){return e(this.sounds,"key",l)},getAll:function(l){return g(this.sounds,"key",l)},play:function(l,k){l=this.add(l);l.once(c.COMPLETE,l.destroy,l);return k?k.name?(l.addMarker(k),l.play(k.name)):
l.play(k):l.play()},playAudioSprite:function(l,k,m){l=this.addAudioSprite(l);l.once(c.COMPLETE,l.destroy,l);return l.play(k,m)},remove:function(l){var k=this.sounds.indexOf(l);return-1!==k?(l.destroy(),this.sounds.splice(k,1),!0):!1},removeAll:function(){this.sounds.forEach(function(l){l.destroy()});this.sounds.length=0},removeByKey:function(l){for(var k=0,m=this.sounds.length-1;0<=m;m--){var n=this.sounds[m];n.key===l&&(n.destroy(),this.sounds.splice(m,1),k++)}return k},pauseAll:function(){this.forEachActiveSound(function(l){l.pause()});
this.emit(c.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(l){l.resume()});this.emit(c.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(l){l.stop()});this.emit(c.STOP_ALL,this)},stopByKey:function(l){var k=0;this.getAll(l).forEach(function(m){m.stop()&&k++});return k},unlock:d,onBlur:d,onFocus:d,onGameBlur:function(){if(this.pauseOnBlur)this.onBlur()},onGameFocus:function(){if(this.pauseOnBlur)this.onFocus()},update:function(l,k){this.unlocked&&(this.locked=
this.unlocked=!1,this.emit(c.UNLOCKED,this));for(var m=this.sounds.length-1;0<=m;m--)this.sounds[m].pendingRemove&&this.sounds.splice(m,1);this.sounds.forEach(function(n){n.update(l,k)})},destroy:function(){this.game.events.off(b.BLUR,this.onGameBlur,this);this.game.events.off(b.FOCUS,this.onGameFocus,this);this.game.events.off(b.PRE_STEP,this.update,this);this.removeAllListeners();this.removeAll();this.sounds.length=0;this.game=this.sounds=null},forEachActiveSound:function(l,k){var m=this;this.sounds.forEach(function(n,
q){n&&!n.pendingRemove&&l.call(k||m,n,q,m.sounds)})},setRate:function(l){this.rate=l;return this},rate:{get:function(){return this._rate},set:function(l){this._rate=l;this.forEachActiveSound(function(k){k.calculateRate()});this.emit(c.GLOBAL_RATE,this,l)}},setDetune:function(l){this.detune=l;return this},detune:{get:function(){return this._detune},set:function(l){this._detune=l;this.forEachActiveSound(function(k){k.calculateRate()});this.emit(c.GLOBAL_DETUNE,this,l)}}});p.exports=a},function(p,u,
a){u=a(0);var h=a(9),f=a(70),c=a(17);a=a(1);a=new u({Extends:h,initialize:function(b,d,g){h.call(this);this.manager=b;this.key=d;this.isPaused=this.isPlaying=!1;this.totalRate=1;this.duration=this.duration||0;this.totalDuration=this.totalDuration||0;this.currentConfig=this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0};this.config=c(this.config,g);this.markers={};this.currentMarker=null;this.pendingRemove=!1},addMarker:function(b){if(!b||!b.name||"string"!==typeof b.name)return!1;
if(this.markers[b.name])return console.error("addMarker "+b.name+" already exists in Sound"),!1;b=c(!0,{name:"",start:0,duration:this.totalDuration-(b.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},b);this.markers[b.name]=b;return!0},updateMarker:function(b){if(!b||!b.name||"string"!==typeof b.name)return!1;if(!this.markers[b.name])return console.warn("Audio Marker: "+b.name+" missing in Sound: "+this.key),!1;this.markers[b.name]=c(!0,this.markers[b.name],b);return!0},
removeMarker:function(b){var d=this.markers[b];if(!d)return null;this.markers[b]=null;return d},play:function(b,d){void 0===b&&(b="");"object"===typeof b&&(d=b,b="");if("string"!==typeof b)return!1;if(b){if(!this.markers[b])return console.warn("Marker: "+b+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[b];this.currentConfig=this.currentMarker.config;this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;
this.resetConfig();this.currentConfig=c(this.currentConfig,d);this.isPlaying=!0;this.isPaused=!1;return!0},pause:function(){if(this.isPaused||!this.isPlaying)return!1;this.isPlaying=!1;return this.isPaused=!0},resume:function(){if(!this.isPaused||this.isPlaying)return!1;this.isPlaying=!0;this.isPaused=!1;return!0},stop:function(){if(!this.isPaused&&!this.isPlaying)return!1;this.isPaused=this.isPlaying=!1;this.resetConfig();return!0},applyConfig:function(){this.mute=this.currentConfig.mute;this.volume=
this.currentConfig.volume;this.rate=this.currentConfig.rate;this.detune=this.currentConfig.detune;this.loop=this.currentConfig.loop;this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0;this.currentConfig.delay=0},update:a,calculateRate:function(){this.totalRate=this.currentConfig.rate*this.manager.rate*Math.pow(1.0005777895065548,this.currentConfig.detune+this.manager.detune)},destroy:function(){this.pendingRemove||(this.emit(f.DESTROY,this),this.pendingRemove=!0,this.manager=
null,this.key="",this.removeAllListeners(),this.isPaused=this.isPlaying=!1,this.currentMarker=this.markers=this.currentConfig=this.config=null)}});p.exports=a},function(p,u,a){var h=a(209),f=a(435);p.exports=function(c,b){void 0===b&&(b=90);if(!h(c))return null;"string"!==typeof b&&(b=(b%360+360)%360);if(90===b||-270===b||"rotateLeft"===b)c=f(c),c.reverse();else if(-90===b||270===b||"rotateRight"===b)c.reverse(),c=f(c);else if(180===Math.abs(b)||"rotate180"===b){for(b=0;b<c.length;b++)c[b].reverse();
c.reverse()}return c}},function(p,u,a){u=a(0);var h=a(18),f=a(11),c=a(15),b=a(1043),d=a(1044),g=a(212),e=a(10);a=a(1045);var l=new u({Extends:c,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Texture,f.Tint,f.Transform,f.Visible,a],initialize:function(k,m,n,q,r,t,w){void 0===r&&(r="");void 0===w&&(w=0);c.call(this,k,"BitmapText");this.font=q;(k=this.scene.sys.cache.bitmapFont.get(q))||console.warn("Invalid BitmapText key: "+q);this.fontData=k.data;this._text="";this._fontSize=
t||this.fontData.size;this._letterSpacing=0;this._align=w;this._bounds=b();this._dirty=!0;this._maxWidth=0;this.wordWrapCharCode=32;this.charColors=[];this.dropShadowColor=this.dropShadowY=this.dropShadowX=0;this.dropShadowAlpha=.5;this.fromAtlas=k.fromAtlas;this.setTexture(k.texture,k.frame);this.setPosition(m,n);this.setOrigin(0,0);this.initPipeline();this.setText(r)},setLeftAlign:function(){this._align=l.ALIGN_LEFT;this._dirty=!0;return this},setCenterAlign:function(){this._align=l.ALIGN_CENTER;
this._dirty=!0;return this},setRightAlign:function(){this._align=l.ALIGN_RIGHT;this._dirty=!0;return this},setFontSize:function(k){this._fontSize=k;this._dirty=!0;return this},setLetterSpacing:function(k){void 0===k&&(k=0);this._letterSpacing=k;this._dirty=!0;return this},setText:function(k){k||0===k||(k="");Array.isArray(k)&&(k=k.join("\n"));k!==this.text&&(this._text=k.toString(),this._dirty=!0,this.updateDisplayOrigin());return this},setDropShadow:function(k,m,n,q){void 0===k&&(k=0);void 0===m&&
(m=0);void 0===n&&(n=0);void 0===q&&(q=.5);this.dropShadowX=k;this.dropShadowY=m;this.dropShadowColor=n;this.dropShadowAlpha=q;return this},setCharacterTint:function(k,m,n,q,r,t,w){void 0===k&&(k=0);void 0===m&&(m=1);void 0===n&&(n=!1);void 0===q&&(q=-1);void 0===r&&(w=t=r=q);var v=this.text.length;-1===m&&(m=v);0>k&&(k=v+k);k=h(k,0,v-1);m=h(k+m,k,v);for(v=this.charColors;k<m;k++){var x=v[k];if(-1===q)v[k]=null;else{var y=n?1:0;x?(x.tintEffect=y,x.tintTL=q,x.tintTR=r,x.tintBL=t,x.tintBR=w):v[k]={tintEffect:y,
tintTL:q,tintTR:r,tintBL:t,tintBR:w}}}return this},setWordTint:function(k,m,n,q,r,t,w){void 0===m&&(m=1);for(var v=this.getTextBounds().words,x="number"===typeof k,y=0,A=0;A<v.length;A++){var B=v[A];if(x&&A===k||!x&&B.word===k)if(this.setCharacterTint(B.i,B.word.length,n,q,r,t,w),y++,y===m)break}return this},getTextBounds:function(k){var m=this._bounds;if(this._dirty||k||this.scaleX!==m.scaleX||this.scaleY!==m.scaleY)b(this,k,!0,m),this._dirty=!1;return m},getCharacterAt:function(k,m,n){k=this.getLocalPoint(k,
m,null,n);m=this.getTextBounds().characters;n=new e;for(var q=0;q<m.length;q++){var r=m[q];n.setTo(r.x,r.t,r.r-r.x,r.b);if(n.contains(k.x,k.y))return r}return null},updateDisplayOrigin:function(){this._dirty=!0;this.getTextBounds(!1);return this},setFont:function(k,m,n){void 0===m&&(m=this._fontSize);void 0===n&&(n=this._align);if(k!==this.font){var q=this.scene.sys.cache.bitmapFont.get(k);q&&(this.font=k,this.fontData=q.data,this._fontSize=m,this._align=n,this.fromAtlas=!0===q.fromAtlas,this.setTexture(q.texture,
q.frame),b(this,!1,!0,this._bounds))}return this},setMaxWidth:function(k,m){this._maxWidth=k;this._dirty=!0;void 0!==m&&(this.wordWrapCharCode=m);return this},align:{set:function(k){this._align=k;this._dirty=!0},get:function(){return this._align}},text:{set:function(k){this.setText(k)},get:function(){return this._text}},fontSize:{set:function(k){this._fontSize=k;this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(k){this._letterSpacing=k;this._dirty=!0},get:function(){return this._letterSpacing}},
maxWidth:{set:function(k){this._maxWidth=k;this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){this.getTextBounds(!1);return this._bounds.global.width}},height:{get:function(){this.getTextBounds(!1);return this._bounds.global.height}},toJSON:function(){var k=f.ToJSON(this);k.data={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return k},preDestroy:function(){this.charColors.length=0;this.fontData=this._bounds=null}});
l.ALIGN_LEFT=0;l.ALIGN_CENTER=1;l.ALIGN_RIGHT=2;l.ParseFromAtlas=d;l.ParseXMLBitmapFont=g;p.exports=l},function(p,u,a){var h=new (a(0))({initialize:function(f){this.entries=[];if(Array.isArray(f))for(var c=0;c<f.length;c++)this.set(f[c])},set:function(f){-1===this.entries.indexOf(f)&&this.entries.push(f);return this},get:function(f,c){for(var b=0;b<this.entries.length;b++){var d=this.entries[b];if(d[f]===c)return d}},getArray:function(){return this.entries.slice(0)},delete:function(f){f=this.entries.indexOf(f);
-1<f&&this.entries.splice(f,1);return this},dump:function(){console.group("Set");for(var f=0;f<this.entries.length;f++)console.log(this.entries[f]);console.groupEnd()},each:function(f,c){var b,d=this.entries.slice(),g=d.length;if(c)for(b=0;b<g&&!1!==f.call(c,d[b],b);b++);else for(b=0;b<g&&!1!==f(d[b],b);b++);return this},iterate:function(f,c){var b,d=this.entries.length;if(c)for(b=0;b<d&&!1!==f.call(c,this.entries[b],b);b++);else for(b=0;b<d&&!1!==f(this.entries[b],b);b++);return this},iterateLocal:function(f){var c,
b=[];for(c=1;c<arguments.length;c++)b.push(arguments[c]);var d=this.entries.length;for(c=0;c<d;c++){var g=this.entries[c];g[f].apply(g,b)}return this},clear:function(){this.entries.length=0;return this},contains:function(f){return-1<this.entries.indexOf(f)},union:function(f){var c=new h;f.entries.forEach(function(b){c.set(b)});this.entries.forEach(function(b){c.set(b)});return c},intersect:function(f){var c=new h;this.entries.forEach(function(b){f.contains(b)&&c.set(b)});return c},difference:function(f){var c=
new h;this.entries.forEach(function(b){f.contains(b)||c.set(b)});return c},size:{get:function(){return this.entries.length},set:function(f){return f<this.entries.length?this.entries.length=f:this.entries.length}}});p.exports=h},function(p,u,a){u=a(0);var h=a(11),f=a(15),c=a(189),b=a(92);a=a(1182);a=new u({Extends:f,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible,a],initialize:function(d,g,e,l,k,m,n){void 0===l&&(l=16777215);void 0===k&&
(k=128);void 0===m&&(m=1);void 0===n&&(n=.1);f.call(this,d,"PointLight");this.initPipeline(b.POINTLIGHT_PIPELINE);this.setPosition(g,e);this.color=c(l);this.intensity=m;this.attenuation=n;this.width=2*k;this.height=2*k;this._radius=k},radius:{get:function(){return this._radius},set:function(d){this._radius=d;this.width=2*d;this.height=2*d}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});
p.exports=a},function(p,u){p.exports=function(a,h){var f=h.width/2,c=h.height/2,b=Math.abs(a.x-h.x-f);h=Math.abs(a.y-h.y-c);var d=c+a.radius;if(b>f+a.radius||h>d)return!1;if(b<=f||h<=c)return!0;f=b-f;c=h-c;return f*f+c*c<=a.radius*a.radius}},function(p,u){p.exports=function(a,h){return 0>=a.width||0>=a.height||0>=h.width||0>=h.height?!1:!(a.right<h.x||a.bottom<h.y||a.x>h.right||a.y>h.bottom)}},function(p,u,a){var h=a(6),f={};p.exports={register:function(c,b,d,g,e){f[c]={plugin:b,mapping:d,settingsKey:g,
configKey:e}},getPlugin:function(c){return f[c]},install:function(c){var b=c.scene.sys,d=b.settings.input;b=b.game.config;for(var g in f){var e=f[g].plugin,l=f[g].mapping;h(d,f[g].settingsKey,b[f[g].configKey])&&(c[l]=new e(c))}},remove:function(c){f.hasOwnProperty(c)&&delete f[c]}}},function(p,u,a){p.exports={ANY_KEY_DOWN:a(1323),ANY_KEY_UP:a(1324),COMBO_MATCH:a(1325),DOWN:a(1326),KEY_DOWN:a(1327),KEY_UP:a(1328),UP:a(1329)}},function(p,u){p.exports=function(a,h){return a.url?a.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?
a.url:h+a.url:!1}},function(p,u){p.exports=function(a,h,f,c,b,d){void 0===a&&(a="");void 0===h&&(h=!0);void 0===f&&(f="");void 0===c&&(c="");void 0===b&&(b=0);void 0===d&&(d=!1);return{responseType:a,async:h,user:f,password:c,timeout:b,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:d}}},function(p,u,a){u=a(0);var h=a(243),f=a(73);a=new u({Extends:f,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,
h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(c,b,d,g,e){f.call(this,c,b,d,g,e);this.body=null}});p.exports=a},function(p,u,a){var h=a(119);p.exports=function(f,c,b,d){void 0===b&&(b=!1);return h(f,c,d)?(f=d.data[c][f]||null)?-1===f.index?b?f:null:f:null:null}},function(p,u){p.exports=function(a,h,f,c){var b=a.data,d=a.width,g=a.height;a=a.tilemapLayer;var e=Math.max(0,h.left),l=Math.min(d,h.right),k=Math.max(0,h.top);h=Math.min(g,h.bottom);var m,n;if(0===f)for(m=k;m<h;m++)for(f=e;b[m]&&
f<l;f++)(n=b[m][f])&&-1!==n.index&&n.visible&&0!==n.alpha&&c.push(n);else if(1===f)for(m=k;m<h;m++)for(f=l;b[m]&&f>=e;f--)(n=b[m][f])&&-1!==n.index&&n.visible&&0!==n.alpha&&c.push(n);else if(2===f)for(m=h;m>=k;m--)for(f=e;b[m]&&f<l;f++)(n=b[m][f])&&-1!==n.index&&n.visible&&0!==n.alpha&&c.push(n);else if(3===f)for(m=h;m>=k;m--)for(f=l;b[m]&&f>=e;f--)(n=b[m][f])&&-1!==n.index&&n.visible&&0!==n.alpha&&c.push(n);a.tilesDrawn=c.length;a.tilesTotal=d*g;return c}},function(p,u){p.exports=function(a,h,f){var c=
f.collideIndexes.indexOf(a);h&&-1===c?f.collideIndexes.push(a):h||-1===c||f.collideIndexes.splice(c,1)}},function(p,u,a){var h=a(2);p.exports=function(f,c,b){if(!c)return{i:0,layers:f.layers,name:"",opacity:1,visible:!0,x:0,y:0};var d=c.x+h(c,"startx",0)*f.tilewidth+h(c,"offsetx",0);f=c.y+h(c,"starty",0)*f.tileheight+h(c,"offsety",0);return{i:0,layers:c.layers,name:b.name+c.name+"/",opacity:b.opacity*c.opacity,visible:b.visible&&c.visible,x:b.x+d,y:b.y+f}}},function(p,u){p.exports=function(a,h,f){return a.hasOwnProperty(h)?
"function"===typeof a[h]?function(c,b,d,g,e,l){return a[h](c,b,d,g,e,l)}:function(){return a[h]}:"function"===typeof f?f:function(){return f}}},function(p,u,a){var h=a(265),f=a(13),c=a(99),b=a(80),d=a(162),g=a(583),e=a(263),l=a(6),k=a(264),m=a(266),n=a(268);p.exports=function(q,r,t){void 0===t&&(t=h);var w=t.targets?t.targets:e(r),v=g(r),x=d(r,"delay",t.delay),y=d(r,"duration",t.duration),A=l(r,"easeParams",t.easeParams),B=b(l(r,"ease",t.ease),A),z=d(r,"hold",t.hold),C=d(r,"repeat",t.repeat),E=d(r,
"repeatDelay",t.repeatDelay),G=c(r,"yoyo",t.yoyo),H=c(r,"flipX",t.flipX);t=c(r,"flipY",t.flipY);for(var I=[],K=0;K<v.length;K++)for(var O=v[K].key,R=v[K].value,F=0;F<w.length;F++){var J=k(O,R);J=n(w[F],F,O,J.getEnd,J.getStart,J.getActive,b(l(R,"ease",B),l(R,"easeParams",A)),d(R,"delay",x),d(R,"duration",y),c(R,"yoyo",G),d(R,"hold",z),d(R,"repeat",C),d(R,"repeatDelay",E),c(R,"flipX",H),c(R,"flipY",t));I.push(J)}q=new m(q,I,w);q.offset=f(r,"offset",null);q.completeDelay=f(r,"completeDelay",0);q.loop=
Math.round(f(r,"loop",0));q.loopDelay=Math.round(f(r,"loopDelay",0));q.paused=c(r,"paused",!1);q.useFrames=c(r,"useFrames",!1);w=l(r,"callbackScope",q);v=[q,null];x=m.TYPES;for(y=0;y<x.length;y++)if(A=x[y],B=l(r,A,!1))z=l(r,A+"Scope",w),C=l(r,A+"Params",[]),q.setCallback(A,B,v.concat(C),z);return q}},function(p,u,a){u=a(0);var h=a(102),f=a(2),c=a(132),b=a(185);a=new u({initialize:function(d){this.parent=d;this.animationManager=d.scene.sys.anims;this.animationManager.on(c.REMOVE_ANIMATION,this.globalRemove,
this);this.textureManager=this.animationManager.textureManager;this.anims=null;this.hasStarted=this.isPlaying=!1;this.nextAnim=this.currentFrame=this.currentAnim=null;this.nextAnimsQueue=[];this.timeScale=1;this.msPerFrame=this.duration=this.frameRate=0;this.skipMissedFrames=!0;this.repeatDelay=this.repeat=this.delay=0;this.hideOnComplete=this.showOnStart=this.yoyo=!1;this.forward=!0;this.inReverse=!1;this.repeatCounter=this.delayCounter=this.nextTick=this.accumulator=0;this._wasPlaying=this._paused=
this.pendingRepeat=!1;this._pendingStop=0},chain:function(d){var g=this.parent;if(void 0===d)return this.nextAnimsQueue.length=0,this.nextAnim=null,g;Array.isArray(d)||(d=[d]);for(g=0;g<d.length;g++){var e=d[g];null===this.nextAnim?this.nextAnim=e:this.nextAnimsQueue.push(e)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(d){this.isPlaying&&this.stop();var g=this.animationManager,
e="string"===typeof d?d:f(d,"key",null);if(g=this.exists(e)?this.get(e):g.get(e)){this.currentAnim=g;e=g.getTotalFrames();var l=f(d,"frameRate",g.frameRate),k=f(d,"duration",g.duration);g.calculateDuration(this,e,k,l);this.delay=f(d,"delay",g.delay);this.repeat=f(d,"repeat",g.repeat);this.repeatDelay=f(d,"repeatDelay",g.repeatDelay);this.yoyo=f(d,"yoyo",g.yoyo);this.showOnStart=f(d,"showOnStart",g.showOnStart);this.hideOnComplete=f(d,"hideOnComplete",g.hideOnComplete);this.skipMissedFrames=f(d,"skipMissedFrames",
g.skipMissedFrames);this.timeScale=f(d,"timeScale",this.timeScale);d=f(d,"startFrame",0);d>g.getTotalFrames()&&(d=0);e=g.frames[d];0!==d||this.forward||(e=g.getLastFrame());this.currentFrame=e}else console.warn("Missing animation: "+e);return this.parent},pause:function(d){this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1);void 0!==d&&this.setCurrentFrame(d);return this.parent},resume:function(d){this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying);void 0!==
d&&this.setCurrentFrame(d);return this.parent},playAfterDelay:function(d,g){if(this.isPlaying){var e=this.nextAnim,l=this.nextAnimsQueue;e&&l.unshift(e);this.nextAnim=d;this._pendingStop=1;this._pendingStopValue=g}else this.delayCounter=g,this.play(d,!0);return this.parent},playAfterRepeat:function(d,g){void 0===g&&(g=1);if(this.isPlaying){var e=this.nextAnim,l=this.nextAnimsQueue;e&&l.unshift(e);-1!==this.repeatCounter&&g>this.repeatCounter&&(g=this.repeatCounter);this.nextAnim=d;this._pendingStop=
2;this._pendingStopValue=g}else this.play(d);return this.parent},play:function(d,g){void 0===g&&(g=!1);var e=this.currentAnim,l=this.parent,k="string"===typeof d?d:d.key;if(g&&this.isPlaying&&e.key===k)return l;if(e&&this.isPlaying&&(g=this.animationManager.getMix(e.key,d),0<g))return this.playAfterDelay(d,g);this.forward=!0;this._paused=this.inReverse=!1;this._wasPlaying=!0;return this.startAnimation(d)},playReverse:function(d,g){void 0===g&&(g=!1);var e="string"===typeof d?d:d.key;if(g&&this.isPlaying&&
this.currentAnim.key===e)return this.parent;this.forward=!1;this.inReverse=!0;this._paused=!1;this._wasPlaying=!0;return this.startAnimation(d)},startAnimation:function(d){this.load(d);d=this.currentAnim;var g=this.parent;if(!d)return g;this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat;d.getFirstTick(this);this.isPlaying=!0;this.hasStarted=this.pendingRepeat=!1;this._pendingStopValue=this._pendingStop=0;this._paused=!1;this.delayCounter+=this.delay;0===this.delayCounter&&this.handleStart();
return g},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0);this.setCurrentFrame(this.currentFrame);this.hasStarted=!0;this.emitEvents(c.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1;this.emitEvents(c.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0;this.isPlaying=!1;this.emitEvents(c.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0;this.isPlaying=!1;this.hideOnComplete&&this.parent.setVisible(!1);this.emitEvents(c.ANIMATION_COMPLETE,c.ANIMATION_COMPLETE_KEY)},
emitEvents:function(d,g){var e=this.currentAnim,l=this.currentFrame,k=this.parent,m=l.textureFrame;k.emit(d,e,l,k,m);g&&k.emit(g+e.key,e,l,k,m)},reverse:function(){this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward);return this.parent},getProgress:function(){var d=this.currentFrame;if(!d)return 0;d=d.progress;this.inReverse&&(d*=-1);return d},setProgress:function(d){this.forward||(d=1-d);this.setCurrentFrame(this.currentAnim.getFrameByProgress(d));return this.parent},setRepeat:function(d){this.repeatCounter=
-1===d?Number.MAX_VALUE:d;return this.parent},globalRemove:function(d,g){void 0===g&&(g=this.currentAnim);this.isPlaying&&g.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(d,g){void 0===d&&(d=!1);void 0===g&&(g=!1);var e=this.currentAnim,l=this.parent;if(!e)return l;g&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat);e.getFirstTick(this);this.emitEvents(c.ANIMATION_RESTART);this.isPlaying=!0;this.pendingRepeat=!1;this.hasStarted=
!d;this._pendingStopValue=this._pendingStop=0;this._paused=!1;this.setCurrentFrame(e.frames[0]);return this.parent},complete:function(){this._pendingStop=0;this.isPlaying=!1;this.currentAnim&&this.handleComplete();if(this.nextAnim){var d=this.nextAnim;this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null;this.play(d)}return this.parent},stop:function(){this._pendingStop=0;this.isPlaying=!1;this.currentAnim&&this.handleStop();if(this.nextAnim){var d=this.nextAnim;this.nextAnim=
this.nextAnimsQueue.shift();this.play(d)}return this.parent},stopAfterDelay:function(d){this._pendingStop=1;this._pendingStopValue=d;return this.parent},stopAfterRepeat:function(d){void 0===d&&(d=1);-1!==this.repeatCounter&&d>this.repeatCounter&&(d=this.repeatCounter);this._pendingStop=2;this._pendingStopValue=d;return this.parent},stopOnFrame:function(d){this._pendingStop=3;this._pendingStopValue=d;return this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():
0},update:function(d,g){d=this.currentAnim;if(this.isPlaying&&d&&!d.paused){this.accumulator+=g*this.timeScale;if(1===this._pendingStop&&(this._pendingStopValue-=g,0>=this._pendingStopValue))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?d.nextFrame(this):d.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){g=
0;do this.forward?d.nextFrame(this):d.previousFrame(this),g++;while(this.isPlaying&&this.accumulator>this.nextTick&&60>g)}}},setCurrentFrame:function(d){var g=this.parent;this.currentFrame=d;g.texture=d.frame.texture;g.frame=d.frame;g.isCropped&&g.frame.updateCropUVs(g._crop,g.flipX,g.flipY);d.setAlpha&&(g.alpha=d.alpha);g.setSizeToFrame();g._originComponent&&(d.frame.customPivot?g.setOrigin(d.frame.pivotX,d.frame.pivotY):g.updateDisplayOrigin());this.isPlaying&&this.hasStarted&&(this.emitEvents(c.ANIMATION_UPDATE),
3===this._pendingStop&&this._pendingStopValue===d&&this.stop());return g},nextFrame:function(){this.currentAnim&&this.currentAnim.nextFrame(this);return this.parent},previousFrame:function(){this.currentAnim&&this.currentAnim.previousFrame(this);return this.parent},get:function(d){return this.anims?this.anims.get(d):null},exists:function(d){return this.anims?this.anims.has(d):!1},create:function(d){var g=d.key,e=!1;g&&(e=this.get(g),e||(e=new b(this,g,d),this.anims||(this.anims=new h),this.anims.set(g,
e)));return e},generateFrameNames:function(d,g){return this.animationManager.generateFrameNames(d,g)},generateFrameNumbers:function(d,g){return this.animationManager.generateFrameNumbers(d,g)},remove:function(d){var g=this.get(d);g&&(this.currentAnim===g&&this.stop(),this.anims.delete(d));return g},destroy:function(){this.animationManager.off(c.REMOVE_ANIMATION,this.globalRemove,this);this.anims&&this.anims.clear();this.nextAnim=this.parent=this.animationManager=null;this.nextAnimsQueue.length=0;
this.currentFrame=this.currentAnim=null},isPaused:{get:function(){return this._paused}}});p.exports=a},function(p,u,a){var h={};p.exports=h;var f=a(166);(function(){h._motionWakeThreshold=.18;h._motionSleepThreshold=.08;h._minBias=.9;h.update=function(c,b){b*=b*b;for(var d=0;d<c.length;d++){var g=c[d],e=g.speed*g.speed+g.angularSpeed*g.angularSpeed;0!==g.force.x||0!==g.force.y?h.set(g,!1):(g.motion=h._minBias*Math.min(g.motion,e)+(1-h._minBias)*Math.max(g.motion,e),0<g.sleepThreshold&&g.motion<h._motionSleepThreshold*
b?(g.sleepCounter+=1,g.sleepCounter>=g.sleepThreshold&&h.set(g,!0)):0<g.sleepCounter&&--g.sleepCounter)}};h.afterCollisions=function(c,b){b*=b*b;for(var d=0;d<c.length;d++){var g=c[d];if(g.isActive){var e=g.collision;g=e.bodyA.parent;var l=e.bodyB.parent;g.isSleeping&&l.isSleeping||g.isStatic||l.isStatic||!g.isSleeping&&!l.isSleeping||(e=g.isSleeping&&!g.isStatic?g:l,g=e===g?l:g,!e.isStatic&&g.motion>h._motionWakeThreshold*b&&h.set(e,!1))}}};h.set=function(c,b){var d=c.isSleeping;b?(c.isSleeping=
!0,c.sleepCounter=c.sleepThreshold,c.positionImpulse.x=0,c.positionImpulse.y=0,c.positionPrev.x=c.position.x,c.positionPrev.y=c.position.y,c.anglePrev=c.angle,c.speed=0,c.angularSpeed=0,c.motion=0,d||f.trigger(c,"sleepStart")):(c.isSleeping=!1,c.sleepCounter=0,d&&f.trigger(c,"sleepEnd"))}})()},function(p,u,a){var h={};p.exports=h;var f=a(32);(function(){h.on=function(c,b,d){b=b.split(" ");for(var g,e=0;e<b.length;e++)g=b[e],c.events=c.events||{},c.events[g]=c.events[g]||[],c.events[g].push(d);return d};
h.off=function(c,b,d){if(b){"function"===typeof b&&(d=b,b=f.keys(c.events).join(" "));b=b.split(" ");for(var g=0;g<b.length;g++){var e=c.events[b[g]],l=[];if(d&&e)for(var k=0;k<e.length;k++)e[k]!==d&&l.push(e[k]);c.events[b[g]]=l}}else c.events={}};h.trigger=function(c,b,d){var g,e=c.events;if(e&&0<f.keys(e).length){d||(d={});b=b.split(" ");for(var l=0;l<b.length;l++){var k=b[l];if(g=e[k]){var m=f.clone(d,!1);m.name=k;m.source=c;for(k=0;k<g.length;k++)g[k].apply(c,[m])}}}}})()},function(p,u,a){var h=
a(175),f=a(92),c=a(74);p.exports={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(b){void 0===b&&(b=f.MULTI_PIPELINE);var d=this.scene.sys.renderer;if(!d)return!1;d=d.pipelines;this.postPipelines=[];this.pipelineData={};return d&&(b=d.get(b))?(this.pipeline=this.defaultPipeline=b,!0):!1},setPipeline:function(b,d,g){var e=this.scene.sys.renderer;if(!e)return this;if(e=e.pipelines){if(b=e.get(b))this.pipeline=b;d&&(this.pipelineData=g?
h(d):d)}return this},setPostPipeline:function(b,d,g){var e=this.scene.sys.renderer;if(!e)return this;if(e=e.pipelines){Array.isArray(b)||(b=[b]);for(var l=0;l<b.length;l++){var k=e.getPostPipeline(b[l],this);k&&this.postPipelines.push(k)}d&&(this.pipelineData=g?h(d):d)}this.hasPostPipeline=0<this.postPipelines.length;return this},setPipelineData:function(b,d){var g=this.pipelineData;void 0===d?delete g[b]:g[b]=d;return this},getPostPipeline:function(b){for(var d=this.postPipelines,g=[],e=0;e<d.length;e++){var l=
d[e];("string"===typeof b&&l.name===b||l instanceof b)&&g.push(l)}return 1===g.length?g[0]:g},resetPipeline:function(b,d){void 0===b&&(b=!1);void 0===d&&(d=!1);this.pipeline=this.defaultPipeline;b&&(this.postPipelines=[],this.hasPostPipeline=!1);d&&(this.pipelineData={});return null!==this.pipeline},resetPostPipeline:function(b){void 0===b&&(b=!1);for(var d=this.postPipelines,g=0;g<d.length;g++)d[g].destroy();this.postPipelines=[];this.hasPostPipeline=!1;b&&(this.pipelineData={})},removePostPipeline:function(b){for(var d=
this.postPipelines,g=d.length-1;0<=g;g--){var e=d[g];if("string"===typeof b&&e.name===b||"string"!==typeof b&&e instanceof b)e.destroy(),c(d,g)}this.hasPostPipeline=0<this.postPipelines.length;return this},getPipelineName:function(){return this.pipeline.name}}},function(p,u){p.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(p,u,a){var h=a(4);p.exports=function(f,c,b){void 0===b&&(b=new h);b.x=f.x+f.radius*Math.cos(c);b.y=f.y+f.radius*Math.sin(c);return b}},function(p,u,a){var h=a(4);p.exports=function(f,
c){void 0===c&&(c=new h);var b=2*Math.PI*Math.random(),d=Math.random()+Math.random();d=1<d?2-d:d;var g=d*Math.sin(b);c.x=f.x+d*Math.cos(b)*f.radius;c.y=f.y+g*f.radius;return c}},function(p,u,a){var h=a(130),f=a(4);p.exports=function(c,b,d){void 0===d&&(d=new f);if(0>=b||1<=b)return d.x=c.x,d.y=c.y,d;var g=h(c)*b;.5<b?(g-=c.width+c.height,g<=c.width?(d.x=c.right-g,d.y=c.bottom):(d.x=c.x,d.y=c.bottom-(g-c.width))):g<=c.width?(d.x=c.x+g,d.y=c.y):(d.x=c.right,d.y=c.y+(g-c.width));return d}},function(p,
u,a){var h=a(67),f=a(4);p.exports=function(c,b,d,g){void 0===g&&(g=[]);!b&&0<d&&(b=h(c)/d);d=c.x1;var e=c.y1,l=c.x2;c=c.y2;for(var k=0;k<b;k++){var m=k/b;g.push(new f(d+(l-d)*m,e+(c-e)*m))}return g}},function(p,u,a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);var b=Math.random();c.x=f.x1+b*(f.x2-f.x1);c.y=f.y1+b*(f.y2-f.y1);return c}},function(p,u,a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);c.x=f.x+Math.random()*f.width;c.y=f.y+Math.random()*f.height;return c}},function(p,
u){var a=function(h){var f;if("object"!==typeof h||null===h)return h;var c=Array.isArray(h)?[]:{};for(f in h){var b=h[f];c[f]=a(b)}return c};p.exports=a},function(p,u){p.exports=function(a){var h={name:a.name,type:a.type,x:a.x,y:a.y,depth:a.depth,scale:{x:a.scaleX,y:a.scaleY},origin:{x:a.originX,y:a.originY},flipX:a.flipX,flipY:a.flipY,rotation:a.rotation,alpha:a.alpha,visible:a.visible,blendMode:a.blendMode,textureKey:"",frameKey:"",data:{}};a.texture&&(h.textureKey=a.texture.key,h.frameKey=a.frame.name);
return h}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g,e,l,k){void 0===k&&(k=new h);var m=Math.sin(g),n=Math.cos(g);g=n*e;e*=m;m=-m*l;l*=n;n=1/(g*l+m*-e);k.x=l*n*f+-m*n*c+(d*m-b*l)*n;k.y=g*n*c+-e*n*f+(-d*g+b*e)*n;return k}},function(p,u){p.exports=function(a,h){void 0===h&&(h=1);for(var f=null,c=0;c<h;c++)f=a.shift(),a.push(f);return f}},function(p,u){p.exports=function(a,h){void 0===h&&(h=1);for(var f=null,c=0;c<h;c++)f=a.pop(),a.unshift(f);return f}},function(p,u,a){var h=a(4);p.exports=
function(f,c){void 0===c&&(c=new h);var b=Math.random()*Math.PI*2,d=Math.sqrt(Math.random());c.x=f.x+d*Math.cos(b)*f.width/2;c.y=f.y+d*Math.sin(b)*f.height/2;return c}},function(p,u,a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);var b=f.x2-f.x1,d=f.y2-f.y1,g=f.x3-f.x1,e=f.y3-f.y1,l=Math.random(),k=Math.random();1<=l+k&&(l=1-l,k=1-k);c.x=f.x1+(b*l+g*k);c.y=f.y1+(d*l+e*k);return c}},function(p,u){p.exports=function(a,h,f,c,b){c+=Math.atan2(a.y-f,a.x-h);a.x=h+b*Math.cos(c);a.y=f+b*Math.sin(c);
return a}},function(p,u){p.exports=function(a,h,f){a=Math.max(0,Math.min(1,(a-h)/(f-h)));return a*a*a*(a*(6*a-15)+10)}},function(p,u){p.exports=function(a,h,f){if(a<=h)return 0;if(a>=f)return 1;a=(a-h)/(f-h);return a*a*(3-2*a)}},function(p,u,a){var h=a(18);u=a(0);var f=a(132),c=a(318),b=a(319),d=a(6),g=a(320);a=new u({initialize:function(e,l,k){this.manager=e;this.key=l;this.type="frame";this.frames=this.getFrames(e.textureManager,d(k,"frames",[]),d(k,"defaultTextureKey",null),d(k,"sortFrames",!0));
this.frameRate=d(k,"frameRate",null);this.duration=d(k,"duration",null);this.skipMissedFrames=d(k,"skipMissedFrames",!0);this.delay=d(k,"delay",0);this.repeat=d(k,"repeat",0);this.repeatDelay=d(k,"repeatDelay",0);this.yoyo=d(k,"yoyo",!1);this.showOnStart=d(k,"showOnStart",!1);this.hideOnComplete=d(k,"hideOnComplete",!1);this.paused=!1;this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate);this.manager.on&&(this.manager.on(f.PAUSE_ALL,this.pause,this),this.manager.on(f.RESUME_ALL,
this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(e,l,k,m){null===k&&null===m?(e.frameRate=24,e.duration=24/l*1E3):k&&null===m?(e.duration=k,e.frameRate=l/(k/1E3)):(e.frameRate=m,e.duration=l/m*1E3);e.msPerFrame=1E3/e.frameRate},addFrame:function(e){return this.addFrameAt(this.frames.length,e)},addFrameAt:function(e,l){l=this.getFrames(this.manager.textureManager,l);if(0<l.length){if(0===e)this.frames=l.concat(this.frames);else if(e===this.frames.length)this.frames=
this.frames.concat(l);else{var k=this.frames.slice(0,e);e=this.frames.slice(e);this.frames=k.concat(l,e)}this.updateFrameSequence()}return this},checkFrame:function(e){return 0<=e&&e<this.frames.length},getFirstTick:function(e){e.accumulator=0;e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameAt:function(e){return this.frames[e]},getFrames:function(e,l,k,m){void 0===m&&(m=!0);var n=[],q=1;if("string"===typeof l){var r=l;var t=e.get(r).getFrameNames();m&&g(t);l=[];t.forEach(function(A){l.push({key:r,
frame:A})})}if(!Array.isArray(l)||0===l.length)return n;for(m=0;m<l.length;m++){t=l[m];var w=d(t,"key",k);if(w){var v=d(t,"frame",0);var x=e.getFrame(w,v);v=new b(w,v,q,x);v.duration=d(t,"duration",0);v.isFirst=!y;y&&(y.nextFrame=v,v.prevFrame=y);n.push(v);var y=v;q++}}if(0<n.length)for(v.isLast=!0,v.nextFrame=n[0],n[0].prevFrame=v,e=1/(n.length-1),m=0;m<n.length;m++)n[m].progress=m*e;return n},getNextTick:function(e){e.accumulator-=e.nextTick;e.nextTick=e.msPerFrame+e.currentFrame.duration},getFrameByProgress:function(e){e=
h(e,0,1);return c(e,this.frames,"progress")},nextFrame:function(e){var l=e.currentFrame;l.isLast?e.yoyo?this.handleYoyoFrame(e,!1):0<e.repeatCounter?e.inReverse&&e.forward?e.forward=!1:this.repeatAnimation(e):e.complete():this.updateAndGetNextTick(e,l.nextFrame)},handleYoyoFrame:function(e,l){l||(l=!1);if(e.inReverse===!l&&0<e.repeatCounter){if(0===e.repeatDelay||e.pendingRepeat)e.forward=l;this.repeatAnimation(e)}else e.inReverse!==l&&0===e.repeatCounter?e.complete():(e.forward=l,this.updateAndGetNextTick(e,
l?e.currentFrame.nextFrame:e.currentFrame.prevFrame))},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(e){var l=e.currentFrame;if(l.isFirst)if(e.yoyo)this.handleYoyoFrame(e,!0);else if(0<e.repeatCounter){if(!e.inReverse||e.forward)e.forward=!0;this.repeatAnimation(e)}else e.complete();else this.updateAndGetNextTick(e,l.prevFrame)},updateAndGetNextTick:function(e,l){e.setCurrentFrame(l);this.getNextTick(e)},removeFrame:function(e){e=this.frames.indexOf(e);-1!==
e&&this.removeFrameAt(e);return this},removeFrameAt:function(e){this.frames.splice(e,1);this.updateFrameSequence();return this},repeatAnimation:function(e){if(2===e._pendingStop){if(0===e._pendingStopValue)return e.stop();e._pendingStopValue--}0<e.repeatDelay&&!e.pendingRepeat?(e.pendingRepeat=!0,e.accumulator-=e.nextTick,e.nextTick+=e.repeatDelay):(e.repeatCounter--,e.forward?e.setCurrentFrame(e.currentFrame.nextFrame):e.setCurrentFrame(e.currentFrame.prevFrame),e.isPlaying&&(this.getNextTick(e),
e.handleRepeat()))},toJSON:function(){var e={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};this.frames.forEach(function(l){e.frames.push(l.toJSON())});return e},updateFrameSequence:function(){for(var e=this.frames.length,l=1/(e-1),k,m=0;m<e;m++)k=this.frames[m],k.index=m+1,k.isFirst=
!1,k.isLast=!1,k.progress=m*l,0===m?(k.isFirst=!0,1===e?(k.isLast=!0,k.nextFrame=k,k.prevFrame=k):(k.isLast=!1,k.prevFrame=this.frames[e-1],k.nextFrame=this.frames[m+1])):m===e-1&&1<e?(k.isLast=!0,k.prevFrame=this.frames[e-2],k.nextFrame=this.frames[0]):1<e&&(k.prevFrame=this.frames[m-1],k.nextFrame=this.frames[m+1]);return this},pause:function(){this.paused=!0;return this},resume:function(){this.paused=!1;return this},destroy:function(){this.manager.off&&(this.manager.off(f.PAUSE_ALL,this.pause,
this),this.manager.off(f.RESUME_ALL,this.resume,this));this.manager.remove(this.key);for(var e=0;e<this.frames.length;e++)this.frames[e].destroy();this.frames=[];this.manager=null}});p.exports=a},function(p,u){p.exports=function(a,h,f,c){void 0===h&&(h=0);void 0===f&&(f=" ");void 0===c&&(c=3);a=a.toString();if(h+1>=a.length)switch(c){case 1:a=Array(h+1-a.length).join(f)+a;break;case 3:c=Math.ceil((h-=a.length)/2);a=Array(h-c+1).join(f)+a+Array(c+1).join(f);break;default:a+=Array(h+1-a.length).join(f)}return a}},
function(p,u,a){var h=a(327),f=a(189),c=a(331),b=a(332);p.exports=function(d){switch(typeof d){case "string":return"rgb"===d.substr(0,3).toLowerCase()?b(d):h(d);case "number":return f(d);case "object":return c(d)}}},function(p,u,a){function h(c,b,d,g){c=(c+6*b)%6;return Math.round(255*(g-g*d*Math.max(0,Math.min(c,4-c,1))))}var f=a(103);p.exports=function(c,b,d,g){void 0===b&&(b=1);void 0===d&&(d=1);var e=h(5,c,b,d),l=h(3,c,b,d);c=h(1,c,b,d);if(g){if(g.setTo)return g.setTo(e,l,c,g.alpha,!1);g.r=e;
g.g=l;g.b=c;g.color=f(e,l,c);return g}return{r:e,g:l,b:c,color:f(e,l,c)}}},function(p,u,a){var h=a(38),f=a(330);p.exports=function(c){c=f(c);return new h(c.r,c.g,c.b,c.a)}},function(p,u){p.exports=function(a,h,f){a.x=h-a.width/2;a.y=f-a.height/2;return a}},function(p,u,a){function h(){var g=new ArrayBuffer(4),e=new Uint8Array(g);g=new Uint32Array(g);e[0]=161;e[1]=178;e[2]=195;e[3]=212;return 3569595041===g[0]?!0:2712847316===g[0]?!1:null}var f=a(105),c=a(136),b=a(31),d={canvas:!1,canvasBitBltShift:null,
file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};p.exports=function(){if("function"===typeof importScripts)return d;d.canvas=!!window.CanvasRenderingContext2D;try{d.localStorage=!!localStorage.getItem}catch(e){d.localStorage=!1}d.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob;d.fileSystem=!!window.requestFileSystem;var g=!1;d.webGL=function(){if(window.WebGLRenderingContext)try{var e=b.createWebGL(this),
l=e.getContext("webgl")||e.getContext("experimental-webgl"),k=b.create2D(this);g=k.getContext("2d").createImageData(1,1).data instanceof Uint8ClampedArray;b.remove(e);b.remove(k);return!!l}catch(m){}return!1}();d.worker=!!window.Worker;d.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document;navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;
window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;d.getUserMedia=d.getUserMedia&&!!navigator.getUserMedia&&!!window.URL;c.firefox&&21>c.firefoxVersion&&(d.getUserMedia=!1);!f.iOS&&(c.ie||c.firefox||c.chrome)&&(d.canvasBitBltShift=!0);if(c.safari||c.mobileSafari)d.canvasBitBltShift=!1;navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate;navigator.vibrate&&(d.vibration=!0);"undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&
"undefined"!==typeof Uint32Array&&(d.littleEndian=h());d.support32bit="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof Int32Array&&null!==d.littleEndian&&g;return d}()},function(p,u){var a="";p.exports=function(){var h=function(f){for(var c=["i","webkitI","msI","mozI","oI"],b=0;b<c.length;b++){var d=c[b]+"mageSmoothingEnabled";if(d in f)return d}return null};return{disable:function(f){""===a&&(a=h(f));a&&(f[a]=!1);return f},enable:function(f){""===a&&
(a=h(f));a&&(f[a]=!0);return f},getPrefix:h,isEnabled:function(f){return null!==a?f[a]:null}}}()},function(p,u,a){u=a(14);var h=a(17);a={Angle:a(812),Distance:a(821),Easing:a(826),Fuzzy:a(827),Interpolation:a(830),Pow2:a(835),Snap:a(837),RandomDataGenerator:a(839),Average:a(840),Bernstein:a(356),Between:a(195),CatmullRom:a(194),CeilTo:a(841),Clamp:a(18),DegToRad:a(36),Difference:a(842),Euler:a(843),Factorial:a(357),FloatBetween:a(137),FloorTo:a(844),FromPercent:a(98),GetSpeed:a(845),IsEven:a(846),
IsEvenStrict:a(847),Linear:a(135),MaxAdd:a(848),Median:a(849),MinSub:a(850),Percent:a(851),RadToDeg:a(196),RandomXY:a(852),RandomXYZ:a(853),RandomXYZW:a(854),Rotate:a(362),RotateAround:a(308),RotateAroundDistance:a(182),RotateTo:a(855),RoundAwayFromZero:a(363),RoundTo:a(856),SinCosTableGenerator:a(857),SmootherStep:a(183),SmoothStep:a(184),ToXY:a(858),TransformXY:a(177),Within:a(859),Wrap:a(68),Vector2:a(3),Vector3:a(39),Vector4:a(140),Matrix3:a(364),Matrix4:a(69),Quaternion:a(365),RotateVec3:a(860)};
a=h(!1,a,u);p.exports=a},function(p,u){p.exports=function(a,h,f,c,b){h=.5*(c-h);b=.5*(b-f);var d=a*a;return(2*f-2*c+h+b)*a*d+(-3*f+3*c-2*h-b)*d+h*a+f}},function(p,u){p.exports=function(a,h){return Math.floor(Math.random()*(h-a+1)+a)}},function(p,u,a){var h=a(14);p.exports=function(f){return f*h.RAD_TO_DEG}},function(p,u,a){p.exports={Global:"game anims cache plugins registry scale sound textures renderer".split(" "),CoreScene:"EventEmitter CameraManager GameObjectCreator GameObjectFactory ScenePlugin DisplayList UpdateList".split(" "),
DefaultScene:"Clock DataManagerPlugin InputPlugin Loader TweenManager LightsPlugin".split(" ")}},function(p,u,a){u=new (a(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this.alpha=1;this._dirty=!0},set:function(h){this._matrix=h;this._dirty=!0;return this},reset:function(){var h=this._matrix;h[0]=1;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=0;h[6]=1;h[7]=0;h[8]=0;h[9]=0;h[10]=0;h[11]=0;h[12]=1;h[13]=0;h[14]=0;h[15]=0;h[16]=0;h[17]=0;h[18]=1;h[19]=0;this._dirty=!0;return this},
getData:function(){if(this._dirty){var h=new Float32Array(this._matrix);h[4]/=255;h[9]/=255;h[14]/=255;h[19]/=255;this._data=h;this._dirty=!1}return this._data},brightness:function(h,f){void 0===h&&(h=0);void 0===f&&(f=!1);return this.multiply([h,0,0,0,0,0,h,0,0,0,0,0,h,0,0,0,0,0,1,0],f)},saturate:function(h,f){void 0===h&&(h=0);void 0===f&&(f=!1);h=2*h/3+1;var c=-.5*(h-1);return this.multiply([h,c,c,0,0,c,h,c,0,0,c,c,h,0,0,0,0,0,1,0],f)},desaturate:function(h){void 0===h&&(h=!1);return this.saturate(-1,
h)},hue:function(h,f){void 0===h&&(h=0);void 0===f&&(f=!1);h=h/180*Math.PI;var c=Math.cos(h);h=Math.sin(h);return this.multiply([.213+.787*c+-.213*h,.715+-.715*c+-.715*h,.072+-.072*c+.928*h,0,0,.213+-.213*c+.143*h,.715+c*(1-.715)+.14*h,.072+-.072*c+-.283*h,0,0,.213+-.213*c+-.787*h,.715+-.715*c+.715*h,.072+.928*c+.072*h,0,0,0,0,0,1,0],f)},grayscale:function(h,f){void 0===h&&(h=1);void 0===f&&(f=!1);return this.saturate(-h,f)},blackWhite:function(h){void 0===h&&(h=!1);return this.multiply([.3,.6,.1,
0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],h)},contrast:function(h,f){void 0===h&&(h=0);void 0===f&&(f=!1);h+=1;var c=-.5*(h-1);return this.multiply([h,0,0,0,c,0,h,0,0,c,0,0,h,0,c,0,0,0,1,0],f)},negative:function(h){void 0===h&&(h=!1);return this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],h)},desaturateLuminance:function(h){void 0===h&&(h=!1);return this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],h)},sepia:function(h){void 0===
h&&(h=!1);return this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],h)},night:function(h,f){void 0===h&&(h=.1);void 0===f&&(f=!1);return this.multiply([-2*h,-h,0,0,0,-h,0,h,0,0,0,h,2*h,0,0,0,0,0,1,0],f)},lsd:function(h){void 0===h&&(h=!1);return this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],h)},brown:function(h){void 0===h&&(h=!1);return this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,
-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],h)},vintagePinhole:function(h){void 0===h&&(h=!1);return this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],h)},kodachrome:function(h){void 0===
h&&(h=!1);return this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],h)},technicolor:function(h){void 0===h&&(h=!1);return this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,
-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],h)},polaroid:function(h){void 0===h&&(h=!1);return this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],h)},shiftToBGR:function(h){void 0===h&&(h=!1);return this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],h)},multiply:function(h,f){f||this.reset();f=this._matrix;for(var c=[],b=0;20>b;b++)c[b]=f[b];f[0]=c[0]*h[0]+c[1]*h[5]+c[2]*h[10]+c[3]*h[15];f[1]=c[0]*h[1]+c[1]*h[6]+
c[2]*h[11]+c[3]*h[16];f[2]=c[0]*h[2]+c[1]*h[7]+c[2]*h[12]+c[3]*h[17];f[3]=c[0]*h[3]+c[1]*h[8]+c[2]*h[13]+c[3]*h[18];f[4]=c[0]*h[4]+c[1]*h[9]+c[2]*h[14]+c[3]*h[19]+c[4];f[5]=c[5]*h[0]+c[6]*h[5]+c[7]*h[10]+c[8]*h[15];f[6]=c[5]*h[1]+c[6]*h[6]+c[7]*h[11]+c[8]*h[16];f[7]=c[5]*h[2]+c[6]*h[7]+c[7]*h[12]+c[8]*h[17];f[8]=c[5]*h[3]+c[6]*h[8]+c[7]*h[13]+c[8]*h[18];f[9]=c[5]*h[4]+c[6]*h[9]+c[7]*h[14]+c[8]*h[19]+c[9];f[10]=c[10]*h[0]+c[11]*h[5]+c[12]*h[10]+c[13]*h[15];f[11]=c[10]*h[1]+c[11]*h[6]+c[12]*h[11]+c[13]*
h[16];f[12]=c[10]*h[2]+c[11]*h[7]+c[12]*h[12]+c[13]*h[17];f[13]=c[10]*h[3]+c[11]*h[8]+c[12]*h[13]+c[13]*h[18];f[14]=c[10]*h[4]+c[11]*h[9]+c[12]*h[14]+c[13]*h[19]+c[14];f[15]=c[15]*h[0]+c[16]*h[5]+c[17]*h[10]+c[18]*h[15];f[16]=c[15]*h[1]+c[16]*h[6]+c[17]*h[11]+c[18]*h[16];f[17]=c[15]*h[2]+c[16]*h[7]+c[17]*h[12]+c[18]*h[17];f[18]=c[15]*h[3]+c[16]*h[8]+c[17]*h[13]+c[18]*h[18];f[19]=c[15]*h[4]+c[16]*h[9]+c[17]*h[14]+c[18]*h[19]+c[19];this._dirty=!0;return this}});p.exports=u},function(p,u,a){var h=a(10),
f=a(14);p.exports=function(c,b){void 0===b&&(b=new h);if(0===c.length)return b;for(var d=Number.MAX_VALUE,g=Number.MAX_VALUE,e=f.MIN_SAFE_INTEGER,l=f.MIN_SAFE_INTEGER,k,m,n=0;n<c.length;n++)k=c[n],Array.isArray(k)?(m=k[0],k=k[1]):(m=k.x,k=k.y),d=Math.min(d,m),g=Math.min(g,k),e=Math.max(e,m),l=Math.max(l,k);b.x=d;b.y=g;b.width=e-d;b.height=l-g;return b}},function(p,u,a){u=a(0);var h=a(1);a=new u({initialize:function(f,c,b){this._rgb=[0,0,0];this.onChangeCallback=h;this.dirty=!1;this.set(f,c,b)},set:function(f,
c,b){void 0===f&&(f=0);void 0===c&&(c=0);void 0===b&&(b=0);this._rgb=[f,c,b];this.onChange();return this},equals:function(f,c,b){var d=this._rgb;return d.r===f&&d.g===c&&d.b===b},onChange:function(){this.dirty=!0;var f=this._rgb;this.onChangeCallback.call(this,f[0],f[1],f[2])},r:{get:function(){return this._rgb[0]},set:function(f){this._rgb[0]=f;this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(f){this._rgb[1]=f;this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(f){this._rgb[2]=
f;this.onChange()}},destroy:function(){this.onChangeCallback=null}});p.exports=a},function(p,u,a){u={CENTER:a(403),ORIENTATION:a(404),SCALE_MODE:a(405),ZOOM:a(406)};p.exports=u},function(p,u){p.exports=function(a){a.parentNode&&a.parentNode.removeChild(a)}},function(p,u){p.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(p,u,a){u=a(0);var h=a(144),f=a(197),c=a(20),b=a(419),d=a(420),g=a(33),e=a(1),l=a(421);
a=new u({initialize:function(k,m){this.scene=k;this.config=m;this.settings=l.create(m);this.sceneUpdate=e},init:function(k){this.settings.status=h.INIT;this.sceneUpdate=e;this.game=k;this.renderer=k.renderer;this.canvas=k.canvas;this.context=k.context;this.plugins=k=k.plugins;k.addToScene(this,f.Global,[f.CoreScene,d(this),b(this)]);this.events.emit(c.BOOT,this);this.settings.isBooted=!0},step:function(k,m){var n=this.events;n.emit(c.PRE_UPDATE,k,m);n.emit(c.UPDATE,k,m);this.sceneUpdate.call(this.scene,
k,m);n.emit(c.POST_UPDATE,k,m)},render:function(k){var m=this.displayList;m.depthSort();this.events.emit(c.PRE_RENDER,k);this.cameras.render(k,m);this.events.emit(c.RENDER,k)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(k){var m=this.events,n=this.settings;this.settings.active&&(n.status=h.PAUSED,n.active=!1,m.emit(c.PAUSE,this,k));return this},resume:function(k){var m=this.events,n=this.settings;this.settings.active||
(n.status=h.RUNNING,n.active=!0,m.emit(c.RESUME,this,k));return this},sleep:function(k){var m=this.events,n=this.settings;n.status=h.SLEEPING;n.active=!1;n.visible=!1;m.emit(c.SLEEP,this,k);return this},wake:function(k){var m=this.events,n=this.settings;n.status=h.RUNNING;n.active=!0;n.visible=!0;m.emit(c.WAKE,this,k);n.isTransition&&m.emit(c.TRANSITION_WAKE,n.transitionFrom,n.transitionDuration);return this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===
h.SLEEPING},isActive:function(){return this.settings.status===h.RUNNING},isPaused:function(){return this.settings.status===h.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(k){this.settings.visible=k;return this},setActive:function(k,
m){return k?this.resume(m):this.pause(m)},start:function(k){var m=this.events,n=this.settings;k&&(n.data=k);n.status=h.START;n.active=!0;n.visible=!0;m.emit(c.START,this);m.emit(c.READY,this,k)},shutdown:function(k){var m=this.events,n=this.settings;m.off(c.TRANSITION_INIT);m.off(c.TRANSITION_START);m.off(c.TRANSITION_COMPLETE);m.off(c.TRANSITION_OUT);n.status=h.SHUTDOWN;n.active=!1;n.visible=!1;this.renderer===g.WEBGL&&this.renderer.resetTextures(!0);m.emit(c.SHUTDOWN,this,k)},destroy:function(){var k=
this.events,m=this.settings;m.status=h.DESTROYED;m.active=!1;m.visible=!1;k.emit(c.DESTROY,this);k.removeAllListeners();k="scene game anims cache plugins registry sound textures add camera displayList events make scenePlugin updateList".split(" ");for(m=0;m<k.length;m++)this[k[m]]=null}});p.exports=a},function(p,u){p.exports=function(a){return a&&a[0].toUpperCase()+a.slice(1)}},function(p,u,a){var h=a(33);u=a(0);var f=a(109),c=a(424);a=new u({initialize:function(b,d,g,e,l){Array.isArray(g)||(g=[g]);
this.manager=b;this.key=d;this.source=[];this.dataSource=[];this.frames={};this.customData={};this.firstFrame="__BASE";for(b=this.frameTotal=0;b<g.length;b++)this.source.push(new c(this,g[b],e,l))},add:function(b,d,g,e,l,k){if(this.has(b))return null;d=new f(this,b,d,g,e,l,k);this.frames[b]=d;"__BASE"===this.firstFrame&&(this.firstFrame=b);this.frameTotal++;return d},remove:function(b){return this.has(b)?(this.get(b).destroy(),delete this.frames[b],!0):!1},has:function(b){return this.frames[b]},get:function(b){b||
(b=this.firstFrame);var d=this.frames[b];d||(console.warn("Texture.frame missing: "+b),d=this.frames[this.firstFrame]);return d},getTextureSourceIndex:function(b){for(var d=0;d<this.source.length;d++)if(this.source[d]===b)return d;return-1},getFramesFromTextureSource:function(b,d){void 0===d&&(d=!1);var g=[],e;for(e in this.frames)if("__BASE"!==e||d){var l=this.frames[e];l.sourceIndex===b&&g.push(l)}return g},getFrameNames:function(b){void 0===b&&(b=!1);var d=Object.keys(this.frames);b||(b=d.indexOf("__BASE"),
-1!==b&&d.splice(b,1));return d},getSourceImage:function(b){if(void 0===b||null===b||1===this.frameTotal)b="__BASE";var d=this.frames[b];if(d)return d.source.image;console.warn("Texture.frame missing: "+b);return this.frames.__BASE.source.image},getDataSourceImage:function(b){if(void 0===b||null===b||1===this.frameTotal)b="__BASE";var d=this.frames[b];d?b=d.sourceIndex:(console.warn("Texture.frame missing: "+b),b=this.frames.__BASE.sourceIndex);return this.dataSource[b].image},setDataSource:function(b){Array.isArray(b)||
(b=[b]);for(var d=0;d<b.length;d++){var g=this.source[d];this.dataSource.push(new c(this,b[d],g.width,g.height))}},setFilter:function(b){var d;for(d=0;d<this.source.length;d++)this.source[d].setFilter(b);for(d=0;d<this.dataSource.length;d++)this.dataSource[d].setFilter(b)},destroy:function(){var b;for(b=0;b<this.source.length;b++)this.source[b].destroy();for(b=0;b<this.dataSource.length;b++)this.dataSource[b].destroy();for(var d in this.frames)this.frames[d].destroy();this.source=[];this.dataSource=
[];this.frames={};this.manager.removeKey(this.key);(b=this.manager.game.renderer)&&b.type===h.WEBGL&&b.resetTextures(!0);this.manager=null}});p.exports=a},function(p,u,a){var h=a(78);p.exports=function(f,c,b,d,g){void 0===d&&(d=0);void 0===g&&(g=f.length);var e=[];if(h(f,d,g))for(;d<g;d++){var l=f[d];(!c||c&&void 0===b&&l.hasOwnProperty(c)||c&&void 0!==b&&l[c]===b)&&e.push(l)}return e}},function(p,u,a){p.exports={Matrix:a(1013),Add:a(1021),AddAt:a(1022),BringToTop:a(1023),CountAllMatching:a(1024),
Each:a(1025),EachInRange:a(1026),FindClosestInSorted:a(318),GetAll:a(207),GetFirst:a(428),GetRandom:a(210),MoveDown:a(1027),MoveTo:a(1028),MoveUp:a(1029),MoveAbove:a(1030),MoveBelow:a(1031),NumberArray:a(322),NumberArrayStep:a(1032),QuickSelect:a(436),Range:a(437),Remove:a(93),RemoveAt:a(1033),RemoveBetween:a(1034),RemoveRandomElement:a(1035),Replace:a(1036),RotateLeft:a(178),RotateRight:a(179),SafeRange:a(78),SendToBack:a(1037),SetAll:a(1038),Shuffle:a(131),SortByDigits:a(320),SpliceOne:a(74),StableSort:a(79),
Swap:a(1039)}},function(p,u){p.exports=function(a){if(!Array.isArray(a)||2>a.length||!Array.isArray(a[0]))return!1;for(var h=a[0].length,f=1;f<a.length;f++)if(a[f].length!==h)return!1;return!0}},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=0);void 0===f&&(f=a.length);h+=Math.floor(Math.random()*f);return void 0===a[h]?null:a[h]}},function(p,u,a){u=a(0);var h=a(9),f=a(438);a=new u({Extends:h,initialize:function(){h.call(this);this._pending=[];this._active=[];this._destroy=[];this._toProcess=
0;this.checkQueue=!1},add:function(c){this._pending.push(c);this._toProcess++;return c},remove:function(c){this._destroy.push(c);this._toProcess++;return c},removeAll:function(){for(var c=this._active,b=this._destroy,d=c.length;d--;)b.push(c[d]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var c=this._destroy,b=this._active,d;for(d=0;d<c.length;d++){var g=c[d];var e=b.indexOf(g);-1!==e&&(b.splice(e,1),this.emit(f.PROCESS_QUEUE_REMOVE,g))}c.length=0;c=
this._pending;for(d=0;d<c.length;d++)if(g=c[d],!this.checkQueue||this.checkQueue&&-1===b.indexOf(g))b.push(g),this.emit(f.PROCESS_QUEUE_ADD,g);this._toProcess=c.length=0;return b},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0;this._pending=[];this._active=[];this._destroy=[]}});p.exports=a},function(p,u){function a(h,f){return parseInt(h.getAttribute(f),10)}p.exports=function(h,f,c,b,d){void 0===c&&(c=0);void 0===
b&&(b=0);var g=f.cutX,e=f.cutY,l=f.source.width,k=f.source.height,m=f.sourceIndex,n={},q=h.getElementsByTagName("info")[0],r=h.getElementsByTagName("common")[0];n.font=q.getAttribute("face");n.size=a(q,"size");n.lineHeight=a(r,"lineHeight")+b;n.chars={};q=h.getElementsByTagName("char");if(r=void 0!==f&&f.trimmed)var t=f.height,w=f.width;for(b=0;b<q.length;b++){var v=q[b],x=a(v,"id"),y=String.fromCharCode(x),A=a(v,"x"),B=a(v,"y"),z=a(v,"width"),C=a(v,"height");r&&(A<w&&(w=A),B<t&&(t=B));r&&0!==t&&
0!==w&&(A-=f.x,B-=f.y);var E=(g+A)/l,G=(e+B)/k,H=(g+A+z)/l,I=(e+B+C)/k;n.chars[x]={x:A,y:B,width:z,height:C,centerX:Math.floor(z/2),centerY:Math.floor(C/2),xOffset:a(v,"xoffset"),yOffset:a(v,"yoffset"),xAdvance:a(v,"xadvance")+c,data:{},kerning:{},u0:E,v0:G,u1:H,v1:I};d&&0!==z&&0!==C&&(v=d.add(y,m,A,B,z,C))&&v.setUVs(z,C,E,G,H,I)}h=h.getElementsByTagName("kerning");for(b=0;b<h.length;b++)d=h[b],f=a(d,"first"),c=a(d,"second"),d=a(d,"amount"),n.chars[c].kerning[f]=d;return n}},function(p,u,a){u=a(1049);
var h=a(440),f=a(0),c=a(11),b=a(109),d=a(15),g=a(110);a=new f({Extends:d,Mixins:[c.Alpha,c.BlendMode,c.Depth,c.Mask,c.Pipeline,c.ScrollFactor,c.Size,c.Texture,c.Transform,c.Visible,u],initialize:function(e,l,k,m,n){d.call(this,e,"Blitter");this.setTexture(m,n);this.setPosition(l,k);this.initPipeline();this.children=new g;this.renderList=[];this.dirty=!1},create:function(e,l,k,m,n){void 0===m&&(m=!0);void 0===n&&(n=this.children.length);void 0===k?k=this.frame:k instanceof b||(k=this.texture.get(k));
e=new h(this,e,l,k,m);this.children.addAt(e,n,!1);this.dirty=!0;return e},createFromCallback:function(e,l,k,m){l=this.createMultiple(l,k,m);for(k=0;k<l.length;k++)e.call(this,l[k],k);return l},createMultiple:function(e,l,k){void 0===l&&(l=this.frame.name);void 0===k&&(k=!0);Array.isArray(l)||(l=[l]);var m=[],n=this;l.forEach(function(q){for(var r=0;r<e;r++)m.push(n.create(0,0,q,k))});return m},childCanRender:function(e){return e.visible&&0<e.alpha},getRenderList:function(){this.dirty&&(this.renderList=
this.children.list.filter(this.childCanRender,this),this.dirty=!1);return this.renderList},clear:function(){this.children.removeAll();this.dirty=!0},preDestroy:function(){this.children.destroy();this.renderList=[]}});p.exports=a},function(p,u,a){var h=a(208),f=a(35);u=a(0);var c=a(11),b=a(75),d=a(15),g=a(10),e=a(1052),l=a(441),k=a(3);a=new u({Extends:d,Mixins:[c.AlphaSingle,c.BlendMode,c.ComputedSize,c.Depth,c.Mask,c.Pipeline,c.Transform,c.Visible,e],initialize:function(m,n,q,r){d.call(this,m,"Container");
this.list=[];this.exclusive=!0;this.maxSize=-1;this.position=0;this.localTransform=new c.TransformMatrix;this.tempTransformMatrix=new c.TransformMatrix;this._sortKey="";this._sysEvents=m.sys.events;this.scrollFactorY=this.scrollFactorX=1;this.initPipeline();this.setPosition(n,q);this.clearAlpha();this.setBlendMode(f.SKIP_CHECK);r&&this.add(r)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*
this.height}},setExclusive:function(m){void 0===m&&(m=!0);this.exclusive=m;return this},getBounds:function(m){void 0===m&&(m=new g);m.setTo(this.x,this.y,0,0);if(this.parentContainer){var n=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);m.setTo(n.x,n.y,0,0)}if(0<this.list.length){n=this.list;var q=new g,r=!1;m.setEmpty();for(var t=0;t<n.length;t++){var w=n[t];w.getBounds&&(w.getBounds(q),r?l(q,m,m):(m.setTo(q.x,q.y,q.width,q.height),r=!0))}}return m},addHandler:function(m){m.once(b.DESTROY,
this.remove,this);this.exclusive&&(m.parentContainer&&m.parentContainer.remove(m),m.removeFromDisplayList(),m.parentContainer=this)},removeHandler:function(m){m.off(b.DESTROY,this.remove);this.exclusive&&(m.parentContainer=null,m.addToDisplayList())},pointToContainer:function(m,n){void 0===n&&(n=new k);this.parentContainer?this.parentContainer.pointToContainer(m,n):n=new k(m.x,m.y);var q=this.tempTransformMatrix;q.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY);q.invert();q.transformPoint(m.x,
m.y,n);return n},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(m){h.Add(this.list,m,this.maxSize,this.addHandler,this);return this},addAt:function(m,n){h.AddAt(this.list,m,n,this.maxSize,this.addHandler,this);return this},getAt:function(m){return this.list[m]},getIndex:function(m){return this.list.indexOf(m)},sort:function(m,n){if(!m)return this;void 0===n&&(n=function(q,r){return q[m]-r[m]});h.StableSort(this.list,
n);return this},getByName:function(m){return h.GetFirst(this.list,"name",m)},getRandom:function(m,n){return h.GetRandom(this.list,m,n)},getFirst:function(m,n,q,r){return h.GetFirst(this.list,m,n,q,r)},getAll:function(m,n,q,r){return h.GetAll(this.list,m,n,q,r)},count:function(m,n,q,r){return h.CountAllMatching(this.list,m,n,q,r)},swap:function(m,n){h.Swap(this.list,m,n);return this},moveTo:function(m,n){h.MoveTo(this.list,m,n);return this},moveAbove:function(m,n){h.MoveAbove(this.list,m,n);return this},
moveBelow:function(m,n){h.MoveBelow(this.list,m,n);return this},remove:function(m,n){m=h.Remove(this.list,m,this.removeHandler,this);if(n&&m)for(Array.isArray(m)||(m=[m]),n=0;n<m.length;n++)m[n].destroy();return this},removeAt:function(m,n){m=h.RemoveAt(this.list,m,this.removeHandler,this);n&&m&&m.destroy();return this},removeBetween:function(m,n,q){m=h.RemoveBetween(this.list,m,n,this.removeHandler,this);if(q)for(q=0;q<m.length;q++)m[q].destroy();return this},removeAll:function(m){var n=h.RemoveBetween(this.list,
0,this.list.length,this.removeHandler,this);if(m)for(m=0;m<n.length;m++)n[m].destroy();return this},bringToTop:function(m){h.BringToTop(this.list,m);return this},sendToBack:function(m){h.SendToBack(this.list,m);return this},moveUp:function(m){h.MoveUp(this.list,m);return this},moveDown:function(m){h.MoveDown(this.list,m);return this},reverse:function(){this.list.reverse();return this},shuffle:function(){h.Shuffle(this.list);return this},replace:function(m,n,q){h.Replace(this.list,m,n)&&(this.addHandler(n),
this.removeHandler(m),q&&m.destroy());return this},exists:function(m){return-1<this.list.indexOf(m)},setAll:function(m,n,q,r){h.SetAll(this.list,m,n,q,r);return this},each:function(m,n){var q=[null],r,t=this.list.slice(),w=t.length;for(r=2;r<arguments.length;r++)q.push(arguments[r]);for(r=0;r<w;r++)q[0]=t[r],m.apply(n,q);return this},iterate:function(m,n){var q=[null],r;for(r=2;r<arguments.length;r++)q.push(arguments[r]);for(r=0;r<this.list.length;r++)q[0]=this.list[r],m.apply(n,q);return this},setScrollFactor:function(m,
n,q){void 0===n&&(n=m);void 0===q&&(q=!1);this.scrollFactorX=m;this.scrollFactorY=n;q&&(h.SetAll(this.list,"scrollFactorX",m),h.SetAll(this.list,"scrollFactorY",n));return this},length:{get:function(){return this.list.length}},first:{get:function(){this.position=0;return 0<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,
this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive);this.localTransform.destroy();this.tempTransformMatrix.destroy();this.list=[]}});p.exports=a},function(p,u,a){var h=a(148);u=a(0);a=a(1057);a=new u({Extends:h,Mixins:[a],initialize:function(f,c,b,d,g,e,l){h.call(this,f,c,b,d,g,e,l);this.type="DynamicBitmapText";this.cropHeight=this.cropWidth=this.scrollY=this.scrollX=
0;this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(f,c){this.cropWidth=f;this.cropHeight=c;return this},setDisplayCallback:function(f){this.displayCallback=f;return this},setScrollX:function(f){this.scrollX=f;return this},setScrollY:function(f){this.scrollY=f;return this}});p.exports=a},function(p,u,a){u=a(133);var h=a(0),f=a(217),c=a(303),b=a(304),d=a(305),g=a(309),e=a(167),l=a(312),
k=a(313),m=a(314),n=a(111),q=a(15),r=a(2),t=a(6),w=a(14);a=a(1063);var v=new h({Extends:q,Mixins:[c,b,d,g,e,k,m,l,a],initialize:function(x,y){var A=t(y,"x",0),B=t(y,"y",0);q.call(this,x,"Graphics");this.setPosition(A,B);this.initPipeline();this.displayOriginY=this.displayOriginX=0;this.commandBuffer=[];this.defaultFillColor=-1;this.defaultStrokeWidth=this.defaultFillAlpha=1;this.defaultStrokeColor=-1;this._lineWidth=this.defaultStrokeAlpha=1;this.setDefaultStyles(y)},setDefaultStyles:function(x){t(x,
"lineStyle",null)&&(this.defaultStrokeWidth=t(x,"lineStyle.width",1),this.defaultStrokeColor=t(x,"lineStyle.color",16777215),this.defaultStrokeAlpha=t(x,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha));t(x,"fillStyle",null)&&(this.defaultFillColor=t(x,"fillStyle.color",16777215),this.defaultFillAlpha=t(x,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha));return this},lineStyle:function(x,y,A){void 0===A&&(A=
1);this.commandBuffer.push(f.LINE_STYLE,x,y,A);this._lineWidth=x;return this},fillStyle:function(x,y){void 0===y&&(y=1);this.commandBuffer.push(f.FILL_STYLE,x,y);return this},fillGradientStyle:function(x,y,A,B,z,C,E,G){void 0===z&&(z=1);void 0===C&&(C=z);void 0===E&&(E=z);void 0===G&&(G=z);this.commandBuffer.push(f.GRADIENT_FILL_STYLE,z,C,E,G,x,y,A,B);return this},lineGradientStyle:function(x,y,A,B,z,C){void 0===C&&(C=1);this.commandBuffer.push(f.GRADIENT_LINE_STYLE,x,C,y,A,B,z);return this},beginPath:function(){this.commandBuffer.push(f.BEGIN_PATH);
return this},closePath:function(){this.commandBuffer.push(f.CLOSE_PATH);return this},fillPath:function(){this.commandBuffer.push(f.FILL_PATH);return this},fill:function(){this.commandBuffer.push(f.FILL_PATH);return this},strokePath:function(){this.commandBuffer.push(f.STROKE_PATH);return this},stroke:function(){this.commandBuffer.push(f.STROKE_PATH);return this},fillCircleShape:function(x){return this.fillCircle(x.x,x.y,x.radius)},strokeCircleShape:function(x){return this.strokeCircle(x.x,x.y,x.radius)},
fillCircle:function(x,y,A){this.beginPath();this.arc(x,y,A,0,w.PI2);this.fillPath();return this},strokeCircle:function(x,y,A){this.beginPath();this.arc(x,y,A,0,w.PI2);this.strokePath();return this},fillRectShape:function(x){return this.fillRect(x.x,x.y,x.width,x.height)},strokeRectShape:function(x){return this.strokeRect(x.x,x.y,x.width,x.height)},fillRect:function(x,y,A,B){this.commandBuffer.push(f.FILL_RECT,x,y,A,B);return this},strokeRect:function(x,y,A,B){var z=this._lineWidth/2,C=x-z;z=x+z;this.beginPath();
this.moveTo(x,y);this.lineTo(x,y+B);this.strokePath();this.beginPath();this.moveTo(x+A,y);this.lineTo(x+A,y+B);this.strokePath();this.beginPath();this.moveTo(C,y);this.lineTo(z+A,y);this.strokePath();this.beginPath();this.moveTo(C,y+B);this.lineTo(z+A,y+B);this.strokePath();return this},fillRoundedRect:function(x,y,A,B,z){void 0===z&&(z=20);var C=z,E=z,G=z,H=z;"number"!==typeof z&&(C=r(z,"tl",20),E=r(z,"tr",20),G=r(z,"bl",20),H=r(z,"br",20));this.beginPath();this.moveTo(x+C,y);this.lineTo(x+A-E,y);
this.arc(x+A-E,y+E,E,-w.TAU,0);this.lineTo(x+A,y+B-H);this.arc(x+A-H,y+B-H,H,0,w.TAU);this.lineTo(x+G,y+B);this.arc(x+G,y+B-G,G,w.TAU,Math.PI);this.lineTo(x,y+C);this.arc(x+C,y+C,C,-Math.PI,-w.TAU);this.fillPath();return this},strokeRoundedRect:function(x,y,A,B,z){void 0===z&&(z=20);var C=z,E=z,G=z,H=z;"number"!==typeof z&&(C=r(z,"tl",20),E=r(z,"tr",20),G=r(z,"bl",20),H=r(z,"br",20));this.beginPath();this.moveTo(x+C,y);this.lineTo(x+A-E,y);this.moveTo(x+A-E,y);this.arc(x+A-E,y+E,E,-w.TAU,0);this.lineTo(x+
A,y+B-H);this.moveTo(x+A,y+B-H);this.arc(x+A-H,y+B-H,H,0,w.TAU);this.lineTo(x+G,y+B);this.moveTo(x+G,y+B);this.arc(x+G,y+B-G,G,w.TAU,Math.PI);this.lineTo(x,y+C);this.moveTo(x,y+C);this.arc(x+C,y+C,C,-Math.PI,-w.TAU);this.strokePath();return this},fillPointShape:function(x,y){return this.fillPoint(x.x,x.y,y)},fillPoint:function(x,y,A){!A||1>A?A=1:(x-=A/2,y-=A/2);this.commandBuffer.push(f.FILL_RECT,x,y,A,A);return this},fillTriangleShape:function(x){return this.fillTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,
x.y3)},strokeTriangleShape:function(x){return this.strokeTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},fillTriangle:function(x,y,A,B,z,C){this.commandBuffer.push(f.FILL_TRIANGLE,x,y,A,B,z,C);return this},strokeTriangle:function(x,y,A,B,z,C){this.commandBuffer.push(f.STROKE_TRIANGLE,x,y,A,B,z,C);return this},strokeLineShape:function(x){return this.lineBetween(x.x1,x.y1,x.x2,x.y2)},lineBetween:function(x,y,A,B){this.beginPath();this.moveTo(x,y);this.lineTo(A,B);this.strokePath();return this},lineTo:function(x,
y){this.commandBuffer.push(f.LINE_TO,x,y);return this},moveTo:function(x,y){this.commandBuffer.push(f.MOVE_TO,x,y);return this},strokePoints:function(x,y,A,B){void 0===y&&(y=!1);void 0===A&&(A=!1);void 0===B&&(B=x.length);this.beginPath();this.moveTo(x[0].x,x[0].y);for(var z=1;z<B;z++)this.lineTo(x[z].x,x[z].y);y&&this.lineTo(x[0].x,x[0].y);A&&this.closePath();this.strokePath();return this},fillPoints:function(x,y,A,B){void 0===y&&(y=!1);void 0===A&&(A=!1);void 0===B&&(B=x.length);this.beginPath();
this.moveTo(x[0].x,x[0].y);for(var z=1;z<B;z++)this.lineTo(x[z].x,x[z].y);y&&this.lineTo(x[0].x,x[0].y);A&&this.closePath();this.fillPath();return this},strokeEllipseShape:function(x,y){void 0===y&&(y=32);x=x.getPoints(y);return this.strokePoints(x,!0)},strokeEllipse:function(x,y,A,B,z){void 0===z&&(z=32);x=(new n(x,y,A,B)).getPoints(z);return this.strokePoints(x,!0)},fillEllipseShape:function(x,y){void 0===y&&(y=32);x=x.getPoints(y);return this.fillPoints(x,!0)},fillEllipse:function(x,y,A,B,z){void 0===
z&&(z=32);x=(new n(x,y,A,B)).getPoints(z);return this.fillPoints(x,!0)},arc:function(x,y,A,B,z,C,E){void 0===C&&(C=!1);void 0===E&&(E=0);this.commandBuffer.push(f.ARC,x,y,A,B,z,C,E);return this},slice:function(x,y,A,B,z,C,E){void 0===C&&(C=!1);void 0===E&&(E=0);this.commandBuffer.push(f.BEGIN_PATH);this.commandBuffer.push(f.MOVE_TO,x,y);this.commandBuffer.push(f.ARC,x,y,A,B,z,C,E);this.commandBuffer.push(f.CLOSE_PATH);return this},save:function(){this.commandBuffer.push(f.SAVE);return this},restore:function(){this.commandBuffer.push(f.RESTORE);
return this},translateCanvas:function(x,y){this.commandBuffer.push(f.TRANSLATE,x,y);return this},scaleCanvas:function(x,y){this.commandBuffer.push(f.SCALE,x,y);return this},rotateCanvas:function(x){this.commandBuffer.push(f.ROTATE,x);return this},clear:function(){this.commandBuffer.length=0;-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha);-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha);return this},
generateTexture:function(x,y,A){var B=this.scene.sys,z=B.game.renderer;void 0===y&&(y=B.scale.width);void 0===A&&(A=B.scale.height);v.TargetCamera.setScene(this.scene);v.TargetCamera.setViewport(0,0,y,A);v.TargetCamera.scrollX=this.x;v.TargetCamera.scrollY=this.y;var C;if("string"===typeof x)if(B.textures.exists(x)){var E=B.textures.get(x);x=E.getSourceImage();x instanceof HTMLCanvasElement&&(C=x.getContext("2d"))}else E=B.textures.createCanvas(x,y,A),C=E.getSourceImage().getContext("2d");else x instanceof
HTMLCanvasElement&&(C=x.getContext("2d"));C&&(this.renderCanvas(z,this,v.TargetCamera,null,C,!1),E&&E.refresh());return this},preDestroy:function(){this.commandBuffer=[]}});v.TargetCamera=new u;p.exports=v},function(p,u){p.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(p,u,a){var h=
a(4);p.exports=function(f,c,b){void 0===b&&(b=new h);var d=f.height/2;b.x=f.x+f.width/2*Math.cos(c);b.y=f.y+d*Math.sin(c);return b}},function(p,u,a){var h=a(35);u=a(0);var f=a(11),c=a(176),b=a(101),d=a(9),g=a(75),e=a(110),l=a(1071),k=a(20),m=a(79);a=new u({Extends:e,Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Mask,f.Pipeline,f.Visible,d,l],initialize:function(n,q){e.call(this,n);d.call(this);this.scene=n;this.displayList=null;this.type="Layer";this.state=0;this.parentContainer=null;this.name="";this.active=
!0;this.tabIndex=-1;this.data=null;this.renderFlags=15;this.cameraFilter=0;this.body=this.input=null;this.ignoreDestroy=!1;this.systems=n.sys;this.events=n.sys.events;this.sortChildrenFlag=!1;this.addCallback=this.addChildCallback;this.removeCallback=this.removeChildCallback;this.initPipeline();this.clearAlpha();this.setBlendMode(h.SKIP_CHECK);q&&this.add(q);n.sys.queueDepthSort()},setActive:function(n){this.active=n;return this},setName:function(n){this.name=n;return this},setState:function(n){this.state=
n;return this},setDataEnabled:function(){this.data||(this.data=new b(this));return this},setData:function(n,q){this.data||(this.data=new b(this));this.data.set(n,q);return this},incData:function(n,q){this.data||(this.data=new b(this));this.data.inc(n,q);return this},toggleData:function(n){this.data||(this.data=new b(this));this.data.toggle(n);return this},getData:function(n){this.data||(this.data=new b(this));return this.data.get(n)},setInteractive:function(){return this},disableInteractive:function(){return this},
removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return c(this)},willRender:function(n){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&n.id)},getIndexList:function(){for(var n=this,q=this.parentContainer,r=[];q;)if(r.unshift(q.getIndex(n)),n=q,q.parentContainer)q=q.parentContainer;else break;r.unshift(this.displayList.getIndex(n));return r},addChildCallback:function(n){n.displayList&&
n.displayList!==this&&n.removeFromDisplayList();n.displayList||(this.queueDepthSort(),n.displayList=this,n.emit(g.ADDED_TO_SCENE,n,this.scene),this.events.emit(k.ADDED_TO_SCENE,n,this.scene))},removeChildCallback:function(n){this.queueDepthSort();n.displayList=null;n.emit(g.REMOVED_FROM_SCENE,n,this.scene);this.events.emit(k.REMOVED_FROM_SCENE,n,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=
!1)},sortByDepth:function(n,q){return n._depth-q._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(g.DESTROY,this);for(var n=this.list.length;n--;)this.list[n].destroy();this.removeAllListeners();this.resetPostPipeline(!0);this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort());this.data&&(this.data.destroy(),this.data=void 0);this.visible=this.active=!1;this.events=this.systems=this.displayList=this.scene=
this.list=void 0}}});p.exports=a},function(p,u,a){u=a(0);var h=a(11),f=a(15),c=a(450),b=a(110),d=a(452);a=a(1075);a=new u({Extends:f,Mixins:[h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,a],initialize:function(g,e,l,k){f.call(this,g,"ParticleEmitterManager");this.blendMode=-1;this.timeScale=1;this.frame=this.texture=null;this.frameNames=[];null===l||"object"!==typeof l&&!Array.isArray(l)||(k=l,l=null);this.setTexture(e,l);this.initPipeline();this.emitters=new b(this);this.wells=new b(this);if(k)for(Array.isArray(k)||
(k=[k]),g=0;g<k.length;g++)this.createEmitter(k[g])},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(g,e){this.texture=this.scene.sys.textures.get(g);return this.setFrame(e)},setFrame:function(g){this.frame=this.texture.get(g);var e=[];this.texture.getFramesFromTextureSource(this.frame.sourceIndex).forEach(function(l){e.push(l.name)});this.frameNames=e;this.defaultFrame=this.frame;return this},setEmitterFrames:function(g,
e){Array.isArray(g)||(g=[g]);for(var l=e.frames,k=l.length=0;k<g.length;k++){var m=g[k];-1!==this.frameNames.indexOf(m)&&l.push(this.texture.get(m))}e.defaultFrame=0<l.length?l[0]:this.defaultFrame;return this},addEmitter:function(g){return this.emitters.add(g)},createEmitter:function(g){return this.addEmitter(new d(this,g))},removeEmitter:function(g){return this.emitters.remove(g,!0)},addGravityWell:function(g){return this.wells.add(g)},createGravityWell:function(g){return this.addGravityWell(new c(g))},
emitParticle:function(g,e,l){for(var k=this.emitters.list,m=0;m<k.length;m++){var n=k[m];n.active&&n.emitParticle(g,e,l)}return this},emitParticleAt:function(g,e,l){return this.emitParticle(l,g,e)},pause:function(){this.active=!1;return this},resume:function(){this.active=!0;return this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(g,e){e*=this.timeScale;for(var l=this.emitters.list,k=0;k<l.length;k++){var m=l[k];m.active&&m.preUpdate(g,e)}},setAlpha:function(){},
setScrollFactor:function(){},setBlendMode:function(){}});p.exports=a},function(p,u,a){var h=a(35),f=a(133),c=a(31);u=a(0);var b=a(11),d=a(33),g=a(109),e=a(15),l=a(1),k=a(92),m=a(1079),n=a(141),q=a(12),r=a(222);a=new u({Extends:e,Mixins:[b.Alpha,b.BlendMode,b.ComputedSize,b.Crop,b.Depth,b.Flip,b.GetBounds,b.Mask,b.Origin,b.Pipeline,b.ScrollFactor,b.Tint,b.Transform,b.Visible,m],initialize:function(t,w,v,x,y,A,B){void 0===w&&(w=0);void 0===v&&(v=0);void 0===x&&(x=32);void 0===y&&(y=32);e.call(this,
t,"RenderTexture");this.renderer=t.sys.renderer;this.textureManager=t.sys.textures;this.globalTint=16777215;this.globalAlpha=1;this.canvas=null;this.dirty=!1;this._crop=this.resetCropObject();this.frame=this.texture=null;this._saved=!1;void 0===A?(this.canvas=c.create2D(this,x,y),this.texture=t.sys.textures.addCanvas(r(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(A),this.frame=this.texture.get(B),this.canvas=this.frame.source.image,this.dirty=this._saved=!0,this.width=
this.frame.cutWidth,this.height=this.frame.cutHeight);this.context=this.canvas.getContext("2d");this._eraseMode=!1;this.camera=new f(0,0,x,y);this.renderTarget=null;B=this.renderer;B?B.type===d.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new n(B,x,y,1,0,!1)):B.type===d.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=l;this.camera.setScene(t);this.setPosition(w,v);void 0===A&&this.setSize(x,y);this.setOrigin(0,0);this.initPipeline(k.SINGLE_PIPELINE)},
setSize:function(t,w){return this.resize(t,w)},resize:function(t,w){void 0===w&&(w=t);var v=this.frame;if(t!==this.width||w!==this.height){if("__BASE"===v.name){this.canvas.width=t;this.canvas.height=w;this.texture.width=t;this.texture.height=w;var x=this.renderTarget;x&&(x.resize(t,w),v.glTexture=x.texture,v.source.isRenderTexture=!0,v.source.isGLTexture=!0,v.source.glTexture=x.texture);this.camera.setSize(t,w);v.source.width=t;v.source.height=w;v.setSize(t,w);this.width=t;this.height=w}}else x=
this.texture.getSourceImage(),v.cutX+t>x.width&&(t=x.width-v.cutX),v.cutY+w>x.height&&(w=x.height-v.cutY),v.setSize(t,w,v.cutX,v.cutY);this.updateDisplayOrigin();(v=this.input)&&!v.customHitArea&&(v.hitArea.width=t,v.hitArea.height=w);return this},setGlobalTint:function(t){this.globalTint=t;return this},setGlobalAlpha:function(t){this.globalAlpha=t;return this},saveTexture:function(t){this.textureManager.renameTexture(this.texture.key,t);this._saved=!0;return this.texture},fill:function(t,w,v,x,y,
A){var B=this.frame,z=this.camera,C=this.renderer;void 0===w&&(w=1);void 0===v&&(v=0);void 0===x&&(x=0);void 0===y&&(y=B.cutWidth);void 0===A&&(A=B.cutHeight);var E=(t>>16&255)/255,G=(t>>8&255)/255;t=(t&255)/255;var H=this.renderTarget;z.preRender();H?(H.bind(!0),B=this.pipeline,B.manager.set(B),z=C.width/H.width,C=C.height/H.height,B.drawFillRect(v*z,x*C,y*z,A*C,q.getTintFromFloats(t,G,E,1),w),H.unbind(!0)):(H=this.context,C.setContext(H),H.fillStyle="rgba("+E+","+G+","+t+","+w+")",H.fillRect(v+
B.cutX,x+B.cutY,y,A),C.setContext());this.dirty=!0;return this},clear:function(){if(this.dirty){var t=this.renderTarget;t?t.clear():(t=this.context,t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),t.restore());this.dirty=!1}return this},erase:function(t,w,v){this._eraseMode=!0;this.draw(t,w,v,1,16777215);this._eraseMode=!1;return this},draw:function(t,w,v,x,y){this.beginDraw();this.batchDraw(t,w,v,x,y);this.endDraw();return this},
drawFrame:function(t,w,v,x,y,A){this.beginDraw();this.batchDrawFrame(t,w,v,x,y,A);this.endDraw();return this},beginDraw:function(){var t=this.renderer,w=this.renderTarget;this.camera.preRender();w?t.beginCapture(w.width,w.height):t.setContext(this.context);return this},batchDraw:function(t,w,v,x,y){void 0===x&&(x=this.globalAlpha);y=void 0===y?(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):(y>>16)+(y&65280)+((y&255)<<16);Array.isArray(t)||(t=[t]);this.batchList(t,w,v,x,
y);return this},batchDrawFrame:function(t,w,v,x,y,A){void 0===v&&(v=0);void 0===x&&(x=0);void 0===y&&(y=this.globalAlpha);A=void 0===A?(this.globalTint>>16)+(this.globalTint&65280)+((this.globalTint&255)<<16):(A>>16)+(A&65280)+((A&255)<<16);(t=this.textureManager.getFrame(t,w))&&(this.renderTarget?this.pipeline.batchTextureFrame(t,v,x,A,y,this.camera.matrix,null):this.batchTextureFrame(t,v+this.frame.cutX,x+this.frame.cutY,y,A));return this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var w=
this.renderer,v=this.renderTarget;if(v){var x=w.endCapture();w.pipelines.setUtility().blitFrame(x,v,1,!1,!1,t);w.resetScissor();w.resetViewport()}else w.setContext();this.dirty=!0;return this},batchList:function(t,w,v,x,y){for(var A=0;A<t.length;A++){var B=t[A];B&&B!==this&&(B.renderWebGL||B.renderCanvas?this.drawGameObject(B,w,v):B.isParent||B.list?this.batchGroup(B.getChildren(),w,v):"string"===typeof B?this.batchTextureFrameKey(B,null,w,v,x,y):B instanceof g?this.batchTextureFrame(B,w,v,x,y):Array.isArray(B)&&
this.batchList(B,w,v,x,y))}},batchGroup:function(t,w,v){void 0===w&&(w=0);void 0===v&&(v=0);w+=this.frame.cutX;v+=this.frame.cutY;for(var x=0;x<t.length;x++){var y=t[x];y.willRender(this.camera)&&this.drawGameObject(y,y.x+w,y.y+v)}},batchGameObjectWebGL:function(t,w,v){void 0===w&&(w=t.x);void 0===v&&(v=t.y);var x=t.x,y=t.y;t.setPosition(w+this.frame.cutX,v+this.frame.cutY);t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera);t.setPosition(x,y)},batchGameObjectCanvas:function(t,
w,v){void 0===w&&(w=t.x);void 0===v&&(v=t.y);var x=t.x,y=t.y;if(this._eraseMode){var A=t.blendMode;t.blendMode=h.ERASE}t.setPosition(w+this.frame.cutX,v+this.frame.cutY);t.renderCanvas(this.renderer,t,this.camera,null);t.setPosition(x,y);this._eraseMode&&(t.blendMode=A)},batchTextureFrameKey:function(t,w,v,x,y,A){(t=this.textureManager.getFrame(t,w))&&this.batchTextureFrame(t,v,x,y,A)},batchTextureFrame:function(t,w,v,x,y){void 0===w&&(w=0);void 0===v&&(v=0);w+=this.frame.cutX;v+=this.frame.cutY;
if(this.renderTarget)this.pipeline.batchTextureFrame(t,w,v,y,x,this.camera.matrix,null);else{y=this.context;var A=t.canvasData;t=t.source.image;var B=this.camera.matrix;y.save();y.globalCompositeOperation=this._eraseMode?"destination-out":"source-over";y.globalAlpha=x;B.setToContext(y);y.drawImage(t,A.x,A.y,A.width,A.height,w,v,A.width,A.height);y.restore()}},snapshotArea:function(t,w,v,x,y,A,B){this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,
y,!1,t,w,v,x,A,B):this.renderer.snapshotCanvas(this.canvas,y,!1,t,w,v,x,A,B);return this},snapshot:function(t,w,v){this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,w,v):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,w,v);return this},snapshotPixel:function(t,w,v){this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,v,!0,t,w):this.renderer.snapshotCanvas(this.canvas,
v,!0,t,w);return this},preDestroy:function(){this._saved||(c.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.texture=this.context=this.canvas=null)}});p.exports=a},function(p,u){p.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var h=16*Math.random()|0;return("x"===a?h:h&3|8).toString(16)})}},function(p,u,a){var h=a(164);u=a(0);var f=a(11),c=a(15),b=a(92),d=a(1085),g=a(3);a=new u({Extends:c,
Mixins:[f.AlphaSingle,f.BlendMode,f.Depth,f.Flip,f.Mask,f.Pipeline,f.Size,f.Texture,f.Transform,f.Visible,f.ScrollFactor,d],initialize:function(e,l,k,m,n,q,r,t,w){void 0===m&&(m="__DEFAULT");void 0===q&&(q=2);void 0===r&&(r=!0);c.call(this,e,"Rope");this.anims=new h(this);this.points=q;this.tintFill="__DEFAULT"===m?!0:!1;this.dirty=!1;this.horizontal=r;this._flipY=this._flipX=!1;this._perp=new g;this.debugGraphic=this.debugCallback=null;this.setTexture(m,n);this.setPosition(l,k);this.setSizeToFrame();
this.initPipeline(b.ROPE_PIPELINE);Array.isArray(q)&&this.resizeArrays(q.length);this.setPoints(q,t,w);this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(e,l){var k=this.anims.currentFrame;this.anims.update(e,l);this.anims.currentFrame!==k&&(this.updateUVs(),this.updateVertices())},play:function(e,l,k){this.anims.play(e,l,k);return this},setDirty:function(){this.dirty=!0;return this},
setHorizontal:function(e,l,k){void 0===e&&(e=this.points.length);if(this.horizontal)return this;this.horizontal=!0;return this.setPoints(e,l,k)},setVertical:function(e,l,k){void 0===e&&(e=this.points.length);if(!this.horizontal)return this;this.horizontal=!1;return this.setPoints(e,l,k)},setTintFill:function(e){void 0===e&&(e=!1);this.tintFill=e;return this},setAlphas:function(e,l){var k=this.points.length;if(1>k)return this;var m=this.alphas;void 0===e?e=[1]:Array.isArray(e)||void 0!==l||(e=[e]);
var n;if(void 0!==l)for(n=0;n<k;n++){var q=2*n;m[q]=e;m[q+1]=l}else if(e.length===k)for(n=0;n<k;n++)q=2*n,m[q]=e[n],m[q+1]=e[n];else for(l=e[0],n=0;n<k;n++)q=2*n,e.length>q&&(l=e[q]),m[q]=l,e.length>q+1&&(l=e[q+1]),m[q+1]=l;return this},setColors:function(e){var l=this.points.length;if(1>l)return this;var k=this.colors;void 0===e?e=[16777215]:Array.isArray(e)||(e=[e]);var m;if(e.length===l)for(m=0;m<l;m++){var n=2*m;k[n]=e[m];k[n+1]=e[m]}else{var q=e[0];for(m=0;m<l;m++)n=2*m,e.length>n&&(q=e[n]),
k[n]=q,e.length>n+1&&(q=e[n+1]),k[n+1]=q}return this},setPoints:function(e,l,k){void 0===e&&(e=2);if("number"===typeof e){var m=e;2>m&&(m=2);e=[];var n;if(this.horizontal){var q=-this.frame.halfWidth;var r=this.frame.width/(m-1);for(n=0;n<m;n++)e.push({x:q+n*r,y:0})}else for(q=-this.frame.halfHeight,r=this.frame.height/(m-1),n=0;n<m;n++)e.push({x:0,y:q+n*r})}m=e.length;n=this.points.length;if(1>m)return console.warn("Rope: Not enough points given"),this;1===m&&(e.unshift({x:0,y:0}),m++);n!==m&&this.resizeArrays(m);
this.points=e;this.updateUVs();void 0!==l&&null!==l&&this.setColors(l);void 0!==k&&null!==k&&this.setAlphas(k);return this},updateUVs:function(){for(var e=this.uv,l=this.points.length,k=this.frame.u0,m=this.frame.v0,n=this.frame.u1,q=this.frame.v1,r=(n-k)/(l-1),t=(q-m)/(l-1),w=0;w<l;w++){var v=4*w;if(this.horizontal){if(this._flipX){var x=n-w*r;var y=n-w*r}else x=k+w*r,y=k+w*r;if(this._flipY){var A=q;var B=m}else A=m,B=q}else this._flipX?(x=k,y=n):(x=n,y=k),this._flipY?(A=q-w*t,B=q-w*t):(A=m+w*t,
B=m+w*t);e[v+0]=x;e[v+1]=A;e[v+2]=y;e[v+3]=B}return this},resizeArrays:function(e){this.vertices=new Float32Array(4*e);this.uv=new Float32Array(4*e);var l=new Uint32Array(2*e);var k=new Float32Array(2*e);for(var m=0;m<2*e;m++)l[m]=16777215,k[m]=1;this.colors=l;this.alphas=k;this.dirty=!0;return this},updateVertices:function(){var e=this._perp,l=this.points,k=this.vertices,m=l.length;this.dirty=!1;if(!(1>m)){for(var n,q=l[0],r=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,t=0;t<m;t++){var w=
l[t],v=4*t;n=t<m-1?l[t+1]:w;e.x=n.y-q.y;e.y=-(n.x-q.x);n=e.length();e.x/=n;e.y/=n;e.x*=r;e.y*=r;k[v]=w.x+e.x;k[v+1]=w.y+e.y;k[v+2]=w.x-e.x;k[v+3]=w.y-e.y;q=w}return this}},setDebug:function(e,l){this.debugCallback=(this.debugGraphic=e)||l?l?l:this.renderDebugVerts:null;return this},renderDebugVerts:function(e,l,k){e=e.debugGraphic;var m=k[0],n=k[1],q=k[2],r=k[3];e.lineBetween(m,n,q,r);for(var t=4;t<l;t+=4){var w=k[t+0],v=k[t+1],x=k[t+2],y=k[t+3];e.lineBetween(m,n,w,v);e.lineBetween(q,r,x,y);e.lineBetween(q,
r,w,v);e.lineBetween(w,v,x,y);m=w;n=v;q=x;r=y}},preDestroy:function(){this.anims.destroy();this.anims=void 0;this.debugGraphic=this.debugCallback=this.alphas=this.colors=this.uv=this.vertices=this.points=null},flipX:{get:function(){return this._flipX},set:function(e){this._flipX=e;return this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(e){this._flipY=e;return this.updateUVs()}}});p.exports=a},function(p,u,a){var h=a(142),f=a(31);u=a(0);var c=a(11),b=a(22),d=a(15),g=a(458),
e=a(6),l=a(202),k=a(1088),m=a(459);a=new u({Extends:d,Mixins:[c.Alpha,c.BlendMode,c.ComputedSize,c.Crop,c.Depth,c.Flip,c.GetBounds,c.Mask,c.Origin,c.Pipeline,c.ScrollFactor,c.Tint,c.Transform,c.Visible,k],initialize:function(n,q,r,t,w){void 0===q&&(q=0);void 0===r&&(r=0);d.call(this,n,"Text");this.renderer=n.sys.renderer;this.setPosition(q,r);this.setOrigin(0,0);this.initPipeline();this.canvas=f.create(this);this.context=this.canvas.getContext("2d");this.style=new m(this,w);this.autoRound=!0;this.splitRegExp=
/(?:\r\n|\r|\n)/;this._text=void 0;this.padding={left:0,right:0,top:0,bottom:0};this.height=this.width=1;this.lineSpacing=0;this.dirty=!1;0===this.style.resolution&&(this.style.resolution=1);this._crop=this.resetCropObject();this.texture=n.sys.textures.addCanvas(null,this.canvas,!0);this.frame=this.texture.get();this.frame.source.resolution=this.style.resolution;this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null);this.initRTL();
this.setText(t);w&&w.padding&&this.setPadding(w.padding);w&&w.lineSpacing&&this.setLineSpacing(w.lineSpacing);n.sys.game.events.on(b.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(n){var q=this.style;return q.wordWrapCallback?(n=q.wordWrapCallback.call(q.wordWrapCallbackScope,n,this),Array.isArray(n)&&
(n=n.join("\n")),n):q.wordWrapWidth?q.wordWrapUseAdvanced?this.advancedWordWrap(n,this.context,this.style.wordWrapWidth):this.basicWordWrap(n,this.context,this.style.wordWrapWidth):n},advancedWordWrap:function(n,q,r){var t="";n=n.replace(/ +/gi," ").split(this.splitRegExp);for(var w=n.length,v=0;v<w;v++){var x=n[v],y="";x=x.replace(/^ *|\s*$/gi,"");if(q.measureText(x).width<r)t+=x+"\n";else{var A=r;x=x.split(" ");for(var B=0;B<x.length;B++){var z=x[B],C=z+" ",E=q.measureText(C).width;if(E>A){if(0===
B){for(w=C;w.length&&!(w=w.slice(0,-1),E=q.measureText(w).width,E<=A););if(!w.length)throw Error("This text's wordWrapWidth setting is less than a single character!");A=z.substr(w.length);x[B]=A;y+=w}A=x.slice(x[B].length?B:B+1).join(" ").replace(/[ \n]*$/gi,"");n[v+1]=A+" "+(n[v+1]||"");w=n.length;break}else y+=C,A-=E}t+=y.replace(/[ \n]*$/gi,"")+"\n"}}return t=t.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(n,q,r){var t="";n=n.split(this.splitRegExp);for(var w=n.length-1,v=q.measureText(" ").width,
x=0;x<=w;x++){for(var y=r,A=n[x].split(" "),B=A.length-1,z=0;z<=B;z++){var C=A[z],E=q.measureText(C).width,G=E;z<B&&(G+=v);G>y&&0<z&&(t+="\n",y=r);t+=C;z<B?(t+=" ",y-=G):y-=E}x<w&&(t+="\n")}return t},getWrappedText:function(n){void 0===n&&(n=this._text);this.style.syncFont(this.canvas,this.context);return this.runWordWrap(n).split(this.splitRegExp)},setText:function(n){n||0===n||(n="");Array.isArray(n)&&(n=n.join("\n"));n!==this._text&&(this._text=n.toString(),this.updateText());return this},setStyle:function(n){return this.style.setStyle(n)},
setFont:function(n){return this.style.setFont(n)},setFontFamily:function(n){return this.style.setFontFamily(n)},setFontSize:function(n){return this.style.setFontSize(n)},setFontStyle:function(n){return this.style.setFontStyle(n)},setFixedSize:function(n,q){return this.style.setFixedSize(n,q)},setBackgroundColor:function(n){return this.style.setBackgroundColor(n)},setFill:function(n){return this.style.setFill(n)},setColor:function(n){return this.style.setColor(n)},setStroke:function(n,q){return this.style.setStroke(n,
q)},setShadow:function(n,q,r,t,w,v){return this.style.setShadow(n,q,r,t,w,v)},setShadowOffset:function(n,q){return this.style.setShadowOffset(n,q)},setShadowColor:function(n){return this.style.setShadowColor(n)},setShadowBlur:function(n){return this.style.setShadowBlur(n)},setShadowStroke:function(n){return this.style.setShadowStroke(n)},setShadowFill:function(n){return this.style.setShadowFill(n)},setWordWrapWidth:function(n,q){return this.style.setWordWrapWidth(n,q)},setWordWrapCallback:function(n,
q){return this.style.setWordWrapCallback(n,q)},setAlign:function(n){return this.style.setAlign(n)},setResolution:function(n){return this.style.setResolution(n)},setLineSpacing:function(n){this.lineSpacing=n;return this.updateText()},setPadding:function(n,q,r,t){if("object"===typeof n){t=n;q=e(t,"x",null);null!==q?r=n=q:(n=e(t,"left",0),r=e(t,"right",n));var w=e(t,"y",null);null!==w?t=q=w:(q=e(t,"top",0),t=e(t,"bottom",q))}else void 0===n&&(n=0),void 0===q&&(q=n),void 0===r&&(r=n),void 0===t&&(t=q);
this.padding.left=n;this.padding.top=q;this.padding.right=r;this.padding.bottom=t;return this.updateText()},setMaxLines:function(n){return this.style.setMaxLines(n)},updateText:function(){var n=this.canvas,q=this.context,r=this.style,t=r.resolution,w=r.metrics;r.syncFont(n,q);var v=this._text;if(r.wordWrapWidth||r.wordWrapCallback)v=this.runWordWrap(this._text);v=v.split(this.splitRegExp);var x=g(this,w,v),y=this.padding;if(0===r.fixedWidth){this.width=x.width+y.left+y.right;var A=x.width}else this.width=
r.fixedWidth,A=this.width-y.left-y.right,A<x.width&&(A=x.width);this.height=0===r.fixedHeight?x.height+y.top+y.bottom:r.fixedHeight;var B=this.width,z=this.height;this.updateDisplayOrigin();B=Math.max(B*t,1);z=Math.max(z*t,1);n.width!==B||n.height!==z?(n.width=B,n.height=z,this.frame.setSize(B,z),r.syncFont(n,q)):q.clearRect(0,0,B,z);q.save();q.scale(t,t);r.backgroundColor&&(q.fillStyle=r.backgroundColor,q.fillRect(0,0,B,z));r.syncStyle(n,q);q.textBaseline="alphabetic";q.translate(y.left,y.top);for(z=
0;z<x.lines;z++){t=r.strokeThickness/2;y=r.strokeThickness/2+z*x.lineHeight+w.ascent;0<z&&(y+=x.lineSpacing*z);if(r.rtl)t=B-t;else if("right"===r.align)t+=A-x.lineWidths[z];else if("center"===r.align)t+=(A-x.lineWidths[z])/2;else if("justify"===r.align&&.85<=x.lineWidths[z]/x.width){var C=x.width-x.lineWidths[z],E=q.measureText(" ").width,G=v[z].trim(),H=G.split(" ");C+=(v[z].length-G.length)*E;C=Math.floor(C/E);for(E=0;0<C;)H[E]+=" ",E=(E+1)%(H.length-1||1),--C;v[z]=H.join(" ")}this.autoRound&&(t=
Math.round(t),y=Math.round(y));r.strokeThickness&&(this.style.syncShadow(q,r.shadowStroke),q.strokeText(v[z],t,y));r.color&&(this.style.syncShadow(q,r.shadowFill),q.fillText(v[z],t,y))}q.restore();this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(n,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture);this.dirty=!0;(n=this.input)&&!n.customHitArea&&(n.hitArea.width=this.width,n.hitArea.height=this.height);return this},getTextMetrics:function(){return this.style.getTextMetrics()},
text:{get:function(){return this._text},set:function(n){this.setText(n)}},toJSON:function(){var n=c.ToJSON(this),q={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};n.data=q;return n},preDestroy:function(){this.style.rtl&&l(this.canvas);f.remove(this.canvas);this.texture.destroy()}});p.exports=a},function(p,u,a){var h=a(31);u=a(0);var f=a(11),c=a(22),b=a(15),d=a(361),g=a(192),
e=a(1091),l=a(3);a=new u({Extends:b,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Crop,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Tint,f.Transform,f.Visible,e],initialize:function(k,m,n,q,r,t,w){var v=k.sys.renderer;b.call(this,k,"TileSprite");t=k.sys.textures.get(t);var x=t.get(w);q&&r?(q=Math.floor(q),r=Math.floor(r)):(q=x.width,r=x.height);this._tilePosition=new l;this._tileScale=new l(1,1);this.dirty=!1;this.renderer=v;this.canvas=h.create(this,q,r);this.context=this.canvas.getContext("2d");
this.displayTexture=t;this.displayFrame=x;this._crop=this.resetCropObject();this.texture=k.sys.textures.addCanvas(null,this.canvas,!0);this.frame=this.texture.get();this.potWidth=d(x.width);this.potHeight=d(x.height);this.fillCanvas=h.create2D(this,this.potWidth,this.potHeight);this.fillContext=this.fillCanvas.getContext("2d");this.fillPattern=null;this.setPosition(m,n);this.setSize(q,r);this.setFrame(w);this.setOriginFromFrame();this.initPipeline();k.sys.game.events.on(c.CONTEXT_RESTORED,function(y){if(y){var A=
y.gl;this.dirty=!0;this.fillPattern=null;this.fillPattern=y.createTexture2D(0,A.LINEAR,A.LINEAR,A.REPEAT,A.REPEAT,A.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}},this)},setTexture:function(k,m){this.displayTexture=this.scene.sys.textures.get(k);return this.setFrame(m)},setFrame:function(k){k=this.displayTexture.get(k);this.potWidth=d(k.width);this.potHeight=d(k.height);this.canvas.width=0;this.renderFlags=k.cutWidth&&k.cutHeight?this.renderFlags|8:this.renderFlags&-9;this.displayFrame=k;this.dirty=
!0;this.updateTileTexture();return this},setTilePosition:function(k,m){void 0!==k&&(this.tilePositionX=k);void 0!==m&&(this.tilePositionY=m);return this},setTileScale:function(k,m){void 0===k&&(k=this.tileScaleX);void 0===m&&(m=k);this.tileScaleX=k;this.tileScaleY=m;return this},updateTileTexture:function(){if(this.dirty&&this.renderer){var k=this.displayFrame;if(k.source.isRenderTexture||k.source.isGLTexture)console.warn("TileSprites can only use Image or Canvas based textures");else{var m=this.fillContext,
n=this.fillCanvas,q=this.potWidth,r=this.potHeight;this.renderer&&this.renderer.gl||(q=k.cutWidth,r=k.cutHeight);m.clearRect(0,0,q,r);n.width=q;n.height=r;m.drawImage(k.source.image,k.cutX,k.cutY,k.cutWidth,k.cutHeight,0,0,q,r);this.fillPattern=this.renderer&&this.renderer.gl?this.renderer.canvasToTexture(n,this.fillPattern):m.createPattern(n,"repeat");this.updateCanvas()}this.dirty=!1}},updateCanvas:function(){var k=this.canvas;if(k.width!==this.width||k.height!==this.height)k.width=this.width,k.height=
this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0;if(!(!this.dirty||this.renderer&&this.renderer.gl)){k=this.context;this.scene.sys.game.config.antialias||g.disable(k);var m=this._tileScale.x,n=this._tileScale.y,q=this._tilePosition.x,r=this._tilePosition.y;k.clearRect(0,0,this.width,this.height);k.save();k.scale(m,n);k.translate(-q,-r);k.fillStyle=this.fillPattern;k.fillRect(q,r,this.width/m,this.height/n);k.restore()}this.dirty=!1},preDestroy:function(){this.renderer&&
this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern);h.remove(this.canvas);h.remove(this.fillCanvas);this.displayFrame=this.displayTexture=this.fillCanvas=this.fillContext=this.fillPattern=null;this.texture.destroy();this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(k){this._tilePosition.x=k;this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(k){this._tilePosition.y=k;this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},
set:function(k){this._tileScale.x=k;this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(k){this._tileScale.y=k;this.dirty=!0}}});p.exports=a},function(p,u,a){u=a(0);var h=a(18),f=a(11),c=a(75),b=a(22),d=a(51),g=a(15),e=a(70),l=a(222),k=a(1094),m=a(14);a=new u({Extends:g,Mixins:[f.Alpha,f.BlendMode,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Size,f.TextureCrop,f.Tint,f.Transform,f.Visible,k],initialize:function(n,q,r,t){g.call(this,n,"Video");
this.snapshotTexture=this.videoTextureSource=this.videoTexture=this.video=null;this.flipY=!1;this._key=l();this.touchLocked=!0;this.playWhenUnlocked=!1;this.retryLimit=20;this.retry=0;this.retryInterval=500;this._retryID=null;this._codePaused=this._systemPaused=this._codeMuted=this._systemMuted=!1;this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),
seeked:this.seekedHandler.bind(this)};this._crop=this.resetCropObject();this.markers={};this._markerIn=-1;this._markerOut=m.MAX_SAFE_INTEGER;this._lastUpdate=0;this._cacheKey="";this.removeVideoElementOnDestroy=this._isSeeking=!1;this.setPosition(q,r);this.initPipeline();t&&this.changeSource(t,!1);q=n.sys.game.events;q.on(b.PAUSE,this.globalPause,this);q.on(b.RESUME,this.globalResume,this);if(n=n.sys.sound)n.on(e.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},
removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(n,q,r){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var t=this.video;if(!t)return console.warn("Video not loaded"),this;void 0===n&&(n=t.loop);var w=this.scene.sys.sound;w&&w.mute&&this.setMute(!0);isNaN(q)||(this._markerIn=q);!isNaN(r)&&r>q&&(this._markerOut=r);t.loop=n;n=this._callbacks;q=t.play();void 0!==q?q.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):
(t.addEventListener("playing",n.play,!0),2>t.readyState&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)));t.addEventListener("ended",n.end,!0);t.addEventListener("timeupdate",n.time,!0);t.addEventListener("seeking",n.seeking,!0);t.addEventListener("seeked",n.seeked,!0);return this},changeSource:function(n,q,r,t,w){void 0===q&&(q=!0);this.video&&this.stop();var v=this.scene.sys.cache.video.get(n);v?(this.video=v,this._cacheKey=n,this._codePaused=
v.paused,this._codeMuted=v.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,v,v.videoWidth,v.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,v.videoWidth,v.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(c.VIDEO_CREATED,this,v.videoWidth,v.videoHeight)):this.updateTexture(),this._lastUpdate=v.currentTime=0,q&&
this.play(r,t,w)):this.video=null;return this},addMarker:function(n,q,r){!isNaN(q)&&0<=q&&!isNaN(r)&&(this.markers[n]=[q,r]);return this},playMarker:function(n,q){(n=this.markers[n])&&this.play(q,n[0],n[1]);return this},removeMarker:function(n){delete this.markers[n];return this},snapshot:function(n,q){void 0===n&&(n=this.width);void 0===q&&(q=this.height);return this.snapshotArea(0,0,this.width,this.height,n,q)},snapshotArea:function(n,q,r,t,w,v){void 0===n&&(n=0);void 0===q&&(q=0);void 0===r&&(r=
this.width);void 0===t&&(t=this.height);void 0===w&&(w=r);void 0===v&&(v=t);var x=this.video,y=this.snapshotTexture;y?y.setSize(w,v):this.snapshotTexture=y=this.scene.sys.textures.createCanvas(l(),w,v);x&&y.context.drawImage(x,n,q,r,t,0,0,w,v);return y.update()},saveSnapshotTexture:function(n){this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,n):this.snapshotTexture=this.scene.sys.textures.createCanvas(n,this.width,this.height);return this.snapshotTexture},loadURL:function(n,
q,r){void 0===r&&(r=!1);this.video&&this.stop();this.videoTexture&&this.scene.sys.textures.remove(this._key);q=document.createElement("video");q.controls=!1;r&&(q.muted=!0,q.defaultMuted=!0,q.setAttribute("autoplay","autoplay"));q.setAttribute("playsinline","playsinline");q.setAttribute("preload","auto");q.addEventListener("error",this._callbacks.error,!0);q.src=n;q.load();this.video=q;return this},loadMediaStream:function(n,q,r){void 0===r&&(r=!1);this.video&&this.stop();this.videoTexture&&this.scene.sys.textures.remove(this._key);
q=document.createElement("video");q.controls=!1;r&&(q.muted=!0,q.defaultMuted=!0,q.setAttribute("autoplay","autoplay"));q.setAttribute("playsinline","playsinline");q.setAttribute("preload","auto");q.addEventListener("error",this._callbacks.error,!0);try{q.srcObject=n}catch(t){q.src=window.URL.createObjectURL(n)}q.load();this.video=q;return this},playPromiseSuccessHandler:function(){this.touchLocked=this._codePaused=!1;this.emit(c.VIDEO_PLAY,this);-1<this._markerIn&&(this.video.currentTime=this._markerIn)},
playPromiseErrorHandler:function(n){this.scene.sys.input.once(d.POINTER_DOWN,this.unlockHandler,this);this.playWhenUnlocked=this.touchLocked=!0;this.emit(c.VIDEO_ERROR,this,n)},playHandler:function(){this.touchLocked=this._codePaused=!1;this.emit(c.VIDEO_PLAY,this);this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(n){this.stop();this.emit(c.VIDEO_ERROR,this,n)},unlockHandler:function(){this.playWhenUnlocked=this.touchLocked=!1;this.emit(c.VIDEO_UNLOCKED,
this);-1<this._markerIn&&(this.video.currentTime=this._markerIn);this.video.play();this.emit(c.VIDEO_PLAY,this)},completeHandler:function(){this.emit(c.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(c.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var n=this.video;if(n){var q=n.currentTime;q!==this._lastUpdate&&(this._lastUpdate=q,this.updateTexture(),q>=this._markerOut&&(n.loop?(n.currentTime=this._markerIn,this.updateTexture(),
this._lastUpdate=q,this.emit(c.VIDEO_LOOP,this)):(this.emit(c.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){2<=this.video.readyState?this.updateTexture():(this.retry--,0<this.retry?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(c.VIDEO_TIMEOUT,this))},updateTexture:function(){var n=this.video,q=n.videoWidth,r=n.videoHeight;if(this.videoTexture){var t=this.videoTextureSource;t.source!==n&&(t.source=n,t.width=q,t.height=r);t.update()}else this.videoTexture=
this.scene.sys.textures.create(this._key,n,q,r),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,q,r),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(c.VIDEO_CREATED,this,q,r)},getVideoKey:function(){return this._cacheKey},seekTo:function(n){var q=this.video;q&&(q=q.duration,Infinity===q||isNaN(q)||this.setCurrentTime(q*n));return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(n){var q=
this.video;if(q){if("string"===typeof n){var r=n[0],t=parseFloat(n.substr(1));"+"===r?n=q.currentTime+t:"-"===r&&(n=q.currentTime-t)}this._lastUpdate=q.currentTime=n}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0;this.emit(c.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1;this.emit(c.VIDEO_SEEKED,this);this.video&&this.updateTexture()},getProgress:function(){var n=this.video;if(n){var q=n.currentTime;n=n.duration;if(Infinity!==
n&&!isNaN(n))return q/n}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(n){void 0===n&&(n=!0);this._codeMuted=n;var q=this.video;q&&(q.muted=this._systemMuted?!0:n);return this},isMuted:function(){return this._codeMuted},globalMute:function(n,q){this._systemMuted=q;if(n=this.video)n.muted=this._codeMuted?!0:q},globalPause:function(){this._systemPaused=!0;this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1;this.video&&!this._codePaused&&
this.video.play()},setPaused:function(n){void 0===n&&(n=!0);var q=this.video;this._codePaused=n;q&&(n?q.paused||q.pause():n||q.paused&&!this._systemPaused&&q.play());return this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(n){void 0===n&&(n=1);this.video&&(this.video.volume=h(n,0,1));return this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(n){this.video&&(this.video.playbackRate=n);return this},getLoop:function(){return this.video?
this.video.loop:!1},setLoop:function(n){void 0===n&&(n=!0);this.video&&(this.video.loop=n);return this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(n,q){void 0===q&&(q=!1);this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,n);this._key=n;this.flipY=q;this.videoTextureSource&&this.videoTextureSource.setFlipY(q);return this.videoTexture},
stop:function(){var n=this.video;if(n){var q=this._callbacks,r;for(r in q)n.removeEventListener(r,q[r],!0);n.pause()}this._retryID&&window.clearTimeout(this._retryID);this.emit(c.VIDEO_STOP,this);return this},removeVideoElement:function(){var n=this.video;if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("autoplay");n.removeAttribute("src");this.video=null}},preDestroy:function(){this.stop();this.removeVideoElementOnDestroy&&this.removeVideoElement();
var n=this.scene.sys.game.events;n.off(b.PAUSE,this.globalPause,this);n.off(b.RESUME,this.globalResume,this);(n=this.scene.sys.sound)&&n.off(e.GLOBAL_MUTE,this.globalMute,this);this._retryID&&window.clearTimeout(this._retryID)}});p.exports=a},function(p,u,a){u=a(0);var h=a(228),f=a(470),c=a(56);a=new u({initialize:function(b){this.type=c.POLYGON;this.area=0;this.points=[];b&&this.setTo(b)},contains:function(b,d){return h(this,b,d)},setTo:function(b){this.area=0;this.points=[];"string"===typeof b&&
(b=b.split(" "));if(!Array.isArray(b))return this;for(var d,g=Number.MAX_VALUE,e=0;e<b.length;e++)d={x:0,y:0},"number"===typeof b[e]||"string"===typeof b[e]?(d.x=parseFloat(b[e]),d.y=parseFloat(b[e+1]),e++):Array.isArray(b[e])?(d.x=b[e][0],d.y=b[e][1]):(d.x=b[e].x,d.y=b[e].y),this.points.push(d),d.y<g&&(g=d.y);this.calculateArea(g);return this},calculateArea:function(){if(3>this.points.length)return this.area=0;for(var b=0,d,g,e=0;e<this.points.length-1;e++)d=this.points[e],g=this.points[e+1],b+=
(g.x-d.x)*(d.y+g.y);d=this.points[0];g=this.points[this.points.length-1];b+=(d.x-g.x)*(g.y+d.y);return this.area=.5*-b},getPoints:function(b,d,g){return f(this,b,d,g)}});p.exports=a},function(p,u){p.exports=function(a,h,f){for(var c=!1,b=-1,d=a.points.length-1;++b<a.points.length;d=b){var g=a.points[b].x,e=a.points[b].y,l=a.points[d].x;d=a.points[d].y;(e<=f&&f<d||d<=f&&f<e)&&h<(l-g)*(f-e)/(d-e)+g&&(c=!c)}return c}},function(p,u,a){u=a(0);var h=a(11),f=a(15),c=a(2),b=a(17),d=a(478),g=a(1176),e=a(25);
a=new u({Extends:f,Mixins:[h.ComputedSize,h.Depth,h.GetBounds,h.Mask,h.Origin,h.ScrollFactor,h.Transform,h.Visible,g],initialize:function(l,k,m,n,q,r,t,w){void 0===m&&(m=0);void 0===n&&(n=0);void 0===q&&(q=128);void 0===r&&(r=128);f.call(this,l,"Shader");this.blendMode=-1;this.renderer=l=l.sys.renderer;this.gl=l.gl;this.vertexData=new ArrayBuffer(12*Float32Array.BYTES_PER_ELEMENT);this.vertexBuffer=l.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW);this.program=null;this.bytes=new Uint8Array(this.vertexData);
this.vertexViewF32=new Float32Array(this.vertexData);this._tempMatrix1=new e;this._tempMatrix2=new e;this._tempMatrix3=new e;this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.uniforms={};this.pointer=null;this._rendererWidth=l.width;this._rendererHeight=l.height;this._textureCount=0;this.glTexture=this.framebuffer=null;this.renderToTexture=!1;this.texture=null;this.setPosition(m,n);this.setSize(q,r);this.setOrigin(.5,
.5);this.setShader(k,t,w)},willRender:function(l){return this.renderToTexture?!0:!(f.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&l.id)},setRenderToTexture:function(l,k){void 0===k&&(k=!1);if(!this.renderToTexture){var m=this.width,n=this.height,q=this.renderer;this.glTexture=q.createTextureFromSource(null,m,n,0);this.glTexture.flipY=k;this.framebuffer=q.createFramebuffer(m,n,this.glTexture,!1);this._rendererWidth=m;this._rendererHeight=n;this.renderToTexture=!0;this.projOrtho(0,
this.width,this.height,0);l&&(this.texture=this.scene.sys.textures.addGLTexture(l,this.glTexture,m,n))}this.shader&&(q.pipelines.clear(),this.load(),this.flush(),q.pipelines.rebind());return this},setShader:function(l,k,m){void 0===k&&(k=[]);if("string"===typeof l){var n=this.scene.sys.cache.shader;if(!n.has(l))return console.warn("Shader missing: "+l),this;this.shader=n.get(l)}else this.shader=l;l=this.gl;n=this.renderer;this.program&&l.deleteProgram(this.program);n=n.createProgram(this.shader.vertexSrc,
this.shader.fragmentSrc);l.uniformMatrix4fv(l.getUniformLocation(n,"uViewMatrix"),!1,this.viewMatrix);l.uniformMatrix4fv(l.getUniformLocation(n,"uProjectionMatrix"),!1,this.projectionMatrix);l.uniform2f(l.getUniformLocation(n,"uResolution"),this.width,this.height);this.program=n;l=new Date;l={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[l.getFullYear(),l.getMonth(),l.getDate(),3600*
l.getHours()+60*l.getMinutes()+l.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.uniforms=this.shader.uniforms?b(!0,{},this.shader.uniforms,l):l;for(l=0;4>l;l++)k[l]&&this.setSampler2D("iChannel"+l,k[l],l,m);this.initUniforms();this.projOrtho(0,
this._rendererWidth,this._rendererHeight,0);return this},setPointer:function(l){this.pointer=l;return this},projOrtho:function(l,k,m,n){var q=1/(l-k),r=1/(m-n),t=this.projectionMatrix;t[0]=-2*q;t[5]=-2*r;t[10]=-.001;t[12]=(l+k)*q;t[13]=(n+m)*r;t[14]=-0;l=this.program;n=this.gl;this.renderer.setProgram(l);n.uniformMatrix4fv(n.getUniformLocation(l,"uProjectionMatrix"),!1,this.projectionMatrix);this._rendererWidth=k;this._rendererHeight=m},initUniforms:function(){var l=this.gl,k=this.renderer.glFuncMap,
m=this.program;this._textureCount=0;for(var n in this.uniforms){var q=this.uniforms[n],r=q.type,t=k[r];q.uniformLocation=l.getUniformLocation(m,n);"sampler2D"!==r&&(q.glMatrix=t.matrix,q.glValueLength=t.length,q.glFunc=t.func)}},setSampler2DBuffer:function(l,k,m,n,q,r){void 0===q&&(q=0);void 0===r&&(r={});l=this.uniforms[l];l.value=k;r.width=m;r.height=n;l.textureData=r;this._textureCount=q;this.initSampler2D(l);return this},setSampler2D:function(l,k,m,n){void 0===m&&(m=0);var q=this.scene.sys.textures;
if(q.exists(k)){q=q.getFrame(k);if(q.glTexture&&q.glTexture.isRenderTexture)return this.setSampler2DBuffer(l,q.glTexture,q.width,q.height,m,n);l=this.uniforms[l];var r=q.source;l.textureKey=k;l.source=r.image;l.value=q.glTexture;r.isGLTexture&&(n||(n={}),n.width=r.width,n.height=r.height);n&&(l.textureData=n);this._textureCount=m;this.initSampler2D(l)}return this},setUniform:function(l,k){d(this.uniforms,l,k);return this},getUniform:function(l){return c(this.uniforms,l,null)},setChannel0:function(l,
k){return this.setSampler2D("iChannel0",l,0,k)},setChannel1:function(l,k){return this.setSampler2D("iChannel1",l,1,k)},setChannel2:function(l,k){return this.setSampler2D("iChannel2",l,2,k)},setChannel3:function(l,k){return this.setSampler2D("iChannel3",l,3,k)},initSampler2D:function(l){if(l.value){var k=this.gl;k.activeTexture(k.TEXTURE0+this._textureCount);k.bindTexture(k.TEXTURE_2D,l.value);var m=l.textureData;if(m&&!l.value.isRenderTexture){var n=k[c(m,"magFilter","linear").toUpperCase()],q=k[c(m,
"minFilter","linear").toUpperCase()],r=k[c(m,"wrapS","repeat").toUpperCase()],t=k[c(m,"wrapT","repeat").toUpperCase()],w=k[c(m,"format","rgba").toUpperCase()];m.repeat&&(t=r=k.REPEAT);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!!m.flipY);if(m.width){var v=c(m,"width",512),x=c(m,"height",2);m=c(m,"border",0);k.texImage2D(k.TEXTURE_2D,0,w,v,x,m,w,k.UNSIGNED_BYTE,null)}else k.texImage2D(k.TEXTURE_2D,0,w,k.RGBA,k.UNSIGNED_BYTE,l.source);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,n);k.texParameteri(k.TEXTURE_2D,
k.TEXTURE_MIN_FILTER,q);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,r);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,t)}this.renderer.setProgram(this.program);k.uniform1i(l.uniformLocation,this._textureCount);this._textureCount++}},syncUniforms:function(){var l=this.gl,k=this.uniforms,m=0,n;for(n in k){var q=k[n];var r=q.glFunc;var t=q.glValueLength;var w=q.uniformLocation;var v=q.value;null!==v&&(1===t?q.glMatrix?r.call(l,w,q.transpose,v):r.call(l,w,v):2===t?r.call(l,w,v.x,v.y):3===t?r.call(l,
w,v.x,v.y,v.z):4===t?r.call(l,w,v.x,v.y,v.z,v.w):"sampler2D"===q.type&&(l.activeTexture(l.TEXTURE0+m),l.bindTexture(l.TEXTURE_2D,v),l.uniform1i(w,m),m++))}},load:function(l){var k=this.gl,m=this.width,n=this.height,q=this.renderer,r=this.program,t=this.viewMatrix;if(!this.renderToTexture){var w=-this._displayOriginX,v=-this._displayOriginY;t[0]=l[0];t[1]=l[1];t[4]=l[2];t[5]=l[3];t[8]=l[4];t[9]=l[5];t[12]=t[0]*w+t[4]*v;t[13]=t[1]*w+t[5]*v}k.useProgram(r);k.uniformMatrix4fv(k.getUniformLocation(r,"uViewMatrix"),
!1,t);k.uniform2f(k.getUniformLocation(r,"uResolution"),this.width,this.height);l=this.uniforms;k=l.resolution;k.value.x=m;k.value.y=n;l.time.value=q.game.loop.getDuration();if(q=this.pointer)l=l.mouse,n=1-q.y/n,l.value.x=(q.x/m).toFixed(2),l.value.y=n.toFixed(2);this.syncUniforms()},flush:function(){var l=this.width,k=this.height,m=this.program,n=this.gl,q=this.vertexBuffer,r=this.renderer,t=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(r.setFramebuffer(this.framebuffer),n.clearColor(0,
0,0,0),n.clear(n.COLOR_BUFFER_BIT));n.bindBuffer(n.ARRAY_BUFFER,q);m=n.getAttribLocation(m,"inPosition");-1!==m&&(n.enableVertexAttribArray(m),n.vertexAttribPointer(m,2,n.FLOAT,!1,t,0));m=this.vertexViewF32;m[3]=k;m[4]=l;m[5]=k;m[8]=l;m[9]=k;m[10]=l;n.bufferSubData(n.ARRAY_BUFFER,0,this.bytes.subarray(0,6*t));n.drawArrays(n.TRIANGLES,0,6);this.renderToTexture&&r.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var l=this.gl;l.deleteProgram(this.program);
l.deleteBuffer(this.vertexBuffer);this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.texture=this.glTexture=this.framebuffer=null)}});p.exports=a},function(p,u,a){u=a(0);var h=a(11),f=a(36),c=a(116),b=a(15),d=a(479),g=a(480),e=a(19),l=a(69),k=a(1179),m=a(79),n=a(39),q=a(117);a=new u({Extends:b,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,k],initialize:function(r,t,w,v,x,y,A,B,z,C,
E,G){void 0===t&&(t=0);void 0===w&&(w=0);void 0===v&&(v="__WHITE");b.call(this,r,"Mesh");this.faces=[];this.vertices=[];this.tintFill=!1;this.debugGraphic=this.debugCallback=null;this.hideCCW=!0;this.modelPosition=new n;this.modelScale=new n(1,1,1);this.modelRotation=new n;this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0];this.transformMatrix=new l;this.viewPosition=new n;this.viewMatrix=new l;this.projectionMatrix=new l;this.totalFrame=this.totalRendered=0;this.ignoreDirtyCache=!1;r=r.sys.renderer;this.setPosition(t,
w);this.setTexture(v,x);this.setSize(r.width,r.height);this.initPipeline();this.setPerspective(r.width,r.height);y&&this.addVertices(y,A,B,z,C,E,G)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(r){this.viewPosition.addScale(n.LEFT,r);this.dirtyCache[10]=1;return this},panY:function(r){this.viewPosition.y+=n.DOWN.y*r;this.dirtyCache[10]=1;return this},panZ:function(r){this.viewPosition.z+=r;this.dirtyCache[10]=
1;return this},setPerspective:function(r,t,w,v,x){void 0===w&&(w=45);void 0===v&&(v=.01);void 0===x&&(x=1E3);this.projectionMatrix.perspective(f(w),r/t,v,x);this.dirtyCache[10]=1;this.dirtyCache[11]=0;return this},setOrtho:function(r,t,w,v){void 0===r&&(r=this.scene.sys.renderer.getAspectRatio());void 0===t&&(t=1);void 0===w&&(w=-1E3);void 0===v&&(v=1E3);this.projectionMatrix.ortho(-r,r,-t,t,w,v);this.dirtyCache[10]=1;this.dirtyCache[11]=1;return this},clear:function(){this.faces.forEach(function(r){r.destroy()});
this.faces=[];this.vertices=[];return this},addVerticesFromObj:function(r,t,w,v,x,y,A,B,z){(r=this.scene.sys.cache.obj.get(r))&&g(r,this,t,w,v,x,y,A,B,z);return this},sortByDepth:function(r,t){return r.depth-t.depth},depthSort:function(){m(this.faces,this.sortByDepth);return this},addVertex:function(r,t,w,v,x,y,A){r=new q(r,t,w,v,x,y,A);this.vertices.push(r);return r},addFace:function(r,t,w){r=new c(r,t,w);this.faces.push(r);this.dirtyCache[9]=-1;return r},addVertices:function(r,t,w,v,x,y,A){if(r=
d(r,t,w,v,x,y,A))this.faces=this.faces.concat(r.faces),this.vertices=this.vertices.concat(r.vertices);this.dirtyCache[9]=-1;return this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(r){return this.faces[r]},getFaceAt:function(r,t,w){void 0===w&&(w=this.scene.sys.cameras.main);w=e(this,w).calc;for(var v=this.faces,x=[],y=0;y<v.length;y++){var A=v[y];A.contains(r,t,w)&&x.push(A)}return m(x,this.sortByDepth)},setDebug:function(r,
t){this.debugCallback=(this.debugGraphic=r)||t?t?t:this.renderDebug:null;return this},isDirty:function(){var r=this.modelPosition,t=this.modelRotation,w=this.modelScale,v=this.dirtyCache,x=r.x,y=r.y;r=r.z;var A=t.x,B=t.y;t=t.z;var z=w.x,C=w.y;w=w.z;var E=this.getFaceCount(),G=v[0],H=v[1],I=v[2],K=v[3],O=v[4],R=v[5],F=v[6],J=v[7],N=v[8],Q=v[9];v[0]=x;v[1]=y;v[2]=r;v[3]=A;v[4]=B;v[5]=t;v[6]=z;v[7]=C;v[8]=w;v[9]=E;return G!==x||H!==y||I!==r||K!==A||O!==B||R!==t||F!==z||J!==C||N!==w||Q!==E},preUpdate:function(){this.totalRendered=
this.totalFrame;this.totalFrame=0;var r=this.dirtyCache;if(this.ignoreDirtyCache||r[10]||this.isDirty()){var t=this.width,w=this.height,v=this.viewMatrix,x=this.viewPosition;r[10]&&(v.identity(),v.translate(x),v.invert(),r[10]=0);r=this.transformMatrix;r.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);x=x.z;v=this.faces;for(var y=0;y<v.length;y++)v[y].transformCoordinatesLocal(r,t,w,x);this.depthSort()}},renderDebug:function(r,t){r=r.debugGraphic;
for(var w=0;w<t.length;w++){var v=t[w];r.strokeTriangle(v.vertex1.tx,v.vertex1.ty,v.vertex2.tx,v.vertex2.ty,v.vertex3.tx,v.vertex3.ty)}},preDestroy:function(){this.clear();this.debugGraphic=this.debugCallback=null}});p.exports=a},function(p,u,a){var h=a(50);p.exports=function(f,c){return h(f.x,f.y,c.x,c.y)<=f.radius+c.radius}},function(p,u,a){var h=a(4),f=a(233);p.exports=function(c,b,d){void 0===d&&(d=[]);if(f(c,b)){var g=c.x1,e=c.y1,l=b.radius,k=c.x2-g;c=c.y2-e;var m=g-b.x,n=e-b.y;b=k*k+c*c;var q=
2*(k*m+c*n);l=q*q-4*b*(m*m+n*n-l*l);0===l?(l=-q/(2*b),0<=l&&1>=l&&d.push(new h(g+l*k,e+l*c))):0<l&&(m=(-q-Math.sqrt(l))/(2*b),0<=m&&1>=m&&d.push(new h(g+m*k,e+m*c)),l=(-q+Math.sqrt(l))/(2*b),0<=l&&1>=l&&d.push(new h(g+l*k,e+l*c)))}return d}},function(p,u,a){var h=a(66),f=new (a(4));p.exports=function(c,b,d){void 0===d&&(d=f);if(h(b,c.x1,c.y1))return d.x=c.x1,d.y=c.y1,!0;if(h(b,c.x2,c.y2))return d.x=c.x2,d.y=c.y2,!0;var g=c.x2-c.x1,e=c.y2-c.y1,l=b.x-c.x1,k=b.y-c.y1,m=g*g+e*e,n=g,q=e;0<m&&(l=(l*g+k*
e)/m,n*=l,q*=l);d.x=c.x1+n;d.y=c.y1+q;return n*n+q*q<=m&&0<=n*g+q*e&&h(b,d.x,d.y)}},function(p,u,a){var h=a(4),f=a(96),c=a(488);p.exports=function(b,d,g){void 0===g&&(g=[]);if(c(b,d)){var e=d.getLineA(),l=d.getLineB(),k=d.getLineC(),m=d.getLineD();d=[new h,new h,new h,new h];b=[f(e,b,d[0]),f(l,b,d[1]),f(k,b,d[2]),f(m,b,d[3])];for(e=0;4>e;e++)b[e]&&g.push(d[e])}return g}},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=!1);void 0===c&&(c=[]);var b=a.x3-a.x1,d=a.y3-a.y1,g=a.x2-a.x1,e=a.y2-
a.y1,l=b*b+d*d,k=b*g+d*e,m=g*g+e*e,n=l*m-k*k;n=0===n?0:1/n;var q=a.x1;a=a.y1;for(var r=0;r<h.length;r++){var t=h[r].x-q;var w=h[r].y-a;var v=b*t+d*w;w=g*t+e*w;t=(m*v-k*w)*n;v=(l*w-k*v)*n;if(0<=t&&0<=v&&1>t+v&&(c.push({x:h[r].x,y:h[r].y}),f))break}return c}},function(p,u){p.exports=function(a,h,f,c){var b=Math.cos(c);c=Math.sin(c);var d=a.x1-h,g=a.y1-f;a.x1=d*b-g*c+h;a.y1=d*c+g*b+f;d=a.x2-h;g=a.y2-f;a.x2=d*b-g*c+h;a.y2=d*c+g*b+f;return a}},function(p,u){p.exports=function(a){return 0===a.height?NaN:
a.width/a.height}},function(p,u){p.exports=function(a,h,f,c){var b=Math.cos(c);c=Math.sin(c);var d=a.x1-h,g=a.y1-f;a.x1=d*b-g*c+h;a.y1=d*c+g*b+f;d=a.x2-h;g=a.y2-f;a.x2=d*b-g*c+h;a.y2=d*c+g*b+f;d=a.x3-h;g=a.y3-f;a.x3=d*b-g*c+h;a.y3=d*c+g*b+f;return a}},function(p,u,a){p.exports={BUTTON_DOWN:a(1310),BUTTON_UP:a(1311),CONNECTED:a(1312),DISCONNECTED:a(1313),GAMEPAD_BUTTON_DOWN:a(1314),GAMEPAD_BUTTON_UP:a(1315)}},function(p,u,a){var h=a(17),f=a(156);p.exports=function(c,b){c=void 0===c?f():h({},c);if(b)for(var d in b)void 0!==
b[d]&&(c[d]=b[d]);return c}},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=a(408),e=new u({Extends:f,initialize:function(l,k,m,n){var q="xml";if(d(k)){var r=k;k=b(r,"key");m=b(r,"url");n=b(r,"xhrSettings");q=b(r,"extension",q)}f.call(this,l,{type:"xml",cache:l.cacheManager.xml,extension:q,responseType:"text",key:k,url:m,xhrSettings:n})},onProcess:function(){this.state=h.FILE_PROCESSING;if(this.data=g(this.xhrLoader.responseText))this.onProcessComplete();else console.warn("Invalid XMLFile: "+
this.key),this.onProcessError()}});c.register("xml",function(l,k,m){if(Array.isArray(l))for(k=0;k<l.length;k++)this.addFile(new e(this,l[k]));else this.addFile(new e(this,l,k,m));return this});p.exports=e},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m){var n="text",q="txt",r=e.cacheManager.text;if(d(l)){var t=l;l=b(t,"key");k=b(t,"url");m=b(t,"xhrSettings");q=b(t,"extension",q);n=b(t,"type",n);r=b(t,"cache",r)}f.call(this,e,{type:n,
cache:r,extension:q,responseType:"text",key:l,url:k,xhrSettings:m})},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()}});c.register("text",function(e,l,k){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k));return this});p.exports=g},function(p,u,a){p.exports={Acceleration:a(1368),Angular:a(1369),Bounce:a(1370),Debug:a(1371),Drag:a(1372),Enable:a(1373),Friction:a(1374),Gravity:a(1375),
Immovable:a(1376),Mass:a(1377),OverlapCirc:a(523),OverlapRect:a(244),Pushable:a(1378),Size:a(1379),Velocity:a(1380)}},function(p,u){p.exports=function(a,h,f,c,b,d,g){void 0===d&&(d=!0);void 0===g&&(g=!1);var e=[],l=[],k=a.treeMinMax;k.minX=h;k.minY=f;k.maxX=h+c;k.maxY=f+b;g&&(l=a.staticTree.search(k));if(d&&a.useTree)e=a.tree.search(k);else if(d){var m={position:{x:h,y:f},left:h,top:f,right:h+c,bottom:f+b,isCircle:!1},n=a.intersects;a.bodies.iterate(function(q){n(q,m)&&e.push(q)})}return l.concat(e)}},
function(p,u,a){p.exports={COLLIDE:a(1381),OVERLAP:a(1382),PAUSE:a(1383),RESUME:a(1384),TILE_COLLIDE:a(1385),TILE_OVERLAP:a(1386),WORLD_BOUNDS:a(1387),WORLD_STEP:a(1388)}},function(p,u,a){var h=a(62);p.exports=function(f,c,b,d){var g=0;d=f.deltaAbsX()+c.deltaAbsX()+d;0===f._dx&&0===c._dx?(f.embedded=!0,c.embedded=!0):f._dx>c._dx?(g=f.right-c.x,g>d&&!b||!1===f.checkCollision.right||!1===c.checkCollision.left?g=0:(f.touching.none=!1,f.touching.right=!0,c.touching.none=!1,c.touching.left=!0,c.physicsType!==
h.STATIC_BODY||b||(f.blocked.none=!1,f.blocked.right=!0),f.physicsType!==h.STATIC_BODY||b||(c.blocked.none=!1,c.blocked.left=!0))):f._dx<c._dx&&(g=f.x-c.width-c.x,-g>d&&!b||!1===f.checkCollision.left||!1===c.checkCollision.right?g=0:(f.touching.none=!1,f.touching.left=!0,c.touching.none=!1,c.touching.right=!0,c.physicsType!==h.STATIC_BODY||b||(f.blocked.none=!1,f.blocked.left=!0),f.physicsType!==h.STATIC_BODY||b||(c.blocked.none=!1,c.blocked.right=!0)));f.overlapX=g;return c.overlapX=g}},function(p,
u,a){var h=a(62);p.exports=function(f,c,b,d){var g=0;d=f.deltaAbsY()+c.deltaAbsY()+d;0===f._dy&&0===c._dy?(f.embedded=!0,c.embedded=!0):f._dy>c._dy?(g=f.bottom-c.y,g>d&&!b||!1===f.checkCollision.down||!1===c.checkCollision.up?g=0:(f.touching.none=!1,f.touching.down=!0,c.touching.none=!1,c.touching.up=!0,c.physicsType!==h.STATIC_BODY||b||(f.blocked.none=!1,f.blocked.down=!0),f.physicsType!==h.STATIC_BODY||b||(c.blocked.none=!1,c.blocked.up=!0))):f._dy<c._dy&&(g=f.y-c.bottom,-g>d&&!b||!1===f.checkCollision.up||
!1===c.checkCollision.down?g=0:(f.touching.none=!1,f.touching.up=!0,c.touching.none=!1,c.touching.down=!0,c.physicsType!==h.STATIC_BODY||b||(f.blocked.none=!1,f.blocked.up=!0),f.physicsType!==h.STATIC_BODY||b||(c.blocked.none=!1,c.blocked.down=!0)));f.overlapY=g;return c.overlapY=g}},function(p,u){p.exports=function(a,h){return!(h.right<=a.left||h.bottom<=a.top||h.position.x>=a.right||h.position.y>=a.bottom)}},function(p,u,a){p.exports={Bounce:a(1495),Collision:a(1496),Force:a(1497),Friction:a(1498),
Gravity:a(1499),Mass:a(1500),Sensor:a(1501),SetBody:a(1502),Sleep:a(1503),Static:a(1520),Transform:a(1521),Velocity:a(1522)}},function(p,u){var a={};p.exports=a;(function(){a.create=function(h,f){var c=h.bodyA,b=h.bodyB;c={id:a.id(c,b),bodyA:c,bodyB:b,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||b.isSensor,timeCreated:f,timeUpdated:f,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};a.update(c,h,f);return c};a.update=function(h,f,
c){h.collision=f;if(f.collided){var b=f.supports,d=h.activeContacts,g=f.parentA,e=f.parentB;h.inverseMass=g.inverseMass+e.inverseMass;h.friction=Math.min(g.friction,e.friction);h.frictionStatic=Math.max(g.frictionStatic,e.frictionStatic);h.restitution=Math.max(g.restitution,e.restitution);h.slop=Math.max(g.slop,e.slop);for(g=0;g<b.length;g++)d[g]=b[g].contact;b=b.length;b<d.length&&(d.length=b);h.separation=f.depth;a.setActive(h,!0,c)}else!0===h.isActive&&a.setActive(h,!1,c)};a.setActive=function(h,
f,c){f?(h.isActive=!0,h.timeUpdated=c):(h.isActive=!1,h.activeContacts.length=0)};a.id=function(h,f){return h.id<f.id?"A"+h.id+"B"+f.id:"A"+f.id+"B"+h.id}})()},function(p,u,a){p.exports={CalculateFacesAt:a(252),CalculateFacesWithin:a(63),CheckIsoBounds:a(541),Copy:a(1420),CreateFromTiles:a(1421),CullBounds:a(543),CullTiles:a(544),Fill:a(1422),FilterTiles:a(1423),FindByIndex:a(1424),FindTile:a(1425),ForEachTile:a(1426),GetCullTilesFunction:a(1427),GetTileAt:a(158),GetTileAtWorldXY:a(1428),GetTilesWithin:a(26),
GetTilesWithinShape:a(1429),GetTilesWithinWorldXY:a(529),GetTileToWorldXFunction:a(1430),GetTileToWorldXYFunction:a(1431),GetTileToWorldYFunction:a(1432),GetWorldToTileXFunction:a(1433),GetWorldToTileXYFunction:a(1434),GetWorldToTileYFunction:a(1435),HasTileAt:a(562),HasTileAtWorldXY:a(1436),HexagonalCullBounds:a(546),HexagonalCullTiles:a(545),HexagonalTileToWorldXY:a(550),HexagonalTileToWorldY:a(554),HexagonalWorldToTileXY:a(556),HexagonalWorldToTileY:a(560),IsInLayerBounds:a(119),IsometricCullTiles:a(547),
IsometricTileToWorldXY:a(551),IsometricWorldToTileXY:a(557),PutTileAt:a(257),PutTileAtWorldXY:a(1437),PutTilesAt:a(1438),Randomize:a(1439),RemoveTileAt:a(563),RemoveTileAtWorldXY:a(1440),RenderDebug:a(1441),ReplaceByIndex:a(542),RunCull:a(159),SetCollision:a(1442),SetCollisionBetween:a(1443),SetCollisionByExclusion:a(1444),SetCollisionByProperty:a(1445),SetCollisionFromCollisionGroup:a(1446),SetLayerCollisionIndex:a(160),SetTileCollision:a(72),SetTileIndexCallback:a(1447),SetTileLocationCallback:a(1448),
Shuffle:a(1449),StaggeredCullBounds:a(549),StaggeredCullTiles:a(548),StaggeredTileToWorldXY:a(552),StaggeredTileToWorldY:a(555),StaggeredWorldToTileXY:a(558),StaggeredWorldToTileY:a(561),SwapByIndex:a(1450),TileToWorldX:a(253),TileToWorldXY:a(553),TileToWorldY:a(254),WeightedRandomize:a(1451),WorldToTileX:a(255),WorldToTileXY:a(559),WorldToTileY:a(256)}},function(p,u,a){var h=a(158);p.exports=function(f,c,b){var d=h(f,c,!0,b),g=h(f,c-1,!0,b),e=h(f,c+1,!0,b),l=h(f-1,c,!0,b);f=h(f+1,c,!0,b);if(c=d&&
d.collides)d.faceTop=!0,d.faceBottom=!0,d.faceLeft=!0,d.faceRight=!0;g&&g.collides&&(c&&(d.faceTop=!1),g.faceBottom=!c);e&&e.collides&&(c&&(d.faceBottom=!1),e.faceTop=!c);l&&l.collides&&(c&&(d.faceLeft=!1),l.faceRight=!c);f&&f.collides&&(c&&(d.faceRight=!1),f.faceLeft=!c);d&&!d.collides&&d.resetFaces();return d}},function(p,u){p.exports=function(a,h,f){var c=f.baseTileWidth;f=f.tilemapLayer;var b=0;f&&(h||(h=f.scene.cameras.main),b=f.x+h.scrollX*(1-f.scrollFactorX),c*=f.scaleX);return b+a*c}},function(p,
u){p.exports=function(a,h,f){var c=f.baseTileHeight;f=f.tilemapLayer;var b=0;f&&(h||(h=f.scene.cameras.main),b=f.y+h.scrollY*(1-f.scrollFactorY),c*=f.scaleY);return b+a*c}},function(p,u){p.exports=function(a,h,f,c){void 0===h&&(h=!0);var b=c.baseTileWidth;if(c=c.tilemapLayer)f||(f=c.scene.cameras.main),a-=c.x+f.scrollX*(1-c.scrollFactorX),b*=c.scaleX;return h?Math.floor(a/b):a/b}},function(p,u){p.exports=function(a,h,f,c){void 0===h&&(h=!0);var b=c.baseTileHeight;if(c=c.tilemapLayer)f||(f=c.scene.cameras.main),
a-=c.y+f.scrollY*(1-c.scrollFactorY),b*=c.scaleY;return h?Math.floor(a/b):a/b}},function(p,u,a){var h=a(85),f=a(119),c=a(252),b=a(72);p.exports=function(d,g,e,l,k){void 0===l&&(l=!0);if(!f(g,e,k))return null;var m=k.data[e][g];m=m&&m.collides;d instanceof h?(null===k.data[e][g]&&(k.data[e][g]=new h(k,d.index,g,e,k.tileWidth,k.tileHeight)),k.data[e][g].copy(d)):null===k.data[e][g]?k.data[e][g]=new h(k,d,g,e,k.tileWidth,k.tileHeight):k.data[e][g].index=d;d=k.data[e][g];var n=-1!==k.collideIndexes.indexOf(d.index);
b(d,n);l&&m!==d.collides&&c(g,e,k);return d}},function(p,u,a){var h=a(29);p.exports=function(f){f=f.toLowerCase();return"isometric"===f?h.ISOMETRIC:"staggered"===f?h.STAGGERED:"hexagonal"===f?h.HEXAGONAL:h.ORTHOGONAL}},function(p,u,a){var h=a(40),f=a(120),c=a(121),b=a(85);p.exports=function(d,g,e,l,k){var m=new f({tileWidth:e,tileHeight:l});d=new c({name:d,tileWidth:e,tileHeight:l,format:h.ARRAY_2D,layers:[m]});for(var n=[],q=g.length,r=0,t=0;t<g.length;t++){n[t]=[];for(var w=g[t],v=0;v<w.length;v++){var x=
parseInt(w[v],10);isNaN(x)||-1===x?n[t][v]=k?null:new b(m,-1,v,t,e,l):n[t][v]=new b(m,x,v,t,e,l)}0===r&&(r=w.length)}d.width=m.width=r;d.height=m.height=q;d.widthInPixels=m.widthInPixels=r*e;d.heightInPixels=m.heightInPixels=q*l;m.data=n;return d}},function(p,u,a){var h=a(571),f=a(261),c=function(d){return{x:d.x,y:d.y}},b="id name type rotation properties visible x y width height".split(" ");p.exports=function(d,g,e){void 0===g&&(g=0);void 0===e&&(e=0);var l=h(d,b);l.x+=g;l.y+=e;d.gid?(d=f(d.gid),
l.gid=d.gid,l.flippedHorizontal=d.flippedHorizontal,l.flippedVertical=d.flippedVertical,l.flippedAntiDiagonal=d.flippedAntiDiagonal):d.polyline?l.polyline=d.polyline.map(c):d.polygon?l.polygon=d.polygon.map(c):d.ellipse?l.ellipse=d.ellipse:d.text?l.text=d.text:d.point?l.point=!0:l.rectangle=!0;return l}},function(p,u){p.exports=function(a){var h=!!(a&2147483648),f=!!(a&1073741824),c=!!(a&536870912),b=0,d=!1;h&&f&&c?(b=Math.PI/2,d=!0):h&&f&&!c?(b=Math.PI,d=!1):h&&!f&&c?(b=Math.PI/2,d=!1):!h||f||c?
!h&&f&&c?(b=3*Math.PI/2,d=!1):h||!f||c?h||f||!c?h||f||c||(b=0,d=!1):(b=3*Math.PI/2,d=!0):(b=Math.PI,d=!0):(b=0,d=!0);return{gid:a&536870911,flippedHorizontal:h,flippedVertical:f,flippedAntiDiagonal:c,rotation:b,flipped:d}}},function(p,u,a){var h=a(40),f=a(121),c=a(564),b=a(580);p.exports=function(d,g,e,l,k,m,n,q){void 0===e&&(e=32);void 0===l&&(l=32);void 0===k&&(k=10);void 0===m&&(m=10);void 0===q&&(q=!1);var r=null;Array.isArray(n)?r=c(void 0!==g?g:"map",h.ARRAY_2D,n,e,l,q):void 0!==g&&((n=d.cache.tilemap.get(g))?
r=c(g,n.format,n.data,e,l,q):console.warn("No map data found for key "+g));null===r&&(r=new f({tileWidth:e,tileHeight:l,width:k,height:m}));return new b(d,r)}},function(p,u,a){var h=a(6);p.exports=function(f){f=h(f,"targets",null);if(null===f)return f;"function"===typeof f&&(f=f.call());Array.isArray(f)||(f=[f]);return f}},function(p,u){var a=function(h,f){var c=function(n,q,r){return r},b=function(n,q,r){return r},d=null,g=typeof f;if("number"===g)c=function(){return f};else if("string"===g){c=f[0];
var e=parseFloat(f.substr(2));switch(c){case "+":c=function(n,q,r){return r+e};break;case "-":c=function(n,q,r){return r-e};break;case "*":c=function(n,q,r){return r*e};break;case "/":c=function(n,q,r){return r/e};break;default:c=function(){return parseFloat(f)}}}else if("function"===g)c=f;else if("object"===g)if(f.getStart&&"function"===typeof f.getStart||f.getEnd&&"function"===typeof f.getEnd||f.getActive&&"function"===typeof f.getActive)f.getActive&&"function"===typeof f.getActive&&(d=f.getActive),
f.getEnd&&"function"===typeof f.getEnd&&(c=f.getEnd),f.getStart&&"function"===typeof f.getStart&&(b=f.getStart);else if(f.hasOwnProperty("value"))var l=a(h,f.value);else{var k=f.hasOwnProperty("to");g=f.hasOwnProperty("from");var m=f.hasOwnProperty("start");k&&(g||m)&&(l=a(h,f.to),m&&(k=a(h,f.start),l.getActive=k.getEnd),g&&(h=a(h,f.from),l.getStart=h.getEnd))}l||(l={getActive:d,getEnd:c,getStart:b});return l};p.exports=a},function(p,u){p.exports={targets:null,delay:0,duration:1E3,ease:"Power0",easeParams:null,
hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(p,u,a){var h=a(0),f=a(9),c=a(267);u=a(16);var b=a(5),d=a(100),g=a(14);a=new h({Extends:f,initialize:function(e,l,k){f.call(this);this.parent=e;this.parentIsTimeline=e.hasOwnProperty("isTimeline");this.data=l;this.totalData=l.length;this.targets=k;this.totalTargets=k.length;this.useFrames=!1;this.timeScale=1;this.startDelay=this.loopCounter=this.loopDelay=this.loop=0;this.isSeeking=this.hasStarted=!1;this.calculatedOffset=this.offset=
this.countdown=this.completeDelay=0;this.state=d.PENDING_ADD;this._pausedState=d.INIT;this.paused=!1;this.totalProgress=this.totalDuration=this.progress=this.duration=this.totalElapsed=this.elapsed=0;this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null}},getValue:function(e){void 0===e&&(e=0);return this.data[e].current},setTimeScale:function(e){this.timeScale=e;return this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===
d.ACTIVE},isPaused:function(){return this.state===d.PAUSED},hasTarget:function(e){return-1!==this.targets.indexOf(e)},updateTo:function(e,l,k){void 0===k&&(k=!1);for(var m=0;m<this.totalData;m++){var n=this.data[m];n.key===e&&(n.end=l,k&&(n.start=n.current))}return this},restart:function(){this.totalProgress=this.totalElapsed=this.progress=this.elapsed=0;return this.state===d.ACTIVE?this.seek(0):this.state===d.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===d.PENDING_ADD?this:
this.play()},calcDuration:function(){for(var e=0,l=g.MAX_SAFE_INTEGER,k=this.data,m=0;m<this.totalData;m++){var n=k[m];n.t1=n.duration+n.hold;n.yoyo&&(n.t1+=n.duration);n.t2=n.t1+n.repeatDelay;n.totalDuration=n.delay+n.t1;-1===n.repeat?n.totalDuration+=999999999999*n.t2:0<n.repeat&&(n.totalDuration+=n.t2*n.repeat);n.totalDuration>e&&(e=n.totalDuration);n.delay<l&&(l=n.delay)}this.duration=Math.max(e,.001);this.loopCounter=-1===this.loop?999999999999:this.loop;this.totalDuration=0<this.loopCounter?
this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.duration+this.completeDelay;this.startDelay=l},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=d.PENDING_ADD,this._pausedState=d.INIT,!1;for(var e=this.data,l=this.totalTargets,k=0;k<this.totalData;k++){var m=e[k],n=m.target,q=m.gen,r=m.key,t=m.index;m.delay=q.delay(n,r,0,t,l,this);m.duration=Math.max(q.duration(n,r,0,t,l,this),.001);m.hold=q.hold(n,r,0,t,l,this);m.repeat=q.repeat(n,r,0,
t,l,this);m.repeatDelay=q.repeatDelay(n,r,0,t,l,this)}this.calcDuration();this.totalElapsed=this.elapsed=this.totalProgress=this.progress=0;this.state=d.INIT;return!0},makeActive:function(){this.parent.makeActive(this);this.dispatchTweenEvent(c.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){0<this.loopCounter?(this.progress=this.elapsed=0,this.loopCounter--,this.resetTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=d.LOOP_DELAY):(this.state=d.ACTIVE,this.dispatchTweenEvent(c.TWEEN_LOOP,
this.callbacks.onLoop))):0<this.completeDelay?(this.state=d.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=d.PENDING_REMOVE,this.dispatchTweenEvent(c.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){if(this.state===d.PAUSED)return this;this.paused=!0;this._pausedState=this.state;this.state=d.PAUSED;return this},play:function(e){void 0===e&&(e=!1);var l=this.state;if(l!==d.INIT||this.parentIsTimeline){if(l===d.ACTIVE||l===d.PENDING_ADD&&this._pausedState===d.PENDING_ADD)return this;
if(!this.parentIsTimeline&&(l===d.PENDING_REMOVE||l===d.REMOVED))return this.seek(0),this.parent.makeActive(this),this}else return this.resetTweenData(!1),this.state=d.ACTIVE,this;this.parentIsTimeline?(this.resetTweenData(e),0===this.calculatedOffset?this.state=d.ACTIVE:(this.countdown=this.calculatedOffset,this.state=d.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(e),this.state=d.ACTIVE),this.makeActive());return this},resetTweenData:function(e){for(var l=this.data,k=this.totalData,
m=this.totalTargets,n=0;n<k;n++){var q=l[n],r=q.target,t=q.key,w=q.index;q.progress=0;q.elapsed=0;q.repeatCounter=-1===q.repeat?999999999999:q.repeat;e?(q.start=q.getStartValue(r,t,q.start,w,m,this),q.end=q.getEndValue(r,t,q.end,w,m,this),q.current=q.start,q.state=d.PLAYING_FORWARD):q.state=d.PENDING_RENDER;0<q.delay&&(q.elapsed=q.delay,q.state=d.DELAY);q.getActiveValue&&(r[t]=q.getActiveValue(q.target,q.key,q.start))}},resume:function(){this.state===d.PAUSED?(this.paused=!1,this.state=this._pausedState):
this.play();return this},seek:function(e,l){void 0===l&&(l=16.6);this.state===d.REMOVED&&this.makeActive();this.totalProgress=this.totalElapsed=this.progress=this.elapsed=0;for(var k=this.data,m=this.totalTargets,n=0;n<this.totalData;n++){var q=k[n],r=q.target,t=q.gen,w=q.key,v=q.index;q.progress=0;q.elapsed=0;q.repeatCounter=-1===q.repeat?999999999999:q.repeat;q.delay=t.delay(r,w,0,v,m,this);q.duration=Math.max(t.duration(r,w,0,v,m,this),.001);q.hold=t.hold(r,w,0,v,m,this);q.repeat=t.repeat(r,w,
0,v,m,this);q.repeatDelay=t.repeatDelay(r,w,0,v,m,this);q.current=q.start;q.state=d.PLAYING_FORWARD;this.updateTweenData(this,q,0,v,m);0<q.delay&&(q.elapsed=q.delay,q.state=d.DELAY)}this.calcDuration();k=!1;this.state===d.PAUSED&&(k=!0,this.state=d.ACTIVE);this.isSeeking=!0;do this.update(0,l);while(this.totalProgress<e);this.isSeeking=!1;k&&(this.state=d.PAUSED);return this},setCallback:function(e,l,k,m){this.callbacks[e]={func:l,scope:m,params:k};return this},complete:function(e){void 0===e&&(e=
0);e?(this.state=d.COMPLETE_DELAY,this.countdown=e):(this.state=d.PENDING_REMOVE,this.dispatchTweenEvent(c.TWEEN_COMPLETE,this.callbacks.onComplete));return this},remove:function(){this.parent.remove(this);return this},stop:function(e){this.state===d.ACTIVE&&void 0!==e&&this.seek(e);if(this.state!==d.REMOVED){if(this.state===d.PAUSED||this.state===d.PENDING_ADD)this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++);
this.dispatchTweenEvent(c.TWEEN_STOP,this.callbacks.onStop);this.removeAllListeners();this.state=d.PENDING_REMOVE}return this},update:function(e,l){if(this.state===d.PAUSED)return!1;this.useFrames&&(l=1*this.parent.timeScale);l*=this.timeScale;this.elapsed+=l;this.progress=Math.min(this.elapsed/this.duration,1);this.totalElapsed+=l;this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1);switch(this.state){case d.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=l,0>=this.startDelay&&
(this.hasStarted=!0,this.dispatchTweenEvent(c.TWEEN_START,this.callbacks.onStart)));e=!1;for(var k=0;k<this.totalData;k++)this.updateTweenData(this,this.data[k],l)&&(e=!0);e||this.nextState();break;case d.LOOP_DELAY:this.countdown-=l;0>=this.countdown&&(this.state=d.ACTIVE,this.dispatchTweenEvent(c.TWEEN_LOOP,this.callbacks.onLoop));break;case d.OFFSET_DELAY:this.countdown-=l;0>=this.countdown&&(this.state=d.ACTIVE);break;case d.COMPLETE_DELAY:this.countdown-=l,0>=this.countdown&&(this.state=d.PENDING_REMOVE,
this.dispatchTweenEvent(c.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===d.PENDING_REMOVE},dispatchTweenDataEvent:function(e,l,k){this.isSeeking||(this.emit(e,this,k.key,k.target,k.current,k.previous),l&&(l.params[1]=k.target,l.func.apply(l.scope,l.params)))},dispatchTweenEvent:function(e,l){this.isSeeking||(this.emit(e,this,this.targets),l&&(l.params[1]=this.targets,l.func.apply(l.scope,l.params)))},setStateFromEnd:function(e,l,k){if(l.yoyo)return l.elapsed=k,l.progress=k/l.duration,
l.flipX&&l.target.toggleFlipX(),l.flipY&&l.target.toggleFlipY(),this.dispatchTweenDataEvent(c.TWEEN_YOYO,e.callbacks.onYoyo,l),l.start=l.getStartValue(l.target,l.key,l.start,l.index,e.totalTargets,e),d.PLAYING_BACKWARD;if(0<l.repeatCounter){l.repeatCounter--;l.elapsed=k;l.progress=k/l.duration;l.flipX&&l.target.toggleFlipX();l.flipY&&l.target.toggleFlipY();l.start=l.getStartValue(l.target,l.key,l.start,l.index,e.totalTargets,e);l.end=l.getEndValue(l.target,l.key,l.start,l.index,e.totalTargets,e);
if(0<l.repeatDelay)return l.elapsed=l.repeatDelay-k,l.current=l.start,l.target[l.key]=l.current,d.REPEAT_DELAY;this.dispatchTweenDataEvent(c.TWEEN_REPEAT,e.callbacks.onRepeat,l);return d.PLAYING_FORWARD}return d.COMPLETE},setStateFromStart:function(e,l,k){if(0<l.repeatCounter){l.repeatCounter--;l.elapsed=k;l.progress=k/l.duration;l.flipX&&l.target.toggleFlipX();l.flipY&&l.target.toggleFlipY();l.end=l.getEndValue(l.target,l.key,l.start,l.index,e.totalTargets,e);if(0<l.repeatDelay)return l.elapsed=
l.repeatDelay-k,l.current=l.start,l.target[l.key]=l.current,d.REPEAT_DELAY;this.dispatchTweenDataEvent(c.TWEEN_REPEAT,e.callbacks.onRepeat,l);return d.PLAYING_FORWARD}return d.COMPLETE},updateTweenData:function(e,l,k){var m=l.target;switch(l.state){case d.PLAYING_FORWARD:case d.PLAYING_BACKWARD:if(!m){l.state=d.COMPLETE;break}var n=l.elapsed,q=l.duration,r=0;n+=k;n>q&&(r=n-q,n=q);k=l.state===d.PLAYING_FORWARD;q=n/q;l.elapsed=n;l.progress=q;l.previous=l.current;1===q?k?(l.current=l.end,m[l.key]=l.end,
0<l.hold?(l.elapsed=l.hold-r,l.state=d.HOLD_DELAY):l.state=this.setStateFromEnd(e,l,r)):(l.current=l.start,m[l.key]=l.start,l.state=this.setStateFromStart(e,l,r)):(n=k?l.ease(q):l.ease(1-q),l.current=l.start+(l.end-l.start)*n,m[l.key]=l.current);this.dispatchTweenDataEvent(c.TWEEN_UPDATE,e.callbacks.onUpdate,l);break;case d.DELAY:l.elapsed-=k;0>=l.elapsed&&(l.elapsed=Math.abs(l.elapsed),l.state=d.PENDING_RENDER);break;case d.REPEAT_DELAY:l.elapsed-=k;0>=l.elapsed&&(l.elapsed=Math.abs(l.elapsed),l.state=
d.PLAYING_FORWARD,this.dispatchTweenDataEvent(c.TWEEN_REPEAT,e.callbacks.onRepeat,l));break;case d.HOLD_DELAY:l.elapsed-=k;0>=l.elapsed&&(l.state=this.setStateFromEnd(e,l,Math.abs(l.elapsed)));break;case d.PENDING_RENDER:m?(l.start=l.getStartValue(m,l.key,m[l.key],l.index,e.totalTargets,e),l.end=l.getEndValue(m,l.key,l.start,l.index,e.totalTargets,e),l.current=l.start,m[l.key]=l.start,l.state=d.PLAYING_FORWARD):l.state=d.COMPLETE}return l.state!==d.COMPLETE}});a.TYPES="onActive onComplete onLoop onRepeat onStart onStop onUpdate onYoyo".split(" ");
b.register("tween",function(e){return this.scene.sys.tweens.add(e)});u.register("tween",function(e){return this.scene.sys.tweens.create(e)});p.exports=a},function(p,u,a){p.exports={TIMELINE_COMPLETE:a(1466),TIMELINE_LOOP:a(1467),TIMELINE_PAUSE:a(1468),TIMELINE_RESUME:a(1469),TIMELINE_START:a(1470),TIMELINE_UPDATE:a(1471),TWEEN_ACTIVE:a(1472),TWEEN_COMPLETE:a(1473),TWEEN_LOOP:a(1474),TWEEN_REPEAT:a(1475),TWEEN_START:a(1476),TWEEN_STOP:a(1477),TWEEN_UPDATE:a(1478),TWEEN_YOYO:a(1479)}},function(p,u){p.exports=
function(a,h,f,c,b,d,g,e,l,k,m,n,q,r,t){return{target:a,index:h,key:f,getActiveValue:d,getEndValue:c,getStartValue:b,ease:g,duration:0,totalDuration:0,delay:0,yoyo:k,hold:0,repeat:0,repeatDelay:0,flipX:r,flipY:t,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:e,duration:l,hold:m,repeat:n,repeatDelay:q},state:0}}},function(p,u,a){var h=a(68);p.exports=function(f){return h(f,-Math.PI,Math.PI)}},function(p,u,a){var h=a(68);p.exports=function(f){return h(f,
-180,180)}},function(p,u,a){var h={};p.exports=h;var f=a(83),c=a(32);(function(){h.fromVertices=function(b){for(var d={},g=0;g<b.length;g++){var e=(g+1)%b.length;e=f.normalise({x:b[e].y-b[g].y,y:b[g].x-b[e].x});var l=0===e.y?Infinity:e.x/e.y;l=l.toFixed(3).toString();d[l]=e}return c.values(d)};h.rotate=function(b,d){if(0!==d){var g=Math.cos(d);d=Math.sin(d);for(var e=0;e<b.length;e++){var l=b[e];var k=l.x*g-l.y*d;l.y=l.x*d+l.y*g;l.x=k}}}})()},function(p,u,a){p.exports={AFTER_ADD:a(1504),AFTER_REMOVE:a(1505),
AFTER_UPDATE:a(1506),BEFORE_ADD:a(1507),BEFORE_REMOVE:a(1508),BEFORE_UPDATE:a(1509),COLLISION_ACTIVE:a(1510),COLLISION_END:a(1511),COLLISION_START:a(1512),DRAG_END:a(1513),DRAG:a(1514),DRAG_START:a(1515),PAUSE:a(1516),RESUME:a(1517),SLEEP_END:a(1518),SLEEP_START:a(1519)}},function(p,u,a){var h={};p.exports=h;var f=a(274),c=a(250),b=a(84);(function(){h.collisions=function(d,g){var e=[],l=g.pairs.table;g=g.metrics;for(var k=0;k<d.length;k++){var m=d[k][0],n=d[k][1];if((!m.isStatic&&!m.isSleeping||!n.isStatic&&
!n.isSleeping)&&h.canCollide(m.collisionFilter,n.collisionFilter)&&(g.midphaseTests+=1,b.overlaps(m.bounds,n.bounds)))for(var q=1<m.parts.length?1:0;q<m.parts.length;q++)for(var r=m.parts[q],t=1<n.parts.length?1:0;t<n.parts.length;t++){var w=n.parts[t];if(r===m&&w===n||b.overlaps(r.bounds,w.bounds)){var v=c.id(r,w);v=l[v];w=f.collides(r,w,v&&v.isActive?v.collision:null);g.narrowphaseTests+=1;w.reused&&(g.narrowReuseCount+=1);w.collided&&(e.push(w),g.narrowDetections+=1)}}}return e};h.canCollide=function(d,
g){return d.group===g.group&&0!==d.group?0<d.group:0!==(d.mask&g.category)&&0!==(g.mask&d.category)}})()},function(p,u,a){var h={};p.exports=h;var f=a(64),c=a(83);(function(){h.collides=function(b,d,g){var e=!1;if(g){var l=b.parent;e=d.parent;l=l.speed*l.speed+l.angularSpeed*l.angularSpeed+e.speed*e.speed+e.angularSpeed*e.angularSpeed;e=g&&g.collided&&.2>l;l=g}else l={collided:!1,bodyA:b,bodyB:d};if(g&&e){if(e=l.axisBody,g=h._overlapAxes(e.vertices,(e===b?d:b).vertices,[e.axes[g.axisNumber]]),l.reused=
!0,0>=g.overlap)return l.collided=!1,l}else{g=h._overlapAxes(b.vertices,d.vertices,b.axes);if(0>=g.overlap)return l.collided=!1,l;e=h._overlapAxes(d.vertices,b.vertices,d.axes);if(0>=e.overlap)return l.collided=!1,l;g.overlap<e.overlap?l.axisBody=b:(g=e,l.axisBody=d);l.axisNumber=g.axisNumber}l.bodyA=b.id<d.id?b:d;l.bodyB=b.id<d.id?d:b;l.collided=!0;l.depth=g.overlap;l.parentA=l.bodyA.parent;l.parentB=l.bodyB.parent;b=l.bodyA;d=l.bodyB;0>c.dot(g.axis,c.sub(d.position,b.position))?l.normal={x:g.axis.x,
y:g.axis.y}:l.normal={x:-g.axis.x,y:-g.axis.y};l.tangent=c.perp(l.normal);l.penetration=l.penetration||{};l.penetration.x=l.normal.x*l.depth;l.penetration.y=l.normal.y*l.depth;g=h._findSupports(b,d,l.normal);e=[];f.contains(b.vertices,g[0])&&e.push(g[0]);f.contains(b.vertices,g[1])&&e.push(g[1]);2>e.length&&(b=h._findSupports(d,b,c.neg(l.normal)),f.contains(d.vertices,b[0])&&e.push(b[0]),2>e.length&&f.contains(d.vertices,b[1])&&e.push(b[1]));1>e.length&&(e=[g[0]]);l.supports=e;return l};h._overlapAxes=
function(b,d,g){for(var e=c._temp[0],l=c._temp[1],k={overlap:Number.MAX_VALUE},m,n,q=0;q<g.length;q++){n=g[q];h._projectToAxis(e,b,n);h._projectToAxis(l,d,n);m=Math.min(e.max-l.min,l.max-e.min);if(0>=m){k.overlap=m;break}m<k.overlap&&(k.overlap=m,k.axis=n,k.axisNumber=q)}return k};h._projectToAxis=function(b,d,g){for(var e=c.dot(d[0],g),l=e,k=1;k<d.length;k+=1){var m=c.dot(d[k],g);m>l?l=m:m<e&&(e=m)}b.min=e;b.max=l};h._findSupports=function(b,d,g){var e=Number.MAX_VALUE,l=c._temp[0];d=d.vertices;
b=b.position;var k;for(k=0;k<d.length;k++){var m=d[k];l.x=m.x-b.x;l.y=m.y-b.y;var n=-c.dot(g,l);if(n<e){e=n;var q=m}}m=d[0<=q.index-1?q.index-1:d.length-1];l.x=m.x-b.x;l.y=m.y-b.y;e=-c.dot(g,l);k=m;m=d[(q.index+1)%d.length];l.x=m.x-b.x;l.y=m.y-b.y;n=-c.dot(g,l);n<e&&(k=m);return[q,k]}})()},function(p,u,a){p.exports={AlignTo:a(601),Angle:a(602),Call:a(603),GetFirst:a(604),GetLast:a(605),GridAlign:a(606),IncAlpha:a(678),IncX:a(679),IncXY:a(680),IncY:a(681),PlaceOnCircle:a(682),PlaceOnEllipse:a(683),
PlaceOnLine:a(684),PlaceOnRectangle:a(685),PlaceOnTriangle:a(686),PlayAnimation:a(687),PropertyValueInc:a(46),PropertyValueSet:a(27),RandomCircle:a(688),RandomEllipse:a(689),RandomLine:a(690),RandomRectangle:a(691),RandomTriangle:a(692),Rotate:a(693),RotateAround:a(694),RotateAroundDistance:a(695),ScaleX:a(696),ScaleXY:a(697),ScaleY:a(698),SetAlpha:a(699),SetBlendMode:a(700),SetDepth:a(701),SetHitArea:a(702),SetOrigin:a(703),SetRotation:a(704),SetScale:a(705),SetScaleX:a(706),SetScaleY:a(707),SetScrollFactor:a(708),
SetScrollFactorX:a(709),SetScrollFactorY:a(710),SetTint:a(711),SetVisible:a(712),SetX:a(713),SetXY:a(714),SetY:a(715),ShiftPosition:a(716),Shuffle:a(717),SmootherStep:a(718),SmoothStep:a(719),Spread:a(720),ToggleVisible:a(721),WrapInRectangle:a(722)}},function(p,u,a){u=a(123);var h=[];h[u.BOTTOM_CENTER]=a(277);h[u.BOTTOM_LEFT]=a(278);h[u.BOTTOM_RIGHT]=a(279);h[u.LEFT_BOTTOM]=a(280);h[u.LEFT_CENTER]=a(281);h[u.LEFT_TOP]=a(282);h[u.RIGHT_BOTTOM]=a(283);h[u.RIGHT_CENTER]=a(284);h[u.RIGHT_TOP]=a(285);
h[u.TOP_CENTER]=a(286);h[u.TOP_LEFT]=a(287);h[u.TOP_RIGHT]=a(288);p.exports=function(f,c,b,d,g){return h[b](f,c,d,g)}},function(p,u,a){var h=a(42),f=a(87),c=a(88),b=a(52);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);c(d,f(g)+e);b(d,h(g)+l);return d}},function(p,u,a){var h=a(42),f=a(43),c=a(53),b=a(52);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);c(d,f(g)-e);b(d,h(g)+l);return d}},function(p,u,a){var h=a(42),f=a(44),c=a(54),b=a(52);p.exports=function(d,g,e,l){void 0===
e&&(e=0);void 0===l&&(l=0);c(d,f(g)+e);b(d,h(g)+l);return d}},function(p,u,a){var h=a(42),f=a(43),c=a(55),b=a(54);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)-e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(89),f=a(43),c=a(90),b=a(54);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)-e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(43),f=a(45),c=a(54),b=a(52);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);c(d,h(g)-e);b(d,f(g)-
l);return d}},function(p,u,a){var h=a(42),f=a(44),c=a(55),b=a(53);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)+e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(89),f=a(44),c=a(90),b=a(53);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)+e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(44),f=a(45),c=a(53),b=a(52);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);c(d,h(g)+e);b(d,f(g)-l);return d}},function(p,u,a){var h=a(87),f=a(45),
c=a(55),b=a(88);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,h(g)+e);c(d,f(g)-l);return d}},function(p,u,a){var h=a(43),f=a(45),c=a(55),b=a(53);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,h(g)-e);c(d,f(g)-l);return d}},function(p,u,a){var h=a(44),f=a(45),c=a(55),b=a(54);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,h(g)+e);c(d,f(g)-l);return d}},function(p,u,a){u=a(123);var h=[];h[u.BOTTOM_CENTER]=a(290);h[u.BOTTOM_LEFT]=a(291);
h[u.BOTTOM_RIGHT]=a(292);h[u.CENTER]=a(293);h[u.LEFT_CENTER]=a(295);h[u.RIGHT_CENTER]=a(296);h[u.TOP_CENTER]=a(297);h[u.TOP_LEFT]=a(298);h[u.TOP_RIGHT]=a(299);h[u.LEFT_BOTTOM]=h[u.BOTTOM_LEFT];h[u.LEFT_TOP]=h[u.TOP_LEFT];h[u.RIGHT_BOTTOM]=h[u.BOTTOM_RIGHT];h[u.RIGHT_TOP]=h[u.TOP_RIGHT];p.exports=function(f,c,b,d,g){return h[b](f,c,d,g)}},function(p,u,a){var h=a(42),f=a(87),c=a(55),b=a(88);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)+e);c(d,h(g)+l);return d}},function(p,
u,a){var h=a(42),f=a(43),c=a(55),b=a(53);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)-e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(42),f=a(44),c=a(55),b=a(54);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)+e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(294),f=a(87),c=a(89);p.exports=function(b,d,g,e){void 0===g&&(g=0);void 0===e&&(e=0);h(b,f(d)+g,c(d)+e);return b}},function(p,u,a){var h=a(88),f=a(90);p.exports=function(c,b,d){h(c,b);return f(c,
d)}},function(p,u,a){var h=a(89),f=a(43),c=a(90),b=a(53);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)-e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(89),f=a(44),c=a(90),b=a(54);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);b(d,f(g)+e);c(d,h(g)+l);return d}},function(p,u,a){var h=a(87),f=a(45),c=a(88),b=a(52);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);c(d,h(g)+e);b(d,f(g)-l);return d}},function(p,u,a){var h=a(43),f=a(45),c=a(53),
b=a(52);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);c(d,h(g)-e);b(d,f(g)-l);return d}},function(p,u,a){var h=a(44),f=a(45),c=a(54),b=a(52);p.exports=function(d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=0);c(d,h(g)+e);b(d,f(g)-l);return d}},function(p,u,a){var h=a(169),f=a(98),c=a(14),b=a(4);p.exports=function(d,g,e){void 0===e&&(e=new b);g=f(g,0,c.PI2);return h(d,g,e)}},function(p,u,a){var h=a(302),f=a(169),c=a(98),b=a(14);p.exports=function(d,g,e,l){void 0===l&&(l=[]);!g&&0<e&&
(g=h(d)/e);for(e=0;e<g;e++){var k=c(e/g,0,b.PI2);l.push(f(d,k))}return l}},function(p,u){p.exports=function(a){return 2*Math.PI*a.radius}},function(p,u,a){var h=a(18);p.exports={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(f){void 0===f&&(f=1);this.alpha=f;return this},alpha:{get:function(){return this._alpha},set:function(f){this._alpha=f=h(f,0,1);this.renderFlags=0===f?this.renderFlags&-3:this.renderFlags|2}}}},function(p,u,a){var h=a(35);p.exports={_blendMode:h.NORMAL,
blendMode:{get:function(){return this._blendMode},set:function(f){"string"===typeof f&&(f=h[f]);f|=0;-1<=f&&(this._blendMode=f)}},setBlendMode:function(f){this.blendMode=f;return this}}},function(p,u){p.exports={_depth:0,depth:{get:function(){return this._depth},set:function(a){this.displayList&&this.displayList.queueDepthSort();this._depth=a}},setDepth:function(a){void 0===a&&(a=0);this.depth=a;return this}}},function(p,u,a){var h=a(171),f=a(130);p.exports=function(c,b,d,g){void 0===g&&(g=[]);!b&&
0<d&&(b=f(c)/d);for(d=0;d<b;d++)g.push(h(c,d/b));return g}},function(p,u,a){var h=a(4);p.exports=function(f,c,b){void 0===b&&(b=new h);b.x=f.x1+(f.x2-f.x1)*c;b.y=f.y1+(f.y2-f.y1)*c;return b}},function(p,u){p.exports=function(a,h,f,c){var b=Math.cos(c);c=Math.sin(c);var d=a.x-h,g=a.y-f;a.x=d*b-g*c+h;a.y=d*c+g*b+f;return a}},function(p,u,a){var h=a(310),f=a(311);p.exports={mask:null,setMask:function(c){this.mask=c;return this},clearMask:function(c){void 0===c&&(c=!1);c&&this.mask&&this.mask.destroy();
this.mask=null;return this},createBitmapMask:function(c){void 0===c&&(this.texture||this.shader)&&(c=this);return new h(this.scene,c)},createGeometryMask:function(c){void 0===c&&"Graphics"===this.type&&(c=this);return new f(this.scene,c)}}},function(p,u,a){u=a(0);var h=a(22),f=a(91);a=new u({initialize:function(c,b){var d=c.sys.renderer;this.renderer=d;this.bitmapMask=b;this.mainTexture=this.maskTexture=null;this.dirty=!0;this.maskFramebuffer=this.mainFramebuffer=null;this.isStencil=this.invertAlpha=
!1;this.createMask();c.sys.game.events.on(h.CONTEXT_RESTORED,this.createMask,this);if(d)d.on(f.RESIZE,this.createMask,this)},createMask:function(){var c=this.renderer;if(c&&c.gl){this.mainTexture&&this.clearMask();var b=c.width,d=c.height,g=c.gl,e=0===(b&b-1)&&0===(d&d-1)?g.REPEAT:g.CLAMP_TO_EDGE,l=g.LINEAR;this.mainTexture=c.createTexture2D(0,l,l,e,e,g.RGBA,null,b,d);this.maskTexture=c.createTexture2D(0,l,l,e,e,g.RGBA,null,b,d);this.mainFramebuffer=c.createFramebuffer(b,d,this.mainTexture,!0);this.maskFramebuffer=
c.createFramebuffer(b,d,this.maskTexture,!0)}},clearMask:function(){var c=this.renderer;c&&c.gl&&this.mainTexture&&(c.deleteTexture(this.mainTexture),c.deleteTexture(this.maskTexture),c.deleteFramebuffer(this.mainFramebuffer),c.deleteFramebuffer(this.maskFramebuffer),this.maskFramebuffer=this.mainFramebuffer=this.maskTexture=this.mainTexture=null)},setBitmap:function(c){this.bitmapMask=c},preRenderWebGL:function(c,b,d){c.pipelines.BITMAPMASK_PIPELINE.beginMask(this,b,d)},postRenderWebGL:function(c,
b){c.pipelines.BITMAPMASK_PIPELINE.endMask(this,b)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask();this.renderer&&this.renderer.off(f.RESIZE,this.createMask,this);this.renderer=this.prevFramebuffer=this.bitmapMask=null}});p.exports=a},function(p,u,a){u=new (a(0))({initialize:function(h,f){this.geometryMask=f;this.invertAlpha=!1;this.isStencil=!0;this.level=0},setShape:function(h){this.geometryMask=h;return this},setInvertAlpha:function(h){void 0===h&&
(h=!0);this.invertAlpha=h;return this},preRenderWebGL:function(h,f,c){f=h.gl;h.flush();0===h.maskStack.length&&(f.enable(f.STENCIL_TEST),f.clear(f.STENCIL_BUFFER_BIT),h.maskCount=0);h.currentCameraMask.mask!==this&&(h.currentMask.mask=this);h.maskStack.push({mask:this,camera:c});this.applyStencil(h,c,!0);h.maskCount++},applyStencil:function(h,f,c){var b=h.gl,d=this.geometryMask,g=h.maskCount;b.colorMask(!1,!1,!1,!1);c?(b.stencilFunc(b.EQUAL,g,255),b.stencilOp(b.KEEP,b.KEEP,b.INCR)):(b.stencilFunc(b.EQUAL,
g+1,255),b.stencilOp(b.KEEP,b.KEEP,b.DECR));d.renderWebGL(h,d,f);h.flush();b.colorMask(!0,!0,!0,!0);b.stencilOp(b.KEEP,b.KEEP,b.KEEP);c?this.invertAlpha?b.stencilFunc(b.NOTEQUAL,g+1,255):b.stencilFunc(b.EQUAL,g+1,255):this.invertAlpha?b.stencilFunc(b.NOTEQUAL,g,255):b.stencilFunc(b.EQUAL,g,255)},postRenderWebGL:function(h){var f=h.gl;h.maskStack.pop();h.maskCount--;h.flush();var c=h.currentMask;0===h.maskStack.length?(c.mask=null,f.disable(f.STENCIL_TEST)):(f=h.maskStack[h.maskStack.length-1],f.mask.applyStencil(h,
f.camera,!1),h.currentCameraMask.mask!==f.mask?(c.mask=f.mask,c.camera=f.camera):c.mask=null)},preRenderCanvas:function(h,f,c){f=this.geometryMask;h.currentContext.save();f.renderCanvas(h,f,c,null,null,!0);h.currentContext.clip()},postRenderCanvas:function(h){h.currentContext.restore()},destroy:function(){this.geometryMask=null}});p.exports=u},function(p,u){p.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(a,h){void 0===h&&(h=a);this.scrollFactorX=a;this.scrollFactorY=h;return this}}},
function(p,u,a){var h=a(14),f=a(25),c=a(177),b=a(269),d=a(270),g=a(3);p.exports={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(e){this._scaleY=this._scaleX=e;this.renderFlags=0===e?this.renderFlags&-5:this.renderFlags|4}},scaleX:{get:function(){return this._scaleX},set:function(e){this._scaleX=e;this.renderFlags=0===e?this.renderFlags&-5:this.renderFlags|4}},scaleY:{get:function(){return this._scaleY},set:function(e){this._scaleY=
e;this.renderFlags=0===e?this.renderFlags&-5:this.renderFlags|4}},angle:{get:function(){return d(this._rotation*h.RAD_TO_DEG)},set:function(e){this.rotation=d(e)*h.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=b(e)}},setPosition:function(e,l,k,m){void 0===e&&(e=0);void 0===l&&(l=e);void 0===k&&(k=0);void 0===m&&(m=0);this.x=e;this.y=l;this.z=k;this.w=m;return this},copyPosition:function(e){void 0!==e.x&&(this.x=e.x);void 0!==e.y&&(this.y=e.y);void 0!==
e.z&&(this.z=e.z);void 0!==e.w&&(this.w=e.w);return this},setRandomPosition:function(e,l,k,m){void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=this.scene.sys.scale.width);void 0===m&&(m=this.scene.sys.scale.height);this.x=e+Math.random()*k;this.y=l+Math.random()*m;return this},setRotation:function(e){void 0===e&&(e=0);this.rotation=e;return this},setAngle:function(e){void 0===e&&(e=0);this.angle=e;return this},setScale:function(e,l){void 0===e&&(e=1);void 0===l&&(l=e);this.scaleX=e;this.scaleY=
l;return this},setX:function(e){void 0===e&&(e=0);this.x=e;return this},setY:function(e){void 0===e&&(e=0);this.y=e;return this},setZ:function(e){void 0===e&&(e=0);this.z=e;return this},setW:function(e){void 0===e&&(e=0);this.w=e;return this},getLocalTransformMatrix:function(e){void 0===e&&(e=new f);return e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(e,l){void 0===e&&(e=new f);void 0===l&&(l=new f);var k=this.parentContainer;if(!k)return this.getLocalTransformMatrix(e);
for(e.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);k;)l.applyITRS(k.x,k.y,k._rotation,k._scaleX,k._scaleY),l.multiply(e,e),k=k.parentContainer;return e},getLocalPoint:function(e,l,k,m){k||(k=new g);m||(m=this.scene.sys.cameras.main);var n=m.scrollX;m=m.scrollY;e=e+n*this.scrollFactorX-n;l=l+m*this.scrollFactorY-m;this.parentContainer?this.getWorldTransformMatrix().applyInverse(e,l,k):c(e,l,this.x,this.y,this.rotation,this.scaleX,this.scaleY,k);this._originComponent&&(k.x+=this._displayOriginX,
k.y+=this._displayOriginY);return k},getParentRotation:function(){for(var e=0,l=this.parentContainer;l;)e+=l.rotation,l=l.parentContainer;return e}}},function(p,u){p.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(a){a?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(a){this.visible=a;return this}}},function(p,u,a){p.exports={CHANGE_DATA:a(638),CHANGE_DATA_KEY:a(639),DESTROY:a(640),REMOVE_DATA:a(641),SET_DATA:a(642)}},
function(p,u,a){var h=a(130),f=a(4);p.exports=function(c,b,d,g){void 0===g&&(g=[]);if(!b&&!d)return g;b?d=Math.round(h(c)/b):b=h(c)/d;for(var e=c.x,l=c.y,k=0,m=0;m<d;m++)switch(g.push(new f(e,l)),k){case 0:e+=b;e>=c.right&&(k=1,l+=e-c.right,e=c.right);break;case 1:l+=b;l>=c.bottom&&(k=2,e-=l-c.bottom,l=c.bottom);break;case 2:e-=b;e<=c.left&&(k=3,l-=c.left-e,e=c.left);break;case 3:l-=b,l<=c.top&&(k=0,l=c.top)}return g}},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=1);void 0===f&&(f=[]);var c=
Math.round(a.x1),b=Math.round(a.y1),d=Math.round(a.x2);a=Math.round(a.y2);var g=Math.abs(d-c),e=Math.abs(a-b),l=c<d?1:-1,k=b<a?1:-1,m=g-e;f.push({x:c,y:b});for(var n=1;c!==d||b!==a;){var q=m<<1;q>-e&&(m-=e,c+=l);q<g&&(m+=g,b+=k);0===n%h&&f.push({x:c,y:b});n++}return f}},function(p,u){p.exports=function(a,h,f){if(!h.length)return NaN;if(1===h.length)return h[0];var c=1;if(f){if(a<h[0][f])return h[0];for(;h[c][f]<a;)c++}else for(;h[c]<a;)c++;c>h.length&&(c=h.length);if(f){var b=h[c-1][f];f=h[c][f];
return f-a<=a-b?h[c]:h[c-1]}b=h[c-1];f=h[c];return f-a<=a-b?f:b}},function(p,u,a){u=new (a(0))({initialize:function(h,f,c,b,d){void 0===d&&(d=!1);this.textureKey=h;this.textureFrame=f;this.index=c;this.frame=b;this.isLast=this.isFirst=!1;this.nextFrame=this.prevFrame=null;this.progress=this.duration=0;this.isKeyFrame=d},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});p.exports=u},function(p,
u){p.exports=function(a){var h=/\D/g;a.sort(function(f,c){return parseInt(f.replace(h,""),10)-parseInt(c.replace(h,""),10)});return a}},function(p,u,a){var h=a(185);u=a(0);var f=a(102),c=a(9),b=a(132),d=a(22),g=a(2),e=a(6),l=a(186),k=a(322);a=new u({Extends:c,initialize:function(m){c.call(this);this.game=m;this.textureManager=null;this.globalTimeScale=1;this.anims=new f;this.mixes=new f;this.paused=!1;this.name="AnimationManager";m.events.once(d.BOOT,this.boot,this)},boot:function(){this.textureManager=
this.game.textures;this.game.events.once(d.DESTROY,this.destroy,this)},addMix:function(m,n,q){var r=this.anims,t=this.mixes;m="string"===typeof m?m:m.key;n="string"===typeof n?n:n.key;r.has(m)&&r.has(n)&&((r=t.get(m))||(r={}),r[n]=q,t.set(m,r));return this},removeMix:function(m,n){var q=this.mixes,r="string"===typeof m?m:m.key;if(m=q.get(r))n?(n="string"===typeof n?n:n.key,m.hasOwnProperty(n)&&delete m[n]):n||q.delete(r);return this},getMix:function(m,n){n="string"===typeof n?n:n.key;return(m=this.mixes.get("string"===
typeof m?m:m.key))&&m.hasOwnProperty(n)?m[n]:0},add:function(m,n){if(this.anims.has(m))return console.warn("Animation key exists: "+m),this;n.key=m;this.anims.set(m,n);this.emit(b.ADD_ANIMATION,m,n);return this},exists:function(m){return this.anims.has(m)},createFromAseprite:function(m,n){var q=[],r=this.game.cache.json.get(m);if(!r)return q;var t=this,w=e(r,"meta",null),v=e(r,"frames",null);w&&v&&e(w,"frameTags",[]).forEach(function(x){var y=[],A=g(x,"name",null),B=g(x,"from",0),z=g(x,"to",0);x=
g(x,"direction","forward");if(A&&(!n||n&&-1<n.indexOf(A))){for(var C=[],E=Number.MAX_SAFE_INTEGER;B<=z;B++){var G=B.toString(),H=v[G];H&&(H=g(H,"duration",Number.MAX_SAFE_INTEGER),H<E&&(E=H),C.push({frame:G,duration:H}))}C.forEach(function(I){y.push({key:m,frame:I.frame,duration:E-I.duration})});z=E*y.length;"reverse"===x&&(y=y.reverse());(A=t.create({key:A,frames:y,duration:z,yoyo:"pingpong"===x}))&&q.push(A)}});return q},create:function(m){var n=m.key,q=!1;n&&(q=this.get(n),q||(q=new h(this,n,m),
this.anims.set(n,q),this.emit(b.ADD_ANIMATION,n,q)));return q},fromJSON:function(m,n){void 0===n&&(n=!1);n&&this.anims.clear();"string"===typeof m&&(m=JSON.parse(m));n=[];if(m.hasOwnProperty("anims")&&Array.isArray(m.anims)){for(var q=0;q<m.anims.length;q++)n.push(this.create(m.anims[q]));m.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=m.globalTimeScale)}else m.hasOwnProperty("key")&&"frame"===m.type&&n.push(this.create(m));return n},generateFrameNames:function(m,n){var q=e(n,"prefix",
""),r=e(n,"start",0),t=e(n,"end",0),w=e(n,"suffix",""),v=e(n,"zeroPad",0),x=e(n,"outputArray",[]),y=e(n,"frames",!1),A=this.textureManager.get(m);if(!A)return x;if(n)for(y||(y=k(r,t)),n=0;n<y.length;n++)r=q+l(y[n],v,"0",1)+w,A.has(r)?x.push({key:m,frame:r}):console.warn("generateFrameNames: Frame missing: "+r+" from texture: "+m);else for(y=A.getFrameNames(),n=0;n<y.length;n++)x.push({key:m,frame:y[n]});return x},generateFrameNumbers:function(m,n){var q=e(n,"start",0),r=e(n,"end",-1),t=e(n,"first",
!1),w=e(n,"outputArray",[]);n=e(n,"frames",!1);var v=this.textureManager.get(m);if(!v)return w;t&&v.has(t)&&w.push({key:m,frame:t});n||(-1===r&&(r=v.frameTotal-2),n=k(q,r));for(q=0;q<n.length;q++)v.has(n[q])?w.push({key:m,frame:n[q]}):console.warn("generateFrameNumbers: Frame "+q+" missing from texture: "+m);return w},get:function(m){return this.anims.get(m)},pauseAll:function(){this.paused||(this.paused=!0,this.emit(b.PAUSE_ALL));return this},play:function(m,n){Array.isArray(n)||(n=[n]);for(var q=
0;q<n.length;q++)n[q].anims.play(m);return this},staggerPlay:function(m,n,q,r){void 0===q&&(q=0);void 0===r&&(r=!0);Array.isArray(n)||(n=[n]);var t=n.length;r||t--;for(r=0;r<n.length;r++)n[r].anims.playAfterDelay(m,0>q?Math.abs(q)*(t-r):q*r);return this},remove:function(m){var n=this.get(m);n&&(this.emit(b.REMOVE_ANIMATION,m,n),this.anims.delete(m),this.removeMix(m));return n},resumeAll:function(){this.paused&&(this.paused=!1,this.emit(b.RESUME_ALL));return this},toJSON:function(m){var n={anims:[],
globalTimeScale:this.globalTimeScale};void 0!==m&&""!==m?n.anims.push(this.anims.get(m).toJSON()):this.anims.each(function(q,r){n.anims.push(r.toJSON())});return n},destroy:function(){this.anims.clear();this.mixes.clear();this.game=this.textureManager=null}});p.exports=a},function(p,u){p.exports=function(a,h,f,c){var b=[],d=!1;if(f||c)d=!0,f||(f=""),c||(c="");if(h<a)for(;a>=h;a--)d?b.push(f+a.toString()+c):b.push(a);else for(;a<=h;a++)d?b.push(f+a.toString()+c):b.push(a);return b}},function(p,u,a){u=
a(0);var h=a(102),f=a(9),c=a(324);a=new u({initialize:function(){this.entries=new h;this.events=new f},add:function(b,d){this.entries.set(b,d);this.events.emit(c.ADD,this,b,d);return this},has:function(b){return this.entries.has(b)},exists:function(b){return this.entries.has(b)},get:function(b){return this.entries.get(b)},remove:function(b){var d=this.get(b);d&&(this.entries.delete(b),this.events.emit(c.REMOVE,this,b,d.data));return this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear();
this.events.removeAllListeners();this.events=this.entries=null}});p.exports=a},function(p,u,a){p.exports={ADD:a(736),REMOVE:a(737)}},function(p,u,a){var h=a(323);u=a(0);var f=a(22);a=new u({initialize:function(c){this.game=c;this.binary=new h;this.bitmapFont=new h;this.json=new h;this.physics=new h;this.shader=new h;this.audio=new h;this.video=new h;this.text=new h;this.html=new h;this.obj=new h;this.tilemap=new h;this.xml=new h;this.custom={};this.game.events.once(f.DESTROY,this.destroy,this)},addCustom:function(c){this.custom.hasOwnProperty(c)||
(this.custom[c]=new h);return this.custom[c]},destroy:function(){for(var c="binary bitmapFont json physics shader audio video text html obj tilemap xml".split(" "),b=0;b<c.length;b++)this[c[b]].destroy(),this[c[b]]=null;for(var d in this.custom)this.custom[d].destroy();this.game=this.custom=null}});p.exports=a},function(p,u,a){var h=a(133),f=a(190),c=a(18);u=a(0);var b=a(11),d=a(333),g=a(37),e=a(135),l=a(10),k=a(3);a=new u({Extends:h,Mixins:[b.Flip,b.Tint,b.Pipeline],initialize:function(m,n,q,r){h.call(this,
m,n,q,r);this.postPipelines=[];this.pipelineData={};this.inputEnabled=!0;this.fadeEffect=new d.Fade(this);this.flashEffect=new d.Flash(this);this.shakeEffect=new d.Shake(this);this.panEffect=new d.Pan(this);this.rotateToEffect=new d.RotateTo(this);this.zoomEffect=new d.Zoom(this);this.lerp=new k(1,1);this.followOffset=new k;this._follow=this.deadzone=null},setDeadzone:function(m,n){if(void 0===m)this.deadzone=null;else{this.deadzone?(this.deadzone.width=m,this.deadzone.height=n):this.deadzone=new l(0,
0,m,n);if(this._follow){m=this.width/2;n=this.height/2;var q=this._follow.x-this.followOffset.x,r=this._follow.y-this.followOffset.y;this.midPoint.set(q,r);this.scrollX=q-m;this.scrollY=r-n}f(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(m,n,q,r,t,w){return this.fadeEffect.start(!1,m,n,q,r,!0,t,w)},fadeOut:function(m,n,q,r,t,w){return this.fadeEffect.start(!0,m,n,q,r,!0,t,w)},fadeFrom:function(m,n,q,r,t,w,v){return this.fadeEffect.start(!1,m,n,q,r,t,w,v)},fade:function(m,
n,q,r,t,w,v){return this.fadeEffect.start(!0,m,n,q,r,t,w,v)},flash:function(m,n,q,r,t,w,v){return this.flashEffect.start(m,n,q,r,t,w,v)},shake:function(m,n,q,r,t){return this.shakeEffect.start(m,n,q,r,t)},pan:function(m,n,q,r,t,w,v){return this.panEffect.start(m,n,q,r,t,w,v)},rotateTo:function(m,n,q,r,t,w,v){return this.rotateToEffect.start(m,n,q,r,t,w,v)},zoomTo:function(m,n,q,r,t,w){return this.zoomEffect.start(m,n,q,r,t,w)},preRender:function(){this.renderList.length=0;var m=this.width,n=this.height,
q=.5*m,r=.5*n,t=this.zoom,w=this.matrix,v=m*this.originX,x=n*this.originY,y=this._follow,A=this.deadzone,B=this.scrollX,z=this.scrollY;A&&f(A,this.midPoint.x,this.midPoint.y);var C=!1;if(y&&!this.panEffect.isRunning){C=y.x-this.followOffset.x;var E=y.y-this.followOffset.y;A?(C<A.x?B=e(B,B-(A.x-C),this.lerp.x):C>A.right&&(B=e(B,B+(C-A.right),this.lerp.x)),E<A.y?z=e(z,z-(A.y-E),this.lerp.y):E>A.bottom&&(z=e(z,z+(E-A.bottom),this.lerp.y))):(B=e(B,C-v,this.lerp.x),z=e(z,E-x,this.lerp.y));C=!0}this.useBounds&&
(B=this.clampX(B),z=this.clampY(z));this.roundPixels&&(v=Math.round(v),x=Math.round(x),B=Math.round(B),z=Math.round(z));this.scrollX=B;this.scrollY=z;q=B+q;r=z+r;this.midPoint.set(q,r);m/=t;n/=t;z=q-m/2;r-=n/2;this.roundPixels&&(z=Math.round(z),r=Math.round(r));this.worldView.setTo(z,r,m,n);w.applyITRS(this.x+v,this.y+x,this.rotation,t,t);w.translate(-v,-x);this.shakeEffect.preRender();C&&this.emit(g.FOLLOW_UPDATE,this,y)},setLerp:function(m,n){void 0===m&&(m=1);void 0===n&&(n=m);this.lerp.set(m,
n);return this},setFollowOffset:function(m,n){void 0===m&&(m=0);void 0===n&&(n=0);this.followOffset.set(m,n);return this},startFollow:function(m,n,q,r,t,w){void 0===n&&(n=!1);void 0===q&&(q=1);void 0===r&&(r=q);void 0===t&&(t=0);void 0===w&&(w=t);this._follow=m;this.roundPixels=n;q=c(q,0,1);r=c(r,0,1);this.lerp.set(q,r);this.followOffset.set(t,w);n=this.width/2;q=this.height/2;t=m.x-t;m=m.y-w;this.midPoint.set(t,m);this.scrollX=t-n;this.scrollY=m-q;this.useBounds&&(this.scrollX=this.clampX(this.scrollX),
this.scrollY=this.clampY(this.scrollY));return this},stopFollow:function(){this._follow=null;return this},resetFX:function(){this.rotateToEffect.reset();this.panEffect.reset();this.shakeEffect.reset();this.flashEffect.reset();this.fadeEffect.reset();return this},update:function(m,n){this.visible&&(this.rotateToEffect.update(m,n),this.panEffect.update(m,n),this.zoomEffect.update(m,n),this.shakeEffect.update(m,n),this.flashEffect.update(m,n),this.fadeEffect.update(m,n))},destroy:function(){this.resetFX();
h.prototype.destroy.call(this);this.deadzone=this._follow=null}});p.exports=a},function(p,u,a){var h=a(38);p.exports=function(f){var c=new h;f=f.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(g,e,l,k){return e+e+l+l+k+k});var b=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(f);if(b){f=parseInt(b[1],16);var d=parseInt(b[2],16);b=parseInt(b[3],16);c.setTo(f,d,b)}return c}},function(p,u){p.exports=function(a,h,f,c){return c<<24|a<<16|h<<8|f}},function(p,u){p.exports=function(a,h,
f,c){void 0===c&&(c={h:0,s:0,v:0});a/=255;h/=255;f/=255;var b=Math.min(a,h,f),d=Math.max(a,h,f),g=d-b,e=0,l=0===d?0:g/d;d!==b&&(d===a?e=(h-f)/g+(h<f?6:0):d===h?e=(f-a)/g+2:d===f&&(e=(a-h)/g+4),e/=6);c.hasOwnProperty("_h")?(c._h=e,c._s=l,c._v=d):(c.h=e,c.s=l,c.v=d);return c}},function(p,u){p.exports=function(a){return 16777215<a?{a:a>>>24,r:a>>16&255,g:a>>8&255,b:a&255}:{a:255,r:a>>16&255,g:a>>8&255,b:a&255}}},function(p,u,a){var h=a(38);p.exports=function(f){return new h(f.r,f.g,f.b,f.a)}},function(p,
u,a){var h=a(38);p.exports=function(f){var c=new h,b=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(f.toLowerCase());if(b){f=parseInt(b[1],10);var d=parseInt(b[2],10),g=parseInt(b[3],10);b=void 0!==b[4]?parseFloat(b[4]):1;c.setTo(f,d,g,255*b)}return c}},function(p,u,a){p.exports={Fade:a(761),Flash:a(762),Pan:a(763),Shake:a(796),RotateTo:a(797),Zoom:a(798)}},function(p,u,a){p.exports={In:a(764),Out:a(765),InOut:a(766)}},function(p,u,a){p.exports={In:a(767),Out:a(768),
InOut:a(769)}},function(p,u,a){p.exports={In:a(770),Out:a(771),InOut:a(772)}},function(p,u,a){p.exports={In:a(773),Out:a(774),InOut:a(775)}},function(p,u,a){p.exports={In:a(776),Out:a(777),InOut:a(778)}},function(p,u,a){p.exports={In:a(779),Out:a(780),InOut:a(781)}},function(p,u,a){p.exports=a(782)},function(p,u,a){p.exports={In:a(783),Out:a(784),InOut:a(785)}},function(p,u,a){p.exports={In:a(786),Out:a(787),InOut:a(788)}},function(p,u,a){p.exports={In:a(789),Out:a(790),InOut:a(791)}},function(p,
u,a){p.exports={In:a(792),Out:a(793),InOut:a(794)}},function(p,u,a){p.exports=a(795)},function(p,u,a){u=a(0);var h=a(33),f=a(347),c=a(2),b=a(6),d=a(7),g=a(193),e=a(1),l=a(197),k=a(187);a=new u({initialize:function(m){void 0===m&&(m={});this.width=b(m,"width",1024);this.height=b(m,"height",768);this.zoom=b(m,"zoom",1);this.parent=b(m,"parent",void 0);this.scaleMode=b(m,"scaleMode",0);this.expandParent=b(m,"expandParent",!0);this.autoRound=b(m,"autoRound",!1);this.autoCenter=b(m,"autoCenter",0);this.resizeInterval=
b(m,"resizeInterval",500);this.fullscreenTarget=b(m,"fullscreenTarget",null);this.minWidth=b(m,"minWidth",0);this.maxWidth=b(m,"maxWidth",0);this.minHeight=b(m,"minHeight",0);this.maxHeight=b(m,"maxHeight",0);var n=b(m,"scale",null);n&&(this.width=b(n,"width",this.width),this.height=b(n,"height",this.height),this.zoom=b(n,"zoom",this.zoom),this.parent=b(n,"parent",this.parent),this.scaleMode=b(n,"mode",this.scaleMode),this.expandParent=b(n,"expandParent",this.expandParent),this.autoRound=b(n,"autoRound",
this.autoRound),this.autoCenter=b(n,"autoCenter",this.autoCenter),this.resizeInterval=b(n,"resizeInterval",this.resizeInterval),this.fullscreenTarget=b(n,"fullscreenTarget",this.fullscreenTarget),this.minWidth=b(n,"min.width",this.minWidth),this.maxWidth=b(n,"max.width",this.maxWidth),this.minHeight=b(n,"min.height",this.minHeight),this.maxHeight=b(n,"max.height",this.maxHeight));this.renderType=b(m,"type",h.AUTO);this.canvas=b(m,"canvas",null);this.context=b(m,"context",null);this.canvasStyle=b(m,
"canvasStyle",null);this.customEnvironment=b(m,"customEnvironment",!1);this.sceneConfig=b(m,"scene",null);this.seed=b(m,"seed",[(Date.now()*Math.random()).toString()]);g.RND=new g.RandomDataGenerator(this.seed);this.gameTitle=b(m,"title","");this.gameURL=b(m,"url","https://phaser.io");this.gameVersion=b(m,"version","");this.autoFocus=b(m,"autoFocus",!0);this.domCreateContainer=b(m,"dom.createContainer",!1);this.domBehindCanvas=b(m,"dom.behindCanvas",!1);this.domPointerEvents=b(m,"dom.pointerEvents",
"none");this.inputKeyboard=b(m,"input.keyboard",!0);this.inputKeyboardEventTarget=b(m,"input.keyboard.target",window);this.inputKeyboardCapture=b(m,"input.keyboard.capture",[]);this.inputMouse=b(m,"input.mouse",!0);this.inputMouseEventTarget=b(m,"input.mouse.target",null);this.inputMousePreventDefaultDown=b(m,"input.mouse.preventDefaultDown",!0);this.inputMousePreventDefaultUp=b(m,"input.mouse.preventDefaultUp",!0);this.inputMousePreventDefaultMove=b(m,"input.mouse.preventDefaultMove",!0);this.inputMousePreventDefaultWheel=
b(m,"input.mouse.preventDefaultWheel",!0);this.inputTouch=b(m,"input.touch",f.input.touch);this.inputTouchEventTarget=b(m,"input.touch.target",null);this.inputTouchCapture=b(m,"input.touch.capture",!0);this.inputActivePointers=b(m,"input.activePointers",1);this.inputSmoothFactor=b(m,"input.smoothFactor",0);this.inputWindowEvents=b(m,"input.windowEvents",!0);this.inputGamepad=b(m,"input.gamepad",!1);this.inputGamepadEventTarget=b(m,"input.gamepad.target",window);this.disableContextMenu=b(m,"disableContextMenu",
!1);this.audio=b(m,"audio",{});this.hideBanner=!1===b(m,"banner",null);this.hidePhaser=b(m,"banner.hidePhaser",!1);this.bannerTextColor=b(m,"banner.text","#ffffff");this.bannerBackgroundColor=b(m,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]);""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0);this.fps=b(m,"fps",null);n=b(m,"render",m);this.pipeline=b(n,"pipeline",null);this.antialias=b(n,"antialias",!0);this.antialiasGL=b(n,"antialiasGL",!0);this.mipmapFilter=b(n,
"mipmapFilter","LINEAR");this.desynchronized=b(n,"desynchronized",!1);this.roundPixels=b(n,"roundPixels",!1);if(this.pixelArt=b(n,"pixelArt",1!==this.zoom))this.antialiasGL=this.antialias=!1,this.roundPixels=!0;this.transparent=b(n,"transparent",!1);this.clearBeforeRender=b(n,"clearBeforeRender",!0);this.preserveDrawingBuffer=b(n,"preserveDrawingBuffer",!1);this.premultipliedAlpha=b(n,"premultipliedAlpha",!0);this.failIfMajorPerformanceCaveat=b(n,"failIfMajorPerformanceCaveat",!1);this.powerPreference=
b(n,"powerPreference","default");this.batchSize=b(n,"batchSize",4096);this.maxTextures=b(n,"maxTextures",-1);this.maxLights=b(n,"maxLights",10);n=b(m,"backgroundColor",0);this.backgroundColor=k(n);this.transparent&&(this.backgroundColor=k(0),this.backgroundColor.alpha=0);this.preBoot=b(m,"callbacks.preBoot",e);this.postBoot=b(m,"callbacks.postBoot",e);this.physics=b(m,"physics",{});this.defaultPhysicsSystem=b(this.physics,"default",!1);this.loaderBaseURL=b(m,"loader.baseURL","");this.loaderPath=b(m,
"loader.path","");this.loaderMaxParallelDownloads=b(m,"loader.maxParallelDownloads",f.os.android?6:32);this.loaderCrossOrigin=b(m,"loader.crossOrigin",void 0);this.loaderResponseType=b(m,"loader.responseType","");this.loaderAsync=b(m,"loader.async",!0);this.loaderUser=b(m,"loader.user","");this.loaderPassword=b(m,"loader.password","");this.loaderTimeout=b(m,"loader.timeout",0);this.loaderWithCredentials=b(m,"loader.withCredentials",!1);this.installGlobalPlugins=[];this.installScenePlugins=[];n=b(m,
"plugins",null);var q=l.DefaultScene;n&&(Array.isArray(n)?this.defaultPlugins=n:d(n)&&(this.installGlobalPlugins=c(n,"global",[]),this.installScenePlugins=c(n,"scene",[]),Array.isArray(n.default)?q=n.default:Array.isArray(n.defaultMerge)&&(q=q.concat(n.defaultMerge))));this.defaultPlugins=q;this.defaultImage=b(m,"images.default","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==");
this.missingImage=b(m,"images.missing","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==");this.whiteImage=b(m,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC");
window&&(window.FORCE_WEBGL?this.renderType=h.WEBGL:window.FORCE_CANVAS&&(this.renderType=h.CANVAS))}});p.exports=a},function(p,u,a){p.exports={os:a(105),browser:a(136),features:a(191),input:a(808),audio:a(809),video:a(810),fullscreen:a(811),canvasFeatures:a(348)}},function(p,u,a){function h(){var d=new Image;d.onload=function(){var g=new Image;g.onload=function(){var e=c.create(g,6,1).getContext("2d");e.globalCompositeOperation="multiply";e.drawImage(d,0,0);e.drawImage(g,2,0);if(!e.getImageData(2,
0,1,1))return!1;e=e.getImageData(2,0,1,1).data;c.remove(g);b.supportNewBlendModes=255===e[0]&&0===e[1]&&0===e[2]};g.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX//wCKxvRFAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg=="};d.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/AP804Oa6AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==";return!1}function f(){var d=c.create(this,2,1).getContext("2d");d.fillStyle="rgba(10, 20, 30, 0.5)";
d.fillRect(0,0,1,1);var g=d.getImageData(0,0,1,1);if(null===g)return!1;d.putImageData(g,1,0);d=d.getImageData(1,0,1,1);return d.data[0]===g.data[0]&&d.data[1]===g.data[1]&&d.data[2]===g.data[2]&&d.data[3]===g.data[3]}var c=a(31),b={supportInverseAlpha:!1,supportNewBlendModes:!1};"function"!==typeof importScripts&&void 0!==document&&(b.supportNewBlendModes=h(),b.supportInverseAlpha=f());p.exports=b},function(p,u){p.exports=function(a,h,f,c){return Math.atan2(c-h,f-a)}},function(p,u){p.exports=function(a,
h){return Math.atan2(h.y-a.y,h.x-a.x)}},function(p,u){p.exports=function(a){a%=2*Math.PI;return 0<=a?a:a+2*Math.PI}},function(p,u){p.exports=function(a,h){var f=a.x-h.x;a=a.y-h.y;return Math.sqrt(f*f+a*a)}},function(p,u){p.exports=function(a,h,f,c){a-=f;h-=c;return a*a+h*h}},function(p,u){p.exports=function(a,h,f){void 0===f&&(f=1E-4);return a>h-f}},function(p,u){p.exports=function(a,h,f){void 0===f&&(f=1E-4);return a<h+f}},function(p,u,a){var h=a(357);p.exports=function(f,c){return h(f)/h(c)/h(f-
c)}},function(p,u){p.exports=function(a){if(0===a)return 1;for(var h=a;--a;)h*=a;return h}},function(p,u){p.exports=function(a,h,f,c,b){var d=1-a,g=1-a;return d*d*d*h+3*g*g*a*f+3*(1-a)*a*a*c+a*a*a*b}},function(p,u){p.exports=function(a,h,f,c){var b=1-a;return b*b*h+2*(1-a)*a*f+a*a*c}},function(p,u,a){var h=a(184);p.exports=function(f,c,b){return c+(b-c)*h(f,0,1)}},function(p,u){p.exports=function(a){return 1<<Math.ceil(Math.log(a)/.6931471805599453)}},function(p,u){p.exports=function(a,h){var f=a.x,
c=a.y;a.x=f*Math.cos(h)-c*Math.sin(h);a.y=f*Math.sin(h)+c*Math.cos(h);return a}},function(p,u){p.exports=function(a){return 0<a?Math.ceil(a):Math.floor(a)}},function(p,u,a){var h=new (a(0))({initialize:function(f){this.val=new Float32Array(9);f?this.copy(f):this.identity()},clone:function(){return new h(this)},set:function(f){return this.copy(f)},copy:function(f){var c=this.val;f=f.val;c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];c[6]=f[6];c[7]=f[7];c[8]=f[8];return this},fromMat4:function(f){f=
f.val;var c=this.val;c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[4];c[4]=f[5];c[5]=f[6];c[6]=f[8];c[7]=f[9];c[8]=f[10];return this},fromArray:function(f){var c=this.val;c[0]=f[0];c[1]=f[1];c[2]=f[2];c[3]=f[3];c[4]=f[4];c[5]=f[5];c[6]=f[6];c[7]=f[7];c[8]=f[8];return this},identity:function(){var f=this.val;f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return this},transpose:function(){var f=this.val,c=f[1],b=f[2],d=f[5];f[1]=f[3];f[2]=f[6];f[3]=c;f[5]=f[7];f[6]=b;f[7]=d;return this},invert:function(){var f=
this.val,c=f[0],b=f[1],d=f[2],g=f[3],e=f[4],l=f[5],k=f[6],m=f[7],n=f[8],q=n*e-l*m,r=-n*g+l*k,t=m*g-e*k,w=c*q+b*r+d*t;if(!w)return null;w=1/w;f[0]=q*w;f[1]=(-n*b+d*m)*w;f[2]=(l*b-d*e)*w;f[3]=r*w;f[4]=(n*c-d*k)*w;f[5]=(-l*c+d*g)*w;f[6]=t*w;f[7]=(-m*c+b*k)*w;f[8]=(e*c-b*g)*w;return this},adjoint:function(){var f=this.val,c=f[0],b=f[1],d=f[2],g=f[3],e=f[4],l=f[5],k=f[6],m=f[7],n=f[8];f[0]=e*n-l*m;f[1]=d*m-b*n;f[2]=b*l-d*e;f[3]=l*k-g*n;f[4]=c*n-d*k;f[5]=d*g-c*l;f[6]=g*m-e*k;f[7]=b*k-c*m;f[8]=c*e-b*g;return this},
determinant:function(){var f=this.val,c=f[3],b=f[4],d=f[5],g=f[6],e=f[7],l=f[8];return f[0]*(l*b-d*e)+f[1]*(-l*c+d*g)+f[2]*(e*c-b*g)},multiply:function(f){var c=this.val,b=c[0],d=c[1],g=c[2],e=c[3],l=c[4],k=c[5],m=c[6],n=c[7],q=c[8],r=f.val;f=r[0];var t=r[1],w=r[2],v=r[3],x=r[4],y=r[5],A=r[6],B=r[7];r=r[8];c[0]=f*b+t*e+w*m;c[1]=f*d+t*l+w*n;c[2]=f*g+t*k+w*q;c[3]=v*b+x*e+y*m;c[4]=v*d+x*l+y*n;c[5]=v*g+x*k+y*q;c[6]=A*b+B*e+r*m;c[7]=A*d+B*l+r*n;c[8]=A*g+B*k+r*q;return this},translate:function(f){var c=
this.val,b=f.x;f=f.y;c[6]=b*c[0]+f*c[3]+c[6];c[7]=b*c[1]+f*c[4]+c[7];c[8]=b*c[2]+f*c[5]+c[8];return this},rotate:function(f){var c=this.val,b=c[0],d=c[1],g=c[2],e=c[3],l=c[4],k=c[5],m=Math.sin(f);f=Math.cos(f);c[0]=f*b+m*e;c[1]=f*d+m*l;c[2]=f*g+m*k;c[3]=f*e-m*b;c[4]=f*l-m*d;c[5]=f*k-m*g;return this},scale:function(f){var c=this.val,b=f.x;f=f.y;c[0]*=b;c[1]*=b;c[2]*=b;c[3]*=f;c[4]*=f;c[5]*=f;return this},fromQuat:function(f){var c=f.x,b=f.y,d=f.z,g=f.w,e=c+c,l=b+b,k=d+d;f=c*e;var m=c*l;c*=k;var n=
b*l;b*=k;d*=k;e*=g;l*=g;g*=k;k=this.val;k[0]=1-(n+d);k[3]=m+g;k[6]=c-l;k[1]=m-g;k[4]=1-(f+d);k[7]=b+e;k[2]=c+l;k[5]=b-e;k[8]=1-(f+n);return this},normalFromMat4:function(f){var c=f.val;f=this.val;var b=c[0],d=c[1],g=c[2],e=c[3],l=c[4],k=c[5],m=c[6],n=c[7],q=c[8],r=c[9],t=c[10],w=c[11],v=c[12],x=c[13],y=c[14];c=c[15];var A=b*k-d*l,B=b*m-g*l,z=b*n-e*l,C=d*m-g*k,E=d*n-e*k,G=g*n-e*m,H=q*x-r*v,I=q*y-t*v;q=q*c-w*v;var K=r*y-t*x;r=r*c-w*x;t=t*c-w*y;w=A*t-B*r+z*K+C*q-E*I+G*H;if(!w)return null;w=1/w;f[0]=
(k*t-m*r+n*K)*w;f[1]=(m*q-l*t-n*I)*w;f[2]=(l*r-k*q+n*H)*w;f[3]=(g*r-d*t-e*K)*w;f[4]=(b*t-g*q+e*I)*w;f[5]=(d*q-b*r-e*H)*w;f[6]=(x*G-y*E+c*C)*w;f[7]=(y*z-v*G-c*B)*w;f[8]=(v*E-x*z+c*A)*w;return this}});p.exports=h},function(p,u,a){u=a(0);var h=a(364),f=a(1);a=a(39);var c=new Int8Array([1,2,0]),b=new Float32Array([0,0,0]),d=new a(1,0,0),g=new a(0,1,0),e=new a,l=new h;a=new u({initialize:function(k,m,n,q){this.onChangeCallback=f;this.set(k,m,n,q)},x:{get:function(){return this._x},set:function(k){this._x=
k;this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(k){this._y=k;this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(k){this._z=k;this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(k){this._w=k;this.onChangeCallback(this)}},copy:function(k){return this.set(k)},set:function(k,m,n,q,r){void 0===r&&(r=!0);"object"===typeof k?(this._x=k.x||0,this._y=k.y||0,this._z=k.z||0,this._w=k.w||0):(this._x=k||0,this._y=m||0,this._z=n||
0,this._w=q||0);if(r)this.onChangeCallback(this);return this},add:function(k){this._x+=k.x;this._y+=k.y;this._z+=k.z;this._w+=k.w;this.onChangeCallback(this);return this},subtract:function(k){this._x-=k.x;this._y-=k.y;this._z-=k.z;this._w-=k.w;this.onChangeCallback(this);return this},scale:function(k){this._x*=k;this._y*=k;this._z*=k;this._w*=k;this.onChangeCallback(this);return this},length:function(){var k=this.x,m=this.y,n=this.z,q=this.w;return Math.sqrt(k*k+m*m+n*n+q*q)},lengthSq:function(){var k=
this.x,m=this.y,n=this.z,q=this.w;return k*k+m*m+n*n+q*q},normalize:function(){var k=this.x,m=this.y,n=this.z,q=this.w,r=k*k+m*m+n*n+q*q;0<r&&(r=1/Math.sqrt(r),this._x=k*r,this._y=m*r,this._z=n*r,this._w=q*r);this.onChangeCallback(this);return this},dot:function(k){return this.x*k.x+this.y*k.y+this.z*k.z+this.w*k.w},lerp:function(k,m){void 0===m&&(m=0);var n=this.x,q=this.y,r=this.z,t=this.w;return this.set(n+m*(k.x-n),q+m*(k.y-q),r+m*(k.z-r),t+m*(k.w-t))},rotationTo:function(k,m){var n=k.x*m.x+k.y*
m.y+k.z*m.z;if(-.999999>n)return 1E-6>e.copy(d).cross(k).length()&&e.copy(g).cross(k),e.normalize(),this.setAxisAngle(e,Math.PI);if(.999999<n)return this.set(0,0,0,1);e.copy(k).cross(m);this._x=e.x;this._y=e.y;this._z=e.z;this._w=1+n;return this.normalize()},setAxes:function(k,m,n){var q=l.val;q[0]=m.x;q[3]=m.y;q[6]=m.z;q[1]=n.x;q[4]=n.y;q[7]=n.z;q[2]=-k.x;q[5]=-k.y;q[8]=-k.z;return this.fromMat3(l).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(k,m){m*=.5;var n=
Math.sin(m);return this.set(n*k.x,n*k.y,n*k.z,Math.cos(m))},multiply:function(k){var m=this.x,n=this.y,q=this.z,r=this.w,t=k.x,w=k.y,v=k.z;k=k.w;return this.set(m*k+r*t+n*v-q*w,n*k+r*w+q*t-m*v,q*k+r*v+m*w-n*t,r*k-m*t-n*w-q*v)},slerp:function(k,m){var n=this.x,q=this.y,r=this.z,t=this.w,w=k.x,v=k.y,x=k.z;k=k.w;var y=n*w+q*v+r*x+t*k;0>y&&(y=-y,w=-w,v=-v,x=-x,k=-k);var A=1-m,B=m;1E-6<1-y&&(y=Math.acos(y),B=Math.sin(y),A=Math.sin((1-m)*y)/B,B=Math.sin(m*y)/B);return this.set(A*n+B*w,A*q+B*v,A*r+B*x,A*
t+B*k)},invert:function(){var k=this.x,m=this.y,n=this.z,q=this.w,r=k*k+m*m+n*n+q*q;r=r?1/r:0;return this.set(-k*r,-m*r,-n*r,q*r)},conjugate:function(){this._x=-this.x;this._y=-this.y;this._z=-this.z;this.onChangeCallback(this);return this},rotateX:function(k){k*=.5;var m=this.x,n=this.y,q=this.z,r=this.w,t=Math.sin(k);k=Math.cos(k);return this.set(m*k+r*t,n*k+q*t,q*k-n*t,r*k-m*t)},rotateY:function(k){k*=.5;var m=this.x,n=this.y,q=this.z,r=this.w,t=Math.sin(k);k=Math.cos(k);return this.set(m*k-q*
t,n*k+r*t,q*k+m*t,r*k-n*t)},rotateZ:function(k){k*=.5;var m=this.x,n=this.y,q=this.z,r=this.w,t=Math.sin(k);k=Math.cos(k);return this.set(m*k+n*t,n*k-m*t,q*k+r*t,r*k-q*t)},calculateW:function(){var k=this.x,m=this.y,n=this.z;this.w=-Math.sqrt(1-k*k-m*m-n*n);return this},setFromEuler:function(k,m){var n=k.x/2,q=k.y/2,r=k.z/2,t=Math.cos(n),w=Math.cos(q),v=Math.cos(r);n=Math.sin(n);q=Math.sin(q);r=Math.sin(r);switch(k.order){case "XYZ":this.set(n*w*v+t*q*r,t*q*v-n*w*r,t*w*r+n*q*v,t*w*v-n*q*r,m);break;
case "YXZ":this.set(n*w*v+t*q*r,t*q*v-n*w*r,t*w*r-n*q*v,t*w*v+n*q*r,m);break;case "ZXY":this.set(n*w*v-t*q*r,t*q*v+n*w*r,t*w*r+n*q*v,t*w*v-n*q*r,m);break;case "ZYX":this.set(n*w*v-t*q*r,t*q*v+n*w*r,t*w*r-n*q*v,t*w*v+n*q*r,m);break;case "YZX":this.set(n*w*v+t*q*r,t*q*v+n*w*r,t*w*r-n*q*v,t*w*v-n*q*r,m);break;case "XZY":this.set(n*w*v-t*q*r,t*q*v-n*w*r,t*w*r+n*q*v,t*w*v+n*q*r,m)}return this},setFromRotationMatrix:function(k){var m=k.val,n=m[0];k=m[4];var q=m[8],r=m[1],t=m[5],w=m[9],v=m[2],x=m[6];m=m[10];
var y=n+t+m;0<y?(n=.5/Math.sqrt(y+1),this.set((x-w)*n,(q-v)*n,(r-k)*n,.25/n)):n>t&&n>m?(n=2*Math.sqrt(1+n-t-m),this.set(.25*n,(k+r)/n,(q+v)/n,(x-w)/n)):t>m?(n=2*Math.sqrt(1+t-n-m),this.set((k+r)/n,.25*n,(w+x)/n,(q-v)/n)):(n=2*Math.sqrt(1+m-n-t),this.set((q+v)/n,(w+x)/n,.25*n,(r-k)/n));return this},fromMat3:function(k){k=k.val;var m=k[0]+k[4]+k[8];if(0<m)m=Math.sqrt(m+1),this.w=.5*m,m=.5/m,this._x=(k[7]-k[5])*m,this._y=(k[2]-k[6])*m,this._z=(k[3]-k[1])*m;else{var n=0;k[4]>k[0]&&(n=1);k[8]>k[3*n+n]&&
(n=2);var q=c[n],r=c[q];m=Math.sqrt(k[3*n+n]-k[3*q+q]-k[3*r+r]+1);b[n]=.5*m;m=.5/m;b[q]=(k[3*q+n]+k[3*n+q])*m;b[r]=(k[3*r+n]+k[3*n+r])*m;this._x=b[0];this._y=b[1];this._z=b[2];this._w=(k[3*r+q]-k[3*q+r])*m}this.onChangeCallback(this);return this}});p.exports=a},function(p,u,a){var h=a(367),f=a(31),c=a(33),b=a(191);p.exports=function(d){var g=d.config;if((g.customEnvironment||g.canvas)&&g.renderType===c.AUTO)throw Error("Must set explicit renderType in custom environment");if(!g.customEnvironment&&
!g.canvas&&g.renderType!==c.HEADLESS)if(g.renderType===c.CANVAS||g.renderType!==c.CANVAS&&!b.webGL)if(b.canvas)g.renderType=c.CANVAS;else throw Error("Cannot create Canvas or WebGL context, aborting.");else g.renderType=c.WEBGL;g.antialias||f.disableSmoothing();var e=d.scale.baseSize,l=e.width;e=e.height;g.canvas?(d.canvas=g.canvas,d.canvas.width=l,d.canvas.height=e):d.canvas=f.create(d,l,e,g.renderType);g.canvasStyle&&(d.canvas.style=g.canvasStyle);g.antialias||h.setCrisp(d.canvas);g.renderType!==
c.HEADLESS&&(l=a(368),e=a(371),g.renderType===c.WEBGL?d.renderer=new e(d):(d.renderer=new l(d),d.context=d.renderer.gameContext))}},function(p,u){p.exports={setCrisp:function(a){"optimizeSpeed -moz-crisp-edges -o-crisp-edges -webkit-optimize-contrast optimize-contrast crisp-edges pixelated".split(" ").forEach(function(h){a.style["image-rendering"]=h});a.style.msInterpolationMode="nearest-neighbor";return a},setBicubic:function(a){a.style["image-rendering"]="auto";a.style.msInterpolationMode="bicubic";
return a}}},function(p,u,a){var h=a(37),f=a(369);u=a(0);var c=a(33),b=a(9),d=a(91),g=a(370),e=a(104),l=a(106),k=a(25);a=new u({Extends:b,initialize:function(m){b.call(this);var n=m.config;this.config={clearBeforeRender:n.clearBeforeRender,backgroundColor:n.backgroundColor,antialias:n.antialias,roundPixels:n.roundPixels};this.game=m;this.type=c.CANVAS;this.height=this.width=this.drawCount=0;this.gameCanvas=m.canvas;var q={alpha:m.config.transparent,desynchronized:m.config.desynchronized};this.currentContext=
this.gameContext=n.context?n.context:this.gameCanvas.getContext("2d",q);this.antialias=m.config.antialias;this.blendModes=g();this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92};this._tempMatrix1=new k;this._tempMatrix2=new k;this._tempMatrix3=new k;this.isBooted=!1;this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var m=this.game,n=m.scale.baseSize;this.width=n.width;this.height=n.height;this.isBooted=!0;
m.scale.on(e.RESIZE,this.onResize,this);this.resize(n.width,n.height)},onResize:function(m,n){n.width===this.width&&n.height===this.height||this.resize(n.width,n.height)},resize:function(m,n){this.width=m;this.height=n;this.emit(d.RESIZE,m,n)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(m){this.currentContext.globalCompositeOperation=m;return this},setContext:function(m){this.currentContext=m?m:this.gameContext;return this},setAlpha:function(m){this.currentContext.globalAlpha=
m;return this},preRender:function(){var m=this.gameContext,n=this.config,q=this.width,r=this.height;m.globalAlpha=1;m.globalCompositeOperation="source-over";m.setTransform(1,0,0,1,0,0);n.clearBeforeRender&&(m.clearRect(0,0,q,r),n.transparent||(m.fillStyle=n.backgroundColor.rgba,m.fillRect(0,0,q,r)));m.save();this.drawCount=0;this.emit(d.PRE_RENDER)},render:function(m,n,q){var r=n.length;this.emit(d.RENDER,m,q);var t=q.x,w=q.y,v=q.width,x=q.height,y=q.renderToTexture?q.context:m.sys.context;y.save();
this.game.scene.customViewports&&(y.beginPath(),y.rect(t,w,v,x),y.clip());this.currentContext=y;var A=q.mask;A&&A.preRenderCanvas(this,null,q._maskCamera);q.transparent||(y.fillStyle=q.backgroundColor.rgba,y.fillRect(t,w,v,x));y.globalAlpha=q.alpha;y.globalCompositeOperation="source-over";this.drawCount+=r;q.renderToTexture&&q.emit(h.PRE_RENDER,q);q.matrix.copyToContext(y);for(v=0;v<r;v++)x=n[v],x.mask&&x.mask.preRenderCanvas(this,x,q),x.renderCanvas(this,x,q),x.mask&&x.mask.postRenderCanvas(this,
x,q);y.setTransform(1,0,0,1,0,0);y.globalCompositeOperation="source-over";y.globalAlpha=1;q.flashEffect.postRenderCanvas(y);q.fadeEffect.postRenderCanvas(y);q.dirty=!1;A&&A.postRenderCanvas(this);y.restore();q.renderToTexture&&(q.emit(h.POST_RENDER,q),q.renderToGame&&m.sys.context.drawImage(q.canvas,t,w))},postRender:function(){this.gameContext.restore();this.emit(d.POST_RENDER);var m=this.snapshotState;m.callback&&(f(this.gameCanvas,m),m.callback=null)},snapshotCanvas:function(m,n,q,r,t,w,v,x,y){void 0===
q&&(q=!1);this.snapshotArea(r,t,w,v,n,x,y);m=this.snapshotState;m.getPixel=q;f(this.canvas,m);m.callback=null;return this},snapshot:function(m,n,q){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,m,n,q)},snapshotArea:function(m,n,q,r,t,w,v){var x=this.snapshotState;x.callback=t;x.type=w;x.encoder=v;x.getPixel=!1;x.x=m;x.y=n;x.width=Math.min(q,this.gameCanvas.width);x.height=Math.min(r,this.gameCanvas.height);return this},snapshotPixel:function(m,n,q){this.snapshotArea(m,
n,1,1,q);this.snapshotState.getPixel=!0;return this},batchSprite:function(m,n,q,r){var t=q.alpha*m.alpha;if(0!==t){var w=this.currentContext,v=this._tempMatrix1,x=this._tempMatrix2,y=n.canvasData,A=y.x;y=y.y;var B=n.cutWidth,z=n.cutHeight,C=n.customPivot,E=n.source.resolution,G=m.displayOriginX,H=m.displayOriginY,I=-G+n.x,K=-H+n.y;m.isCropped&&(K=m._crop,K.flipX===m.flipX&&K.flipY===m.flipY||n.updateCropUVs(K,m.flipX,m.flipY),B=K.cw,z=K.ch,A=K.cx,y=K.cy,I=-G+K.x,K=-H+K.y,m.flipX&&(0<=I?I=-(I+B):0>
I&&(I=Math.abs(I)-B)),m.flipY&&(0<=K?K=-(K+z):0>K&&(K=Math.abs(K)-z)));var O=1,R=1;m.flipX&&(C||(I+=-n.realWidth+2*G),O=-1);m.flipY&&(C||(K+=-n.realHeight+2*H),R=-1);x.applyITRS(m.x,m.y,m.rotation,m.scaleX*O,m.scaleY*R);v.copyFrom(q.matrix);r?(v.multiplyWithOffset(r,-q.scrollX*m.scrollFactorX,-q.scrollY*m.scrollFactorY),x.e=m.x,x.f=m.y):(x.e-=q.scrollX*m.scrollFactorX,x.f-=q.scrollY*m.scrollFactorY);v.multiply(x);w.save();v.setToContext(w);w.globalCompositeOperation=this.blendModes[m.blendMode];w.globalAlpha=
t;w.imageSmoothingEnabled=!(!this.antialias||n.source.scaleMode);m.mask&&m.mask.preRenderCanvas(this,m,q);w.drawImage(n.source.image,A,y,B,z,I,K,B/E,z/E);m.mask&&m.mask.postRenderCanvas(this,m,q);w.restore()}},destroy:function(){this.removeAllListeners();this.gameContext=this.gameCanvas=this.game=null}});p.exports=a},function(p,u,a){var h=a(31),f=a(38),c=a(2);p.exports=function(b,d){var g=c(d,"callback"),e=c(d,"type","image/png"),l=c(d,"encoder",.92),k=Math.abs(Math.round(c(d,"x",0))),m=Math.abs(Math.round(c(d,
"y",0))),n=c(d,"width",b.width),q=c(d,"height",b.height);if(c(d,"getPixel",!1))b=b.getContext("2d").getImageData(k,m,1,1).data,g.call(null,new f(b[0],b[1],b[2],b[3]/255));else if(0!==k||0!==m||n!==b.width||q!==b.height){var r=h.createWebGL(this,n,q);r.getContext("2d").drawImage(b,k,m,n,q,0,0,n,q);var t=new Image;t.onerror=function(){g.call(null);h.remove(r)};t.onload=function(){g.call(null,t);h.remove(r)};t.src=r.toDataURL(e,l)}else{var w=new Image;w.onerror=function(){g.call(null)};w.onload=function(){g.call(null,
w)};w.src=b.toDataURL(e,l)}}},function(p,u,a){var h=a(35),f=a(348);p.exports=function(){var c=[],b=f.supportNewBlendModes;c[h.NORMAL]="source-over";c[h.ADD]="lighter";c[h.MULTIPLY]=b?"multiply":"source-over";c[h.SCREEN]=b?"screen":"source-over";c[h.OVERLAY]=b?"overlay":"source-over";c[h.DARKEN]=b?"darken":"source-over";c[h.LIGHTEN]=b?"lighten":"source-over";c[h.COLOR_DODGE]=b?"color-dodge":"source-over";c[h.COLOR_BURN]=b?"color-burn":"source-over";c[h.HARD_LIGHT]=b?"hard-light":"source-over";c[h.SOFT_LIGHT]=
b?"soft-light":"source-over";c[h.DIFFERENCE]=b?"difference":"source-over";c[h.EXCLUSION]=b?"exclusion":"source-over";c[h.HUE]=b?"hue":"source-over";c[h.SATURATION]=b?"saturation":"source-over";c[h.COLOR]=b?"color":"source-over";c[h.LUMINOSITY]=b?"luminosity":"source-over";c[h.ERASE]="destination-out";c[h.SOURCE_IN]="source-in";c[h.SOURCE_OUT]="source-out";c[h.SOURCE_ATOP]="source-atop";c[h.DESTINATION_OVER]="destination-over";c[h.DESTINATION_IN]="destination-in";c[h.DESTINATION_OUT]="destination-out";
c[h.DESTINATION_ATOP]="destination-atop";c[h.LIGHTER]="lighter";c[h.COPY]="copy";c[h.XOR]="xor";return c}},function(p,u,a){var h=a(93),f=a(37);u=a(0);var c=a(33),b=a(9),d=a(91),g=a(22),e=a(138),l=a(69),k=a(1),m=a(372),n=a(141),q=a(104),r=a(106),t=a(12),w=a(383);a=new u({Extends:b,initialize:function(v){b.call(this);var x=v.config;this.config={clearBeforeRender:x.clearBeforeRender,antialias:x.antialias,backgroundColor:x.backgroundColor,contextCreation:{alpha:x.transparent,desynchronized:x.desynchronized,
depth:!1,antialias:x.antialiasGL,premultipliedAlpha:x.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:x.failIfMajorPerformanceCaveat,powerPreference:x.powerPreference,preserveDrawingBuffer:x.preserveDrawingBuffer},roundPixels:x.roundPixels,maxTextures:x.maxTextures,maxTextureSize:x.maxTextureSize,batchSize:x.batchSize,maxLights:x.maxLights,mipmapFilter:x.mipmapFilter};this.game=v;this.type=c.WEBGL;this.pipelines=null;this.height=this.width=0;this.canvas=v.canvas;this.blendModes=[];this.contextLost=
!1;this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0};this.maxTextures=this.startActiveTexture=this.currentActiveTexture=0;this.currentFramebuffer=null;this.fboStack=[];this.currentProgram=null;this.currentBlendMode=Infinity;this.currentScissorEnabled=!1;this.currentScissor=null;this.scissorStack=[];this.contextRestoredHandler=this.contextLostHandler=k;this.vaoExtension=this.instancedArraysExtension=this.supportedExtensions=
this.gl=null;this.extensions={};this.glFormats=[];this.compression={ETC1:!1,PVRTC:!1,S3TC:!1};this.drawingBufferHeight=0;this.whiteTexture=this.blankTexture=null;this.maskCount=0;this.maskStack=[];this.currentMask={mask:null,camera:null};this.currentCameraMask={mask:null,camera:null};this.glFuncMap=null;this.currentType="";this.finalType=this.nextTypeMatch=this.newType=!1;this.mipmapFilter=null;this.textureFlush=0;this.isTextureClean=!1;this.defaultScissor=[0,0,0,0];this.isBooted=!1;this.renderTarget=
null;this.projectionHeight=this.projectionWidth=0;this.init(this.config)},init:function(v){var x=this.game,y=this.canvas,A=v.backgroundColor;var B=x.config.context?x.config.context:y.getContext("webgl",v.contextCreation)||y.getContext("experimental-webgl",v.contextCreation);if(!B||B.isContextLost())throw this.contextLost=!0,Error("WebGL unsupported");this.gl=B;var z=this;this.contextLostHandler=function(E){z.contextLost=!0;z.game.events.emit(g.CONTEXT_LOST,z);E.preventDefault()};this.contextRestoredHandler=
function(){z.contextLost=!1;z.init(z.config);z.game.events.emit(g.CONTEXT_RESTORED,z)};y.addEventListener("webglcontextlost",this.contextLostHandler,!1);y.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1);x.context=B;for(y=0;27>=y;y++)this.blendModes.push({func:[B.ONE,B.ONE_MINUS_SRC_ALPHA],equation:B.FUNC_ADD});this.blendModes[1].func=[B.ONE,B.DST_ALPHA];this.blendModes[2].func=[B.DST_COLOR,B.ONE_MINUS_SRC_ALPHA];this.blendModes[3].func=[B.ONE,B.ONE_MINUS_SRC_COLOR];this.blendModes[17]=
{func:[B.ZERO,B.ONE_MINUS_SRC_ALPHA],equation:B.FUNC_REVERSE_SUBTRACT};this.glFormats[0]=B.BYTE;this.glFormats[1]=B.SHORT;this.glFormats[2]=B.UNSIGNED_BYTE;this.glFormats[3]=B.UNSIGNED_SHORT;this.glFormats[4]=B.FLOAT;this.glFuncMap={mat2:{func:B.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:B.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:B.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:B.uniform1f,length:1},"1fv":{func:B.uniform1fv,length:1},"1i":{func:B.uniform1i,length:1},"1iv":{func:B.uniform1iv,
length:1},"2f":{func:B.uniform2f,length:2},"2fv":{func:B.uniform2fv,length:1},"2i":{func:B.uniform2i,length:2},"2iv":{func:B.uniform2iv,length:1},"3f":{func:B.uniform3f,length:3},"3fv":{func:B.uniform3fv,length:1},"3i":{func:B.uniform3i,length:3},"3iv":{func:B.uniform3iv,length:1},"4f":{func:B.uniform4f,length:4},"4fv":{func:B.uniform4fv,length:1},"4i":{func:B.uniform4i,length:4},"4iv":{func:B.uniform4iv,length:1}};var C=B.getSupportedExtensions();v.maxTextures&&-1!==v.maxTextures||(v.maxTextures=
B.getParameter(B.MAX_TEXTURE_IMAGE_UNITS));v.maxTextureSize||(v.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE));this.compression.ETC1=B.getExtension("WEBGL_compressed_texture_etc1")||B.getExtension("WEBKIT_WEBGL_compressed_texture_etc1");this.compression.PVRTC=B.getExtension("WEBGL_compressed_texture_pvrtc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");this.compression.S3TC=B.getExtension("WEBGL_compressed_texture_s3tc")||B.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");this.supportedExtensions=
C;this.instancedArraysExtension=-1<C.indexOf("ANGLE_instanced_arrays")?B.getExtension("ANGLE_instanced_arrays"):null;this.vaoExtension=-1<C.indexOf("OES_vertex_array_object")?B.getExtension("OES_vertex_array_object"):null;B.disable(B.DEPTH_TEST);B.disable(B.CULL_FACE);B.enable(B.BLEND);B.clearColor(A.redGL,A.greenGL,A.blueGL,A.alphaGL);this.mipmapFilter=B[v.mipmapFilter];this.maxTextures=t.checkShaderMax(B,v.maxTextures);this.textureIndexes=[];v=this.tempTextures;if(Array.isArray(v))for(A=0;y<this.maxTextures;A++)B.deleteTexture(v[A]);
else v=Array(this.maxTextures);for(y=0;y<this.maxTextures;y++)A=B.createTexture(),B.activeTexture(B.TEXTURE0+y),B.bindTexture(B.TEXTURE_2D,A),B.texImage2D(B.TEXTURE_2D,0,B.RGBA,1,1,0,B.RGBA,B.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),v[y]=A,this.textureIndexes.push(y);this.tempTextures=v;this.currentActiveTexture=1;this.startActiveTexture++;B.activeTexture(B.TEXTURE1);this.pipelines=new m(this);this.setBlendMode(c.BlendModes.NORMAL);this.projectionMatrix=(new l).identity();x.textures.once(r.READY,
this.boot,this);return this},boot:function(){var v=this.game,x=this.pipelines,y=v.scale.baseSize;this.width=y.width;this.height=y.height;this.isBooted=!0;this.renderTarget=new n(this,this.width,this.height,1,0,!0,!0);x.boot(v.config.pipeline);this.blankTexture=v.textures.getFrame("__DEFAULT");this.whiteTexture=v.textures.getFrame("__WHITE");x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,null);x.enable(x.SCISSOR_TEST);v.scale.on(q.RESIZE,this.onResize,this);this.resize(y.width,y.height)},onResize:function(v,
x){x.width===this.width&&x.height===this.height||this.resize(x.width,x.height)},beginCapture:function(v,x){void 0===v&&(v=this.width);void 0===x&&(x=this.height);this.renderTarget.bind(!0,v,x);this.setProjectionMatrix(v,x);this.resetTextures()},endCapture:function(){this.renderTarget.unbind(!0);this.resetProjectionMatrix();return this.renderTarget},resize:function(v,x){var y=this.gl;this.width=v;this.height=x;this.setProjectionMatrix(v,x);y.viewport(0,0,v,x);this.drawingBufferHeight=y.drawingBufferHeight;
y.scissor(0,y.drawingBufferHeight-x,v,x);this.defaultScissor[2]=v;this.defaultScissor[3]=x;this.emit(d.RESIZE,v,x);return this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(v,x){if(v!==this.projectionWidth||x!==this.projectionHeight)this.projectionWidth=v,this.projectionHeight=x,this.projectionMatrix.ortho(0,v,x,0,-1E3,1E3);return this},resetProjectionMatrix:function(){this.projectionWidth=this.width;this.projectionHeight=this.height;this.projectionMatrix.ortho(0,
this.width,this.height,0,-1E3,1E3)},hasExtension:function(v){return this.supportedExtensions?this.supportedExtensions.indexOf(v):!1},getExtension:function(v){if(!this.hasExtension(v))return null;v in this.extensions||(this.extensions[v]=this.gl.getExtension(v));return this.extensions[v]},flush:function(){this.pipelines.flush()},pushScissor:function(v,x,y,A,B){void 0===B&&(B=this.drawingBufferHeight);var z=[v,x,y,A];this.scissorStack.push(z);this.setScissor(v,x,y,A,B);return this.currentScissor=z},
setScissor:function(v,x,y,A,B){void 0===B&&(B=this.drawingBufferHeight);var z=this.gl,C=this.currentScissor,E=0<y&&0<A;if(C&&E){E=C[1];var G=C[2],H=C[3];E=C[0]!==v||E!==x||G!==y||H!==A}E&&(this.flush(),z.scissor(v,B-x-A,y,A))},resetScissor:function(){var v=this.gl;v.enable(v.SCISSOR_TEST);var x=this.currentScissor;if(x){var y=x[0],A=x[1],B=x[2];x=x[3];0<B&&0<x&&v.scissor(y,this.drawingBufferHeight-A-x,B,x)}},popScissor:function(){var v=this.scissorStack;v.pop();(v=v[v.length-1])&&this.setScissor(v[0],
v[1],v[2],v[3]);this.currentScissor=v},hasActiveStencilMask:function(){var v=this.currentMask.mask,x=this.currentCameraMask.mask;return v&&v.isStencil||x&&x.isStencil},resetViewport:function(){var v=this.gl;v.viewport(0,0,this.width,this.height);this.drawingBufferHeight=v.drawingBufferHeight},setBlendMode:function(v,x){void 0===x&&(x=!1);var y=this.gl,A=this.blendModes[v];return x||v!==c.BlendModes.SKIP_CHECK&&this.currentBlendMode!==v?(this.flush(),y.enable(y.BLEND),y.blendEquation(A.equation),2<
A.func.length?y.blendFuncSeparate(A.func[0],A.func[1],A.func[2],A.func[3]):y.blendFunc(A.func[0],A.func[1]),this.currentBlendMode=v,!0):!1},addBlendMode:function(v,x){return this.blendModes.push({func:v,equation:x})-1},updateBlendMode:function(v,x,y){this.blendModes[v]&&(this.blendModes[v].func=x,y&&(this.blendModes[v].equation=y));return this},removeBlendMode:function(v){17<v&&this.blendModes[v]&&this.blendModes.splice(v,1);return this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},
setTextureSource:function(v){if(this.pipelines.forceZero())return this.setTextureZero(v.glTexture,!0),0;var x=this.gl,y=this.currentActiveTexture;v.glIndexCounter<this.startActiveTexture&&(v.glIndexCounter=this.startActiveTexture,y<this.maxTextures?(v.glIndex=y,x.activeTexture(x.TEXTURE0+y),x.bindTexture(x.TEXTURE_2D,v.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,v.glIndexCounter=this.startActiveTexture,v.glIndex=1,x.activeTexture(x.TEXTURE1),
x.bindTexture(x.TEXTURE_2D,v.glTexture),this.currentActiveTexture=2));this.isTextureClean=!1;return v.glIndex},isNewNormalMap:function(v,x){return this.textureZero!==v||this.normalTexture!==x},setTextureZero:function(v,x){this.textureZero!==v&&(x&&this.flush(),x=this.gl,x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,v),this.textureZero=v)},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(v){if(this.normalTexture!==v){var x=this.gl;x.activeTexture(x.TEXTURE1);x.bindTexture(x.TEXTURE_2D,
v);this.normalTexture=v;1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null;this.startActiveTexture++;this.currentActiveTexture=1;this.textureFlush++},unbindTextures:function(){for(var v=this.gl,x=this.tempTextures,y=0;y<x.length;y++)v.activeTexture(v.TEXTURE0+y),v.bindTexture(v.TEXTURE_2D,null);this.textureZero=this.normalTexture=null;this.currentActiveTexture=1;this.startActiveTexture++;this.textureFlush++},resetTextures:function(v){void 0===
v&&(v=!1);if(!this.isTextureClean){this.flush();var x=this.gl,y=this.tempTextures;if(v){for(v=0;v<y.length;v++)x.activeTexture(x.TEXTURE0+v),x.bindTexture(x.TEXTURE_2D,y[v]);x.activeTexture(x.TEXTURE1);x.bindTexture(x.TEXTURE_2D,y[1]);this.isTextureClean=!0}else x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,y[0]),x.activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,y[1]);this.textureZero=this.normalTexture=null;this.currentActiveTexture=1;this.startActiveTexture++;this.textureFlush++}},
setTexture2D:function(v){if(this.pipelines.forceZero())return this.setTextureZero(v,!0),0;var x=this.gl,y=this.currentActiveTexture;v.glIndexCounter<this.startActiveTexture&&(v.glIndexCounter=this.startActiveTexture,y<this.maxTextures?(v.glIndex=y,x.activeTexture(x.TEXTURE0+y),x.bindTexture(x.TEXTURE_2D,v),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,v.glIndexCounter=this.startActiveTexture,v.glIndex=1,x.activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,
v),this.currentActiveTexture=2));this.isTextureClean=!1;return v.glIndex},pushFramebuffer:function(v,x,y,A){if(v===this.currentFramebuffer)return this;this.fboStack.push(v);return this.setFramebuffer(v,x,y,A)},setFramebuffer:function(v,x,y,A){void 0===x&&(x=!1);void 0===y&&(y=!1);void 0===A&&(A=!0);if(v===this.currentFramebuffer)return this;var B=this.gl,z=this.width,C=this.height;v&&v.renderTexture&&A?(z=v.renderTexture.width,C=v.renderTexture.height):this.flush();B.bindFramebuffer(B.FRAMEBUFFER,
v);A&&B.viewport(0,0,z,C);x&&(v?(this.drawingBufferHeight=C,this.pushScissor(0,0,z,C)):(this.drawingBufferHeight=this.height,this.popScissor()));this.currentFramebuffer=v;y&&this.resetTextures();return this},popFramebuffer:function(v,x,y){void 0===v&&(v=!1);void 0===x&&(x=!1);void 0===y&&(y=!0);var A=this.fboStack;A.pop();(A=A[A.length-1])||(A=null);this.setFramebuffer(A,v,x,y);return A},setProgram:function(v){return v!==this.currentProgram?(this.flush(),this.gl.useProgram(v),this.currentProgram=
v,!0):!1},resetProgram:function(){this.gl.useProgram(this.currentProgram);return this},createTextureFromSource:function(v,x,y,A){var B=this.gl,z=B.NEAREST,C=B.NEAREST,E=B.CLAMP_TO_EDGE;x=v?v.width:x;y=v?v.height:y;var G=e(x,y);G&&(E=B.REPEAT);A===c.ScaleModes.LINEAR&&this.config.antialias&&(z=G?this.mipmapFilter:B.LINEAR,C=B.LINEAR);return v||"number"!==typeof x||"number"!==typeof y?this.createTexture2D(0,z,C,E,E,B.RGBA,v):this.createTexture2D(0,z,C,E,E,B.RGBA,null,x,y)},createTexture2D:function(v,
x,y,A,B,z,C,E,G,H,I,K){H=void 0===H||null===H?!0:H;void 0===I&&(I=!1);void 0===K&&(K=!1);var O=this.gl,R=O.createTexture();O.activeTexture(O.TEXTURE0);var F=O.getParameter(O.TEXTURE_BINDING_2D);O.bindTexture(O.TEXTURE_2D,R);O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,x);O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,y);O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,B);O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,A);O.pixelStorei(O.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H);O.pixelStorei(O.UNPACK_FLIP_Y_WEBGL,
K);null===C||void 0===C?O.texImage2D(O.TEXTURE_2D,v,z,E,G,0,z,O.UNSIGNED_BYTE,null):(I||(E=C.width,G=C.height),O.texImage2D(O.TEXTURE_2D,v,z,z,O.UNSIGNED_BYTE,C));e(E,G)&&O.generateMipmap(O.TEXTURE_2D);F&&O.bindTexture(O.TEXTURE_2D,F);R.isAlphaPremultiplied=H;R.isRenderTexture=!1;R.width=E;R.height=G;R.glIndex=0;R.glIndexCounter=-1;return R},createFramebuffer:function(v,x,y,A){var B=this.gl,z=B.createFramebuffer();this.setFramebuffer(z);A&&(A=B.createRenderbuffer(),B.bindRenderbuffer(B.RENDERBUFFER,
A),B.renderbufferStorage(B.RENDERBUFFER,B.DEPTH_STENCIL,v,x),B.framebufferRenderbuffer(B.FRAMEBUFFER,B.DEPTH_STENCIL_ATTACHMENT,B.RENDERBUFFER,A));y.isRenderTexture=!0;y.isAlphaPremultiplied=!1;B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_2D,y,0);v=B.checkFramebufferStatus(B.FRAMEBUFFER);if(v!==B.FRAMEBUFFER_COMPLETE)throw Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[v]);
z.renderTexture=y;this.setFramebuffer(null);this.resetTextures();return z},createProgram:function(v,x){var y=this.gl,A=y.createProgram(),B=y.createShader(y.VERTEX_SHADER),z=y.createShader(y.FRAGMENT_SHADER);y.shaderSource(B,v);y.shaderSource(z,x);y.compileShader(B);y.compileShader(z);if(!y.getShaderParameter(B,y.COMPILE_STATUS))throw Error("Vertex Shader failed:\n"+y.getShaderInfoLog(B));if(!y.getShaderParameter(z,y.COMPILE_STATUS))throw Error("Fragment Shader failed:\n"+y.getShaderInfoLog(z));y.attachShader(A,
B);y.attachShader(A,z);y.linkProgram(A);if(!y.getProgramParameter(A,y.LINK_STATUS))throw Error("Link Program failed:\n"+y.getProgramInfoLog(A));y.useProgram(A);return A},createVertexBuffer:function(v,x){var y=this.gl,A=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,A);y.bufferData(y.ARRAY_BUFFER,v,x);y.bindBuffer(y.ARRAY_BUFFER,null);return A},createIndexBuffer:function(v,x){var y=this.gl,A=y.createBuffer();y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,A);y.bufferData(y.ELEMENT_ARRAY_BUFFER,v,x);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,
null);return A},deleteTexture:function(v,x){x&&this.resetTextures(!0);v&&this.gl.deleteTexture(v);return this},deleteFramebuffer:function(v){v&&(this.gl.deleteFramebuffer(v),h(this.fboStack,v),this.currentFramebuffer===v&&(this.currentFramebuffer=null));return this},deleteProgram:function(v){v&&this.gl.deleteProgram(v);return this},deleteBuffer:function(v){this.gl.deleteBuffer(v);return this},preRenderCamera:function(v){var x=v.x,y=v.y,A=v.width,B=v.height,z=v.backgroundColor;v.emit(f.PRE_RENDER,
v);this.pipelines.preBatchCamera(v);this.pushScissor(x,y,A,B);v.mask&&(this.currentCameraMask.mask=v.mask,this.currentCameraMask.camera=v._maskCamera,v.mask.preRenderWebGL(this,v,v._maskCamera));0<z.alphaGL&&this.pipelines.setMulti().drawFillRect(x,y,A,B,t.getTintFromFloats(z.blueGL,z.greenGL,z.redGL,1),z.alphaGL)},getCurrentStencilMask:function(){var v=null,x=this.maskStack,y=this.currentCameraMask;0<x.length?v=x[x.length-1]:y.mask&&y.mask.isStencil&&(v=y);return v},postRenderCamera:function(v){var x=
v.flashEffect,y=v.fadeEffect;if(x.isRunning||y.isRunning||y.isComplete){var A=this.pipelines.setMulti();x.postRenderWebGL(A,t.getTintFromFloats);y.postRenderWebGL(A,t.getTintFromFloats)}v.dirty=!1;this.popScissor();v.mask&&(this.currentCameraMask.mask=null,v.mask.postRenderWebGL(this,v._maskCamera));this.pipelines.postBatchCamera(v);v.emit(f.POST_RENDER,v)},preRender:function(){if(!this.contextLost){var v=this.gl;v.bindFramebuffer(v.FRAMEBUFFER,null);if(this.config.clearBeforeRender){var x=this.config.backgroundColor;
v.clearColor(x.redGL,x.greenGL,x.blueGL,x.alphaGL);v.clear(v.COLOR_BUFFER_BIT|v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT)}v.enable(v.SCISSOR_TEST);this.currentScissor=this.defaultScissor;this.scissorStack.length=0;this.scissorStack.push(this.currentScissor);this.game.scene.customViewports&&v.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height);this.currentMask.mask=null;this.currentCameraMask.mask=null;this.textureFlush=this.maskStack.length=0;this.emit(d.PRE_RENDER)}},render:function(v,
x,y){if(!this.contextLost){var A=x.length;this.emit(d.RENDER,v,y);this.preRenderCamera(y);if(0!==A){this.currentType="";for(v=0;v<A;v++){this.finalType=v===A-1;var B=x[v],z=B.mask;var C=this.currentMask;C.mask&&C.mask!==z&&C.mask.postRenderWebGL(this,C.camera);z&&C.mask!==z&&z.preRenderWebGL(this,B,y);B.blendMode!==this.currentBlendMode&&this.setBlendMode(B.blendMode);C=B.type;C!==this.currentType&&(this.newType=!0,this.currentType=C);this.nextTypeMatch=this.finalType?!1:x[v+1].type===this.currentType;
B.renderWebGL(this,B,y);this.newType=!1}C=this.currentMask;C.mask&&C.mask.postRenderWebGL(this,C.camera)}this.setBlendMode(c.BlendModes.NORMAL);this.postRenderCamera(y)}},postRender:function(){if(!this.contextLost){this.flush();this.emit(d.POST_RENDER);var v=this.snapshotState;v.callback&&(w(this.canvas,v),v.callback=null);0<this.textureFlush&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(v,x,y){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,
v,x,y)},snapshotArea:function(v,x,y,A,B,z,C){var E=this.snapshotState;E.callback=B;E.type=z;E.encoder=C;E.getPixel=!1;E.x=v;E.y=x;E.width=Math.min(y,this.gl.drawingBufferWidth);E.height=Math.min(A,this.gl.drawingBufferHeight);return this},snapshotPixel:function(v,x,y){this.snapshotArea(v,x,1,1,y);this.snapshotState.getPixel=!0;return this},snapshotFramebuffer:function(v,x,y,A,B,z,C,E,G,H,I){void 0===B&&(B=!1);void 0===z&&(z=0);void 0===C&&(C=0);void 0===E&&(E=x);void 0===G&&(G=y);var K=this.currentFramebuffer;
this.snapshotArea(z,C,E,G,A,H,I);A=this.snapshotState;A.getPixel=B;A.isFramebuffer=!0;A.bufferWidth=x;A.bufferHeight=y;this.setFramebuffer(v);w(this.canvas,A);this.setFramebuffer(K);A.callback=null;A.isFramebuffer=!1;return this},canvasToTexture:function(v,x,y,A){void 0===y&&(y=!1);void 0===A&&(A=!1);return x?this.updateCanvasTexture(v,x,A):this.createCanvasTexture(v,y,A)},createCanvasTexture:function(v,x,y){void 0===x&&(x=!1);void 0===y&&(y=!1);var A=this.gl,B=A.NEAREST,z=A.NEAREST,C=v.width,E=v.height,
G=A.CLAMP_TO_EDGE,H=e(C,E);!x&&H&&(G=A.REPEAT);this.config.antialias&&(B=H?this.mipmapFilter:A.LINEAR,z=A.LINEAR);return this.createTexture2D(0,B,z,G,G,A.RGBA,v,C,E,!0,!1,y)},updateCanvasTexture:function(v,x,y){void 0===y&&(y=!1);var A=this.gl,B=v.width,z=v.height;if(0<B&&0<z){A.activeTexture(A.TEXTURE0);var C=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,x);A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,y);A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);A.texImage2D(A.TEXTURE_2D,0,A.RGBA,
A.RGBA,A.UNSIGNED_BYTE,v);x.width=B;x.height=z;C&&A.bindTexture(A.TEXTURE_2D,C)}return x},createVideoTexture:function(v,x,y){void 0===x&&(x=!1);void 0===y&&(y=!1);var A=this.gl,B=A.NEAREST,z=A.NEAREST,C=v.videoWidth,E=v.videoHeight,G=A.CLAMP_TO_EDGE,H=e(C,E);!x&&H&&(G=A.REPEAT);this.config.antialias&&(B=H?this.mipmapFilter:A.LINEAR,z=A.LINEAR);return this.createTexture2D(0,B,z,G,G,A.RGBA,v,C,E,!0,!0,y)},updateVideoTexture:function(v,x,y){void 0===y&&(y=!1);var A=this.gl,B=v.videoWidth,z=v.videoHeight;
if(0<B&&0<z){A.activeTexture(A.TEXTURE0);var C=A.getParameter(A.TEXTURE_BINDING_2D);A.bindTexture(A.TEXTURE_2D,x);A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,y);A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,v);x.width=B;x.height=z;C&&A.bindTexture(A.TEXTURE_2D,C)}return x},setTextureFilter:function(v,x){var y=this.gl;x=[y.LINEAR,y.NEAREST][x];y.activeTexture(y.TEXTURE0);var A=y.getParameter(y.TEXTURE_BINDING_2D);y.bindTexture(y.TEXTURE_2D,v);y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,x);
y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,x);A&&y.bindTexture(y.TEXTURE_2D,A);return this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1);this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var v=this.gl,x=this.tempTextures,y=0;y<x.length;y++)v.deleteTexture(x[y]);this.pipelines.destroy();this.removeAllListeners();this.fboStack=[];this.maskStack=
[];this.extensions={};this.textureIndexes=[];this.canvas=this.game=this.gl=null;this.contextLost=!0;this.currentCameraMask=this.currentMask=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(92),f=a(102),c=a(373),b=a(376),d=a(377),g=a(108),e=a(378),l=a(379),k=a(380),m=a(381);a=new u({initialize:function(n){this.game=n.game;this.renderer=n;this.classes=new f([[h.UTILITY_PIPELINE,m],[h.MULTI_PIPELINE,g],[h.BITMAPMASK_PIPELINE,c],[h.SINGLE_PIPELINE,k],[h.ROPE_PIPELINE,l],[h.LIGHT_PIPELINE,d],[h.POINTLIGHT_PIPELINE,
e],[h.GRAPHICS_PIPELINE,b]]);this.postPipelineClasses=new f;this.pipelines=new f;this.UTILITY_PIPELINE=this.BITMAPMASK_PIPELINE=this.MULTI_PIPELINE=this.previous=this.current=null},boot:function(n){var q,r=this,t=this.game;this.classes.each(function(x,y){v=r.add(x,new y({game:t}));x===h.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=v,r.fullFrame1=v.fullFrame1,r.fullFrame2=v.fullFrame2,r.halfFrame1=v.halfFrame1,r.halfFrame2=v.halfFrame2)});this.MULTI_PIPELINE=this.get(h.MULTI_PIPELINE);this.BITMAPMASK_PIPELINE=
this.get(h.BITMAPMASK_PIPELINE);if(n)for(q in n){var w=n[q];var v=new w(t);v.isPostFX?this.postPipelineClasses.set(q,w):this.has(q)||(this.classes.set(q,w),this.add(q,v))}},add:function(n,q){if(q.isPostFX)console.warn(n+" is a Post Pipeline. Use `addPostPipeline` instead");else{var r=this.pipelines,t=this.renderer;r.has(n)?console.warn("Pipeline exists: "+n):(q.name=n,q.manager=this,r.set(n,q));q.hasBooted||q.boot();0!==t.width&&0!==t.height&&q.resize(t.width,t.height);return q}},addPostPipeline:function(n,
q){this.postPipelineClasses.has(n)||this.postPipelineClasses.set(n,q)},flush:function(){this.current&&this.current.flush()},has:function(n){var q=this.pipelines;return"string"===typeof n?q.has(n):q.contains(n)?!0:!1},get:function(n){var q=this.pipelines;if("string"===typeof n)return q.get(n);if(q.contains(n))return n},getPostPipeline:function(n,q){var r=this.postPipelineClasses,t;"string"===typeof n?t=r.get(n):"function"===typeof n?r.contains(n)&&(t=n):"object"===typeof n&&(t=r.get(n.name));if(t)return n=
new t(this.game),q&&(n.gameObject=q),n},remove:function(n,q,r){void 0===q&&(q=!0);void 0===r&&(r=!0);this.pipelines.delete(n);q&&this.classes.delete(n);r&&this.postPipelineClasses.delete(n)},set:function(n,q,r){if(!n.isPostFX)return this.isCurrent(n,r)||(this.flush(),this.current&&this.current.unbind(),this.current=n,n.bind(r)),n.updateProjectionMatrix(),n.onBind(q),n},preBatch:function(n){if(n.hasPostPipeline){this.flush();for(var q=n.postPipelines,r=q.length-1;0<=r;r--){var t=q[r];t.active&&t.preBatch(n)}}},
postBatch:function(n){if(n.hasPostPipeline){this.flush();for(var q=n.postPipelines,r=0;r<q.length;r++){var t=q[r];t.active&&t.postBatch(n)}}},preBatchCamera:function(n){if(n.hasPostPipeline){this.flush();for(var q=n.postPipelines,r=q.length-1;0<=r;r--){var t=q[r];t.active&&t.preBatch(n)}}},postBatchCamera:function(n){if(n.hasPostPipeline){this.flush();for(var q=n.postPipelines,r=0;r<q.length;r++){var t=q[r];t.active&&t.postBatch(n)}}},isCurrent:function(n,q){var r=this.renderer,t=this.current;t&&
!q&&(q=t.currentShader);return!(t!==n||q.program!==r.currentProgram)},copyFrame:function(n,q,r,t,w){this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(n,q,r,t,w);return this},copyToGame:function(n){this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(n);return this},drawFrame:function(n,q,r,t){this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(n,q,r,t);return this},blendFrames:function(n,q,r,t,w){this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(n,q,
r,t,w);return this},blendFramesAdditive:function(n,q,r,t,w){this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(n,q,r,t,w);return this},clearFrame:function(n,q){this.UTILITY_PIPELINE.clearFrame(n,q);return this},blitFrame:function(n,q,r,t,w,v){this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(n,q,r,t,w,v);return this},copyFrameRect:function(n,q,r,t,w,v,x,y){this.UTILITY_PIPELINE.copyFrameRect(n,q,r,t,w,v,x,y);return this},forceZero:function(){return this.current&&this.current.forceZero},
setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(n){return this.UTILITY_PIPELINE.bind(n)},rebind:function(n){void 0===n&&this.previous&&(n=this.previous);var q=this.renderer,r=q.gl;r.disable(r.DEPTH_TEST);r.disable(r.CULL_FACE);q.hasActiveStencilMask()?r.clear(r.DEPTH_BUFFER_BIT):(r.disable(r.STENCIL_TEST),r.clear(r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT));r.viewport(0,0,q.width,q.height);q.currentProgram=null;q.setBlendMode(0,!0);r=this.pipelines.entries;for(var t in r)r[t].glReset=
!0;n&&(this.current=n,n.rebind());q.resetTextures()},clear:function(){var n=this.renderer;this.flush();this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null;n.currentProgram=null;n.setBlendMode(0,!0)},destroy:function(){this.flush();this.classes.clear();this.postPipelineClasses.clear();this.pipelines.clear();this.previous=this.current=this.pipelines=this.postPipelineClasses=this.classes=this.game=this.renderer=null}});p.exports=a},function(p,u,a){u=a(0);
var h=a(2),f=a(866),c=a(867),b=a(107),d=a(58);a=new u({Extends:d,initialize:function(g){g.fragShader=h(g,"fragShader",f);g.vertShader=h(g,"vertShader",c);g.batchSize=h(g,"batchSize",1);g.vertices=h(g,"vertices",[-1,1,-1,-7,7,1]);g.attributes=h(g,"attributes",[{name:"inPosition",size:2,type:b.FLOAT}]);d.call(this,g)},boot:function(){d.prototype.boot.call(this);this.set1i("uMainSampler",0);this.set1i("uMaskSampler",1)},resize:function(g,e){d.prototype.resize.call(this,g,e);this.set2f("uResolution",
g,e)},beginMask:function(g,e,l){e=this.gl;if(g.bitmapMask&&e){var k=this.renderer;k.flush();k.pushFramebuffer(g.mainFramebuffer);e.disable(e.STENCIL_TEST);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);k.currentCameraMask.mask!==g&&(k.currentMask.mask=g,k.currentMask.camera=l)}},endMask:function(g,e){var l=this.gl,k=this.renderer,m=g.bitmapMask;m&&l&&(k.flush(),k.pushFramebuffer(g.maskFramebuffer),l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),k.setBlendMode(0,!0),m.renderWebGL(k,m,e),k.flush(),
k.popFramebuffer(),k.popFramebuffer(),(e=k.getCurrentStencilMask())?(l.enable(l.STENCIL_TEST),e.mask.applyStencil(k,e.camera,!0)):k.currentMask.mask=null,k.pipelines.set(this),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,g.maskTexture),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,g.mainTexture),this.set1i("uInvertMaskAlpha",g.invertAlpha),l.drawArrays(this.topology,0,3),k.resetTextures())}});p.exports=a},function(p,u,a){p.exports={AFTER_FLUSH:a(868),BEFORE_FLUSH:a(869),BIND:a(870),
BOOT:a(871),DESTROY:a(872),REBIND:a(873),RESIZE:a(874)}},function(p,u,a){u=a(0);var h=a(2),f=a(107);a=new u({initialize:function(c,b,d,g,e){this.pipeline=c;this.name=b;this.renderer=c.renderer;this.gl=this.renderer.gl;this.program=this.renderer.createProgram(d,g);this.vertexSize=this.vertexComponentCount=0;this.uniforms={};this.createAttributes(e);this.createUniforms()},createAttributes:function(c){for(var b=0,d=0,g=[],e=this.vertexComponentCount=0;e<c.length;e++){var l=c[e],k=l.name,m=h(l,"size",
1),n=h(l,"type",f.FLOAT),q=n.size;g.push({name:k,size:m,type:n.enum,normalized:l.normalized?!0:!1,offset:d,enabled:!1,location:-1});4===q?b+=m:b++;d+=m*q}this.vertexSize=d;this.vertexComponentCount=b;this.attributes=g},bind:function(c,b){void 0===c&&(c=!1);void 0===b&&(b=!1);b&&this.pipeline.flush();this.renderer.setProgram(this.program);c&&this.setAttribPointers();return this},rebind:function(){this.renderer.setProgram(this.program);this.setAttribPointers(!0);return this},setAttribPointers:function(c){void 0===
c&&(c=!1);for(var b=this.gl,d=this.vertexSize,g=this.attributes,e=this.program,l=0;l<g.length;l++){var k=g[l],m=k.size,n=k.type,q=k.offset,r=k.enabled,t=k.location,w=k.normalized?!0:!1;c?(r=b.getAttribLocation(e,k.name),0<=r?(b.enableVertexAttribArray(r),b.vertexAttribPointer(r,m,n,w,d,q),k.enabled=!0,k.location=r):-1!==r&&b.disableVertexAttribArray(r)):r?b.vertexAttribPointer(t,m,n,w,d,q):!r&&-1<t&&(b.disableVertexAttribArray(t),k.location=-1)}return this},createUniforms:function(){var c=this.gl,
b=this.program,d=this.uniforms,g,e,l=c.getProgramParameter(b,c.ACTIVE_UNIFORMS);for(g=0;g<l;g++)if(e=c.getActiveUniform(b,g)){e=e.name;var k=c.getUniformLocation(b,e);null!==k&&(d[e]={name:e,location:k,value1:null,value2:null,value3:null,value4:null});k=e.indexOf("[");0<k&&(e=e.substr(0,k),d.hasOwnProperty(e)||(k=c.getUniformLocation(b,e),null!==k&&(d[e]={name:e,location:k,value1:null,value2:null,value3:null,value4:null})))}return this},hasUniform:function(c){return this.uniforms.hasOwnProperty(c)},
resetUniform:function(c){if(c=this.uniforms[c])c.value1=null,c.value2=null,c.value3=null,c.value4=null;return this},setUniform1:function(c,b,d,g){b=this.uniforms[b];if(!b)return this;if(g||b.value1!==d)b.value1=d,this.renderer.setProgram(this.program),c.call(this.gl,b.location,d),this.pipeline.currentShader=this;return this},setUniform2:function(c,b,d,g,e){b=this.uniforms[b];if(!b)return this;if(e||b.value1!==d||b.value2!==g)b.value1=d,b.value2=g,this.renderer.setProgram(this.program),c.call(this.gl,
b.location,d,g),this.pipeline.currentShader=this;return this},setUniform3:function(c,b,d,g,e,l){b=this.uniforms[b];if(!b)return this;if(l||b.value1!==d||b.value2!==g||b.value3!==e)b.value1=d,b.value2=g,b.value3=e,this.renderer.setProgram(this.program),c.call(this.gl,b.location,d,g,e),this.pipeline.currentShader=this;return this},setUniform4:function(c,b,d,g,e,l,k){b=this.uniforms[b];if(!b)return this;if(k||b.value1!==d||b.value2!==g||b.value3!==e||b.value4!==l)b.value1=d,b.value2=g,b.value3=e,b.value4=
l,this.renderer.setProgram(this.program),c.call(this.gl,b.location,d,g,e,l),this.pipeline.currentShader=this;return this},set1f:function(c,b){return this.setUniform1(this.gl.uniform1f,c,b)},set2f:function(c,b,d){return this.setUniform2(this.gl.uniform2f,c,b,d)},set3f:function(c,b,d,g){return this.setUniform3(this.gl.uniform3f,c,b,d,g)},set4f:function(c,b,d,g,e){return this.setUniform4(this.gl.uniform4f,c,b,d,g,e)},set1fv:function(c,b){return this.setUniform1(this.gl.uniform1fv,c,b,!0)},set2fv:function(c,
b){return this.setUniform1(this.gl.uniform2fv,c,b,!0)},set3fv:function(c,b){return this.setUniform1(this.gl.uniform3fv,c,b,!0)},set4fv:function(c,b){return this.setUniform1(this.gl.uniform4fv,c,b,!0)},set1iv:function(c,b){return this.setUniform1(this.gl.uniform1iv,c,b,!0)},set2iv:function(c,b){return this.setUniform1(this.gl.uniform2iv,c,b,!0)},set3iv:function(c,b){return this.setUniform1(this.gl.uniform3iv,c,b,!0)},set4iv:function(c,b){return this.setUniform1(this.gl.uniform4iv,c,b,!0)},set1i:function(c,
b){return this.setUniform1(this.gl.uniform1i,c,b)},set2i:function(c,b,d){return this.setUniform2(this.gl.uniform2i,c,b,d)},set3i:function(c,b,d,g){return this.setUniform3(this.gl.uniform3i,c,b,d,g)},set4i:function(c,b,d,g,e){return this.setUniform4(this.gl.uniform4i,c,b,d,g,e)},setMatrix2fv:function(c,b,d){return this.setUniform2(this.gl.uniformMatrix2fv,c,b,d,!0)},setMatrix3fv:function(c,b,d){return this.setUniform2(this.gl.uniformMatrix3fv,c,b,d,!0)},setMatrix4fv:function(c,b,d){return this.setUniform2(this.gl.uniformMatrix4fv,
c,b,d,!0)},destroy:function(){this.gl.deleteProgram(this.program);this.uniforms=this.attributes=this.program=this.gl=this.renderer=this.pipeline=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(59),f=a(2),c=a(875),b=a(876),d=a(25),g=a(107),e=a(58);a=new u({Extends:e,initialize:function(l){l.fragShader=f(l,"fragShader",c);l.vertShader=f(l,"vertShader",b);l.attributes=f(l,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:g.UNSIGNED_BYTE,normalized:!0}]);e.call(this,l);this.calcMatrix=
new d;this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}];this.strokeTint={TL:0,TR:0,BL:0,BR:0};this.fillTint={TL:0,TR:0,BL:0,BR:0};this.currentFrame={u0:0,v0:0,u1:1,v1:1};this.firstQuad=[0,0,0,0,0];this.prevQuad=[0,0,0,0,0];this.polygonCache=[]},batchFillRect:function(l,k,m,n,q,r){this.renderer.pipelines.set(this);var t=this.calcMatrix;r&&r.multiply(q,t);r=l+m;var w=k+n;n=t.getX(l,k);m=t.getY(l,k);q=t.getX(l,w);l=t.getY(l,w);var v=t.getX(r,w);w=t.getY(r,w);
var x=t.getX(r,k);k=t.getY(r,k);t=this.fillTint;this.batchQuad(n,m,q,l,v,w,x,k,t.TL,t.TR,t.BL,t.BR)},batchFillTriangle:function(l,k,m,n,q,r,t,w){this.renderer.pipelines.set(this);var v=this.calcMatrix;w&&w.multiply(t,v);t=v.getX(l,k);l=v.getY(l,k);k=v.getX(m,n);m=v.getY(m,n);n=v.getX(q,r);q=v.getY(q,r);r=this.fillTint;this.batchTri(t,l,k,m,n,q,r.TL,r.TR,r.BL)},batchStrokeTriangle:function(l,k,m,n,q,r,t,w,v){var x=this.tempTriangle;x[0].x=l;x[0].y=k;x[0].width=t;x[1].x=m;x[1].y=n;x[1].width=t;x[2].x=
q;x[2].y=r;x[2].width=t;x[3].x=l;x[3].y=k;x[3].width=t;this.batchStrokePath(x,t,!1,w,v)},batchFillPath:function(l,k,m){this.renderer.pipelines.set(this);var n=this.calcMatrix;m&&m.multiply(k,n);k=l.length;m=this.polygonCache;for(var q,r=this.fillTint.TL,t=this.fillTint.TR,w=this.fillTint.BL,v=0;v<k;++v)q=l[v],m.push(q.x,q.y);l=h(m);k=l.length;for(q=0;q<k;q+=3){var x=2*l[q+0];v=2*l[q+1];var y=2*l[q+2],A=m[x+0],B=m[x+1];x=m[v+0];var z=m[v+1];v=m[y+0];var C=m[y+1];y=n.getX(A,B);A=n.getY(A,B);B=n.getX(x,
z);x=n.getY(x,z);z=n.getX(v,C);v=n.getY(v,C);this.batchTri(y,A,B,x,z,v,r,t,w)}m.length=0},batchStrokePath:function(l,k,m,n,q){this.renderer.pipelines.set(this);this.prevQuad[4]=0;this.firstQuad[4]=0;for(var r=l.length-1,t=0;t<r;t++){var w=l[t],v=l[t+1];this.batchLine(w.x,w.y,v.x,v.y,w.width/2,v.width/2,k,t,!m&&t===r-1,n,q)}},batchLine:function(l,k,m,n,q,r,t,w,v,x,y){this.renderer.pipelines.set(this);var A=this.calcMatrix;y&&y.multiply(x,A);x=m-l;y=n-k;var B=Math.sqrt(x*x+y*y);x=q*(n-k)/B;y=q*(l-m)/
B;var z=r*(n-k)/B,C=r*(l-m)/B;B=m-z;var E=n-C;r=l-x;q=k-y;m+=z;z=n+C;x=l+x;C=k+y;k=A.getX(B,E);l=A.getY(B,E);n=A.getX(r,q);r=A.getY(r,q);q=A.getX(m,z);m=A.getY(m,z);y=A.getX(x,C);A=A.getY(x,C);z=this.strokeTint;x=z.TL;B=z.TR;E=z.BL;z=z.BR;this.batchQuad(y,A,n,r,k,l,q,m,x,B,E,z);2>=t||(t=this.prevQuad,C=this.firstQuad,0<w&&t[4]?this.batchQuad(y,A,n,r,t[0],t[1],t[2],t[3],x,B,E,z):(C[0]=y,C[1]=A,C[2]=n,C[3]=r,C[4]=1),v&&C[4]?this.batchQuad(k,l,q,m,C[0],C[1],C[2],C[3],x,B,E,z):(t[0]=k,t[1]=l,t[2]=q,t[3]=
m,t[4]=1))},batchVert:function(l,k,m){var n=this.vertexViewF32,q=this.vertexViewU32,r=this.vertexCount*this.currentShader.vertexComponentCount-1;n[++r]=l;n[++r]=k;q[++r]=m;this.vertexCount++},batchQuad:function(l,k,m,n,q,r,t,w,v,x,y,A){var B=!1;this.shouldFlush(6)&&(this.flush(),B=!0);this.batchVert(l,k,v);this.batchVert(m,n,y);this.batchVert(q,r,A);this.batchVert(l,k,v);this.batchVert(q,r,A);this.batchVert(t,w,x);return B},batchTri:function(l,k,m,n,q,r,t,w,v){var x=!1;this.shouldFlush(3)&&(this.flush(),
x=!0);this.batchVert(l,k,t);this.batchVert(m,n,w);this.batchVert(q,r,v);return x},destroy:function(){e.prototype.destroy.call(this);this.polygonCache=null;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(2),f=a(877),c=a(108),b=a(3),d=a(58),g=10,e=new b;a=new u({Extends:c,initialize:function(l){g=l.game.renderer.config.maxLights;for(var k=h(l,"fragShader",f),m=[],n=1;n<=g;n++)m.push({name:"lights"+n,fragShader:k.replace("%LIGHT_COUNT%",n.toString())});l.shaders=m;c.call(this,l);this.inverseRotationMatrix=
new Float32Array([1,0,0,0,1,0,0,0,1]);this.lightsActive=!0},boot:function(){d.prototype.boot.call(this);var l=this.gl,k=l.createTexture();l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,k);l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array([127,127,255,255]));this.defaultNormalMap={glTexture:k};for(l=0;l<this.shaders.length;l++)this["lightShader"+(l+1)]=this.shaders[l]},onRender:function(l,k){var m=l.sys.lights;this.lightsActive=!1;if(m&&m.active){l=m.getLights(k);
var n=l.length;if(0!==n){this.lightsActive=!0;this.setShader(this["lightShader"+n],!0);var q=this.renderer.height,r=k.matrix;this.set1i("uMainSampler",0);this.set1i("uNormSampler",1);this.set2f("uResolution",this.width/2,this.height/2);this.set4f("uCamera",k.x,k.y,k.rotation,k.zoom);this.set3f("uAmbientLightColor",m.ambientColor.r,m.ambientColor.g,m.ambientColor.b);for(m=0;m<n;m++){var t=l[m].light,w=t.color,v="uLights["+m+"].";r.transformPoint(t.x,t.y,e);this.set2f(v+"position",e.x-k.scrollX*t.scrollFactorX*
k.zoom,q-(e.y-k.scrollY*t.scrollFactorY*k.zoom));this.set3f(v+"color",w.r,w.g,w.b);this.set1f(v+"intensity",t.intensity);this.set1f(v+"radius",t.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(l){if(l!==this.currentNormalMapRotation||0===this.vertexCount){0<this.vertexCount&&this.flush();var k=this.inverseRotationMatrix;if(l){var m=-l,n=Math.cos(m);m=Math.sin(m);k[1]=m;k[3]=-m;k[0]=k[4]=n}else k[0]=k[4]=1,k[1]=k[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,k);this.currentNormalMapRotation=
l}},setTexture2D:function(l,k){var m=this.renderer;void 0===l&&(l=m.tempTextures[0]);var n=this.getNormalMap(k);m.isNewNormalMap(l,n)&&(this.flush(),m.setTextureZero(l),m.setNormalMap(n));this.setNormalMapRotation(k?k.rotation:0);return this.currentUnit=0},setGameObject:function(l,k){void 0===k&&(k=l.frame);var m=this.renderer;k=k.glTexture;var n=this.getNormalMap(l);m.isNewNormalMap()&&(this.flush(),m.setTextureZero(k),m.setNormalMap(n));this.setNormalMapRotation(l.rotation);return this.currentUnit=
0},getNormalMap:function(l){var k;l?l.displayTexture?k=l.displayTexture.dataSource[l.displayFrame.sourceIndex]:l.texture?k=l.texture.dataSource[l.frame.sourceIndex]:l.tileset&&(k=Array.isArray(l.tileset)?l.tileset[0].image.dataSource[0]:l.tileset.image.dataSource[0]):k=this.defaultNormalMap;k||(k=this.defaultNormalMap);return k.glTexture},batchSprite:function(l,k,m){this.lightsActive&&c.prototype.batchSprite.call(this,l,k,m)},batchTexture:function(l,k,m,n,q,r,t,w,v,x,y,A,B,z,C,E,G,H,I,K,O,R,F,J,N,
Q,T,S,W,X,ba,fa){this.lightsActive&&c.prototype.batchTexture.call(this,l,k,m,n,q,r,t,w,v,x,y,A,B,z,C,E,G,H,I,K,O,R,F,J,N,Q,T,S,W,X,ba,fa)},batchTextureFrame:function(l,k,m,n,q,r,t){this.lightsActive&&c.prototype.batchTextureFrame.call(this,l,k,m,n,q,r,t)}});a.LIGHT_COUNT=g;p.exports=a},function(p,u,a){u=a(0);var h=a(2),f=a(880),c=a(881),b=a(58);a=new u({Extends:b,initialize:function(d){d.vertShader=h(d,"vertShader",c);d.fragShader=h(d,"fragShader",f);d.attributes=h(d,"attributes",[{name:"inPosition",
size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]);b.call(this,d)},onRender:function(d,g){this.set2f("uResolution",this.width,this.height);this.set1f("uCameraZoom",g.zoom)},batchPointLight:function(d,g,e,l,k,m,n,q,r,t,w,v){var x=d.color,y=d.intensity,A=d.radius,B=d.attenuation,z=x.r*y,C=x.g*y;x=x.b*y;d=g.alpha*d.alpha;this.shouldFlush(6)&&this.flush();this.batchLightVert(e,l,w,v,A,B,z,C,x,d);this.batchLightVert(k,m,w,v,A,B,z,C,
x,d);this.batchLightVert(n,q,w,v,A,B,z,C,x,d);this.batchLightVert(e,l,w,v,A,B,z,C,x,d);this.batchLightVert(n,q,w,v,A,B,z,C,x,d);this.batchLightVert(r,t,w,v,A,B,z,C,x,d)},batchLightVert:function(d,g,e,l,k,m,n,q,r,t){var w=this.vertexViewF32,v=this.vertexCount*this.currentShader.vertexComponentCount-1;w[++v]=d;w[++v]=g;w[++v]=e;w[++v]=l;w[++v]=k;w[++v]=m;w[++v]=n;w[++v]=q;w[++v]=r;w[++v]=t;this.vertexCount++}});p.exports=a},function(p,u,a){u=a(0);var h=a(2),f=a(108);a=new u({Extends:f,initialize:function(c){c.topology=
5;c.batchSize=h(c,"batchSize",256);f.call(this,c)}});p.exports=a},function(p,u,a){u=a(0);var h=a(2),f=a(108),c=a(882),b=a(883),d=a(58);a=new u({Extends:f,initialize:function(g){g.fragShader=h(g,"fragShader",c);g.vertShader=h(g,"vertShader",b);g.forceZero=!0;f.call(this,g)},boot:function(){d.prototype.boot.call(this);this.set1i("uMainSampler",0)}});p.exports=a},function(p,u,a){var h=a(884),f=a(35);u=a(0);var c=a(198),b=a(885),d=a(886),g=a(2),e=a(887),l=a(382),k=a(58);a=new u({Extends:k,initialize:function(m){m.renderTarget=
g(m,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]);m.vertShader=g(m,"vertShader",l);m.shaders=g(m,"shaders",[{name:"Copy",fragShader:d},{name:"AddBlend",fragShader:h},{name:"LinearBlend",fragShader:e},{name:"ColorMatrix",fragShader:b}]);m.attributes=g(m,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]);m.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0];m.batchSize=1;k.call(this,m);this.colorMatrix=new c},boot:function(){k.prototype.boot.call(this);
var m=this.shaders,n=this.renderTargets;this.copyShader=m[0];this.addShader=m[1];this.linearShader=m[2];this.colorMatrixShader=m[3];this.fullFrame1=n[0];this.fullFrame2=n[1];this.halfFrame1=n[2];this.halfFrame2=n[3]},copyFrame:function(m,n,q,r,t){void 0===q&&(q=1);void 0===r&&(r=!0);void 0===t&&(t=!0);var w=this.gl;this.setShader(this.copyShader);this.set1i("uMainSampler",0);this.set1f("uBrightness",q);w.activeTexture(w.TEXTURE0);w.bindTexture(w.TEXTURE_2D,m.texture);n?(w.viewport(0,0,n.width,n.height),
w.bindFramebuffer(w.FRAMEBUFFER,n.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,n.texture,0)):w.viewport(0,0,m.width,m.height);r&&(t?w.clearColor(0,0,0,0):w.clearColor(0,0,0,1),w.clear(w.COLOR_BUFFER_BIT));w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW);w.drawArrays(w.TRIANGLES,0,6);w.bindFramebuffer(w.FRAMEBUFFER,null);w.bindTexture(w.TEXTURE_2D,null)},blitFrame:function(m,n,q,r,t,w){void 0===q&&(q=1);void 0===r&&(r=!0);void 0===t&&(t=!0);void 0===
w&&(w=!1);var v=this.gl;this.setShader(this.copyShader);this.set1i("uMainSampler",0);this.set1f("uBrightness",q);v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,m.texture);m.height>n.height?(v.viewport(0,0,m.width,m.height),this.setTargetUVs(m,n)):v.viewport(0,n.height-m.height,m.width,m.height);v.bindFramebuffer(v.FRAMEBUFFER,n.framebuffer);v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,n.texture,0);r&&(t?v.clearColor(0,0,0,0):v.clearColor(0,0,0,1),v.clear(v.COLOR_BUFFER_BIT));
if(w){var x=this.renderer.currentBlendMode;this.renderer.setBlendMode(f.ERASE)}v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW);v.drawArrays(v.TRIANGLES,0,6);w&&this.renderer.setBlendMode(x);v.bindFramebuffer(v.FRAMEBUFFER,null);v.bindTexture(v.TEXTURE_2D,null);this.resetUVs()},copyFrameRect:function(m,n,q,r,t,w,v,x){void 0===v&&(v=!0);void 0===x&&(x=!0);var y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,m.framebuffer);y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,m.texture,
0);v&&(x?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT));y.activeTexture(y.TEXTURE0);y.bindTexture(y.TEXTURE_2D,n.texture);y.copyTexSubImage2D(y.TEXTURE_2D,0,0,0,q,r,t,w);y.bindFramebuffer(y.FRAMEBUFFER,null);y.bindTexture(y.TEXTURE_2D,null)},copyToGame:function(m){var n=this.gl;this.setShader(this.copyShader);this.set1i("uMainSampler",0);this.set1f("uBrightness",1);this.renderer.popFramebuffer();n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,m.texture);n.bufferData(n.ARRAY_BUFFER,
this.vertexData,n.STATIC_DRAW);n.drawArrays(n.TRIANGLES,0,6);this.renderer.resetTextures()},drawFrame:function(m,n,q,r){void 0===q&&(q=!0);void 0===r&&(r=this.colorMatrix);var t=this.gl;this.setShader(this.colorMatrixShader);this.set1i("uMainSampler",0);this.set1fv("uColorMatrix",r.getData());this.set1f("uAlpha",r.alpha);t.activeTexture(t.TEXTURE0);t.bindTexture(t.TEXTURE_2D,m.texture);n?(t.viewport(0,0,n.width,n.height),t.bindFramebuffer(t.FRAMEBUFFER,n.framebuffer),t.framebufferTexture2D(t.FRAMEBUFFER,
t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n.texture,0)):t.viewport(0,0,m.width,m.height);q?t.clearColor(0,0,0,0):t.clearColor(0,0,0,1);t.clear(t.COLOR_BUFFER_BIT);t.bufferData(t.ARRAY_BUFFER,this.vertexData,t.STATIC_DRAW);t.drawArrays(t.TRIANGLES,0,6);t.bindFramebuffer(t.FRAMEBUFFER,null);t.bindTexture(t.TEXTURE_2D,null)},blendFrames:function(m,n,q,r,t,w){void 0===r&&(r=1);void 0===t&&(t=!0);void 0===w&&(w=this.linearShader);var v=this.gl;this.setShader(w);this.set1i("uMainSampler1",0);this.set1i("uMainSampler2",
1);this.set1f("uStrength",r);v.activeTexture(v.TEXTURE0);v.bindTexture(v.TEXTURE_2D,m.texture);v.activeTexture(v.TEXTURE1);v.bindTexture(v.TEXTURE_2D,n.texture);q?(v.bindFramebuffer(v.FRAMEBUFFER,q.framebuffer),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,q.texture,0),v.viewport(0,0,q.width,q.height)):v.viewport(0,0,m.width,m.height);t?v.clearColor(0,0,0,0):v.clearColor(0,0,0,1);v.clear(v.COLOR_BUFFER_BIT);v.bufferData(v.ARRAY_BUFFER,this.vertexData,v.STATIC_DRAW);v.drawArrays(v.TRIANGLES,
0,6);v.bindFramebuffer(v.FRAMEBUFFER,null);v.bindTexture(v.TEXTURE_2D,null)},blendFramesAdditive:function(m,n,q,r,t){this.blendFrames(m,n,q,r,t,this.addShader)},clearFrame:function(m,n){void 0===n&&(n=!0);var q=this.gl;q.viewport(0,0,m.width,m.height);q.bindFramebuffer(q.FRAMEBUFFER,m.framebuffer);n?q.clearColor(0,0,0,0):q.clearColor(0,0,0,1);q.clear(q.COLOR_BUFFER_BIT);q.bindFramebuffer(q.FRAMEBUFFER,this.renderer.currentFramebuffer)},setUVs:function(m,n,q,r,t,w,v,x){var y=this.vertexViewF32;y[2]=
m;y[3]=n;y[6]=q;y[7]=r;y[10]=t;y[11]=w;y[14]=m;y[15]=n;y[18]=t;y[19]=w;y[22]=v;y[23]=x},setTargetUVs:function(m,n){m=n.height/m.height;m=.5<m?.5-(m-.5):.5+(.5-m);this.setUVs(0,m,0,1+m,1,1+m,1,m)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});p.exports=a},function(p,u){p.exports="#define SHADER_NAME PHASER_QUAD_VS\n\nprecision mediump float;\n\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\n\nvarying vec2 outFragCoord;\nvarying vec2 outTexCoord;\n\nvoid main ()\n{\n    outFragCoord = inPosition.xy * 0.5 + 0.5;\n    outTexCoord = inTexCoord;\n\n    gl_Position = vec4(inPosition, 0, 1);\n}\n"},
function(p,u,a){var h=a(31),f=a(38),c=a(2);p.exports=function(b,d){var g=b.getContext("experimental-webgl"),e=c(d,"callback");b=c(d,"type","image/png");var l=c(d,"encoder",.92),k=c(d,"x",0),m=c(d,"y",0),n=c(d,"getPixel",!1),q=c(d,"isFramebuffer",!1),r=q?c(d,"bufferWidth",1):g.drawingBufferWidth,t=q?c(d,"bufferHeight",1):g.drawingBufferHeight;if(n)b=new Uint8Array(4),g.readPixels(k,q?m:t-m,1,1,g.RGBA,g.UNSIGNED_BYTE,b),e.call(null,new f(b[0],b[1],b[2],b[3]/255));else{q=c(d,"width",r);d=c(d,"height",
t);n=new Uint8Array(q*d*4);g.readPixels(k,t-m-d,q,d,g.RGBA,g.UNSIGNED_BYTE,n);var w=h.createWebGL(this,q,d);g=w.getContext("2d");k=g.getImageData(0,0,q,d);m=k.data;for(t=0;t<d;t++)for(r=0;r<q;r++){var v=4*((d-t-1)*q+r),x=4*(t*q+r);m[x+0]=n[v+0];m[x+1]=n[v+1];m[x+2]=n[v+2];m[x+3]=n[v+3]}g.putImageData(k,0,0);var y=new Image;y.onerror=function(){e.call(null);h.remove(w)};y.onload=function(){e.call(null,y);h.remove(w)};y.src=w.toDataURL(b,l)}}},function(p,u,a){var h=a(33);p.exports=function(f){var c=
f.config;if(!c.hideBanner){var b="WebGL";c.renderType===h.CANVAS?b="Canvas":c.renderType===h.HEADLESS&&(b="Headless");var d=c.audio,g=f.device.audio;d=g.webAudio&&!d.disableWebAudio?"Web Audio":d.noAudio||!g.webAudio&&!g.audioData?"No Audio":"HTML5 Audio";if(f.device.browser.ie)window.console&&console.log("Phaser v"+h.VERSION+" / https://phaser.io");else{var e="",l=[e];if(Array.isArray(c.bannerBackgroundColor)){var k;c.bannerBackgroundColor.forEach(function(m){e=e.concat("%c ");l.push("background: "+
m);k=m});l[l.length-1]="color: "+c.bannerTextColor+"; background: "+k}else e=e.concat("%c "),l.push("color: "+c.bannerTextColor+"; background: "+c.bannerBackgroundColor);l.push("background: transparent");c.gameTitle&&(e=e.concat(c.gameTitle),c.gameVersion&&(e=e.concat(" v"+c.gameVersion)),c.hidePhaser||(e=e.concat(" / ")));c.hidePhaser||(e=e.concat("Phaser v"+h.VERSION+" ("+b+" | "+d+")"));e=e.concat(" %c "+c.gameURL);l[0]=e;console.log.apply(console,l)}}}},function(p,u,a){u=a(0);var h=a(6),f=a(1),
c=a(386);a=new u({initialize:function(b,d){this.game=b;this.raf=new c;this.running=this.started=!1;this.minFps=h(d,"min",5);this.targetFps=h(d,"target",60);this._min=1E3/this.minFps;this._target=1E3/this.targetFps;this.actualFps=this.targetFps;this.framesThisSecond=this.nextFpsUpdate=0;this.callback=f;this.forceSetTimeOut=h(d,"forceSetTimeOut",!1);this.frame=this.lastTime=this.startTime=this.time=0;this.inFocus=!0;this.deltaIndex=this.delta=this._coolDown=this._pauseTime=0;this.deltaHistory=[];this.deltaSmoothingMax=
h(d,"deltaHistory",10);this.panicMax=h(d,"panicMax",120);this.now=this.rawDelta=0;this.smoothStep=h(d,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0;this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta();this.startTime+=this.time-this._pauseTime},resetDelta:function(){var b=window.performance.now();this.lastTime=this.time=b;this.nextFpsUpdate=b+1E3;for(b=this.framesThisSecond=0;b<this.deltaSmoothingMax;b++)this.deltaHistory[b]=
Math.min(this._target,this.deltaHistory[b]);this.deltaIndex=this.delta=0;this._coolDown=this.panicMax},start:function(b){if(this.started)return this;this.running=this.started=!0;for(var d=0;d<this.deltaSmoothingMax;d++)this.deltaHistory[d]=this._target;this.resetDelta();this.startTime=window.performance.now();this.callback=b;this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var b=window.performance.now();this.now=b;var d=b-this.lastTime;0>d&&(d=0);this.rawDelta=
d;var g=this.deltaIndex,e=this.deltaHistory,l=this.deltaSmoothingMax,k=d;if(this.smoothStep){if(0<this._coolDown||!this.inFocus)this._coolDown--,k=Math.min(k,this._target);k>this._min&&(k=e[g],k=Math.min(k,this._min));e[g]=k;this.deltaIndex++;this.deltaIndex>l&&(this.deltaIndex=0);for(g=d=0;g<l;g++)d+=e[g];d/=l}this.delta=d;this.time+=this.rawDelta;b>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=b+1E3,this.framesThisSecond=0);this.framesThisSecond++;
this.callback(b,d,d/this._target);this.lastTime=b;this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(b){this.running||(b&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1E3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){this.started=
this.running=!1;this.raf.stop();return this},destroy:function(){this.stop();this.callback=f;this.game=this.raf=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(1);a=new u({initialize:function(){this.isRunning=!1;this.callback=h;this.tick=0;this.isSetTimeOut=!1;this.timeOutID=null;this.target=this.lastTime=0;var f=this;this.step=function b(){var d=window.performance.now();f.lastTime=f.tick;f.tick=d;f.callback(d);f.timeOutID=window.requestAnimationFrame(b)};this.stepTimeout=function d(){var g=Date.now(),
e=Math.min(Math.max(2*f.target+f.tick-g,0),f.target);f.lastTime=f.tick;f.tick=g;f.callback(g);f.timeOutID=window.setTimeout(d,e)}},start:function(f,c,b){this.isRunning||(this.callback=f,this.isSetTimeOut=c,this.target=b,this.isRunning=!0,this.timeOutID=c?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1;this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop();this.callback=
h}});p.exports=a},function(p,u,a){var h=a(22);p.exports=function(f){var c,b=f.events;void 0!==document.hidden?c="visibilitychange":["webkit","moz","ms"].forEach(function(g){void 0!==document[g+"Hidden"]&&(document.hidden=function(){return document[g+"Hidden"]},c=g+"visibilitychange")});var d=function(g){document.hidden||"pause"===g.type?b.emit(h.HIDDEN):b.emit(h.VISIBLE)};c&&document.addEventListener(c,d,!1);window.onblur=function(){b.emit(h.BLUR)};window.onfocus=function(){b.emit(h.FOCUS)};window.focus&&
f.config.autoFocus&&window.focus()}},function(p,u,a){var h=a(389),f=a(31),c=a(6);p.exports=function(b){var d=c(b,"data",[]),g=c(b,"canvas",null),e=c(b,"palette",h),l=c(b,"pixelWidth",1),k=c(b,"pixelHeight",l),m=c(b,"resizeCanvas",!0),n=c(b,"clearCanvas",!0),q=c(b,"preRender",null);b=c(b,"postRender",null);var r=Math.floor(Math.abs(d[0].length*l)),t=Math.floor(Math.abs(d.length*k));g||(g=f.create2D(this,r,t),n=m=!1);m&&(g.width=r,g.height=t);m=g.getContext("2d");n&&m.clearRect(0,0,r,t);q&&q(g,m);for(n=
0;n<d.length;n++)for(q=d[n],r=0;r<q.length;r++)t=q[r],"."!==t&&" "!==t&&(m.fillStyle=e[t],m.fillRect(r*l,n*k,l,k));b&&b(g,m);return g}},function(p,u){p.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(p,u,a){u=a(0);var h=a(358),f=a(94),c=a(3),b=new u({Extends:f,initialize:function(d,g,e,l){f.call(this,"CubicBezierCurve");Array.isArray(d)&&(l=
new c(d[6],d[7]),e=new c(d[4],d[5]),g=new c(d[2],d[3]),d=new c(d[0],d[1]));this.p0=d;this.p1=g;this.p2=e;this.p3=l},getStartPoint:function(d){void 0===d&&(d=new c);return d.copy(this.p0)},getResolution:function(d){return d},getPoint:function(d,g){void 0===g&&(g=new c);var e=this.p0,l=this.p1,k=this.p2,m=this.p3;return g.set(h(d,e.x,l.x,k.x,m.x),h(d,e.y,l.y,k.y,m.y))},draw:function(d,g){void 0===g&&(g=32);g=this.getPoints(g);d.beginPath();d.moveTo(this.p0.x,this.p0.y);for(var e=1;e<g.length;e++)d.lineTo(g[e].x,
g[e].y);d.strokePath();return d},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});b.fromJSON=function(d){var g=d.points;d=new c(g[0],g[1]);var e=new c(g[2],g[3]),l=new c(g[4],g[5]);g=new c(g[6],g[7]);return new b(d,e,l,g)};p.exports=b},function(p,u,a){u=a(0);var h=a(94),f=a(36),c=a(6),b=a(196),d=a(3),g=new u({Extends:h,initialize:function(e,l,k,m,n,q,r,t){"object"===typeof e?(t=e,e=c(t,"x",0),l=c(t,"y",0),k=c(t,"xRadius",
0),m=c(t,"yRadius",k),n=c(t,"startAngle",0),q=c(t,"endAngle",360),r=c(t,"clockwise",!1),t=c(t,"rotation",0)):(void 0===m&&(m=k),void 0===n&&(n=0),void 0===q&&(q=360),void 0===r&&(r=!1),void 0===t&&(t=0));h.call(this,"EllipseCurve");this.p0=new d(e,l);this._xRadius=k;this._yRadius=m;this._startAngle=f(n);this._endAngle=f(q);this._clockwise=r;this._rotation=f(t)},getStartPoint:function(e){void 0===e&&(e=new d);return this.getPoint(0,e)},getResolution:function(e){return 2*e},getPoint:function(e,l){void 0===
l&&(l=new d);for(var k=2*Math.PI,m=this._endAngle-this._startAngle,n=Math.abs(m)<Number.EPSILON;0>m;)m+=k;for(;m>k;)m-=k;m<Number.EPSILON&&(m=n?0:k);this._clockwise&&!n&&(m=m===k?-k:m-k);k=this._startAngle+e*m;e=this.p0.x+this._xRadius*Math.cos(k);var q=this.p0.y+this._yRadius*Math.sin(k);0!==this._rotation&&(k=Math.cos(this._rotation),m=Math.sin(this._rotation),n=e-this.p0.x,q-=this.p0.y,e=n*k-q*m+this.p0.x,q=n*m+q*k+this.p0.y);return l.set(e,q)},setXRadius:function(e){this.xRadius=e;return this},
setYRadius:function(e){this.yRadius=e;return this},setWidth:function(e){this.xRadius=e/2;return this},setHeight:function(e){this.yRadius=e/2;return this},setStartAngle:function(e){this.startAngle=e;return this},setEndAngle:function(e){this.endAngle=e;return this},setClockwise:function(e){this.clockwise=e;return this},setRotation:function(e){this.rotation=e;return this},x:{get:function(){return this.p0.x},set:function(e){this.p0.x=e}},y:{get:function(){return this.p0.y},set:function(e){this.p0.y=e}},
xRadius:{get:function(){return this._xRadius},set:function(e){this._xRadius=e}},yRadius:{get:function(){return this._yRadius},set:function(e){this._yRadius=e}},startAngle:{get:function(){return b(this._startAngle)},set:function(e){this._startAngle=f(e)}},endAngle:{get:function(){return b(this._endAngle)},set:function(e){this._endAngle=f(e)}},clockwise:{get:function(){return this._clockwise},set:function(e){this._clockwise=e}},angle:{get:function(){return b(this._rotation)},set:function(e){this._rotation=
f(e)}},rotation:{get:function(){return this._rotation},set:function(e){this._rotation=e}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:b(this._startAngle),endAngle:b(this._endAngle),clockwise:this._clockwise,rotation:b(this._rotation)}}});g.fromJSON=function(e){return new g(e)};p.exports=g},function(p,u,a){u=a(0);var h=a(94),f=a(199),c=a(10),b=a(3),d=new u({Extends:h,initialize:function(g,e){h.call(this,"LineCurve");Array.isArray(g)&&
(e=new b(g[2],g[3]),g=new b(g[0],g[1]));this.p0=g;this.p1=e;this.arcLengthDivisions=1},getBounds:function(g){void 0===g&&(g=new c);return f([this.p0,this.p1],g)},getStartPoint:function(g){void 0===g&&(g=new b);return g.copy(this.p0)},getResolution:function(g){void 0===g&&(g=1);return g},getPoint:function(g,e){void 0===e&&(e=new b);if(1===g)return e.copy(this.p1);e.copy(this.p1).subtract(this.p0).scale(g).add(this.p0);return e},getPointAt:function(g,e){return this.getPoint(g,e)},getTangent:function(g,
e){void 0===e&&(e=new b);e.copy(this.p1).subtract(this.p0).normalize();return e},getUtoTmapping:function(g,e,l){e?(g=this.getLengths(l),g=g[g.length-1],e=Math.min(e,g)/g):e=g;return e},draw:function(g){g.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y);return g},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});d.fromJSON=function(g){var e=g.points;g=new b(e[0],e[1]);e=new b(e[2],e[3]);return new d(g,e)};p.exports=d},function(p,u,a){u=a(0);var h=a(3);
a=new u({initialize:function(f,c){this.active=!1;this.p0=new h(f,c)},getPoint:function(f,c){void 0===c&&(c=new h);return c.copy(this.p0)},getPointAt:function(f,c){return this.getPoint(f,c)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});p.exports=a},function(p,u,a){u=a(0);var h=a(94),f=a(359),c=a(3),b=new u({Extends:h,initialize:function(d,g,e){h.call(this,"QuadraticBezier");Array.isArray(d)&&(e=new c(d[4],
d[5]),g=new c(d[2],d[3]),d=new c(d[0],d[1]));this.p0=d;this.p1=g;this.p2=e},getStartPoint:function(d){void 0===d&&(d=new c);return d.copy(this.p0)},getResolution:function(d){return d},getPoint:function(d,g){void 0===g&&(g=new c);var e=this.p0,l=this.p1,k=this.p2;return g.set(f(d,e.x,l.x,k.x),f(d,e.y,l.y,k.y))},draw:function(d,g){void 0===g&&(g=32);g=this.getPoints(g);d.beginPath();d.moveTo(this.p0.x,this.p0.y);for(var e=1;e<g.length;e++)d.lineTo(g[e].x,g[e].y);d.strokePath();return d},toJSON:function(){return{type:this.type,
points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});b.fromJSON=function(d){var g=d.points;d=new c(g[0],g[1]);var e=new c(g[2],g[3]);g=new c(g[4],g[5]);return new b(d,e,g)};p.exports=b},function(p,u,a){var h=a(194);u=a(0);var f=a(94),c=a(3),b=new u({Extends:f,initialize:function(d){void 0===d&&(d=[]);f.call(this,"SplineCurve");this.points=[];this.addPoints(d)},addPoints:function(d){for(var g=0;g<d.length;g++){var e=new c;"number"===typeof d[g]?(e.x=d[g],e.y=d[g+1],g++):Array.isArray(d[g])?
(e.x=d[g][0],e.y=d[g][1]):(e.x=d[g].x,e.y=d[g].y);this.points.push(e)}return this},addPoint:function(d,g){d=new c(d,g);this.points.push(d);return d},getStartPoint:function(d){void 0===d&&(d=new c);return d.copy(this.points[0])},getResolution:function(d){return d*this.points.length},getPoint:function(d,g){void 0===g&&(g=new c);var e=this.points,l=(e.length-1)*d;d=Math.floor(l);l-=d;var k=e[0===d?d:d-1],m=e[d],n=e[d>e.length-2?e.length-1:d+1];e=e[d>e.length-3?e.length-1:d+2];return g.set(h(l,k.x,m.x,
n.x,e.x),h(l,k.y,m.y,n.y,e.y))},toJSON:function(){for(var d=[],g=0;g<this.points.length;g++)d.push(this.points[g].x),d.push(this.points[g].y);return{type:this.type,points:d}}});b.fromJSON=function(d){return new b(d.points)};p.exports=b},function(p,u,a){u=new (a(0))({initialize:function(h,f,c,b){f&&""!==f||(f="precision mediump float;\nuniform vec2 resolution;\nvarying vec2 fragCoord;\nvoid main () {\n    vec2 uv = fragCoord / resolution.xy;\n    gl_FragColor = vec4(uv.xyx, 1.0);\n}");c&&""!==c||(c=
"precision mediump float;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uViewMatrix;\nuniform vec2 uResolution;\nattribute vec2 inPosition;\nvarying vec2 fragCoord;\nvarying vec2 outTexCoord;\nvoid main () {\n   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);\n   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);\n   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);\n}");void 0===b&&(b=null);this.key=h;this.fragmentSrc=f;this.vertexSrc=
c;this.uniforms=b}});p.exports=u},function(p,u,a){u=a(38);u.ColorSpectrum=a(909);u.ColorToRGBA=a(910);u.ComponentToHex=a(398);u.GetColor=a(103);u.GetColor32=a(328);u.HexStringToColor=a(327);u.HSLToColor=a(911);u.HSVColorWheel=a(912);u.HSVToRGB=a(188);u.HueToComponent=a(399);u.IntegerToColor=a(189);u.IntegerToRGB=a(330);u.Interpolate=a(913);u.ObjectToColor=a(331);u.RandomRGB=a(914);u.RGBStringToColor=a(332);u.RGBToHSV=a(329);u.RGBToString=a(915);u.ValueToColor=a(187);p.exports=u},function(p,u){p.exports=
function(a){a=a.toString(16);return 1===a.length?"0"+a:a}},function(p,u){p.exports=function(a,h,f){0>f&&(f+=1);1<f&&--f;return f<1/6?a+6*(h-a)*f:.5>f?h:f<2/3?a+(h-a)*(2/3-f)*6:a}},function(p,u,a){var h=a(105);p.exports=function(f){if("complete"===document.readyState||"interactive"===document.readyState)f();else{var c=function(){document.removeEventListener("deviceready",c,!0);document.removeEventListener("DOMContentLoaded",c,!0);window.removeEventListener("load",c,!0);f()};document.body?h.cordova?
document.addEventListener("deviceready",c,!1):(document.addEventListener("DOMContentLoaded",c,!0),window.addEventListener("load",c,!0)):window.setTimeout(c,20)}}},function(p,u){p.exports=function(a){if(!a)return window.innerHeight;var h=Math.abs(window.orientation),f=document.createElement("div");f.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0");document.documentElement.appendChild(f);a=90===h?f.offsetHeight:window.innerWidth;h=90===h?window.innerWidth:f.offsetHeight;document.documentElement.removeChild(f);
return 90!==Math.abs(window.orientation)?h:a}},function(p,u,a){var h=a(201);p.exports=function(f,c){var b=window.screen;if((b=b?b.orientation||b.mozOrientation||b.msOrientation:!1)&&"string"===typeof b.type)return b.type;if("string"===typeof b)return b;if("number"===typeof window.orientation)return 0===window.orientation||180===window.orientation?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return h.ORIENTATION.PORTRAIT;
if(window.matchMedia("(orientation: landscape)").matches)return h.ORIENTATION.LANDSCAPE}else return c>f?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE}},function(p,u){p.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(p,u){p.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(p,u){p.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(p,u){p.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},
function(p,u){p.exports=function(a){var h;""!==a&&("string"===typeof a?h=document.getElementById(a):a&&1===a.nodeType&&(h=a));h||(h=document.body);return h}},function(p,u){p.exports=function(a){var h="";try{window.DOMParser?h=(new DOMParser).parseFromString(a,"text/xml"):(h=new ActiveXObject("Microsoft.XMLDOM"),h.loadXML(a))}catch(f){h=null}return h&&h.documentElement&&!h.getElementsByTagName("parsererror").length?h:null}},function(p,u,a){u=a(0);var h=a(203),f=a(9),c=a(51),b=a(22),d=a(410),g=a(411),
e=a(412),l=a(413),k=a(25),m=a(177);a=new u({initialize:function(n,q){this.game=n;this.config=q;this.enabled=!0;this.events=new f;this.isOver=!0;this.defaultCursor="";this.keyboard=q.inputKeyboard?new d(this):null;this.mouse=q.inputMouse?new g(this):null;this.touch=q.inputTouch?new l(this):null;this.pointers=[];this.pointersTotal=q.inputActivePointers;q.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var r=0;r<=this.pointersTotal;r++){var t=new e(this,r);t.smoothFactor=q.inputSmoothFactor;
this.pointers.push(t)}this.mousePointer=q.inputMouse?this.pointers[0]:null;this.activePointer=this.pointers[0];this.globalTopOnly=!0;this.time=0;this._tempPoint={x:0,y:0};this._tempHitTest=[];this._tempMatrix=new k;this._tempMatrix2=new k;this._tempSkip=!1;this.mousePointerContainer=[this.mousePointer];n.events.once(b.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas;this.scaleManager=this.game.scale;this.events.emit(c.MANAGER_BOOT);this.game.events.on(b.PRE_RENDER,this.preRender,
this);this.game.events.once(b.DESTROY,this.destroy,this)},setCanvasOver:function(n){this.isOver=!0;this.events.emit(c.GAME_OVER,n)},setCanvasOut:function(n){this.isOver=!1;this.events.emit(c.GAME_OUT,n)},preRender:function(){var n=this.game.loop.now,q=this.game.loop.delta,r=this.game.scene.getScenes(!0,!0);this.time=n;this.events.emit(c.MANAGER_UPDATE);for(var t=0;t<r.length;t++){var w=r[t];if(w.sys.input&&w.sys.input.updatePoll(n,q)&&this.globalTopOnly)break}},setDefaultCursor:function(n){this.defaultCursor=
n;this.canvas.style.cursor!==n&&(this.canvas.style.cursor=n)},setCursor:function(n){n.cursor&&(this.canvas.style.cursor=n.cursor)},resetCursor:function(n){n.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(n){void 0===n&&(n=1);var q=[];10<this.pointersTotal+n&&(n=10-this.pointersTotal);for(var r=0;r<n;r++){var t=new e(this,this.pointers.length);t.smoothFactor=this.config.inputSmoothFactor;this.pointers.push(t);this.pointersTotal++;q.push(t)}return q},updateInputPlugins:function(n,
q){var r=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var t=0;t<r.length;t++){var w=r[t];if(w.sys.input&&(w.sys.input.update(n,q)&&this.globalTopOnly||this._tempSkip))break}},onTouchStart:function(n){for(var q=this.pointers,r=[],t=0;t<n.changedTouches.length;t++)for(var w=n.changedTouches[t],v=1;v<this.pointersTotal;v++){var x=q[v];if(!x.active){x.touchstart(w,n);this.activePointer=x;r.push(x);break}}this.updateInputPlugins(h.TOUCH_START,r)},onTouchMove:function(n){for(var q=this.pointers,
r=[],t=0;t<n.changedTouches.length;t++)for(var w=n.changedTouches[t],v=1;v<this.pointersTotal;v++){var x=q[v];if(x.active&&x.identifier===w.identifier){x.touchmove(w,n);this.activePointer=x;r.push(x);break}}this.updateInputPlugins(h.TOUCH_MOVE,r)},onTouchEnd:function(n){for(var q=this.pointers,r=[],t=0;t<n.changedTouches.length;t++)for(var w=n.changedTouches[t],v=1;v<this.pointersTotal;v++){var x=q[v];if(x.active&&x.identifier===w.identifier){x.touchend(w,n);r.push(x);break}}this.updateInputPlugins(h.TOUCH_END,
r)},onTouchCancel:function(n){for(var q=this.pointers,r=[],t=0;t<n.changedTouches.length;t++)for(var w=n.changedTouches[t],v=1;v<this.pointersTotal;v++){var x=q[v];if(x.active&&x.identifier===w.identifier){x.touchcancel(w,n);r.push(x);break}}this.updateInputPlugins(h.TOUCH_CANCEL,r)},onMouseDown:function(n){var q=this.mousePointer;q.down(n);q.updateMotion();this.activePointer=q;this.updateInputPlugins(h.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(n){var q=this.mousePointer;q.move(n);
q.updateMotion();this.activePointer=q;this.updateInputPlugins(h.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(n){var q=this.mousePointer;q.up(n);q.updateMotion();this.activePointer=q;this.updateInputPlugins(h.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(n){var q=this.mousePointer;q.wheel(n);this.activePointer=q;this.updateInputPlugins(h.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(n){var q=this.mouse.locked;this.mousePointer.locked=q;this.events.emit(c.POINTERLOCK_CHANGE,
n,q)},inputCandidate:function(n,q){var r=n.input;if(!r||!r.enabled||!r.alwaysEnabled&&!n.willRender(q))return!1;r=!0;if(n=n.parentContainer){do{if(!n.willRender(q)){r=!1;break}n=n.parentContainer}while(n)}return r},hitTest:function(n,q,r,t){void 0===t&&(t=this._tempHitTest);var w=this._tempPoint,v=r.scrollX,x=r.scrollY;t.length=0;r.getWorldPoint(n.x,n.y,w);n.worldX=w.x;n.worldY=w.y;n={x:0,y:0};for(var y=this._tempMatrix,A=this._tempMatrix2,B=0;B<q.length;B++){var z=q[B];if(this.inputCandidate(z,r)){var C=
w.x+v*z.scrollFactorX-v,E=w.y+x*z.scrollFactorY-x;z.parentContainer?(z.getWorldTransformMatrix(y,A),y.applyInverse(C,E,n)):m(C,E,z.x,z.y,z.rotation,z.scaleX,z.scaleY,n);this.pointWithinHitArea(z,n.x,n.y)&&t.push(z)}}return t},pointWithinHitArea:function(n,q,r){q+=n.displayOriginX;r+=n.displayOriginY;var t=n.input;return t&&t.hitAreaCallback(t.hitArea,q,r,n)?(t.localX=q,t.localY=r,!0):!1},pointWithinInteractiveObject:function(n,q,r){if(!n.hitArea)return!1;q+=n.gameObject.displayOriginX;r+=n.gameObject.displayOriginY;
n.localX=q;n.localY=r;return n.hitAreaCallback(n.hitArea,q,r,n)},transformPointer:function(n,q,r,t){var w=n.position,v=n.prevPosition;v.x=w.x;v.y=w.y;q=this.scaleManager.transformX(q);r=this.scaleManager.transformY(r);n=n.smoothFactor;t&&0!==n?(w.x=q*n+v.x*(1-n),w.y=r*n+v.y*(1-n)):(w.x=q,w.y=r)},destroy:function(){this.events.removeAllListeners();this.game.events.off(b.PRE_RENDER);this.keyboard&&this.keyboard.destroy();this.mouse&&this.mouse.destroy();this.touch&&this.touch.destroy();for(var n=0;n<
this.pointers.length;n++)this.pointers[n].destroy();this.pointers=[];this._tempHitTest=[];this._tempMatrix.destroy();this.game=this.canvas=null}});p.exports=a},function(p,u,a){var h=a(93);u=a(0);var f=a(22),c=a(51),b=a(143),d=a(1);a=new u({initialize:function(g){this.manager=g;this.queue=[];this.preventDefault=!0;this.captures=[];this.enabled=!1;this.onKeyUp=this.onKeyDown=d;g.events.once(c.MANAGER_BOOT,this.boot,this)},boot:function(){var g=this.manager.config;this.enabled=g.inputKeyboard;this.target=
g.inputKeyboardEventTarget;this.addCapture(g.inputKeyboardCapture);!this.target&&window&&(this.target=window);this.enabled&&this.target&&this.startListeners();this.manager.game.events.on(f.POST_STEP,this.postUpdate,this)},startListeners:function(){var g=this;this.onKeyDown=function(l){if(!l.defaultPrevented&&g.enabled&&g.manager){g.queue.push(l);g.manager.events.emit(c.MANAGER_PROCESS);var k=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;g.preventDefault&&!k&&-1<g.captures.indexOf(l.keyCode)&&l.preventDefault()}};
this.onKeyUp=function(l){if(!l.defaultPrevented&&g.enabled&&g.manager){g.queue.push(l);g.manager.events.emit(c.MANAGER_PROCESS);var k=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;g.preventDefault&&!k&&-1<g.captures.indexOf(l.keyCode)&&l.preventDefault()}};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var g=this.target;g.removeEventListener("keydown",this.onKeyDown,!1);g.removeEventListener("keyup",
this.onKeyUp,!1);this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(g){"string"===typeof g&&(g=g.split(","));Array.isArray(g)||(g=[g]);for(var e=this.captures,l=0;l<g.length;l++){var k=g[l];"string"===typeof k&&(k=b[k.trim().toUpperCase()]);-1===e.indexOf(k)&&e.push(k)}this.preventDefault=0<e.length},removeCapture:function(g){"string"===typeof g&&(g=g.split(","));Array.isArray(g)||(g=[g]);for(var e=this.captures,l=0;l<g.length;l++){var k=g[l];"string"===typeof k&&(k=b[k.toUpperCase()]);
h(e,k)}this.preventDefault=0<e.length},clearCaptures:function(){this.captures=[];this.preventDefault=!1},destroy:function(){this.stopListeners();this.clearCaptures();this.queue=[];this.manager.game.events.off(f.POST_RENDER,this.postUpdate,this);this.target=null;this.enabled=!1;this.manager=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(191),f=a(51),c=a(1);a=new u({initialize:function(b){this.manager=b;this.preventDefaultMove=this.preventDefaultUp=this.preventDefaultDown=!0;this.locked=this.enabled=
this.preventDefaultWheel=!1;this.pointerLockChange=this.onMouseWheel=this.onMouseOut=this.onMouseOver=this.onMouseUpWindow=this.onMouseDownWindow=this.onMouseUp=this.onMouseDown=this.onMouseMove=c;this.isTop=!0;b.events.once(f.MANAGER_BOOT,this.boot,this)},boot:function(){var b=this.manager.config;this.enabled=b.inputMouse;this.target=b.inputMouseEventTarget;this.passive=b.inputMousePassive;this.preventDefaultDown=b.inputMousePreventDefaultDown;this.preventDefaultUp=b.inputMousePreventDefaultUp;this.preventDefaultMove=
b.inputMousePreventDefaultMove;this.preventDefaultWheel=b.inputMousePreventDefaultWheel;this.target?"string"===typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas;b.disableContextMenu&&this.disableContextMenu();this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){document.body.addEventListener("contextmenu",function(b){b.preventDefault();return!1});return this},requestPointerLock:function(){if(h.pointerLock){var b=
this.target;b.requestPointerLock=b.requestPointerLock||b.mozRequestPointerLock||b.webkitRequestPointerLock;b.requestPointerLock()}},releasePointerLock:function(){h.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var b=this.target;if(b){var d=this,g=this.manager,e=g.canvas,l=window&&window.focus&&g.game.config.autoFocus;this.onMouseMove=function(m){!m.defaultPrevented&&
d.enabled&&g&&g.enabled&&(g.onMouseMove(m),d.preventDefaultMove&&m.preventDefault())};this.onMouseDown=function(m){l&&window.focus();!m.defaultPrevented&&d.enabled&&g&&g.enabled&&(g.onMouseDown(m),d.preventDefaultDown&&m.target===e&&m.preventDefault())};this.onMouseDownWindow=function(m){if(!m.defaultPrevented&&d.enabled&&g&&g.enabled&&m.target!==e)g.onMouseDown(m)};this.onMouseUp=function(m){!m.defaultPrevented&&d.enabled&&g&&g.enabled&&(g.onMouseUp(m),d.preventDefaultUp&&m.target===e&&m.preventDefault())};
this.onMouseUpWindow=function(m){if(!m.defaultPrevented&&d.enabled&&g&&g.enabled&&m.target!==e)g.onMouseUp(m)};this.onMouseOver=function(m){!m.defaultPrevented&&d.enabled&&g&&g.enabled&&g.setCanvasOver(m)};this.onMouseOut=function(m){!m.defaultPrevented&&d.enabled&&g&&g.enabled&&g.setCanvasOut(m)};this.onMouseWheel=function(m){if(!m.defaultPrevented&&d.enabled&&g&&g.enabled)g.onMouseWheel(m);d.preventDefaultWheel&&m.target===e&&m.preventDefault()};var k={passive:!0};b.addEventListener("mousemove",
this.onMouseMove);b.addEventListener("mousedown",this.onMouseDown);b.addEventListener("mouseup",this.onMouseUp);b.addEventListener("mouseover",this.onMouseOver,k);b.addEventListener("mouseout",this.onMouseOut,k);this.preventDefaultWheel?b.addEventListener("wheel",this.onMouseWheel,{passive:!1}):b.addEventListener("wheel",this.onMouseWheel,k);if(window&&g.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,k),window.top.addEventListener("mouseup",this.onMouseUpWindow,
k)}catch(m){window.addEventListener("mousedown",this.onMouseDownWindow,k),window.addEventListener("mouseup",this.onMouseUpWindow,k),this.isTop=!1}h.pointerLock&&(this.pointerLockChange=function(m){var n=d.target;d.locked=document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement===n?!0:!1;g.onPointerLockChange(m)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,
!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0));this.enabled=!0}},stopListeners:function(){var b=this.target;b.removeEventListener("mousemove",this.onMouseMove);b.removeEventListener("mousedown",this.onMouseDown);b.removeEventListener("mouseup",this.onMouseUp);b.removeEventListener("mouseover",this.onMouseOver);b.removeEventListener("mouseout",this.onMouseOut);window&&(b=this.isTop?window.top:window,b.removeEventListener("mousedown",this.onMouseDownWindow),b.removeEventListener("mouseup",
this.onMouseUpWindow));h.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners();this.target=null;this.enabled=!1;this.manager=null}});p.exports=a},function(p,u,a){var h=a(349);u=a(0);var f=a(50),c=a(124),b=a(360),d=a(3),g=a(105);a=new u({initialize:function(e,l){this.manager=
e;this.id=l;this.camera=null;this.buttons=this.button=0;this.position=new d;this.prevPosition=new d;this.midPoint=new d(-1,-1);this.velocity=new d;this.smoothFactor=this.distance=this.angle=0;this.motionFactor=.2;this.upTime=this.upY=this.upX=this.downTime=this.downY=this.downX=this.moveTime=this.worldY=this.worldX=0;this.wasCanceled=this.wasTouch=this.isDown=this.primaryDown=!1;this.identifier=this.movementY=this.movementX=0;this.pointerId=null;this.active=0===l?!0:!1;this.locked=!1;this.deltaZ=
this.deltaY=this.deltaX=0},updateWorldPoint:function(e){e=e.getWorldPoint(this.x,this.y);this.worldX=e.x;this.worldY=e.y;return this},positionToCamera:function(e,l){return e.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var e=this.position.x,l=this.position.y,k=this.midPoint.x,m=this.midPoint.y;if(e!==k||l!==m){k=b(this.motionFactor,k,e);m=b(this.motionFactor,m,l);c(k,e,.1)&&(k=e);c(m,l,.1)&&(m=l);this.midPoint.set(k,m);var n=e-k,q=l-m;this.velocity.set(n,q);this.angle=h(k,m,e,l);this.distance=
Math.sqrt(n*n+q*q)}},up:function(e){"buttons"in e&&(this.buttons=e.buttons);this.event=e;this.button=e.button;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);0===e.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y);0===this.buttons&&(this.isDown=!1,this.upTime=e.timeStamp,this.wasTouch=!1)},down:function(e){"buttons"in e&&(this.buttons=e.buttons);this.event=e;this.button=e.button;this.downElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,
!1);0===e.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y);g.macOS&&e.ctrlKey&&(this.buttons=2,this.primaryDown=!1);this.isDown||(this.isDown=!0,this.downTime=e.timeStamp);this.wasTouch=!1},move:function(e){"buttons"in e&&(this.buttons=e.buttons);this.event=e;this.manager.transformPointer(this,e.pageX,e.pageY,!0);this.locked&&(this.movementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.movementY=e.movementY||e.mozMovementY||e.webkitMovementY||0);this.moveTime=e.timeStamp;
this.wasTouch=!1},wheel:function(e){"buttons"in e&&(this.buttons=e.buttons);this.event=e;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.deltaX=e.deltaX;this.deltaY=e.deltaY;this.deltaZ=e.deltaZ;this.wasTouch=!1},touchstart:function(e,l){e.pointerId&&(this.pointerId=e.pointerId);this.identifier=e.identifier;this.target=e.target;this.active=!0;this.buttons=1;this.event=l;this.downElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.primaryDown=!0;this.downX=this.x;
this.downY=this.y;this.downTime=l.timeStamp;this.wasTouch=this.isDown=!0;this.wasCanceled=!1;this.updateMotion()},touchmove:function(e,l){this.event=l;this.manager.transformPointer(this,e.pageX,e.pageY,!0);this.moveTime=l.timeStamp;this.wasTouch=!0;this.updateMotion()},touchend:function(e,l){this.buttons=0;this.event=l;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.primaryDown=!1;this.upX=this.x;this.upY=this.y;this.upTime=l.timeStamp;this.isDown=!1;this.wasTouch=
!0;this.active=this.wasCanceled=!1;this.updateMotion()},touchcancel:function(e,l){this.buttons=0;this.event=l;this.upElement=e.target;this.manager.transformPointer(this,e.pageX,e.pageY,!1);this.primaryDown=!1;this.upX=this.x;this.upY=this.y;this.upTime=l.timeStamp;this.isDown=!1;this.wasCanceled=this.wasTouch=!0;this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return this.buttons&1?!0:!1},rightButtonDown:function(){return this.buttons&2?!0:!1},middleButtonDown:function(){return this.buttons&
4?!0:!1},backButtonDown:function(){return this.buttons&8?!0:!1},forwardButtonDown:function(){return this.buttons&16?!0:!1},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?
f(this.downX,this.downY,this.x,this.y):f(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},
getInterpolatedPosition:function(e,l){void 0===e&&(e=10);void 0===l&&(l=[]);for(var k=this.prevPosition.x,m=this.prevPosition.y,n=this.position.x,q=this.position.y,r=0;r<e;r++){var t=1/e*r;l[r]={x:b(t,k,n),y:b(t,m,q)}}return l},destroy:function(){this.position=this.manager=this.camera=null},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},time:{get:function(){return this.event?this.event.timeStamp:
0}}});p.exports=a},function(p,u,a){u=a(0);var h=a(51),f=a(1);a=new u({initialize:function(c){this.manager=c;this.capture=!0;this.enabled=!1;this.onTouchOut=this.onTouchOver=this.onTouchCancelWindow=this.onTouchCancel=this.onTouchEndWindow=this.onTouchEnd=this.onTouchMove=this.onTouchStartWindow=this.onTouchStart=f;c.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var c=this.manager.config;this.enabled=c.inputTouch;this.target=c.inputTouchEventTarget;this.capture=c.inputTouchCapture;this.target||
(this.target=this.manager.game.canvas);c.disableContextMenu&&this.disableContextMenu();this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){document.body.addEventListener("contextmenu",function(c){c.preventDefault();return!1});return this},startListeners:function(){var c=this,b=this.manager.canvas,d=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(k){d&&window.focus();!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled&&(c.manager.onTouchStart(k),
c.capture&&k.cancelable&&k.target===b&&k.preventDefault())};this.onTouchStartWindow=function(k){if(!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled&&k.target!==b)c.manager.onTouchStart(k)};this.onTouchMove=function(k){!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled&&(c.manager.onTouchMove(k),c.capture&&k.cancelable&&k.preventDefault())};this.onTouchEnd=function(k){!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled&&(c.manager.onTouchEnd(k),c.capture&&k.cancelable&&
k.target===b&&k.preventDefault())};this.onTouchEndWindow=function(k){if(!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled&&k.target!==b)c.manager.onTouchEnd(k)};this.onTouchCancel=function(k){!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled&&(c.manager.onTouchCancel(k),c.capture&&k.preventDefault())};this.onTouchCancelWindow=function(k){if(!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled)c.manager.onTouchCancel(k)};this.onTouchOver=function(k){!k.defaultPrevented&&
c.enabled&&c.manager&&c.manager.enabled&&c.manager.setCanvasOver(k)};this.onTouchOut=function(k){!k.defaultPrevented&&c.enabled&&c.manager&&c.manager.enabled&&c.manager.setCanvasOut(k)};var g=this.target;if(g){var e={passive:!0},l={passive:!1};g.addEventListener("touchstart",this.onTouchStart,this.capture?l:e);g.addEventListener("touchmove",this.onTouchMove,this.capture?l:e);g.addEventListener("touchend",this.onTouchEnd,this.capture?l:e);g.addEventListener("touchcancel",this.onTouchCancel,this.capture?
l:e);g.addEventListener("touchover",this.onTouchOver,this.capture?l:e);g.addEventListener("touchout",this.onTouchOut,this.capture?l:e);window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,l),window.addEventListener("touchend",this.onTouchEndWindow,l),window.addEventListener("touchcancel",this.onTouchCancelWindow,l));this.enabled=!0}},stopListeners:function(){var c=this.target;c.removeEventListener("touchstart",this.onTouchStart);c.removeEventListener("touchmove",
this.onTouchMove);c.removeEventListener("touchend",this.onTouchEnd);c.removeEventListener("touchcancel",this.onTouchCancel);c.removeEventListener("touchover",this.onTouchOver);c.removeEventListener("touchout",this.onTouchOut);window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners();this.target=null;this.enabled=!1;this.manager=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(22),
f=a(9),c=a(8),b=a(16),d=a(5),g=a(2),e=a(24),l=a(93);a=new u({Extends:f,initialize:function(k){f.call(this);this.game=k;this.plugins=[];this.scenePlugins=[];this._pendingGlobal=[];this._pendingScene=[];if(k.isBooted)this.boot();else k.events.once(h.BOOT,this.boot,this)},boot:function(){var k,m=this.game.config,n=m.installGlobalPlugins;n=n.concat(this._pendingGlobal);for(k=0;k<n.length;k++){var q=n[k];var r=g(q,"key",null);var t=g(q,"plugin",null);var w=g(q,"start",!1);var v=g(q,"mapping",null);q=g(q,
"data",null);r&&(t?this.install(r,t,w,v,q):console.warn("Missing `plugin` for key: "+r))}n=m.installScenePlugins;n=n.concat(this._pendingScene);for(k=0;k<n.length;k++)q=n[k],r=g(q,"key",null),t=g(q,"plugin",null),v=g(q,"mapping",null),r&&(t?this.installScenePlugin(r,t,v):console.warn("Missing `plugin` for key: "+r));this._pendingGlobal=[];this._pendingScene=[];this.game.events.once(h.DESTROY,this.destroy,this)},addToScene:function(k,m,n){var q,r=this.game,t=k.scene,w=k.settings.map,v=k.settings.isBooted;
for(q=0;q<m.length;q++){var x=m[q];r[x]?(k[x]=r[x],w.hasOwnProperty(x)&&(t[w[x]]=k[x])):"game"===x&&w.hasOwnProperty(x)&&(t[w[x]]=r)}for(r=0;r<n.length;r++)for(m=n[r],q=0;q<m.length;q++)if(x=m[q],e.hasCore(x)){x=e.getCore(x);var y=x.mapping,A=new x.plugin(t,this,y);k[y]=A;x.custom?t[y]=A:w.hasOwnProperty(y)&&(t[w[y]]=A);v&&A.boot()}m=this.plugins;for(q=0;q<m.length;q++)k=m[q],k.mapping&&(t[k.mapping]=k.plugin)},getDefaultScenePlugins:function(){var k=this.game.config.defaultPlugins;return k=k.concat(this.scenePlugins)},
installScenePlugin:function(k,m,n,q,r){void 0===r&&(r=!1);if("function"!==typeof m)console.warn("Invalid Scene Plugin: "+k);else{if(!e.hasCore(k))e.register(k,m,n,!0),this.scenePlugins.push(k);else if(!r&&e.hasCore(k)){console.warn("Scene Plugin key in use: "+k);return}q&&(m=new m(q,this,k),q.sys[k]=m,n&&""!==n&&(q[n]=m),m.boot())}},install:function(k,m,n,q,r){void 0===n&&(n=!1);void 0===q&&(q=null);void 0===r&&(r=null);if("function"!==typeof m)return console.warn("Invalid Plugin: "+k),null;if(e.hasCustom(k))return console.warn("Plugin key in use: "+
k),null;null!==q&&(n=!0);if(this.game.isBooted){if(e.registerCustom(k,m,q,r),n)return this.start(k)}else this._pendingGlobal.push({key:k,plugin:m,start:n,mapping:q,data:r});return null},getIndex:function(k){for(var m=this.plugins,n=0;n<m.length;n++)if(m[n].key===k)return n;return-1},getEntry:function(k){k=this.getIndex(k);if(-1!==k)return this.plugins[k]},isActive:function(k){return(k=this.getEntry(k))&&k.active},start:function(k,m){void 0===m&&(m=k);var n=this.getEntry(m);n&&!n.active?(n.active=
!0,n.plugin.start()):n||(n=this.createEntry(k,m));return n?n.plugin:null},createEntry:function(k,m){if(k=e.getCustom(k)){var n=new k.plugin(this);k={key:m,plugin:n,active:!0,mapping:k.mapping,data:k.data};this.plugins.push(k);n.init(k.data);n.start()}return k},stop:function(k){(k=this.getEntry(k))&&k.active&&(k.active=!1,k.plugin.stop());return this},get:function(k,m){void 0===m&&(m=!0);var n=this.getEntry(k);return n?n.plugin:(n=this.getClass(k))&&m?(n=this.createEntry(k,k))?n.plugin:null:n?n:null},
getClass:function(k){return e.getCustomClass(k)},removeGlobalPlugin:function(k){var m=this.getEntry(k);m&&l(this.plugins,m);e.removeCustom(k)},removeScenePlugin:function(k){l(this.scenePlugins,k);e.remove(k)},registerGameObject:function(k,m,n){m&&d.register(k,m);n&&b.register(k,n);return this},removeGameObject:function(k,m,n){void 0===m&&(m=!0);void 0===n&&(n=!0);m&&d.remove(k);n&&b.remove(k);return this},registerFileType:function(k,m,n){c.register(k,m);n&&n.sys.load&&(n.sys.load[k]=m)},destroy:function(){for(var k=
0;k<this.plugins.length;k++)this.plugins[k].plugin.destroy();e.destroyCustomPlugins();this.game.noReturn&&e.destroyCorePlugins();this.game=null;this.plugins=[];this.scenePlugins=[]}});p.exports=a},function(p,u,a){var h=a(201);u=a(0);var f=a(9),c=a(104),b=a(22),d=a(401),g=a(407),e=a(402),l=a(1),k=a(10),m=a(416),n=a(76),q=a(3);a=new u({Extends:f,initialize:function(r){f.call(this);this.game=r;this.canvasBounds=new k;this.parent=null;this.parentIsWindow=!1;this.parentSize=new m;this.gameSize=new m;this.baseSize=
new m;this.displaySize=new m;this.scaleMode=h.SCALE_MODE.NONE;this.zoom=1;this._resetZoom=!1;this.displayScale=new q(1,1);this.autoRound=!1;this.autoCenter=h.CENTER.NO_CENTER;this.orientation=h.ORIENTATION.LANDSCAPE;this.fullscreenTarget=null;this.dirty=this._createdFullscreenTarget=!1;this.resizeInterval=500;this._lastCheck=0;this._checkOrientation=!1;this.listeners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config);this.game.events.once(b.BOOT,
this.boot,this)},boot:function(){var r=this.game;this.canvas=r.canvas;this.fullscreen=r.device.fullscreen;this.scaleMode!==h.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode);this.scaleMode===h.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh());r.events.on(b.PRE_STEP,this.step,this);r.events.once(b.READY,this.refresh,this);r.events.once(b.DESTROY,
this.destroy,this);this.startListeners()},parseConfig:function(r){this.getParent(r);this.getParentBounds();var t=r.width,w=r.height,v=r.scaleMode,x=r.zoom,y=r.autoRound;if("string"===typeof t){var A=this.parentSize.width;0===A&&(A=window.innerWidth);t=parseInt(t,10)/100;t=Math.floor(A*t)}"string"===typeof w&&(A=this.parentSize.height,0===A&&(A=window.innerHeight),w=parseInt(w,10)/100,w=Math.floor(A*w));this.scaleMode=v;this.autoRound=y;this.autoCenter=r.autoCenter;this.resizeInterval=r.resizeInterval;
y&&(t=Math.floor(t),w=Math.floor(w));this.gameSize.setSize(t,w);x===h.ZOOM.MAX_ZOOM&&(x=this.getMaxZoom());this.zoom=x;1!==x&&(this._resetZoom=!0);this.baseSize.setSize(t,w);y&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height));0<r.minWidth&&this.displaySize.setMin(r.minWidth*x,r.minHeight*x);0<r.maxWidth&&this.displaySize.setMax(r.maxWidth*x,r.maxHeight*x);this.displaySize.setSize(t,w);this.orientation=e(t,w)},getParent:function(r){var t=r.parent;
null!==t&&(this.parent=g(t),this.parentIsWindow=this.parent===document.body,r.expandParent&&r.scaleMode!==h.SCALE_MODE.NONE&&(t=this.parent.getBoundingClientRect(),this.parentIsWindow||0===t.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",t=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==t.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%")),r.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=
g(r.fullscreenTarget)))},getParentBounds:function(){if(!this.parent)return!1;var r=this.parentSize,t=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(t.height=d(!0));var w=t.width;t=t.height;return r.width!==w||r.height!==t?(r.setSize(w,t),!0):!1},lockOrientation:function(r){var t=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return t?t.call(screen,r):!1},setParentSize:function(r,t){this.parentSize.setSize(r,t);return this.refresh()},
setGameSize:function(r,t){var w=this.autoRound;w&&(r=Math.floor(r),t=Math.floor(t));var v=this.width,x=this.height;this.gameSize.resize(r,t);this.baseSize.resize(r,t);w&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height));this.displaySize.setAspectRatio(r/t);this.canvas.width=this.baseSize.width;this.canvas.height=this.baseSize.height;return this.refresh(v,x)},resize:function(r,t){var w=this.zoom,v=this.autoRound;v&&(r=Math.floor(r),t=Math.floor(t));
var x=this.width,y=this.height;this.gameSize.resize(r,t);this.baseSize.resize(r,t);v&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height));this.displaySize.setSize(r*w,t*w);this.canvas.width=this.baseSize.width;this.canvas.height=this.baseSize.height;var A=this.canvas.style,B=r*w;w*=t;v&&(B=Math.floor(B),w=Math.floor(w));if(B!==r||w!==t)A.width=B+"px",A.height=w+"px";return this.refresh(x,y)},setZoom:function(r){this.zoom=r;this._resetZoom=!0;
return this.refresh()},setMaxZoom:function(){this.zoom=this.getMaxZoom();this._resetZoom=!0;return this.refresh()},refresh:function(r,t){void 0===r&&(r=this.width);void 0===t&&(t=this.height);this.updateScale();this.updateBounds();this.updateOrientation();this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var w=this.game.domContainer;if(w){this.baseSize.setCSS(w);var v=this.canvas.style;w=w.style;w.transform="scale("+this.displaySize.width/
this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")";w.marginLeft=v.marginLeft;w.marginTop=v.marginTop}this.emit(c.RESIZE,this.gameSize,this.baseSize,this.displaySize,r,t);return this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var r=e(this.width,this.height);r!==this.orientation&&(this.orientation=r,this.emit(c.ORIENTATION_CHANGE,r))}},updateScale:function(){var r=this.canvas.style,t=this.gameSize.width,w=this.gameSize.height,v=this.zoom,
x=this.autoRound;this.scaleMode===h.SCALE_MODE.NONE?(this.displaySize.setSize(t*v,w*v),t=this.displaySize.width,w=this.displaySize.height,x&&(t=Math.floor(t),w=Math.floor(w)),this._resetZoom&&(r.width=t+"px",r.height=w+"px",this._resetZoom=!1)):this.scaleMode===h.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,
w=this.displaySize.height,x&&(t=Math.floor(t),w=Math.floor(w)),this.canvas.width=t,this.canvas.height=w):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,w=this.displaySize.height,x&&(t=Math.floor(t),w=Math.floor(w)),r.width=t+"px",r.height=w+"px");this.getParentBounds();this.updateCenter()},getMaxZoom:function(){var r=n(this.parentSize.width,this.gameSize.width,0,!0),t=n(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(r,t),
1)},updateCenter:function(){var r=this.autoCenter;if(r!==h.CENTER.NO_CENTER){var t=this.canvas,w=t.style,v=t.getBoundingClientRect();t=Math.floor((this.parentSize.width-v.width)/2);v=Math.floor((this.parentSize.height-v.height)/2);r===h.CENTER.CENTER_HORIZONTALLY?v=0:r===h.CENTER.CENTER_VERTICALLY&&(t=0);w.marginLeft=t+"px";w.marginTop=v+"px"}},updateBounds:function(){var r=this.canvasBounds,t=this.canvas.getBoundingClientRect();r.x=t.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||
0);r.y=t.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0);r.width=t.width;r.height=t.height},transformX:function(r){return(r-this.canvasBounds.left)*this.displayScale.x},transformY:function(r){return(r-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(r){void 0===r&&(r={navigationUI:"hide"});var t=this.fullscreen;if(!t.available)this.emit(c.FULLSCREEN_UNSUPPORTED);else if(!t.active){var w=this.getFullscreenTarget();if(t.keyboard)w[t.request](Element.ALLOW_KEYBOARD_INPUT);
else w[t.request](r)}},fullscreenSuccessHandler:function(){this.getParentBounds();this.refresh();this.emit(c.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(r){this.removeFullscreenTarget();this.emit(c.FULLSCREEN_FAILED,r)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var r=document.createElement("div");r.style.margin="0";r.style.padding="0";r.style.width="100%";r.style.height="100%";this.fullscreenTarget=r;this._createdFullscreenTarget=!0}this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,
this.canvas),this.fullscreenTarget.appendChild(this.canvas));return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var r=this.fullscreenTarget;if(r&&r.parentNode){var t=r.parentNode;t.insertBefore(this.canvas,r);t.removeChild(r)}}},stopFullscreen:function(){var r=this.fullscreen;if(!r.available)return this.emit(c.FULLSCREEN_UNSUPPORTED),!1;if(r.active)document[r.cancel]();this.removeFullscreenTarget();this.getParentBounds();this.emit(c.LEAVE_FULLSCREEN);
this.refresh()},toggleFullscreen:function(r){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(r)},startListeners:function(){var r=this,t=this.listeners;t.orientationChange=function(){r.updateBounds();r._checkOrientation=!0;r.dirty=!0};t.windowResize=function(){r.updateBounds();r.dirty=!0};window.addEventListener("orientationchange",t.orientationChange,!1);window.addEventListener("resize",t.windowResize,!1);this.fullscreen.available&&(t.fullScreenChange=function(w){return r.onFullScreenChange(w)},
t.fullScreenError=function(w){return r.onFullScreenError(w)},["webkit","moz",""].forEach(function(w){document.addEventListener(w+"fullscreenchange",t.fullScreenChange,!1);document.addEventListener(w+"fullscreenerror",t.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.addEventListener("MSFullscreenError",t.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||
document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(r,t){this.parent&&(this._lastCheck+=t,this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0)},stopListeners:function(){var r=this.listeners;window.removeEventListener("orientationchange",r.orientationChange,!1);window.removeEventListener("resize",r.windowResize,!1);["webkit",
"moz",""].forEach(function(t){document.removeEventListener(t+"fullscreenchange",r.fullScreenChange,!1);document.removeEventListener(t+"fullscreenerror",r.fullScreenError,!1)});document.removeEventListener("MSFullscreenChange",r.fullScreenChange,!1);document.removeEventListener("MSFullscreenError",r.fullScreenError,!1)},destroy:function(){this.removeAllListeners();this.stopListeners();this.fullscreenTarget=this.parent=this.canvasBounds=this.canvas=this.game=null;this.parentSize.destroy();this.gameSize.destroy();
this.baseSize.destroy();this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===h.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===h.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});
p.exports=a},function(p,u,a){var h=a(18);u=a(0);var f=a(76),c=a(3),b=new u({initialize:function(d,g,e,l){void 0===d&&(d=0);void 0===g&&(g=d);void 0===e&&(e=0);void 0===l&&(l=null);this._width=d;this._height=g;this._parent=l;this.aspectMode=e;this.aspectRatio=0===g?1:d/g;this.minHeight=this.minWidth=0;this.maxHeight=this.maxWidth=Number.MAX_VALUE;this.snapTo=new c},setAspectMode:function(d){void 0===d&&(d=0);this.aspectMode=d;return this.setSize(this._width,this._height)},setSnap:function(d,g){void 0===
d&&(d=0);void 0===g&&(g=d);this.snapTo.set(d,g);return this.setSize(this._width,this._height)},setParent:function(d){this._parent=d;return this.setSize(this._width,this._height)},setMin:function(d,g){void 0===d&&(d=0);void 0===g&&(g=d);this.minWidth=h(d,0,this.maxWidth);this.minHeight=h(g,0,this.maxHeight);return this.setSize(this._width,this._height)},setMax:function(d,g){void 0===d&&(d=Number.MAX_VALUE);void 0===g&&(g=d);this.maxWidth=h(d,this.minWidth,Number.MAX_VALUE);this.maxHeight=h(g,this.minHeight,
Number.MAX_VALUE);return this.setSize(this._width,this._height)},setSize:function(d,g){void 0===d&&(d=0);void 0===g&&(g=d);switch(this.aspectMode){case b.NONE:this._width=this.getNewWidth(f(d,this.snapTo.x));this._height=this.getNewHeight(f(g,this.snapTo.y));this.aspectRatio=0===this._height?1:this._width/this._height;break;case b.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(f(d,this.snapTo.x));this._height=this.getNewHeight(1/this.aspectRatio*this._width,!1);break;case b.HEIGHT_CONTROLS_WIDTH:this._height=
this.getNewHeight(f(g,this.snapTo.y));this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case b.FIT:this.constrain(d,g,!0);break;case b.ENVELOP:this.constrain(d,g,!1)}return this},setAspectRatio:function(d){this.aspectRatio=d;return this.setSize(this._width,this._height)},resize:function(d,g){this._width=this.getNewWidth(f(d,this.snapTo.x));this._height=this.getNewHeight(f(g,this.snapTo.y));this.aspectRatio=0===this._height?1:this._width/this._height;return this},getNewWidth:function(d,
g){void 0===g&&(g=!0);d=h(d,this.minWidth,this.maxWidth);g&&this._parent&&d>this._parent.width&&(d=Math.max(this.minWidth,this._parent.width));return d},getNewHeight:function(d,g){void 0===g&&(g=!0);d=h(d,this.minHeight,this.maxHeight);g&&this._parent&&d>this._parent.height&&(d=Math.max(this.minHeight,this._parent.height));return d},constrain:function(d,g,e){void 0===d&&(d=0);void 0===g&&(g=d);void 0===e&&(e=!0);d=this.getNewWidth(d);g=this.getNewHeight(g);var l=this.snapTo,k=0===g?1:d/g;if(e&&this.aspectRatio>
k||!e&&this.aspectRatio<k)d=f(d,l.x),g=d/this.aspectRatio,0<l.y&&(g=f(g,l.y),d=g*this.aspectRatio);else if(e&&this.aspectRatio<k||!e&&this.aspectRatio>k)g=f(g,l.y),d=g*this.aspectRatio,0<l.x&&(d=f(d,l.x),g=1/this.aspectRatio*d);this._width=d;this._height=g;return this},fitTo:function(d,g){return this.constrain(d,g,!0)},envelop:function(d,g){return this.constrain(d,g,!1)},setWidth:function(d){return this.setSize(d,this._height)},setHeight:function(d){return this.setSize(this._width,d)},toString:function(){return"[{ Size (width="+
this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(d){d&&d.style&&(d.style.width=this._width+"px",d.style.height=this._height+"px")},copy:function(d){d.setAspectMode(this.aspectMode);d.aspectRatio=this.aspectRatio;return d.setSize(this.width,this.height)},destroy:function(){this.snapTo=this._parent=null},width:{get:function(){return this._width},set:function(d){this.setSize(d,this._height)}},height:{get:function(){return this._height},
set:function(d){this.setSize(this._width,d)}}});b.NONE=0;b.WIDTH_CONTROLS_HEIGHT=1;b.HEIGHT_CONTROLS_WIDTH=2;b.FIT=3;b.ENVELOP=4;p.exports=b},function(p,u,a){u=a(0);var h=a(144),f=a(20),c=a(22),b=a(6),d=a(95),g=a(1),e=a(418),l=a(204);a=new u({initialize:function(k,m){this.game=k;this.keys={};this.scenes=[];this._pending=[];this._start=[];this._queue=[];this._data={};this.isBooted=this.isProcessing=!1;this.customViewports=0;if(m){Array.isArray(m)||(m=[m]);for(var n=0;n<m.length;n++)this._pending.push({key:"default",
scene:m[n],autoStart:0===n,data:{}})}k.events.once(c.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var k;for(k=0;k<this._pending.length;k++){var m=this._pending[k];var n=m.key;var q=m.scene;var r;q instanceof e?r=this.createSceneFromInstance(n,q):"object"===typeof q?r=this.createSceneFromObject(n,q):"function"===typeof q&&(r=this.createSceneFromFunction(n,q));n=r.sys.settings.key;this.keys[n]=r;this.scenes.push(r);this._data[n]&&(r.sys.settings.data=this._data[n].data,this._data[n].autoStart&&
(m.autoStart=!0));(m.autoStart||r.sys.settings.active)&&this._start.push(n)}this._pending.length=0;this._data={};this.isBooted=!0;for(k=0;k<this._start.length;k++)m=this._start[k],this.start(m);this._start.length=0}},processQueue:function(){var k=this._pending.length,m=this._queue.length;if(0!==k||0!==m)if(k){for(m=0;m<k;m++){var n=this._pending[m];this.add(n.key,n.scene,n.autoStart,n.data)}for(m=0;m<this._start.length;m++)n=this._start[m],this.start(n);this._start.length=0;this._pending.length=0}else{for(m=
0;m<this._queue.length;m++)n=this._queue[m],this[n.op](n.keyA,n.keyB);this._queue.length=0}},add:function(k,m,n,q){void 0===n&&(n=!1);void 0===q&&(q={});if(this.isProcessing||!this.isBooted)return this._pending.push({key:k,scene:m,autoStart:n,data:q}),this.isBooted||(this._data[k]={data:q}),null;k=this.getKey(k,m);if(m instanceof e)var r=this.createSceneFromInstance(k,m);else"object"===typeof m?(m.key=k,r=this.createSceneFromObject(k,m)):"function"===typeof m&&(r=this.createSceneFromFunction(k,m));
r.sys.settings.data=q;k=r.sys.settings.key;this.keys[k]=r;this.scenes.push(r);if(n||r.sys.settings.active)this._pending.length?this._start.push(k):this.start(k);return r},remove:function(k){if(this.isProcessing)this._queue.push({op:"remove",keyA:k,keyB:null});else{k=this.getScene(k);if(!k||k.sys.isTransitioning())return this;var m=this.scenes.indexOf(k),n=k.sys.settings.key;-1<m&&(delete this.keys[n],this.scenes.splice(m,1),-1<this._start.indexOf(n)&&(m=this._start.indexOf(n),this._start.splice(m,
1)),k.sys.destroy())}return this},bootScene:function(k){var m=k.sys,n=m.settings;m.sceneUpdate=g;k.init&&(k.init.call(k,n.data),n.status=h.INIT,n.isTransition&&m.events.emit(f.TRANSITION_INIT,n.transitionFrom,n.transitionDuration));if(m.load){var q=m.load;q.reset()}q&&k.preload?(k.preload.call(k),0===q.list.size?this.create(k):(n.status=h.LOADING,q.once(d.COMPLETE,this.loadComplete,this),q.start())):this.create(k)},loadComplete:function(k){this.create(k.scene)},payloadComplete:function(k){this.bootScene(k.scene)},
update:function(k,m){this.processQueue();this.isProcessing=!0;for(var n=this.scenes.length-1;0<=n;n--){var q=this.scenes[n].sys;q.settings.status>h.START&&q.settings.status<=h.RUNNING&&q.step(k,m)}},render:function(k){for(var m=0;m<this.scenes.length;m++){var n=this.scenes[m].sys;n.settings.visible&&n.settings.status>=h.LOADING&&n.settings.status<h.SLEEPING&&n.render(k)}this.isProcessing=!1},create:function(k){var m=k.sys,n=m.settings;if(k.create&&(n.status=h.CREATING,k.create.call(k,n.data),n.status===
h.DESTROYED))return;n.isTransition&&m.events.emit(f.TRANSITION_START,n.transitionFrom,n.transitionDuration);k.update&&(m.sceneUpdate=k.update);n.status=h.RUNNING;m.events.emit(f.CREATE,k)},createSceneFromFunction:function(k,m){m=new m;if(m instanceof e){var n=m.sys.settings.key;""!==n&&(k=n);if(this.keys.hasOwnProperty(k))throw Error("Cannot add a Scene with duplicate key: "+k);return this.createSceneFromInstance(k,m)}m.sys=new l(m);m.sys.settings.key=k;m.sys.init(this.game);return m},createSceneFromInstance:function(k,
m){""===m.sys.settings.key&&(m.sys.settings.key=k);m.sys.init(this.game);return m},createSceneFromObject:function(k,m){var n=new e(m);""===n.sys.settings.key&&(n.sys.settings.key=k);n.sys.init(this.game);k=["init","preload","create","update","render"];for(var q=0;q<k.length;q++){var r=b(m,k[q],null);r&&(n[k[q]]=r)}if(m.hasOwnProperty("extend"))for(var t in m.extend)m.extend.hasOwnProperty(t)&&(k=m.extend[t],"data"===t&&n.hasOwnProperty("data")&&"object"===typeof k?n.data.merge(k):"sys"!==t&&(n[t]=
k));return n},getKey:function(k,m){k||(k="default");if("function"===typeof m)return k;m instanceof e?k=m.sys.settings.key:"object"===typeof m&&m.hasOwnProperty("key")&&(k=m.key);if(this.keys.hasOwnProperty(k))throw Error("Cannot add a Scene with duplicate key: "+k);return k},getScenes:function(k,m){void 0===k&&(k=!0);void 0===m&&(m=!1);for(var n=[],q=this.scenes,r=0;r<q.length;r++){var t=q[r];t&&(!k||k&&t.sys.isActive())&&n.push(t)}return m?n.reverse():n},getScene:function(k){if("string"===typeof k){if(this.keys[k])return this.keys[k]}else for(var m=
0;m<this.scenes.length;m++)if(k===this.scenes[m])return k;return null},isActive:function(k){return(k=this.getScene(k))?k.sys.isActive():null},isPaused:function(k){return(k=this.getScene(k))?k.sys.isPaused():null},isVisible:function(k){return(k=this.getScene(k))?k.sys.isVisible():null},isSleeping:function(k){return(k=this.getScene(k))?k.sys.isSleeping():null},pause:function(k,m){(k=this.getScene(k))&&k.sys.pause(m);return this},resume:function(k,m){(k=this.getScene(k))&&k.sys.resume(m);return this},
sleep:function(k,m){(k=this.getScene(k))&&!k.sys.isTransitioning()&&k.sys.sleep(m);return this},wake:function(k,m){(k=this.getScene(k))&&k.sys.wake(m);return this},run:function(k,m){var n=this.getScene(k);if(!n){for(n=0;n<this._pending.length;n++)if(this._pending[n].key===k){this.queueOp("start",k,m);break}return this}n.sys.isSleeping()?n.sys.wake(m):n.sys.isPaused()?n.sys.resume(m):this.start(k,m)},start:function(k,m){if(!this.isBooted)return this._data[k]={autoStart:!0,data:m},this;if(k=this.getScene(k)){var n=
k.sys;if(n.isActive()||n.isPaused())n.shutdown(),n.sceneUpdate=g,n.start(m);else{n.sceneUpdate=g;n.start(m);if(n.load)var q=n.load;if(q&&n.settings.hasOwnProperty("pack")&&(q.reset(),q.addPack({payload:n.settings.pack})))return n.settings.status=h.LOADING,q.once(d.COMPLETE,this.payloadComplete,this),q.start(),this}this.bootScene(k)}return this},stop:function(k,m){(k=this.getScene(k))&&!k.sys.isTransitioning()&&k.sys.shutdown(m);return this},switch:function(k,m){var n=this.getScene(k),q=this.getScene(m);
n&&q&&n!==q&&(this.sleep(k),this.isSleeping(m)?this.wake(m):this.start(m));return this},getAt:function(k){return this.scenes[k]},getIndex:function(k){k=this.getScene(k);return this.scenes.indexOf(k)},bringToTop:function(k){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:k,keyB:null});else{var m=this.getIndex(k);-1!==m&&m<this.scenes.length&&(k=this.getScene(k),this.scenes.splice(m,1),this.scenes.push(k))}return this},sendToBack:function(k){if(this.isProcessing)this._queue.push({op:"sendToBack",
keyA:k,keyB:null});else{var m=this.getIndex(k);-1!==m&&0<m&&(k=this.getScene(k),this.scenes.splice(m,1),this.scenes.unshift(k))}return this},moveDown:function(k){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:k,keyB:null});else{var m=this.getIndex(k);if(0<m){var n=m-1;k=this.getScene(k);var q=this.getAt(n);this.scenes[m]=q;this.scenes[n]=k}}return this},moveUp:function(k){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:k,keyB:null});else{var m=this.getIndex(k);if(m<this.scenes.length-
1){var n=m+1;k=this.getScene(k);var q=this.getAt(n);this.scenes[m]=q;this.scenes[n]=k}}return this},moveAbove:function(k,m){if(k===m)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:k,keyB:m});else if(k=this.getIndex(k),m=this.getIndex(m),-1!==k&&-1!==m){var n=this.getAt(m);this.scenes.splice(m,1);this.scenes.splice(k+1,0,n)}return this},moveBelow:function(k,m){if(k===m)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:k,keyB:m});else if(k=this.getIndex(k),
m=this.getIndex(m),-1!==k&&-1!==m){var n=this.getAt(m);this.scenes.splice(m,1);0===k?this.scenes.unshift(n):this.scenes.splice(k,0,n)}return this},queueOp:function(k,m,n){this._queue.push({op:k,keyA:m,keyB:n});return this},swapPosition:function(k,m){if(k===m)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:k,keyB:m});else if(k=this.getIndex(k),m=this.getIndex(m),k!==m&&-1!==k&&-1!==m){var n=this.getAt(k);this.scenes[k]=this.scenes[m];this.scenes[m]=n}return this},dump:function(){for(var k=
[],m="pending init start loading creating running paused sleeping shutdown destroyed".split(" "),n=0;n<this.scenes.length;n++){var q=this.scenes[n].sys,r=!q.settings.visible||q.settings.status!==h.RUNNING&&q.settings.status!==h.PAUSED?"[-] ":"[*] ";r+=q.settings.key+" ("+m[q.settings.status]+")";k.push(r)}console.log(k.join("\n"))},destroy:function(){for(var k=0;k<this.scenes.length;k++)this.scenes[k].sys.destroy();this.update=g;this.scenes=[];this._pending=[];this._start=[];this._queue=[];this.game=
null}});p.exports=a},function(p,u,a){u=a(0);var h=a(204);a=new u({initialize:function(f){this.sys=new h(this,f)},update:function(){}});p.exports=a},function(p,u,a){var h=a(2),f=a(205);p.exports=function(c){var b=c.game.config.defaultPhysicsSystem;c=h(c.settings,"physics",!1);if(b||c){var d=[];b&&d.push(f(b+"Physics"));if(c)for(var g in c)g=f(g.concat("Physics")),-1===d.indexOf(g)&&d.push(g);return d}}},function(p,u,a){var h=a(2);p.exports=function(f){var c=f.plugins.getDefaultScenePlugins();f=h(f.settings,
"plugins",!1);return Array.isArray(f)?f:c?c:[]}},function(p,u,a){var h=a(144),f=a(6),c=a(127),b=a(978);p.exports={create:function(d){"string"===typeof d?d={key:d}:void 0===d&&(d={});return{status:h.PENDING,key:f(d,"key",""),active:f(d,"active",!1),visible:f(d,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:f(d,"pack",!1),cameras:f(d,"cameras",null),map:f(d,"map",c(b,f(d,"mapAdd",{}))),physics:f(d,"physics",{}),loader:f(d,"loader",
{}),plugins:f(d,"plugins",!1),input:f(d,"input",{})}}}},function(p,u,a){var h=a(31),f=a(423);u=a(0);var c=a(38),b=a(33),d=a(9),g=a(106),e=a(22),l=a(388),k=a(6),m=a(425),n=a(206);a=new u({Extends:d,initialize:function(q){d.call(this);this.game=q;this.name="TextureManager";this.list={};this._tempCanvas=h.create2D(this,1,1);this._tempContext=this._tempCanvas.getContext("2d");this._pending=0;q.events.once(e.BOOT,this.boot,this)},boot:function(){this._pending=3;this.on(g.LOAD,this.updatePending,this);
this.on(g.ERROR,this.updatePending,this);var q=this.game.config;this.addBase64("__DEFAULT",q.defaultImage);this.addBase64("__MISSING",q.missingImage);this.addBase64("__WHITE",q.whiteImage);this.game.events.once(e.DESTROY,this.destroy,this)},updatePending:function(){this._pending--;0===this._pending&&(this.off(g.LOAD),this.off(g.ERROR),this.emit(g.READY))},checkKey:function(q){return this.exists(q)?(console.error("Texture key already in use: "+q),!1):!0},remove:function(q){if("string"===typeof q)if(this.exists(q))q=
this.get(q);else return console.warn("No texture found matching key: "+q),this;this.list.hasOwnProperty(q.key)&&(q.destroy(),this.emit(g.REMOVE,q.key));return this},removeKey:function(q){this.list.hasOwnProperty(q)&&delete this.list[q];return this},addBase64:function(q,r){if(this.checkKey(q)){var t=this,w=new Image;w.onerror=function(){t.emit(g.ERROR,q)};w.onload=function(){var v=t.create(q,w);m.Image(v,0);t.emit(g.ADD,q,v);t.emit(g.LOAD,q,v)};w.src=r}return this},getBase64:function(q,r,t,w){void 0===
t&&(t="image/png");void 0===w&&(w=.92);var v="";(q=this.getFrame(q,r))&&(q.source.isRenderTexture||q.source.isGLTexture)?console.warn("Cannot getBase64 from WebGL Texture"):q&&(v=q.canvasData,r=h.create2D(this,v.width,v.height),r.getContext("2d").drawImage(q.source.image,v.x,v.y,v.width,v.height,0,0,v.width,v.height),v=r.toDataURL(t,w),h.remove(r));return v},addImage:function(q,r,t){var w=null;this.checkKey(q)&&(w=this.create(q,r),m.Image(w,0),t&&w.setDataSource(t),this.emit(g.ADD,q,w));return w},
addGLTexture:function(q,r,t,w){var v=null;this.checkKey(q)&&(void 0===t&&(t=r.width),void 0===w&&(w=r.height),v=this.create(q,r,t,w),v.add("__BASE",0,0,0,t,w),this.emit(g.ADD,q,v));return v},addRenderTexture:function(q,r){var t=null;this.checkKey(q)&&(t=this.create(q,r),t.add("__BASE",0,0,0,r.width,r.height),this.emit(g.ADD,q,t));return t},generate:function(q,r){if(this.checkKey(q)){var t=h.create(this,1,1);r.canvas=t;l(r);return this.addCanvas(q,t)}return null},createCanvas:function(q,r,t){void 0===
r&&(r=256);void 0===t&&(t=256);return this.checkKey(q)?(r=h.create(this,r,t,b.CANVAS,!0),this.addCanvas(q,r)):null},addCanvas:function(q,r,t){void 0===t&&(t=!1);var w=null;t?w=new f(this,q,r,r.width,r.height):this.checkKey(q)&&(w=new f(this,q,r,r.width,r.height),this.list[q]=w,this.emit(g.ADD,q,w));return w},addAtlas:function(q,r,t,w){return Array.isArray(t.textures)||Array.isArray(t.frames)?this.addAtlasJSONArray(q,r,t,w):this.addAtlasJSONHash(q,r,t,w)},addAtlasJSONArray:function(q,r,t,w){var v=
null;if(this.checkKey(q)){v=this.create(q,r);if(Array.isArray(t)){r=1===t.length;for(var x=0;x<v.source.length;x++)m.JSONArray(v,x,r?t[0]:t[x])}else m.JSONArray(v,0,t);w&&v.setDataSource(w);this.emit(g.ADD,q,v)}return v},addAtlasJSONHash:function(q,r,t,w){var v=null;if(this.checkKey(q)){v=this.create(q,r);if(Array.isArray(t))for(r=0;r<t.length;r++)m.JSONHash(v,r,t[r]);else m.JSONHash(v,0,t);w&&v.setDataSource(w);this.emit(g.ADD,q,v)}return v},addAtlasXML:function(q,r,t,w){var v=null;this.checkKey(q)&&
(v=this.create(q,r),m.AtlasXML(v,0,t),w&&v.setDataSource(w),this.emit(g.ADD,q,v));return v},addUnityAtlas:function(q,r,t,w){var v=null;this.checkKey(q)&&(v=this.create(q,r),m.UnityYAML(v,0,t),w&&v.setDataSource(w),this.emit(g.ADD,q,v));return v},addSpriteSheet:function(q,r,t){var w=null;this.checkKey(q)&&(w=this.create(q,r),m.SpriteSheet(w,0,0,0,w.source[0].width,w.source[0].height,t),this.emit(g.ADD,q,w));return w},addSpriteSheetFromAtlas:function(q,r){if(!this.checkKey(q))return null;var t=k(r,
"atlas",null),w=k(r,"frame",null);if(t&&w&&(t=this.get(t).get(w)))return w=this.create(q,t.source.image),t.trimmed?m.SpriteSheetFromAtlas(w,t,r):m.SpriteSheet(w,0,t.cutX,t.cutY,t.cutWidth,t.cutHeight,r),this.emit(g.ADD,q,w),w},create:function(q,r,t,w){var v=null;this.checkKey(q)&&(v=new n(this,q,r,t,w),this.list[q]=v);return v},exists:function(q){return this.list.hasOwnProperty(q)},get:function(q){void 0===q&&(q="__DEFAULT");return this.list[q]?this.list[q]:q instanceof n?q:this.list.__MISSING},cloneFrame:function(q,
r){if(this.list[q])return this.list[q].get(r).clone()},getFrame:function(q,r){if(this.list[q])return this.list[q].get(r)},getTextureKeys:function(){var q=[],r;for(r in this.list)"__DEFAULT"!==r&&"__MISSING"!==r&&q.push(r);return q},getPixel:function(q,r,t,w){if(t=this.getFrame(t,w))if(q-=t.x,r-=t.y,w=t.data.cut,q+=w.x,r+=w.y,q>=w.x&&q<w.r&&r>=w.y&&r<w.b)return w=this._tempContext,w.clearRect(0,0,1,1),w.drawImage(t.source.image,q,r,1,1,0,0,1,1),q=w.getImageData(0,0,1,1),new c(q.data[0],q.data[1],q.data[2],
q.data[3]);return null},getPixelAlpha:function(q,r,t,w){if(t=this.getFrame(t,w))if(q-=t.x,r-=t.y,w=t.data.cut,q+=w.x,r+=w.y,q>=w.x&&q<w.r&&r>=w.y&&r<w.b)return w=this._tempContext,w.clearRect(0,0,1,1),w.drawImage(t.source.image,q,r,1,1,0,0,1,1),w.getImageData(0,0,1,1).data[3];return null},setTexture:function(q,r,t){this.list[r]&&(q.texture=this.list[r],q.frame=q.texture.get(t));return q},renameTexture:function(q,r){var t=this.get(q);return t&&q!==r?(t.key=r,this.list[r]=t,delete this.list[q],!0):
!1},each:function(q,r){for(var t=[null],w=1;w<arguments.length;w++)t.push(arguments[w]);for(var v in this.list)t[0]=this.list[v],q.apply(r,t)},destroy:function(){for(var q in this.list)this.list[q].destroy();this.list={};this.game=null;h.remove(this._tempCanvas)}});p.exports=a},function(p,u,a){u=a(0);var h=a(18),f=a(38),c=a(33),b=a(138),d=a(206);a=new u({Extends:d,initialize:function(g,e,l,k,m){d.call(this,g,e,l,k,m);this.add("__BASE",0,0,0,k,m);this._source=this.frames.__BASE.source;this.canvas=
this._source.image;this.context=this.canvas.getContext("2d");this.width=k;this.height=m;this.imageData=this.context.getImageData(0,0,k,m);this.data=null;this.imageData&&(this.data=this.imageData.data);this.pixels=null;this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){this.imageData=
this.context.getImageData(0,0,this.width,this.height);this.data=this.imageData.data;this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data;this.manager.game.config.renderType===c.WEBGL&&this.refresh();return this},draw:function(g,e,l){this.context.drawImage(l,g,e);return this.update()},drawFrame:function(g,
e,l,k){void 0===l&&(l=0);void 0===k&&(k=0);if(g=this.manager.getFrame(g,e)){e=g.canvasData;var m=g.cutWidth,n=g.cutHeight,q=g.source.resolution;this.context.drawImage(g.source.image,e.x,e.y,m,n,l,k,m/q,n/q);return this.update()}return this},setPixel:function(g,e,l,k,m,n){void 0===n&&(n=255);g=Math.abs(Math.floor(g));e=Math.abs(Math.floor(e));if(-1<this.getIndex(g,e)){var q=this.context.getImageData(g,e,1,1);q.data[0]=l;q.data[1]=k;q.data[2]=m;q.data[3]=n;this.context.putImageData(q,g,e)}return this},
putData:function(g,e,l,k,m,n,q){void 0===k&&(k=0);void 0===m&&(m=0);void 0===n&&(n=g.width);void 0===q&&(q=g.height);this.context.putImageData(g,e,l,k,m,n,q);return this},getData:function(g,e,l,k){g=h(Math.floor(g),0,this.width-1);e=h(Math.floor(e),0,this.height-1);l=h(l,1,this.width-g);k=h(k,1,this.height-e);return this.context.getImageData(g,e,l,k)},getPixel:function(g,e,l){l||(l=new f);g=this.getIndex(g,e);-1<g&&(e=this.data,l.setTo(e[g+0],e[g+1],e[g+2],e[g+3]));return l},getPixels:function(g,
e,l,k){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=this.width);void 0===k&&(k=l);g=Math.abs(Math.round(g));e=Math.abs(Math.round(e));var m=h(g,0,this.width);g=h(g+l,0,this.width);var n=h(e,0,this.height);e=h(e+k,0,this.height);k=new f;for(l=[];n<e;n++){for(var q=[],r=m;r<g;r++)k=this.getPixel(r,n,k),q.push({x:r,y:n,color:k.color,alpha:k.alphaGL});l.push(q)}return l},getIndex:function(g,e){g=Math.abs(Math.round(g));e=Math.abs(Math.round(e));return g<this.width&&e<this.height?4*(g+e*this.width):
-1},refresh:function(){this._source.update();return this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(g,e,l,k){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=this.width);void 0===k&&(k=this.height);this.context.clearRect(g,e,l,k);return this.update()},setSize:function(g,e){void 0===e&&(e=g);if(g!==this.width||e!==this.height)this.canvas.width=g,this.canvas.height=e,this._source.width=g,this._source.height=e,this._source.isPowerOf2=b(g,e),
this.frames.__BASE.setSize(g,e,0,0),this.width=g,this.height=e,this.refresh();return this},destroy:function(){d.prototype.destroy.call(this);this.buffer=this.pixels=this.data=this.imageData=this.context=this.canvas=this._source=null}});p.exports=a},function(p,u,a){var h=a(31);u=a(0);var f=a(138),c=a(168);a=new u({initialize:function(b,d,g,e,l){void 0===l&&(l=!1);var k=b.manager.game;this.renderer=k.renderer;this.texture=b;this.image=this.source=d;this.compressionAlgorithm=null;this.resolution=1;this.width=
g||d.naturalWidth||d.videoWidth||d.width||0;this.height=e||d.naturalHeight||d.videoHeight||d.height||0;this.scaleMode=c.DEFAULT;this.isCanvas=d instanceof HTMLCanvasElement;this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&d instanceof HTMLVideoElement;this.isRenderTexture="RenderTexture"===d.type;this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&d instanceof WebGLTexture;this.isPowerOf2=f(this.width,this.height);this.glTexture=null;this.glIndex=0;this.glIndexCounter=-1;this.flipY=l;this.init(k)},
init:function(b){var d=this.renderer;d&&(d.gl?this.isCanvas?this.glTexture=d.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=d.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=d.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.glTexture=this.isGLTexture?this.source:d.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas));
b.config.antialias||this.setFilter(1)},setFilter:function(b){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,b);this.scaleMode=b},setFlipY:function(b){void 0===b&&(b=!0);this.flipY=b;return this},update:function(){var b=this.renderer.gl;b&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):b&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,
!0);this.isCanvas&&h.remove(this.image);this.glTexture=this.image=this.source=this.texture=this.renderer=null}});p.exports=a},function(p,u,a){p.exports={AtlasXML:a(979),Canvas:a(980),Image:a(981),JSONArray:a(982),JSONHash:a(983),SpriteSheet:a(984),SpriteSheetFromAtlas:a(985),UnityYAML:a(986)}},function(p,u,a){var h=a(427),f=a(430),c=a(432);p.exports={create:function(b){var d=b.config.audio,g=b.device.audio;return d.noAudio||!g.webAudio&&!g.audioData?new f(b):g.webAudio&&!d.disableWebAudio?new c(b):
new h(b)}}},function(p,u,a){var h=a(145);u=a(0);var f=a(70),c=a(429);a=new u({Extends:h,initialize:function(b){this.override=!0;this.audioPlayDelay=.1;this.loopEndOffset=.05;this.onBlurPausedSounds=[];this.lockedActionsQueue=(this.locked="ontouchstart"in window)?[]:null;this._mute=!1;this._volume=1;h.call(this,b)},add:function(b,d){b=new c(this,b,d);this.sounds.push(b);return b},unlock:function(){this.locked=!1;var b=this;this.game.cache.audio.entries.each(function(l,k){for(l=0;l<k.length;l++)if("true"===
k[l].dataset.locked)return b.locked=!0,!1;return!0});if(this.locked){var d=!1,g=function(){d=!0},e=function(){if(d)d=!1;else{document.body.removeEventListener("touchmove",g);document.body.removeEventListener("touchend",e);var l=[];b.game.cache.audio.entries.each(function(m,n){for(m=0;m<n.length;m++){var q=n[m];"true"===q.dataset.locked&&l.push(q)}return!0});if(0!==l.length){var k=l[l.length-1];k.oncanplaythrough=function(){k.oncanplaythrough=null;l.forEach(function(m){m.dataset.locked="false"});b.unlocked=
!0};l.forEach(function(m){m.load()})}}};this.once(f.UNLOCKED,function(){for(this.forEachActiveSound(function(k){null===k.currentMarker&&0===k.duration&&(k.duration=k.tags[0].duration);k.totalDuration=k.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this);document.body.addEventListener("touchmove",g,!1);document.body.addEventListener("touchend",e,!1)}},onBlur:function(){this.forEachActiveSound(function(b){b.isPlaying&&
(this.onBlurPausedSounds.push(b),b.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(b){b.onFocus()});this.onBlurPausedSounds.length=0},destroy:function(){h.prototype.destroy.call(this);this.onBlurPausedSounds.length=0;this.onBlurPausedSounds=null},isLocked:function(b,d,g){return"true"===b.tags[0].dataset.locked?(this.lockedActionsQueue.push({sound:b,prop:d,value:g}),!0):!1},setMute:function(b){this.mute=b;return this},mute:{get:function(){return this._mute},set:function(b){this._mute=
b;this.forEachActiveSound(function(d){d.updateMute()});this.emit(f.GLOBAL_MUTE,this,b)}},setVolume:function(b){this.volume=b;return this},volume:{get:function(){return this._volume},set:function(b){this._volume=b;this.forEachActiveSound(function(d){d.updateVolume()});this.emit(f.GLOBAL_VOLUME,this,b)}}});p.exports=a},function(p,u,a){var h=a(78);p.exports=function(f,c,b,d,g){void 0===d&&(d=0);void 0===g&&(g=f.length);if(h(f,d,g))for(;d<g;d++){var e=f[d];if(!c||c&&void 0===b&&e.hasOwnProperty(c)||c&&
void 0!==b&&e[c]===b)return e}return null}},function(p,u,a){var h=a(146);u=a(0);var f=a(70),c=a(18);a=new u({Extends:h,initialize:function(b,d,g){void 0===g&&(g={});this.tags=b.game.cache.audio.get(d);if(!this.tags)throw Error('There is no audio asset with key "'+d+'" in the audio cache');this.audio=null;this.previousTime=this.startTime=0;this.duration=this.tags[0].duration;this.totalDuration=this.tags[0].duration;h.call(this,b,d,g)},play:function(b,d){if(this.manager.isLocked(this,"play",[b,d])||
!h.prototype.play.call(this,b,d)||!this.pickAndPlayAudioTag())return!1;this.emit(f.PLAY,this);return!0},pause:function(){if(this.manager.isLocked(this,"pause")||0<this.startTime||!h.prototype.pause.call(this))return!1;this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0);this.stopAndReleaseAudioTag();this.emit(f.PAUSE,this);return!0},resume:function(){if(this.manager.isLocked(this,"resume")||0<this.startTime||!h.prototype.resume.call(this)||!this.pickAndPlayAudioTag())return!1;
this.emit(f.RESUME,this);return!0},stop:function(){if(this.manager.isLocked(this,"stop")||!h.prototype.stop.call(this))return!1;this.stopAndReleaseAudioTag();this.emit(f.STOP,this);return!0},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var b=this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+this.currentConfig.seek;this.previousTime=d;this.audio.currentTime=d;this.applyConfig();0===b?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):
(this.startTime=window.performance.now()+1E3*b,this.audio.paused||this.audio.pause());this.resetConfig();return!0},pickAudioTag:function(){if(this.audio)return!0;for(var b=0;b<this.tags.length;b++){var d=this.tags[b];if("false"===d.dataset.used)return d.dataset.used="true",this.audio=d,!0}if(!this.manager.override)return!1;var g=[];this.manager.forEachActiveSound(function(e){e.key===this.key&&e.audio&&g.push(e)},this);g.sort(function(e,l){return e.loop===l.loop?l.seek/l.duration-e.seek/e.duration:
e.loop?1:-1});b=g[0];this.audio=b.audio;b.reset();b.audio=null;b.startTime=0;b.previousTime=0;return!0},playCatchPromise:function(){var b=this.audio.play();b&&b.catch(function(d){console.warn(d)})},stopAndReleaseAudioTag:function(){this.previousTime=this.startTime=0;this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){h.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1;this.isPaused=!0;this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?
this.currentMarker.start:0);this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1E3);this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0;this.isPaused=!1;this.pickAndPlayAudioTag()},update:function(b){if(this.isPlaying)if(0<this.startTime)this.startTime<b-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,b-this.startTime)/1E3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{b=this.currentMarker?this.currentMarker.start:
0;var d=b+this.duration,g=this.audio.currentTime;if(this.currentConfig.loop)g>=d-this.manager.loopEndOffset?(this.audio.currentTime=b+Math.max(0,g-d),g=this.audio.currentTime):g<b&&(this.audio.currentTime+=b,g=this.audio.currentTime),g<this.previousTime&&this.emit(f.LOOPED,this);else if(g>=d){this.reset();this.stopAndReleaseAudioTag();this.emit(f.COMPLETE,this);return}this.previousTime=g}},destroy:function(){h.prototype.destroy.call(this);this.tags=null;this.audio&&this.stopAndReleaseAudioTag()},
updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=c(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){h.prototype.calculateRate.call(this);this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(b){this.currentConfig.mute=b;this.manager.isLocked(this,"mute",b)||(this.updateMute(),this.emit(f.MUTE,this,b))}},
setMute:function(b){this.mute=b;return this},volume:{get:function(){return this.currentConfig.volume},set:function(b){this.currentConfig.volume=b;this.manager.isLocked(this,"volume",b)||(this.updateVolume(),this.emit(f.VOLUME,this,b))}},setVolume:function(b){this.volume=b;return this},rate:{get:function(){return this.currentConfig.rate},set:function(b){this.currentConfig.rate=b;this.manager.isLocked(this,f.RATE,b)||(this.calculateRate(),this.emit(f.RATE,this,b))}},setRate:function(b){this.rate=b;
return this},detune:{get:function(){return this.currentConfig.detune},set:function(b){this.currentConfig.detune=b;this.manager.isLocked(this,f.DETUNE,b)||(this.calculateRate(),this.emit(f.DETUNE,this,b))}},setDetune:function(b){this.detune=b;return this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(b){this.manager.isLocked(this,"seek",b)||0<this.startTime||!this.isPlaying&&!this.isPaused||
(b=Math.min(Math.max(0,b),this.duration),this.isPlaying?(this.previousTime=b,this.audio.currentTime=b):this.isPaused&&(this.currentConfig.seek=b),this.emit(f.SEEK,this,b))}},setSeek:function(b){this.seek=b;return this},loop:{get:function(){return this.currentConfig.loop},set:function(b){this.currentConfig.loop=b;this.manager.isLocked(this,"loop",b)||(this.audio&&(this.audio.loop=b),this.emit(f.LOOP,this,b))}},setLoop:function(b){this.loop=b;return this},pan:{get:function(){return this.currentConfig.pan},
set:function(b){this.currentConfig.pan=b;this.emit(f.PAN,this,b)}},setPan:function(b){this.pan=b;return this}});p.exports=a},function(p,u,a){var h=a(145);u=a(0);var f=a(9),c=a(431);a=a(1);a=new u({Extends:f,initialize:function(b){f.call(this);this.game=b;this.sounds=[];this.mute=!1;this.rate=this.volume=1;this.detune=0;this.pauseOnBlur=!0;this.locked=!1},add:function(b,d){b=new c(this,b,d);this.sounds.push(b);return b},addAudioSprite:function(b,d){b=this.add(b,d);b.spritemap={};return b},play:function(b,
d){return!1},playAudioSprite:function(b,d,g){return!1},remove:function(b){return h.prototype.remove.call(this,b)},removeByKey:function(b){return h.prototype.removeByKey.call(this,b)},pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,forEachActiveSound:function(b,d){h.prototype.forEachActiveSound.call(this,b,d)},destroy:function(){h.prototype.destroy.call(this)}});p.exports=a},function(p,u,a){var h=a(146);u=a(0);var f=a(9),c=a(17);a=function(){return!1};var b=function(){return this};
u=new u({Extends:f,initialize:function(d,g,e){void 0===e&&(e={});f.call(this);this.manager=d;this.key=g;this.isPaused=this.isPlaying=!1;this.totalRate=1;this.totalDuration=this.duration=0;this.currentConfig=this.config=c({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},e);this.mute=!1;this.rate=this.volume=1;this.seek=this.detune=0;this.loop=!1;this.pan=0;this.markers={};this.currentMarker=null;this.pendingRemove=!1},addMarker:a,updateMarker:a,removeMarker:function(){return null},play:a,
pause:a,resume:a,stop:a,destroy:function(){h.prototype.destroy.call(this)},setMute:b,setVolume:b,setRate:b,setDetune:b,setSeek:b,setLoop:b,setPan:b});p.exports=u},function(p,u,a){var h=a(433),f=a(145);u=a(0);var c=a(70),b=a(22),d=a(434);a=new u({Extends:f,initialize:function(g){this.context=this.createAudioContext(g);this.masterMuteNode=this.context.createGain();this.masterVolumeNode=this.context.createGain();this.masterMuteNode.connect(this.masterVolumeNode);this.masterVolumeNode.connect(this.context.destination);
this.destination=this.masterMuteNode;this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window);f.call(this,g);if(this.locked&&g.isBooted)this.unlock();else g.events.once(b.BOOT,this.unlock,this)},createAudioContext:function(g){g=g.config.audio;if(g.context)return g.context.resume(),g.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(g){this.context&&
this.context.close();this.masterMuteNode&&this.masterMuteNode.disconnect();this.masterVolumeNode&&this.masterVolumeNode.disconnect();this.context=g;this.masterMuteNode=g.createGain();this.masterVolumeNode=g.createGain();this.masterMuteNode.connect(this.masterVolumeNode);this.masterVolumeNode.connect(g.destination);this.destination=this.masterMuteNode;return this},add:function(g,e){g=new d(this,g,e);this.sounds.push(g);return g},decodeAudio:function(g,e){g=Array.isArray(g)?g:[{key:g,data:e}];var l=
this.game.cache.audio,k=g.length;for(e=0;e<g.length;e++){var m=g[e],n=m.key;m=m.data;"string"===typeof m&&(m=h(m));var q=function(r,t){l.add(r,t);this.emit(c.DECODED,r);k--;0===k&&this.emit(c.DECODED_ALL)}.bind(this,n);n=function(r,t){console.error("Error decoding audio: "+r+" - ",t?t.message:"");k--;0===k&&this.emit(c.DECODED_ALL)}.bind(this,n);this.context.decodeAudioData(m,q,n)}},unlock:function(){var g=this,e=document.body,l=function m(){if(g.context&&e){var n=e.removeEventListener;g.context.resume().then(function(){n("touchstart",
m);n("touchend",m);n("click",m);n("keydown",m);g.unlocked=!0},function(){n("touchstart",m);n("touchend",m);n("click",m);n("keydown",m)})}};e&&(e.addEventListener("touchstart",l,!1),e.addEventListener("touchend",l,!1),e.addEventListener("click",l,!1),e.addEventListener("keydown",l,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var g=this.context;"suspended"!==g.state&&"interrupted"!==g.state||this.locked||g.resume()},update:function(g,e){f.prototype.update.call(this,
g,e);(g=this.context)&&"interrupted"===g.state&&g.resume()},destroy:function(){this.destination=null;this.masterVolumeNode.disconnect();this.masterVolumeNode=null;this.masterMuteNode.disconnect();this.masterMuteNode=null;if(this.game.config.audio.context)this.context.suspend();else{var g=this;this.context.close().then(function(){g.context=null})}f.prototype.destroy.call(this)},setMute:function(g){this.mute=g;return this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(g){this.masterMuteNode.gain.setValueAtTime(g?
0:1,0);this.emit(c.GLOBAL_MUTE,this,g)}},setVolume:function(g){this.volume=g;return this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(g){this.masterVolumeNode.gain.setValueAtTime(g,0);this.emit(c.GLOBAL_VOLUME,this,g)}}});p.exports=a},function(p,u){var a=new Uint8Array(256);for(u=0;64>u;u++)a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(u)]=u;p.exports=function(h){h=h.substr(h.indexOf(",")+1);var f=h.length,c=.75*f,b=0;"="===h[f-1]&&
(c--,"="===h[f-2]&&c--);for(var d=new ArrayBuffer(c),g=new Uint8Array(d),e=0;e<f;e+=4){c=a[h.charCodeAt(e)];var l=a[h.charCodeAt(e+1)];var k=a[h.charCodeAt(e+2)];var m=a[h.charCodeAt(e+3)];g[b++]=c<<2|l>>4;g[b++]=(l&15)<<4|k>>2;g[b++]=(k&3)<<6|m&63}return d}},function(p,u,a){var h=a(146);u=a(0);var f=a(70);a=new u({Extends:h,initialize:function(c,b,d){void 0===d&&(d={});this.audioBuffer=c.game.cache.audio.get(b);if(!this.audioBuffer)throw Error('Audio key "'+b+'" missing from cache');this.loopSource=
this.source=null;this.muteNode=c.context.createGain();this.volumeNode=c.context.createGain();this.pannerNode=null;this.loopTime=this.startTime=this.playTime=0;this.rateUpdates=[];this.hasLooped=this.hasEnded=!1;this.muteNode.connect(this.volumeNode);c.context.createStereoPanner?(this.pannerNode=c.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(c.destination)):this.volumeNode.connect(c.destination);this.totalDuration=this.duration=this.audioBuffer.duration;
h.call(this,c,b,d)},play:function(c,b){if(!h.prototype.play.call(this,c,b))return!1;this.stopAndRemoveBufferSource();this.createAndStartBufferSource();this.emit(f.PLAY,this);return!0},pause:function(){if(this.manager.context.currentTime<this.startTime||!h.prototype.pause.call(this))return!1;this.currentConfig.seek=this.getCurrentTime();this.stopAndRemoveBufferSource();this.emit(f.PAUSE,this);return!0},resume:function(){if(this.manager.context.currentTime<this.startTime||!h.prototype.resume.call(this))return!1;
this.createAndStartBufferSource();this.emit(f.RESUME,this);return!0},stop:function(){if(!h.prototype.stop.call(this))return!1;this.stopAndRemoveBufferSource();this.emit(f.STOP,this);return!0},createAndStartBufferSource:function(){var c=this.currentConfig.seek,b=this.manager.context.currentTime+this.currentConfig.delay,d=(this.currentMarker?this.currentMarker.start:0)+c,g=this.duration-c;this.playTime=b-c;this.startTime=b;this.source=this.createBufferSource();this.applyConfig();this.source.start(Math.max(0,
b),Math.max(0,d),Math.max(0,g));this.resetConfig()},createAndStartLoopBufferSource:function(){var c=this.getLoopTime(),b=this.currentMarker?this.currentMarker.start:0,d=this.duration;this.loopTime=c;this.loopSource=this.createBufferSource();this.loopSource.playbackRate.setValueAtTime(this.totalRate,0);this.loopSource.start(Math.max(0,c),Math.max(0,b),Math.max(0,d))},createBufferSource:function(){var c=this,b=this.manager.context.createBufferSource();b.buffer=this.audioBuffer;b.connect(this.muteNode);
b.onended=function(d){d.target===c.source&&(c.currentConfig.loop?c.hasLooped=!0:c.hasEnded=!0)};return b},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null);this.startTime=this.playTime=0;this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null);this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0;this.rateUpdates.push({time:0,
rate:1});h.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,h.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(f.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(f.LOOPED,this))},destroy:function(){h.prototype.destroy.call(this);
this.audioBuffer=null;this.stopAndRemoveBufferSource();this.muteNode.disconnect();this.muteNode=null;this.volumeNode.disconnect();this.volumeNode=null;this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null);this.rateUpdates.length=0;this.rateUpdates=null},calculateRate:function(){h.prototype.calculateRate.call(this);var c=this.manager.context.currentTime;this.source&&"number"===typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,c);this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,
c)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var c=0,b=0;b<this.rateUpdates.length;b++)c+=((b<this.rateUpdates.length-1?this.rateUpdates[b+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[b].time)*this.rateUpdates[b].rate;return c},getLoopTime:function(){for(var c=0,b=0;b<this.rateUpdates.length-1;b++)c+=(this.rateUpdates[b+1].time-this.rateUpdates[b].time)*
this.rateUpdates[b].rate;b=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+b.time+(this.duration-c)/b.rate},rate:{get:function(){return this.currentConfig.rate},set:function(c){this.currentConfig.rate=c;this.calculateRate();this.emit(f.RATE,this,c)}},setRate:function(c){this.rate=c;return this},detune:{get:function(){return this.currentConfig.detune},set:function(c){this.currentConfig.detune=c;this.calculateRate();this.emit(f.DETUNE,this,c)}},setDetune:function(c){this.detune=c;return this},
mute:{get:function(){return 0===this.muteNode.gain.value},set:function(c){this.currentConfig.mute=c;this.muteNode.gain.setValueAtTime(c?0:1,0);this.emit(f.MUTE,this,c)}},setMute:function(c){this.mute=c;return this},volume:{get:function(){return this.volumeNode.gain.value},set:function(c){this.currentConfig.volume=c;this.volumeNode.gain.setValueAtTime(c,0);this.emit(f.VOLUME,this,c)}},setVolume:function(c){this.volume=c;return this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<
this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(c){this.manager.context.currentTime<this.startTime||!this.isPlaying&&!this.isPaused||(c=Math.min(Math.max(0,c),this.duration),this.currentConfig.seek=c,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(f.SEEK,this,c))}},setSeek:function(c){this.seek=c;return this},loop:{get:function(){return this.currentConfig.loop},set:function(c){this.currentConfig.loop=
c;this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),c&&this.createAndStartLoopBufferSource());this.emit(f.LOOP,this,c)}},setLoop:function(c){this.loop=c;return this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(c){this.currentConfig.pan=c;this.pannerNode&&this.pannerNode.pan.setValueAtTime(c,this.manager.context.currentTime);this.emit(f.PAN,this,c)}},setPan:function(c){this.pan=c;return this}});p.exports=a},function(p,u){p.exports=function(a){for(var h=
a.length,f=a[0].length,c=Array(f),b=0;b<f;b++){c[b]=Array(h);for(var d=h-1;-1<d;d--)c[b][d]=a[d][b]}return c}},function(p,u){function a(c,b,d){var g=c[b];c[b]=c[d];c[d]=g}function h(c,b){return c<b?-1:c>b?1:0}var f=function(c,b,d,g,e){void 0===d&&(d=0);void 0===g&&(g=c.length-1);for(void 0===e&&(e=h);g>d;){if(600<g-d){var l=g-d+1,k=b-d+1,m=Math.log(l),n=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*n*(l-n)/l)*(0>k-l/2?-1:1);f(c,b,Math.max(d,Math.floor(b-k*n/l+m)),Math.min(g,Math.floor(b+(l-k)*n/l+m)),e)}l=
c[b];k=d;n=g;a(c,d,b);for(0<e(c[g],l)&&a(c,d,g);k<n;){a(c,k,n);k++;for(n--;0>e(c[k],l);)k++;for(;0<e(c[n],l);)n--}0===e(c[d],l)?a(c,d,n):(n++,a(c,n,g));n<=b&&(d=n+1);b<=n&&(g=n-1)}};p.exports=f},function(p,u,a){var h=a(6),f=a(131);p.exports=function(c,b,d){var g=h(d,"max",0),e=h(d,"qty",1),l=h(d,"random",!1),k=h(d,"randomB",!1),m=h(d,"repeat",0);d=h(d,"yoyo",!1);var n=[];k&&f(b);-1===m&&(0===g?m=0:(m=c.length*b.length*e,d&&(m*=2),m=Math.ceil(g/m)));for(k=0;k<=m;k++){var q=c;for(var r=b,t=e,w=[],v=
0;v<q.length;v++)for(var x=0;x<r.length;x++)for(var y=0;y<t;y++)w.push({a:q[v],b:r[x]});q=w;l&&f(q);n=n.concat(q);d&&(q.reverse(),n=n.concat(q))}g&&n.splice(g);return n}},function(p,u,a){p.exports={PROCESS_QUEUE_ADD:a(1041),PROCESS_QUEUE_REMOVE:a(1042)}},function(p,u,a){var h=a(13);p.exports=function(f,c){var b=h(c,"anims",null);if(null===b)return f;if("string"===typeof b)f.anims.play(b);else if("object"===typeof b){c=f.anims;var d=h(b,"key",void 0);if(d){var g=h(b,"startFrame",void 0),e=h(b,"delay",
0),l=h(b,"repeat",0),k=h(b,"repeatDelay",0),m=h(b,"yoyo",!1),n=h(b,"play",!1);b=h(b,"delayedPlay",0);d={key:d,delay:e,repeat:l,repeatDelay:k,yoyo:m,startFrame:g};n?c.play(d):0<b?c.playAfterDelay(d,b):c.load(d)}}return f}},function(p,u,a){u=a(0);var h=a(109);a=new u({initialize:function(f,c,b,d,g){this.parent=f;this.x=c;this.y=b;this.frame=d;this.data={};this.tint=16777215;this._visible=g;this._alpha=1;this.flipY=this.flipX=!1},setFrame:function(f){this.frame=void 0===f?this.parent.frame:f instanceof
h&&f.texture===this.parent.texture?f:this.parent.texture.get(f);return this},resetFlip:function(){this.flipY=this.flipX=!1;return this},reset:function(f,c,b){this.x=f;this.y=c;this.flipY=this.flipX=!1;this._alpha=1;this._visible=!0;this.parent.dirty=!0;b&&this.setFrame(b);return this},setPosition:function(f,c){this.x=f;this.y=c;return this},setFlipX:function(f){this.flipX=f;return this},setFlipY:function(f){this.flipY=f;return this},setFlip:function(f,c){this.flipX=f;this.flipY=c;return this},setVisible:function(f){this.visible=
f;return this},setAlpha:function(f){this.alpha=f;return this},setTint:function(f){this.tint=f;return this},destroy:function(){this.parent.dirty=!0;this.parent.children.remove(this);this.data=this.frame=this.parent=void 0},visible:{get:function(){return this._visible},set:function(f){this.parent.dirty|=this._visible!==f;this._visible=f}},alpha:{get:function(){return this._alpha},set:function(f){this.parent.dirty|=0<this._alpha!==0<f;this._alpha=f}}});p.exports=a},function(p,u,a){var h=a(10);p.exports=
function(f,c,b){void 0===b&&(b=new h);var d=Math.min(f.x,c.x),g=Math.min(f.y,c.y);return b.setTo(d,g,Math.max(f.right,c.right)-d,Math.max(f.bottom,c.bottom)-g)}},function(p,u,a){u=a(0);var h=a(11),f=a(1055),c=a(15),b=a(7),d=a(202),g=a(20),e=a(140);a=new u({Extends:c,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Origin,h.ScrollFactor,h.Transform,h.Visible,f],initialize:function(l,k,m,n,q,r){c.call(this,l,"DOMElement");this.parent=l.sys.game.domContainer;this.cache=l.sys.cache.html;this.transformOnly=
!1;this.skewY=this.skewX=0;this.rotate3d=new e;this.rotate3dAngle="deg";this.pointerEvents="auto";this.displayHeight=this.displayWidth=this.height=this.width=0;this.handler=this.dispatchNativeEvent.bind(this);this.setPosition(k,m);"string"===typeof n?"#"===n[0]?this.setElement(n.substr(1),q,r):this.createElement(n,q,r):n&&this.setElement(n,q,r);l.sys.events.on(g.SLEEP,this.handleSceneEvent,this);l.sys.events.on(g.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},
removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(l){var k=this.node,m=k.style;k&&(m.display=l.settings.visible?"block":"none")},setSkew:function(l,k){void 0===l&&(l=0);void 0===k&&(k=l);this.skewX=l;this.skewY=k;return this},setPerspective:function(l){this.parent.style.perspective=l+"px";return this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=
l.split(" ");for(var k=0;k<l.length;k++)this.node.addEventListener(l[k],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var k=0;k<l.length;k++)this.node.removeEventListener(l[k],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,k,m){return this.setElement(document.createElement(l),k,m)},setElement:function(l,k,m){this.removeElement();if("string"===typeof l){"#"===l[0]&&(l=l.substr(1));var n=document.getElementById(l)}else"object"===
typeof l&&1===l.nodeType&&(n=l);if(!n)return this;this.node=n;if(k&&b(k))for(var q in k)n.style[q]=k[q];else"string"===typeof k&&(n.style=k);n.style.zIndex="0";n.style.display="inline";n.style.position="absolute";n.phaser=this;this.parent&&this.parent.appendChild(n);m&&(n.innerText=m);return this.updateSize()},createFromCache:function(l,k){(l=this.cache.get(l))&&this.createFromHTML(l,k);return this},createFromHTML:function(l,k){void 0===k&&(k="div");this.removeElement();this.node=k=document.createElement(k);
k.style.zIndex="0";k.style.display="inline";k.style.position="absolute";k.phaser=this;this.parent&&this.parent.appendChild(k);k.innerHTML=l;return this.updateSize()},removeElement:function(){this.node&&(d(this.node),this.node=null);return this},updateSize:function(){var l=this.node,k=l.getBoundingClientRect();this.width=l.clientWidth;this.height=l.clientHeight;this.displayWidth=k.width||0;this.displayHeight=k.height||0;return this},getChildByProperty:function(l,k){if(this.node)for(var m=this.node.querySelectorAll("*"),
n=0;n<m.length;n++)if(m[n][l]===k)return m[n];return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){this.node&&(this.node.className=l,this.updateSize());return this},setText:function(l){this.node&&(this.node.innerText=l,this.updateSize());return this},setHTML:function(l){this.node&&(this.node.innerHTML=l,this.updateSize());return this},preUpdate:function(){var l=this.parentContainer,
k=this.node;k&&l&&!l.willRender()&&(k.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement();this.scene.sys.events.off(g.SLEEP,this.handleSceneEvent,this);this.scene.sys.events.off(g.WAKE,this.handleSceneEvent,this)}});p.exports=a},function(p,u,a){var h=a(1056),f=a(15);u=a(25);var c=new u,b=new u,d=new u;p.exports=function(g,e,l,k){if(e.node){g=e.node.style;var m=e.scene.sys.settings;if(!g||!m.visible||f.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&
l.id||e.parentContainer&&!e.parentContainer.willRender())g.display="none";else{var n=e.parentContainer;m=l.alpha*e.alpha;n&&(m*=n.alpha);var q="0%",r="0%";if(k){n=e.width*e.scaleX*e.originX;var t=e.height*e.scaleY*e.originY;b.applyITRS(e.x-n,e.y-t,e.rotation,e.scaleX,e.scaleY);c.copyFrom(l.matrix);c.multiplyWithOffset(k,-l.scrollX*e.scrollFactorX,-l.scrollY*e.scrollFactorY);b.e=e.x-n;b.f=e.y-t}else n=e.width*e.originX,t=e.height*e.originY,b.applyITRS(e.x-n,e.y-t,e.rotation,e.scaleX,e.scaleY),c.copyFrom(l.matrix),
q=100*e.originX+"%",r=100*e.originY+"%",b.e-=l.scrollX*e.scrollFactorX,b.f-=l.scrollY*e.scrollFactorY;c.multiply(b,d);e.transformOnly||(g.display="block",g.opacity=m,g.zIndex=e._depth,g.pointerEvents=e.pointerEvents,g.mixBlendMode=h[e._blendMode]);g.transform=d.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")";g.transformOrigin=q+" "+r}}}},function(p,u,a){u=a(0);var h=a(11),f=a(15);a=a(1060);a=new u({Extends:f,
Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.Origin,h.ScrollFactor,h.Size,h.Texture,h.Tint,h.Transform,h.Visible,a],initialize:function(c){f.call(this,c,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});p.exports=a},function(p,u,a){var h=a(218),f=a(98),c=a(14),b=a(4);p.exports=function(d,g,e){void 0===e&&(e=new b);g=f(g,0,c.PI2);return h(d,g,e)}},function(p,u,a){var h=
a(447),f=a(218),c=a(98),b=a(14);p.exports=function(d,g,e,l){void 0===l&&(l=[]);!g&&0<e&&(g=h(d)/e);for(e=0;e<g;e++){var k=c(e/g,0,b.PI2);l.push(f(d,k))}return l}},function(p,u){p.exports=function(a){var h=a.width/2;a=a.height/2;var f=Math.pow(h-a,2)/Math.pow(h+a,2);return Math.PI*(h+a)*(1+3*f/(10+Math.sqrt(4-3*f)))}},function(p,u,a){var h=a(217),f=a(30);p.exports=function(c,b,d,g,e,l){var k=b.commandBuffer,m=k.length;e=e||c.currentContext;if(0!==m&&f(c,e,b,d,g)){d.addToRenderList(b);e.beginPath();
for(d=0;d<m;++d)switch(k[d]){case h.ARC:e.arc(k[d+1],k[d+2],k[d+3],k[d+4],k[d+5],k[d+6]);d+=7;break;case h.LINE_STYLE:var n=k[d+1];var q=k[d+2];g=k[d+3];c=(q&16711680)>>>16;b=(q&65280)>>>8;q&=255;e.strokeStyle="rgba("+c+","+b+","+q+","+g+")";e.lineWidth=n;d+=3;break;case h.FILL_STYLE:n=k[d+1];g=k[d+2];c=(n&16711680)>>>16;b=(n&65280)>>>8;q=n&255;e.fillStyle="rgba("+c+","+b+","+q+","+g+")";d+=2;break;case h.BEGIN_PATH:e.beginPath();break;case h.CLOSE_PATH:e.closePath();break;case h.FILL_PATH:l||e.fill();
break;case h.STROKE_PATH:l||e.stroke();break;case h.FILL_RECT:l?e.rect(k[d+1],k[d+2],k[d+3],k[d+4]):e.fillRect(k[d+1],k[d+2],k[d+3],k[d+4]);d+=4;break;case h.FILL_TRIANGLE:e.beginPath();e.moveTo(k[d+1],k[d+2]);e.lineTo(k[d+3],k[d+4]);e.lineTo(k[d+5],k[d+6]);e.closePath();l||e.fill();d+=6;break;case h.STROKE_TRIANGLE:e.beginPath();e.moveTo(k[d+1],k[d+2]);e.lineTo(k[d+3],k[d+4]);e.lineTo(k[d+5],k[d+6]);e.closePath();l||e.stroke();d+=6;break;case h.LINE_TO:e.lineTo(k[d+1],k[d+2]);d+=2;break;case h.MOVE_TO:e.moveTo(k[d+
1],k[d+2]);d+=2;break;case h.LINE_FX_TO:e.lineTo(k[d+1],k[d+2]);d+=5;break;case h.MOVE_FX_TO:e.moveTo(k[d+1],k[d+2]);d+=5;break;case h.SAVE:e.save();break;case h.RESTORE:e.restore();break;case h.TRANSLATE:e.translate(k[d+1],k[d+2]);d+=2;break;case h.SCALE:e.scale(k[d+1],k[d+2]);d+=2;break;case h.ROTATE:e.rotate(k[d+1]);d+=1;break;case h.GRADIENT_FILL_STYLE:d+=5;break;case h.GRADIENT_LINE_STYLE:d+=6}e.restore()}}},function(p,u,a){u=a(0);var h=a(137),f=a(80),c=a(2),b=a(68);a=new u({initialize:function(d,
g,e,l){void 0===l&&(l=!1);this.propertyKey=g;this.defaultValue=this.propertyValue=e;this.end=this.start=this.counter=this.steps=0;this.emitOnly=l;this.onEmit=this.defaultEmit;this.onUpdate=this.defaultUpdate;this.loadConfig(d)},loadConfig:function(d,g){void 0===d&&(d={});g&&(this.propertyKey=g);this.propertyValue=c(d,this.propertyKey,this.defaultValue);this.setMethods();this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(d){this.propertyValue=
d;return this.setMethods()},setMethods:function(){var d=this.propertyValue,g=typeof d;this.onEmit=this.defaultEmit;this.onUpdate=this.defaultUpdate;if("number"===g)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(d))this.onEmit=this.randomStaticValueEmit;else if("function"===g)this.emitOnly?this.onEmit=d:this.onUpdate=d;else if("object"===g&&this.hasBoth(d,"start","end")){this.start=d.start;this.end=d.end;if(g=this.has(d,"random"))this.onEmit=this.randomRangedValueEmit;
if(this.has(d,"steps"))this.steps=d.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var e=this.has(d,"ease")?d.ease:"Linear";this.ease=f(e,d.easeParams);g||(this.onEmit=this.easedValueEmit);this.onUpdate=this.easeValueUpdate}}else"object"===g&&this.hasBoth(d,"min","max")?(this.start=d.min,this.end=d.max,this.onEmit=this.randomRangedValueEmit):"object"===g&&this.has(d,"random")?(d=d.random,Array.isArray(d)&&(this.start=d[0],this.end=d[1]),this.onEmit=this.randomRangedValueEmit):"object"===
g&&this.hasEither(d,"onEmit","onUpdate")&&(this.has(d,"onEmit")&&(this.onEmit=d.onEmit),this.has(d,"onUpdate")&&(this.onUpdate=d.onUpdate));return this},has:function(d,g){return d.hasOwnProperty(g)},hasBoth:function(d,g,e){return d.hasOwnProperty(g)&&d.hasOwnProperty(e)},hasEither:function(d,g,e){return d.hasOwnProperty(g)||d.hasOwnProperty(e)},defaultEmit:function(d,g,e){return e},defaultUpdate:function(d,g,e,l){return l},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},
randomStaticValueEmit:function(){return this.propertyValue[Math.floor(Math.random()*this.propertyValue.length)]},randomRangedValueEmit:function(d,g){var e=h(this.start,this.end);d&&d.data[g]&&(d.data[g].min=e);return e},steppedEmit:function(){var d=this.counter;this.counter=b(this.counter+(this.end-this.start)/this.steps,this.start,this.end);return d},easedValueEmit:function(d,g){d&&d.data[g]&&(d=d.data[g],d.min=this.start,d.max=this.end);return this.start},easeValueUpdate:function(d,g,e){d=d.data[g];
return(d.max-d.min)*this.ease(e)+d.min}});p.exports=a},function(p,u,a){u=a(0);var h=a(2);a=new u({initialize:function(f,c,b,d,g){"object"===typeof f?(g=f,f=h(g,"x",0),c=h(g,"y",0),b=h(g,"power",0),d=h(g,"epsilon",100),g=h(g,"gravity",50)):(void 0===f&&(f=0),void 0===c&&(c=0),void 0===b&&(b=0),void 0===d&&(d=100),void 0===g&&(g=50));this.x=f;this.y=c;this.active=!0;this._gravity=g;this._epsilon=this._power=0;this.power=b;this.epsilon=d},update:function(f,c){var b=this.x-f.x,d=this.y-f.y,g=b*b+d*d;
if(0!==g){var e=Math.sqrt(g);g<this._epsilon&&(g=this._epsilon);c=this._power*c/(g*e)*100;f.velocityX+=b*c;f.velocityY+=d*c}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(f){this._epsilon=f*f}},power:{get:function(){return this._power/this._gravity},set:function(f){this._power=f*this._gravity}},gravity:{get:function(){return this._gravity},set:function(f){var c=this.power;this._gravity=f;this.power=c}}});p.exports=a},function(p,u,a){u=a(0);var h=a(36),f=a(50);a=new u({initialize:function(c){this.emitter=
c;this.frame=null;this.accelerationY=this.accelerationX=this.velocityY=this.velocityX=this.y=this.x=0;this.maxVelocityY=this.maxVelocityX=1E4;this.bounce=0;this.alpha=this.scaleY=this.scaleX=1;this.rotation=this.angle=0;this.tint=16777215;this.lifeCurrent=this.life=1E3;this.lifeT=this.delayCurrent=0;this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return 0<this.lifeCurrent},resetPosition:function(){this.y=
this.x=0},fire:function(c,b){var d=this.emitter;this.frame=d.getFrame();d.emitZone&&d.emitZone.getPoint(this);this.x=void 0===c?this.x+d.x.onEmit(this,"x"):this.x+c;this.y=void 0===b?this.y+d.y.onEmit(this,"y"):this.y+b;this.lifeCurrent=this.life=d.lifespan.onEmit(this,"lifespan");this.lifeT=0;c=d.speedX.onEmit(this,"speedX");b=d.speedY?d.speedY.onEmit(this,"speedY"):c;if(d.radial){var g=h(d.angle.onEmit(this,"angle"));this.velocityX=Math.cos(g)*Math.abs(c);this.velocityY=Math.sin(g)*Math.abs(b)}else d.moveTo?
(b=d.moveToX.onEmit(this,"moveToX"),g=d.moveToY?d.moveToY.onEmit(this,"moveToY"):b,c=Math.atan2(g-this.y,b-this.x),b=f(this.x,this.y,b,g)/(this.life/1E3),this.velocityX=Math.cos(c)*b,this.velocityY=Math.sin(c)*b):(this.velocityX=c,this.velocityY=b);d.acceleration&&(this.accelerationX=d.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=d.accelerationY.onEmit(this,"accelerationY"));this.maxVelocityX=d.maxVelocityX.onEmit(this,"maxVelocityX");this.maxVelocityY=d.maxVelocityY.onEmit(this,
"maxVelocityY");this.delayCurrent=d.delay.onEmit(this,"delay");this.scaleX=d.scaleX.onEmit(this,"scaleX");this.scaleY=d.scaleY?d.scaleY.onEmit(this,"scaleY"):this.scaleX;this.angle=d.rotate.onEmit(this,"rotate");this.rotation=h(this.angle);this.bounce=d.bounce.onEmit(this,"bounce");this.alpha=d.alpha.onEmit(this,"alpha");this.tint=d.tint.onEmit(this,"tint")},computeVelocity:function(c,b,d,g){var e=this.velocityX,l=this.velocityY,k=this.accelerationX,m=this.accelerationY,n=this.maxVelocityX,q=this.maxVelocityY;
e+=c.gravityX*d;l+=c.gravityY*d;k&&(e+=k*d);m&&(l+=m*d);e>n?e=n:e<-n&&(e=-n);l>q?l=q:l<-q&&(l=-q);this.velocityX=e;this.velocityY=l;for(c=0;c<g.length;c++)g[c].update(this,b,d)},checkBounds:function(c){var b=c.bounds,d=-this.bounce;this.x<b.x&&c.collideLeft?(this.x=b.x,this.velocityX*=d):this.x>b.right&&c.collideRight&&(this.x=b.right,this.velocityX*=d);this.y<b.y&&c.collideTop?(this.y=b.y,this.velocityY*=d):this.y>b.bottom&&c.collideBottom&&(this.y=b.bottom,this.velocityY*=d)},update:function(c,
b,d){if(0<this.delayCurrent)return this.delayCurrent-=c,!1;var g=this.emitter,e=1-this.lifeCurrent/this.life;this.lifeT=e;this.computeVelocity(g,c,b,d);this.x+=this.velocityX*b;this.y+=this.velocityY*b;g.bounds&&this.checkBounds(g);if(g.deathZone&&g.deathZone.willKill(this))return this.lifeCurrent=0,!0;this.scaleX=g.scaleX.onUpdate(this,"scaleX",e,this.scaleX);this.scaleY=g.scaleY?g.scaleY.onUpdate(this,"scaleY",e,this.scaleY):this.scaleX;this.angle=g.rotate.onUpdate(this,"rotate",e,this.angle);this.rotation=
h(this.angle);this.alpha=g.alpha.onUpdate(this,"alpha",e,this.alpha);this.tint=g.tint.onUpdate(this,"tint",e,this.tint);this.lifeCurrent-=c;return 0>=this.lifeCurrent}});p.exports=a},function(p,u,a){var h=a(35);u=a(0);var f=a(11),c=a(453),b=a(454),d=a(449),g=a(2),e=a(210),l=a(455),k=a(126),m=a(451),n=a(456),q=a(10),r=a(79),t=a(3),w=a(68);a=new u({Mixins:[f.BlendMode,f.Mask,f.ScrollFactor,f.Visible],initialize:function(v,x){this.manager=v;this.texture=v.texture;this.frames=[v.defaultFrame];this.defaultFrame=
v.defaultFrame;this.configFastMap="active blendMode collideBottom collideLeft collideRight collideTop deathCallback deathCallbackScope emitCallback emitCallbackScope follow frequency gravityX gravityY maxParticles name on particleBringToTop particleClass radial timeScale trackVisible visible".split(" ");this.configOpMap="accelerationX accelerationY angle alpha bounce delay lifespan maxVelocityX maxVelocityY moveToX moveToY quantity rotate scaleX scaleY speedX speedY tint x y".split(" ");this.name=
"";this.particleClass=m;this.x=new d(x,"x",0,!0);this.y=new d(x,"y",0,!0);this.radial=!0;this.gravityY=this.gravityX=0;this.acceleration=!1;this.accelerationX=new d(x,"accelerationX",0,!0);this.accelerationY=new d(x,"accelerationY",0,!0);this.maxVelocityX=new d(x,"maxVelocityX",1E4,!0);this.maxVelocityY=new d(x,"maxVelocityY",1E4,!0);this.speedX=new d(x,"speedX",0,!0);this.speedY=new d(x,"speedY",0,!0);this.moveTo=!1;this.moveToX=new d(x,"moveToX",0,!0);this.moveToY=new d(x,"moveToY",0,!0);this.bounce=
new d(x,"bounce",0,!0);this.scaleX=new d(x,"scaleX",1);this.scaleY=new d(x,"scaleY",1);this.tint=new d(x,"tint",16777215);this.alpha=new d(x,"alpha",1);this.lifespan=new d(x,"lifespan",1E3,!0);this.angle=new d(x,"angle",{min:0,max:360},!0);this.rotate=new d(x,"rotate",0);this.deathCallbackScope=this.deathCallback=this.emitCallbackScope=this.emitCallback=null;this.maxParticles=0;this.quantity=new d(x,"quantity",1,!0);this.delay=new d(x,"delay",0,!0);this.frequency=0;this.particleBringToTop=this.on=
!0;this.timeScale=1;this.bounds=this.deathZone=this.emitZone=null;this.visible=this.active=this.collideBottom=this.collideTop=this.collideRight=this.collideLeft=!0;this.blendMode=h.NORMAL;this.follow=null;this.followOffset=new t;this.trackVisible=!1;this.currentFrame=0;this.randomFrame=!0;this.frameQuantity=1;this.dead=[];this.alive=[];this._frameCounter=this._counter=0;x&&this.fromJSON(x)},fromJSON:function(v){if(!v)return this;var x;for(x=0;x<this.configFastMap.length;x++){var y=this.configFastMap[x];
k(v,y)&&(this[y]=g(v,y))}for(x=0;x<this.configOpMap.length;x++)y=this.configOpMap[x],k(v,y)&&this[y].loadConfig(v);this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue;this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue;k(v,"speed")&&(this.speedX.loadConfig(v,"speed"),this.speedY=null);if(l(v,["speedX","speedY"])||this.moveTo)this.radial=!1;k(v,"scale")&&(this.scaleX.loadConfig(v,"scale"),this.scaleY=null);k(v,"callbackScope")&&(this.deathCallbackScope=
this.emitCallbackScope=x=g(v,"callbackScope",null));k(v,"emitZone")&&this.setEmitZone(v.emitZone);k(v,"deathZone")&&this.setDeathZone(v.deathZone);k(v,"bounds")&&this.setBounds(v.bounds);k(v,"followOffset")&&this.followOffset.setFromObject(g(v,"followOffset",0));k(v,"frame")&&this.setFrame(v.frame);k(v,"reserve")&&this.reserve(v.reserve);return this},toJSON:function(v){void 0===v&&(v={});var x;for(x=0;x<this.configFastMap.length;x++){var y=this.configFastMap[x];v[y]=this[y]}for(x=0;x<this.configOpMap.length;x++)y=
this.configOpMap[x],this[y]&&(v[y]=this[y].toJSON());this.speedY||(delete v.speedX,v.speed=this.speedX.toJSON());this.scaleY||(delete v.scaleX,v.scale=this.scaleX.toJSON());return v},startFollow:function(v,x,y,A){void 0===x&&(x=0);void 0===y&&(y=0);void 0===A&&(A=!1);this.follow=v;this.followOffset.set(x,y);this.trackVisible=A;return this},stopFollow:function(){this.follow=null;this.followOffset.set(0,0);this.trackVisible=!1;return this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;
if(this.randomFrame)return e(this.frames);var v=this.frames[this.currentFrame];this._frameCounter++;this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=w(this.currentFrame+1,0,this._frameLength));return v},setFrame:function(v,x,y){void 0===x&&(x=!0);void 0===y&&(y=1);this.randomFrame=x;this.frameQuantity=y;this._frameCounter=this.currentFrame=0;x=typeof v;Array.isArray(v)||"string"===x||"number"===x?this.manager.setEmitterFrames(v,this):"object"===x&&(x=v,(v=g(x,"frames",
null))&&this.manager.setEmitterFrames(v,this),this.randomFrame=g(x,"cycle",!1)?!1:!0,this.frameQuantity=g(x,"quantity",y));this._frameLength=this.frames.length;1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1);return this},setRadial:function(v){void 0===v&&(v=!0);this.radial=v;return this},setPosition:function(v,x){this.x.onChange(v);this.y.onChange(x);return this},setBounds:function(v,x,y,A){"object"===typeof v&&(A=v,v=A.x,x=A.y,y=k(A,"w")?A.w:A.width,A=k(A,"h")?A.h:A.height);this.bounds?
this.bounds.setTo(v,x,y,A):this.bounds=new q(v,x,y,A);return this},setSpeedX:function(v){this.speedX.onChange(v);this.radial=!1;return this},setSpeedY:function(v){this.speedY&&(this.speedY.onChange(v),this.radial=!1);return this},setSpeed:function(v){this.speedX.onChange(v);this.speedY=null;this.radial=!0;return this},setScaleX:function(v){this.scaleX.onChange(v);return this},setScaleY:function(v){this.scaleY.onChange(v);return this},setScale:function(v){this.scaleX.onChange(v);this.scaleY=null;return this},
setGravityX:function(v){this.gravityX=v;return this},setGravityY:function(v){this.gravityY=v;return this},setGravity:function(v,x){this.gravityX=v;this.gravityY=x;return this},setAlpha:function(v){this.alpha.onChange(v);return this},setTint:function(v){this.tint.onChange(v);return this},setEmitterAngle:function(v){this.angle.onChange(v);return this},setAngle:function(v){this.angle.onChange(v);return this},setLifespan:function(v){this.lifespan.onChange(v);return this},setQuantity:function(v){this.quantity.onChange(v);
return this},setFrequency:function(v,x){this.frequency=v;this._counter=0;if(x)this.quantity.onChange(x);return this},setEmitZone:function(v){if(void 0===v)this.emitZone=null;else{var x=g(v,"type","random"),y=g(v,"source",null);switch(x){case "random":this.emitZone=new n(y);break;case "edge":x=g(v,"quantity",1);var A=g(v,"stepRate",0),B=g(v,"yoyo",!1);v=g(v,"seamless",!0);this.emitZone=new b(y,x,A,B,v)}}return this},setDeathZone:function(v){if(void 0===v)this.deathZone=null;else{var x=g(v,"type","onEnter");
(v=g(v,"source",null))&&"function"===typeof v.contains&&(this.deathZone=new c(v,"onEnter"===x?!0:!1))}return this},reserve:function(v){for(var x=this.dead,y=0;y<v;y++)x.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return 0<this.maxParticles&&this.getParticleCount()===this.maxParticles},
onParticleEmit:function(v,x){void 0===v?this.emitCallbackScope=this.emitCallback=null:"function"===typeof v&&(this.emitCallback=v,x&&(this.emitCallbackScope=x));return this},onParticleDeath:function(v,x){void 0===v?this.deathCallbackScope=this.deathCallback=null:"function"===typeof v&&(this.deathCallback=v,x&&(this.deathCallbackScope=x));return this},killAll:function(){for(var v=this.dead,x=this.alive;0<x.length;)v.push(x.pop());return this},forEachAlive:function(v,x){for(var y=this.alive,A=y.length,
B=0;B<A;++B)v.call(x,y[B],this);return this},forEachDead:function(v,x){for(var y=this.dead,A=y.length,B=0;B<A;++B)v.call(x,y[B],this);return this},start:function(){this.on=!0;this._counter=0;return this},stop:function(){this.on=!1;return this},pause:function(){this.active=!1;return this},resume:function(){this.active=!0;return this},remove:function(){this.manager.removeEmitter(this);return this},depthSort:function(){r(this.alive,this.depthSortCallback);return this},flow:function(v,x){void 0===x&&
(x=1);this.frequency=v;this.quantity.onChange(x);return this.start()},explode:function(v,x,y){this.frequency=-1;return this.emitParticle(v,x,y)},emitParticleAt:function(v,x,y){return this.emitParticle(y,v,x)},emitParticle:function(v,x,y){if(!this.atLimit()){void 0===v&&(v=this.quantity.onEmit());var A=this.dead;x=this.follow?this.follow.x+this.followOffset.x:x;y=this.follow?this.follow.y+this.followOffset.y:y;for(var B=0;B<v;B++){var z=A.pop();z||(z=new this.particleClass(this));z.fire(x,y);this.particleBringToTop?
this.alive.push(z):this.alive.unshift(z);this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,z,this);if(this.atLimit())break}return z}},preUpdate:function(v,x){x*=this.timeScale;var y=x/1E3;this.trackVisible&&(this.visible=this.follow.visible);var A=this.manager.getProcessors();v=this.alive;var B=this.dead,z,C=[],E=v.length;for(z=0;z<E;z++){var G=v[z];G.update(x,y,A)&&C.push({index:z,particle:G})}E=C.length;if(0<E)for(y=this.deathCallback,A=this.deathCallbackScope,z=E-1;0<=z;z--)E=C[z],
v.splice(E.index,1),B.push(E.particle),y&&y.call(A,E.particle),E.particle.resetPosition();this.on&&(0===this.frequency?this.emitParticle():0<this.frequency&&(this._counter-=x,0>=this._counter&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(v,x){return v.y-x.y}});p.exports=a},function(p,u,a){u=new (a(0))({initialize:function(h,f){this.source=h;this.killOnEnter=f},willKill:function(h){return(h=this.source.contains(h.x,h.y))&&this.killOnEnter||
!h&&!this.killOnEnter}});p.exports=u},function(p,u,a){u=new (a(0))({initialize:function(h,f,c,b,d){void 0===b&&(b=!1);void 0===d&&(d=!0);this.source=h;this.points=[];this.quantity=f;this.stepRate=c;this.yoyo=b;this.counter=-1;this.seamless=d;this._direction=this._length=0;this.updateSource()},updateSource:function(){this.points=this.source.getPoints(this.quantity,this.stepRate);if(this.seamless){var h=this.points[0],f=this.points[this.points.length-1];h.x===f.x&&h.y===f.y&&this.points.pop()}h=this._length;
this._length=this.points.length;this._length<h&&this.counter>this._length&&(this.counter=this._length-1);return this},changeSource:function(h){this.source=h;return this.updateSource()},getPoint:function(h){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.counter=this.yoyo?this._direction=0:this._length-1));var f=this.points[this.counter];f&&(h.x=f.x,h.y=f.y)}});p.exports=
u},function(p,u){p.exports=function(a,h){for(var f=0;f<h.length;f++)if(a.hasOwnProperty(h[f]))return!0;return!1}},function(p,u,a){u=a(0);var h=a(3);a=new u({initialize:function(f){this.source=f;this._tempVec=new h},getPoint:function(f){var c=this._tempVec;this.source.getRandomPoint(c);f.x=c.x;f.y=c.y}});p.exports=a},function(p,u,a){u=a(0);var h=a(11),f=a(73);a=new u({Extends:f,Mixins:[h.PathFollower],initialize:function(c,b,d,g,e,l){f.call(this,c,d,g,e,l);this.path=b},preUpdate:function(c,b){this.anims.update(c,
b);this.pathUpdate(c)}});p.exports=a},function(p,u){p.exports=function(a,h,f){var c=a.canvas,b=a.context,d=a.style,g=[],e=0,l=f.length;0<d.maxLines&&d.maxLines<f.length&&(l=d.maxLines);d.syncFont(c,b);for(c=0;c<l;c++){var k=d.strokeThickness;k+=b.measureText(f[c]).width;d.wordWrap&&(k-=b.measureText(" ").width);g[c]=Math.ceil(k);e=Math.max(e,g[c])}h=h.fontSize+d.strokeThickness;f=h*l;a=a.lineSpacing;1<l&&(f+=a*(l-1));return{width:e,height:f,lines:l,lineWidths:g,lineSpacing:a,lineHeight:h}}},function(p,
u,a){u=a(0);var h=a(13),f=a(6),c=a(460),b={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",
0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\u00c3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]};a=new u({initialize:function(d,g){this.parent=d;this.setStyle(g,!1,!0);this.metrics=(d=f(g,"metrics",!1))?
{ascent:f(d,"ascent",0),descent:f(d,"descent",0),fontSize:f(d,"fontSize",0)}:c(this)},setStyle:function(d,g,e){void 0===g&&(g=!0);void 0===e&&(e=!1);d&&d.hasOwnProperty("fontSize")&&"number"===typeof d.fontSize&&(d.fontSize=d.fontSize.toString()+"px");for(var l in b){var k=e?b[l][1]:this[l];this[l]="wordWrapCallback"===l||"wordWrapCallbackScope"===l?f(d,b[l][0],k):h(d,b[l][0],k)}e=f(d,"font",null);null!==e&&this.setFont(e,!1);this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();
d=f(d,"fill",null);null!==d&&(this.color=d);return g?this.update(!0):this.parent},syncFont:function(d,g){g.font=this._font},syncStyle:function(d,g){g.textBaseline="alphabetic";g.fillStyle=this.color;g.strokeStyle=this.stroke;g.lineWidth=this.strokeThickness;g.lineCap="round";g.lineJoin="round"},syncShadow:function(d,g){g?(d.shadowOffsetX=this.shadowOffsetX,d.shadowOffsetY=this.shadowOffsetY,d.shadowColor=this.shadowColor,d.shadowBlur=this.shadowBlur):(d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowColor=
0,d.shadowBlur=0)},update:function(d){d&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=c(this));return this.parent.updateText()},setFont:function(d,g){void 0===g&&(g=!0);if("string"!==typeof d){var e=f(d,"fontFamily","Courier");var l=f(d,"fontSize","16px");d=f(d,"fontStyle","")}else{e=d.split(" ");var k=0;d=2<e.length?e[k++]:"";l=e[k++]||"16px";e=e[k++]||"Courier"}if(e!==this.fontFamily||l!==this.fontSize||d!==this.fontStyle)this.fontFamily=e,this.fontSize=
l,this.fontStyle=d,g&&this.update(!0);return this.parent},setFontFamily:function(d){this.fontFamily!==d&&(this.fontFamily=d,this.update(!0));return this.parent},setFontStyle:function(d){this.fontStyle!==d&&(this.fontStyle=d,this.update(!0));return this.parent},setFontSize:function(d){"number"===typeof d&&(d=d.toString()+"px");this.fontSize!==d&&(this.fontSize=d,this.update(!0));return this.parent},setTestString:function(d){this.testString=d;return this.update(!0)},setFixedSize:function(d,g){this.fixedWidth=
d;this.fixedHeight=g;d&&(this.parent.width=d);g&&(this.parent.height=g);return this.update(!1)},setBackgroundColor:function(d){this.backgroundColor=d;return this.update(!1)},setFill:function(d){this.color=d;return this.update(!1)},setColor:function(d){this.color=d;return this.update(!1)},setResolution:function(d){this.resolution=d;return this.update(!1)},setStroke:function(d,g){void 0===g&&(g=this.strokeThickness);if(void 0===d&&0!==this.strokeThickness)this.strokeThickness=0,this.update(!0);else if(this.stroke!==
d||this.strokeThickness!==g)this.stroke=d,this.strokeThickness=g,this.update(!0);return this.parent},setShadow:function(d,g,e,l,k,m){void 0===d&&(d=0);void 0===g&&(g=0);void 0===e&&(e="#000");void 0===l&&(l=0);void 0===k&&(k=!1);void 0===m&&(m=!0);this.shadowOffsetX=d;this.shadowOffsetY=g;this.shadowColor=e;this.shadowBlur=l;this.shadowStroke=k;this.shadowFill=m;return this.update(!1)},setShadowOffset:function(d,g){void 0===d&&(d=0);void 0===g&&(g=d);this.shadowOffsetX=d;this.shadowOffsetY=g;return this.update(!1)},
setShadowColor:function(d){void 0===d&&(d="#000");this.shadowColor=d;return this.update(!1)},setShadowBlur:function(d){void 0===d&&(d=0);this.shadowBlur=d;return this.update(!1)},setShadowStroke:function(d){this.shadowStroke=d;return this.update(!1)},setShadowFill:function(d){this.shadowFill=d;return this.update(!1)},setWordWrapWidth:function(d,g){void 0===g&&(g=!1);this.wordWrapWidth=d;this.wordWrapUseAdvanced=g;return this.update(!1)},setWordWrapCallback:function(d,g){void 0===g&&(g=null);this.wordWrapCallback=
d;this.wordWrapCallbackScope=g;return this.update(!1)},setAlign:function(d){void 0===d&&(d="left");this.align=d;return this.update(!1)},setMaxLines:function(d){void 0===d&&(d=0);this.maxLines=d;return this.update(!1)},getTextMetrics:function(){var d=this.metrics;return{ascent:d.ascent,descent:d.descent,fontSize:d.fontSize}},toJSON:function(){var d={},g;for(g in b)d[g]=this[g];d.metrics=this.getTextMetrics();return d},destroy:function(){this.parent=void 0}});p.exports=a},function(p,u,a){var h=a(31);
p.exports=function(f){var c=h.create(this),b=c.getContext("2d");f.syncFont(c,b);var d=b.measureText(f.testString);if("actualBoundingBoxAscent"in d){var g=d.actualBoundingBoxAscent;d=d.actualBoundingBoxDescent;h.remove(c);return{ascent:g,descent:d,fontSize:g+d}}var e=Math.ceil(d.width*f.baselineX);d=e;g=2*d;d=d*f.baselineY|0;c.width=e;c.height=g;b.fillStyle="#f00";b.fillRect(0,0,e,g);b.font=f._font;b.textBaseline="alphabetic";b.fillStyle="#000";b.fillText(f.testString,0,d);f={ascent:0,descent:0,fontSize:0};
b=b.getImageData(0,0,e,g);if(!b)return f.ascent=d,f.descent=d+6,f.fontSize=f.ascent+f.descent,h.remove(c),f;b=b.data;var l=b.length;e*=4;var k,m,n=0,q=!1;for(k=0;k<d;k++){for(m=0;m<e;m+=4)if(255!==b[n+m]){q=!0;break}if(q)break;else n+=e}f.ascent=d-k;n=l-e;q=!1;for(k=g;k>d;k--){for(m=0;m<e;m+=4)if(255!==b[n+m]){q=!0;break}if(q)break;else n-=e}f.descent=k-d;f.fontSize=f.ascent+f.descent;h.remove(c);return f}},function(p,u,a){u=a(1097);var h=a(0),f=a(36),c=a(59),b=a(65),d=a(14),g=a(34);a=new h({Extends:g,
Mixins:[u],initialize:function(e,l,k,m,n,q,r,t,w){void 0===l&&(l=0);void 0===k&&(k=0);void 0===m&&(m=128);void 0===n&&(n=0);void 0===q&&(q=360);void 0===r&&(r=!1);g.call(this,e,"Arc",new b(0,0,m));this._startAngle=n;this._endAngle=q;this._anticlockwise=r;this._iterations=.01;this.setPosition(l,k);e=2*this.geom.radius;this.setSize(e,e);void 0!==t&&this.setFillStyle(t,w);this.updateDisplayOrigin();this.updateData()},iterations:{get:function(){return this._iterations},set:function(e){this._iterations=
e;this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(e){this.geom.radius=e;e*=2;this.setSize(e,e);this.updateDisplayOrigin();this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(e){this._startAngle=e;this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(e){this._endAngle=e;this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(e){this._anticlockwise=e;this.updateData()}},setRadius:function(e){this.radius=
e;return this},setIterations:function(e){void 0===e&&(e=.01);this.iterations=e;return this},setStartAngle:function(e,l){this._startAngle=e;void 0!==l&&(this._anticlockwise=l);return this.updateData()},setEndAngle:function(e,l){this._endAngle=e;void 0!==l&&(this._anticlockwise=l);return this.updateData()},updateData:function(){var e=this._iterations,l=e,k=this.geom.radius,m=f(this._startAngle),n=f(this._endAngle),q=this._anticlockwise;n-=m;q?n<-d.PI2?n=-d.PI2:0<n&&(n=-d.PI2+n%d.PI2):n>d.PI2?n=d.PI2:
0>n&&(n=d.PI2+n%d.PI2);q=[k+Math.cos(m)*k,k+Math.sin(m)*k];for(var r;1>l;)r=n*l+m,q.push(k+Math.cos(r)*k,k+Math.sin(r)*k),l+=e;r=n+m;q.push(k+Math.cos(r)*k,k+Math.sin(r)*k);q.push(k+Math.cos(m)*k,k+Math.sin(m)*k);this.pathIndexes=c(q);this.pathData=q;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(1100),f=a(59),c=a(10),b=a(34);a=new u({Extends:b,Mixins:[h],initialize:function(d,g,e,l,k,m){void 0===g&&(g=0);void 0===e&&(e=0);b.call(this,d,"Curve",l);this._smoothness=32;this._curveBounds=
new c;this.closePath=!1;this.setPosition(g,e);void 0!==k&&this.setFillStyle(k,m);this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(d){this._smoothness=d;this.updateData()}},setSmoothness:function(d){this._smoothness=d;return this.updateData()},updateData:function(){var d=this._curveBounds,g=this._smoothness;this.geom.getBounds(d,g);this.setSize(d.width,d.height);this.updateDisplayOrigin();d=[];g=this.geom.getPoints(g);for(var e=0;e<g.length;e++)d.push(g[e].x,g[e].y);
d.push(g[0].x,g[0].y);this.pathIndexes=f(d);this.pathData=d;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(59),f=a(1103),c=a(111),b=a(34);a=new u({Extends:b,Mixins:[f],initialize:function(d,g,e,l,k,m,n){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=128);void 0===k&&(k=128);b.call(this,d,"Ellipse",new c(l/2,k/2,l,k));this._smoothness=64;this.setPosition(g,e);this.width=l;this.height=k;void 0!==m&&this.setFillStyle(m,n);this.updateDisplayOrigin();this.updateData()},smoothness:{get:function(){return this._smoothness},
set:function(d){this._smoothness=d;this.updateData()}},setSize:function(d,g){this.width=d;this.height=g;this.geom.setPosition(d/2,g/2);this.geom.setSize(d,g);return this.updateData()},setSmoothness:function(d){this._smoothness=d;return this.updateData()},updateData:function(){for(var d=[],g=this.geom.getPoints(this._smoothness),e=0;e<g.length;e++)d.push(g[e].x,g[e].y);d.push(g[0].x,g[0].y);this.pathIndexes=h(d);this.pathData=d;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(34);a=a(1106);
a=new u({Extends:h,Mixins:[a],initialize:function(f,c,b,d,g,e,l,k,m,n,q){void 0===c&&(c=0);void 0===b&&(b=0);void 0===d&&(d=128);void 0===g&&(g=128);void 0===e&&(e=32);void 0===l&&(l=32);h.call(this,f,"Grid",null);this.cellWidth=e;this.cellHeight=l;this.showCells=!0;this.outlineFillAlpha=this.outlineFillColor=0;this.showOutline=!0;this.showAltCells=!1;this.setPosition(c,b);this.setSize(d,g);this.setFillStyle(k,m);void 0!==n&&this.setOutlineStyle(n,q);this.updateDisplayOrigin()},setFillStyle:function(f,
c){void 0===c&&(c=1);void 0===f?this.showCells=!1:(this.fillColor=f,this.fillAlpha=c,this.showCells=!0);return this},setAltFillStyle:function(f,c){void 0===c&&(c=1);void 0===f?this.showAltCells=!1:(this.altFillColor=f,this.altFillAlpha=c,this.showAltCells=!0);return this},setOutlineStyle:function(f,c){void 0===c&&(c=1);void 0===f?this.showOutline=!1:(this.outlineFillColor=f,this.outlineFillAlpha=c,this.showOutline=!0);return this}});p.exports=a},function(p,u,a){u=a(1109);var h=a(0),f=a(34);a=new h({Extends:f,
Mixins:[u],initialize:function(c,b,d,g,e,l,k,m){void 0===b&&(b=0);void 0===d&&(d=0);void 0===g&&(g=48);void 0===e&&(e=32);void 0===l&&(l=15658734);void 0===k&&(k=10066329);void 0===m&&(m=13421772);f.call(this,c,"IsoBox",null);this.projection=4;this.fillTop=l;this.fillLeft=k;this.fillRight=m;this.isFilled=this.showRight=this.showLeft=this.showTop=!0;this.setPosition(b,d);this.setSize(g,e);this.updateDisplayOrigin()},setProjection:function(c){this.projection=c;return this},setFaces:function(c,b,d){void 0===
c&&(c=!0);void 0===b&&(b=!0);void 0===d&&(d=!0);this.showTop=c;this.showLeft=b;this.showRight=d;return this},setFillStyle:function(c,b,d){this.fillTop=c;this.fillLeft=b;this.fillRight=d;this.isFilled=!0;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(1112),f=a(34);a=new u({Extends:f,Mixins:[h],initialize:function(c,b,d,g,e,l,k,m,n){void 0===b&&(b=0);void 0===d&&(d=0);void 0===g&&(g=48);void 0===e&&(e=32);void 0===l&&(l=!1);void 0===k&&(k=15658734);void 0===m&&(m=10066329);void 0===n&&(n=
13421772);f.call(this,c,"IsoTriangle",null);this.projection=4;this.fillTop=k;this.fillLeft=m;this.fillRight=n;this.showRight=this.showLeft=this.showTop=!0;this.isReversed=l;this.isFilled=!0;this.setPosition(b,d);this.setSize(g,e);this.updateDisplayOrigin()},setProjection:function(c){this.projection=c;return this},setReversed:function(c){this.isReversed=c;return this},setFaces:function(c,b,d){void 0===c&&(c=!0);void 0===b&&(b=!0);void 0===d&&(d=!0);this.showTop=c;this.showLeft=b;this.showRight=d;return this},
setFillStyle:function(c,b,d){this.fillTop=c;this.fillLeft=b;this.fillRight=d;this.isFilled=!0;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(34),f=a(47);a=a(1115);a=new u({Extends:h,Mixins:[a],initialize:function(c,b,d,g,e,l,k,m,n){void 0===b&&(b=0);void 0===d&&(d=0);void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=128);void 0===k&&(k=0);h.call(this,c,"Line",new f(g,e,l,k));c=Math.max(1,this.geom.right-this.geom.left);g=Math.max(1,this.geom.bottom-this.geom.top);this._endWidth=this._startWidth=
this.lineWidth=1;this.setPosition(b,d);this.setSize(c,g);void 0!==m&&this.setStrokeStyle(1,m,n);this.updateDisplayOrigin()},setLineWidth:function(c,b){void 0===b&&(b=c);this._startWidth=c;this._endWidth=b;this.lineWidth=c;return this},setTo:function(c,b,d,g){this.geom.setTo(c,b,d,g);return this}});p.exports=a},function(p,u,a){u=a(1118);var h=a(0),f=a(59),c=a(469),b=a(227),d=a(34),g=a(472);a=new h({Extends:d,Mixins:[u],initialize:function(e,l,k,m,n,q){void 0===l&&(l=0);void 0===k&&(k=0);d.call(this,
e,"Polygon",new b(m));e=c(this.geom);this.setPosition(l,k);this.setSize(e.width,e.height);void 0!==n&&this.setFillStyle(n,q);this.updateDisplayOrigin();this.updateData()},smooth:function(e){void 0===e&&(e=1);for(var l=0;l<e;l++)g(this.geom);return this.updateData()},updateData:function(){for(var e=[],l=this.geom.points,k=0;k<l.length;k++)e.push(l[k].x,l[k].y);e.push(l[0].x,l[0].y);this.pathIndexes=f(e);this.pathData=e;return this}});p.exports=a},function(p,u,a){var h=a(10);p.exports=function(f,c){void 0===
c&&(c=new h);for(var b=Infinity,d=Infinity,g=-b,e=-d,l,k=0;k<f.points.length;k++)l=f.points[k],b=Math.min(b,l.x),d=Math.min(d,l.y),g=Math.max(g,l.x),e=Math.max(e,l.y);c.x=b;c.y=d;c.width=g-b;c.height=e-d;return c}},function(p,u,a){var h=a(67),f=a(47),c=a(471);p.exports=function(b,d,g,e){void 0===e&&(e=[]);var l=b.points;b=c(b);!d&&0<g&&(d=b/g);for(g=0;g<d;g++)for(var k=g/d*b,m=0,n=0;n<l.length;n++){var q=l[n],r=l[(n+1)%l.length];q=new f(q.x,q.y,r.x,r.y);r=h(q);if(k<m||k>m+r)m+=r;else{k=q.getPoint((k-
m)/r);e.push(k);break}}return e}},function(p,u,a){var h=a(67),f=a(47);p.exports=function(c){c=c.points;for(var b=0,d=0;d<c.length;d++){var g=c[d],e=c[(d+1)%c.length];g=new f(g.x,g.y,e.x,e.y);b+=h(g)}return b}},function(p,u){var a=function(h,f){h[0]=f[0];h[1]=f[1];return h};p.exports=function(h){var f,c=[],b=h.points;for(f=0;f<b.length;f++)c.push([b[f].x,b[f].y]);b=[];0<c.length&&b.push(a([0,0],c[0]));for(f=0;f<c.length-1;f++){var d=c[f],g=c[f+1],e=d[0];d=d[1];var l=g[0];g=g[1];b.push([.85*e+.15*l,
.85*d+.15*g]);b.push([.15*e+.85*l,.15*d+.85*g])}1<c.length&&b.push(a([0,0],c[c.length-1]));return h.setTo(b)}},function(p,u,a){u=a(0);var h=a(10),f=a(34);a=a(1121);a=new u({Extends:f,Mixins:[a],initialize:function(c,b,d,g,e,l,k){void 0===b&&(b=0);void 0===d&&(d=0);void 0===g&&(g=128);void 0===e&&(e=128);f.call(this,c,"Rectangle",new h(0,0,g,e));this.setPosition(b,d);this.setSize(g,e);void 0!==l&&this.setFillStyle(l,k);this.updateDisplayOrigin();this.updateData()},setSize:function(c,b){this.width=
c;this.height=b;this.geom.setSize(c,b);this.updateData();return this},updateData:function(){var c=[],b=this.geom,d=this._tempLine;b.getLineA(d);c.push(d.x1,d.y1,d.x2,d.y2);b.getLineB(d);c.push(d.x2,d.y2);b.getLineC(d);c.push(d.x2,d.y2);b.getLineD(d);c.push(d.x2,d.y2);this.pathData=c;return this}});p.exports=a},function(p,u,a){u=a(1124);var h=a(0),f=a(59),c=a(34);a=new h({Extends:c,Mixins:[u],initialize:function(b,d,g,e,l,k,m,n){void 0===d&&(d=0);void 0===g&&(g=0);void 0===e&&(e=5);void 0===l&&(l=
32);void 0===k&&(k=64);c.call(this,b,"Star",null);this._points=e;this._innerRadius=l;this._outerRadius=k;this.setPosition(d,g);this.setSize(2*k,2*k);void 0!==m&&this.setFillStyle(m,n);this.updateDisplayOrigin();this.updateData()},setPoints:function(b){this._points=b;return this.updateData()},setInnerRadius:function(b){this._innerRadius=b;return this.updateData()},setOuterRadius:function(b){this._outerRadius=b;return this.updateData()},points:{get:function(){return this._points},set:function(b){this._points=
b;this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(b){this._innerRadius=b;this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(b){this._outerRadius=b;this.updateData()}},updateData:function(){var b=[],d=this._points,g=this._innerRadius,e=this._outerRadius,l=Math.PI/2*3,k=Math.PI/d;b.push(e,e+-e);for(var m=0;m<d;m++)b.push(e+Math.cos(l)*e,e+Math.sin(l)*e),l+=k,b.push(e+Math.cos(l)*g,e+Math.sin(l)*g),l+=k;b.push(e,e+-e);this.pathIndexes=
f(b);this.pathData=b;return this}});p.exports=a},function(p,u,a){u=a(0);var h=a(34),f=a(82);a=a(1127);a=new u({Extends:h,Mixins:[a],initialize:function(c,b,d,g,e,l,k,m,n,q,r){void 0===b&&(b=0);void 0===d&&(d=0);void 0===g&&(g=0);void 0===e&&(e=128);void 0===l&&(l=64);void 0===k&&(k=0);void 0===m&&(m=128);void 0===n&&(n=128);h.call(this,c,"Triangle",new f(g,e,l,k,m,n));c=this.geom.right-this.geom.left;g=this.geom.bottom-this.geom.top;this.setPosition(b,d);this.setSize(c,g);void 0!==q&&this.setFillStyle(q,
r);this.updateDisplayOrigin();this.updateData()},setTo:function(c,b,d,g,e,l){this.geom.setTo(c,b,d,g,e,l);return this.updateData()},updateData:function(){var c=[],b=this.geom,d=this._tempLine;b.getLineA(d);c.push(d.x1,d.y1,d.x2,d.y2);b.getLineB(d);c.push(d.x2,d.y2);b.getLineC(d);c.push(d.x2,d.y2);this.pathData=c;return this}});p.exports=a},function(p,u,a){var h=a(4),f=a(67);p.exports=function(c,b,d){void 0===d&&(d=new h);var g=c.getLineA(),e=c.getLineB();c=c.getLineC();if(0>=b||1<=b)return d.x=g.x1,
d.y=g.y1,d;var l=f(g),k=f(e),m=f(c);b*=l+k+m;b<l?(b/=l,d.x=g.x1+(g.x2-g.x1)*b,d.y=g.y1+(g.y2-g.y1)*b):b>l+k?(b=(b-(l+k))/m,d.x=c.x1+(c.x2-c.x1)*b,d.y=c.y1+(c.y2-c.y1)*b):(b=(b-l)/k,d.x=e.x1+(e.x2-e.x1)*b,d.y=e.y1+(e.y2-e.y1)*b);return d}},function(p,u,a){var h=a(67),f=a(4);p.exports=function(c,b,d,g){void 0===g&&(g=[]);var e=c.getLineA(),l=c.getLineB();c=c.getLineC();var k=h(e),m=h(l),n=h(c),q=k+m+n;!b&&0<d&&(b=q/d);for(d=0;d<b;d++){var r=d/b*q,t=new f;r<k?(r/=k,t.x=e.x1+(e.x2-e.x1)*r,t.y=e.y1+(e.y2-
e.y1)*r):r>k+m?(r-=k+m,r/=n,t.x=c.x1+(c.x2-c.x1)*r,t.y=c.y1+(c.y2-c.y1)*r):(r-=k,r/=m,t.x=l.x1+(l.x2-l.x1)*r,t.y=l.y1+(l.y2-l.y1)*r);g.push(t)}return g}},function(p,u){p.exports=function(a,h,f){if(a&&"number"!==typeof a){if(a.hasOwnProperty(h))return a[h]=f,!0;if(-1!==h.indexOf(".")){h=h.split(".");for(var c=a,b=0;b<h.length;b++)if(c.hasOwnProperty(h[b]))a=c,c=c[h[b]];else return!1;a[h[h.length-1]]=f;return!0}}return!1}},function(p,u,a){var h=a(116),f=a(117);p.exports=function(c,b,d,g,e,l,k){void 0===
g&&(g=!1);void 0===l&&(l=16777215);void 0===k&&(k=1);if(c.length!==b.length)console.warn("GenerateVerts: vertices and uvs count not equal");else{var m={faces:[],vertices:[]},n,q,r,t=g?3:2,w=Array.isArray(l),v=Array.isArray(k);if(Array.isArray(d)&&0<d.length)for(n=0;n<d.length;n++){var x=d[n];var y=2*d[n];var A=d[n]*t;var B=c[A];var z=c[A+1];var C=g?c[A+2]:0;var E=b[y];y=b[y+1];var G=w?l[x]:l;x=v?k[x]:k;var H=r=q=0;e&&(q=e[A],r=e[A+1],H=g?e[A+2]:0);m.vertices.push(new f(B,z,C,E,y,G,x,q,r,H))}else for(n=
A=d=0;n<c.length;n+=t)B=c[n],z=c[n+1],C=g?c[n+2]:0,E=b[d],y=b[d+1],G=w?l[A]:l,x=v?k[A]:k,H=r=q=0,e&&(q=e[n],r=e[n+1],H=g?e[n+2]:0),m.vertices.push(new f(B,z,C,E,y,G,x,q,r,H)),d+=2,A++;for(n=0;n<m.vertices.length;n+=3)m.faces.push(new h(m.vertices[n],m.vertices[n+1],m.vertices[n+2]));return m}}},function(p,u,a){var h=a(116);u=a(69);var f=a(39),c=a(117),b=new f,d=new f,g=new u;p.exports=function(e,l,k,m,n,q,r,t,w,v){void 0===k&&(k=1);void 0===m&&(m=0);void 0===n&&(n=0);void 0===q&&(q=0);void 0===r&&
(r=0);void 0===t&&(t=0);void 0===w&&(w=0);void 0===v&&(v=!0);var x={faces:[],verts:[]},y=e.materials;b.set(m,n,q);d.set(r,t,w);g.fromRotationXYTranslation(d,b,v);for(m=0;m<e.models.length;m++)for(r=e.models[m],n=r.vertices,q=r.textureCoords,r=r.faces,t=0;t<r.length;t++){var A=r[t],B=A.vertices[0],z=A.vertices[1],C=A.vertices[2],E=n[B.vertexIndex];v=n[z.vertexIndex];w=n[C.vertexIndex];B=B.textureCoordsIndex;z=z.textureCoordsIndex;var G=C.textureCoordsIndex;C=-1===B?{u:0,v:1}:q[B];B=-1===z?{u:0,v:0}:
q[z];z=-1===G?{u:1,v:1}:q[G];G=16777215;""!==A.material&&y[A.material]&&(G=y[A.material]);A=(new c(E.x*k,E.y*k,E.z*k,C.u,C.v,G)).transformMat4(g);v=(new c(v.x*k,v.y*k,v.z*k,B.u,B.v,G)).transformMat4(g);w=(new c(w.x*k,w.y*k,w.z*k,z.u,z.v,G)).transformMat4(g);x.verts.push(A,v,w);x.faces.push(new h(A,v,w))}l&&(l.faces=l.faces.concat(x.faces),l.vertices=l.vertices.concat(x.verts));return x}},function(p,u,a){var h=a(65);u=a(0);var f=a(11),c=a(200),b=a(12),d=new u({Extends:h,Mixins:[f.ScrollFactor,f.Visible],
initialize:function(g,e,l,k,m,n,q){h.call(this,g,e,l);this.color=new c(k,m,n);this.intensity=q;this.renderFlags=15;this.cameraFilter=0;this.setScrollFactor(1,1)},willRender:function(g){return!(d.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&g.id)},setColor:function(g){g=b.getFloatsFromUintRGB(g);this.color.set(g[0],g[1],g[2]);return this},setIntensity:function(g){this.intensity=g;return this},setRadius:function(g){this.radius=g;return this}});d.RENDER_MASK=15;p.exports=
d},function(p,u,a){var h=a(151);u=a(0);var f=a(50),c=a(481),b=a(150),d=a(200),g=a(74),e=a(79),l=a(12);a=new u({initialize:function(){this.lights=[];this.ambientColor=new d(.1,.1,.1);this.active=!1;this.maxLights=-1;this.visibleLights=0},addPointLight:function(k,m,n,q,r,t){return this.systems.displayList.add(new b(this.scene,k,m,n,q,r,t))},enable:function(){-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights);this.active=!0;return this},disable:function(){this.active=!1;return this},
getLights:function(k){for(var m=this.lights,n=k.worldView,q=[],r=0;r<m.length;r++){var t=m[r];t.willRender(k)&&h(t,n)&&q.push({light:t,distance:f(t.x,t.y,n.centerX,n.centerY)})}q.length>this.maxLights&&(e(q,this.sortByDistance),q=q.slice(0,this.maxLights));this.visibleLights=q.length;return q},sortByDistance:function(k,m){return k.distance>=m.distance},setAmbientColor:function(k){k=l.getFloatsFromUintRGB(k);this.ambientColor.set(k[0],k[1],k[2]);return this},getMaxVisibleLights:function(){return this.maxLights},
getLightCount:function(){return this.lights.length},addLight:function(k,m,n,q,r){void 0===k&&(k=0);void 0===m&&(m=0);void 0===n&&(n=128);void 0===q&&(q=16777215);void 0===r&&(r=1);q=l.getFloatsFromUintRGB(q);k=new c(k,m,n,q[0],q[1],q[2],r);this.lights.push(k);return k},removeLight:function(k){k=this.lights.indexOf(k);0<=k&&g(this.lights,k);return this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});p.exports=a},function(p,u,a){u=a(56);var h=a(17);a={Circle:a(1191),
Ellipse:a(1201),Intersects:a(484),Line:a(1221),Mesh:a(1243),Point:a(1246),Polygon:a(1260),Rectangle:a(502),Triangle:a(1293)};a=h(!1,a,u);p.exports=a},function(p,u,a){p.exports={CircleToCircle:a(231),CircleToRectangle:a(151),GetCircleToCircle:a(1211),GetCircleToRectangle:a(1212),GetLineToCircle:a(232),GetLineToLine:a(485),GetLineToPoints:a(486),GetLineToPolygon:a(487),GetLineToRectangle:a(234),GetRaysFromPointToPolygon:a(1213),GetRectangleIntersection:a(1214),GetRectangleToRectangle:a(1215),GetRectangleToTriangle:a(1216),
GetTriangleToCircle:a(1217),GetTriangleToLine:a(492),GetTriangleToTriangle:a(1218),LineToCircle:a(233),LineToLine:a(96),LineToRectangle:a(488),PointToLine:a(496),PointToLineSegment:a(1219),RectangleToRectangle:a(152),RectangleToTriangle:a(489),RectangleToValues:a(1220),TriangleToCircle:a(491),TriangleToLine:a(493),TriangleToTriangle:a(494)}},function(p,u,a){var h=a(39);p.exports=function(f,c,b){var d=f.x1,g=f.y1,e=c.x1,l=c.y1,k=f.x2-d;f=f.y2-g;var m=c.x2-e;c=c.y2-l;if(0===k||0===c*k-m*f)return!1;
l=(k*(l-g)+f*(d-e))/(m*f-c*k);e=(e+m*l-d)/k;if(0>e||0>l||1<l)return null;void 0===b&&(b=new h);return b.set(d+k*e,g+f*e,e)}},function(p,u,a){var h=a(39),f=a(485),c=new (a(47)),b=new h;p.exports=function(d,g,e){void 0===e&&(e=new h);var l=!1;e.set();b.set();for(var k=g[0],m=1;m<g.length;m++){var n=g[m];c.setTo(k.x,k.y,n.x,n.y);k=n;f(d,c,b)&&(!l||b.z<e.z)&&(e.copy(b),l=!0)}return l?e:null}},function(p,u,a){u=a(39);var h=a(140),f=a(486),c=new u;p.exports=function(b,d,g){void 0===g&&(g=new h);Array.isArray(d)||
(d=[d]);var e=!1;g.set();c.set();for(var l=0;l<d.length;l++)f(b,d[l].points,c)&&(!e||c.z<g.z)&&(g.set(c.x,c.y,c.z,l),e=!0);return e?g:null}},function(p,u){p.exports=function(a,h){var f=a.x1,c=a.y1,b=a.x2;a=a.y2;var d=h.x,g=h.y,e=h.right;h=h.bottom;if(f>=d&&f<=e&&c>=g&&c<=h||b>=d&&b<=e&&a>=g&&a<=h)return!0;if(f<d&&b>=d){var l=c+(a-c)*(d-f)/(b-f);if(l>g&&l<=h)return!0}else if(f>e&&b<=e&&(l=c+(a-c)*(e-f)/(b-f),l>=g&&l<=h))return!0;if(c<g&&a>=g){if(l=f+(b-f)*(g-c)/(a-c),l>=d&&l<=e)return!0}else if(c>
h&&a<=h&&(l=f+(b-f)*(h-c)/(a-c),l>=d&&l<=e))return!0;return!1}},function(p,u,a){var h=a(96),f=a(57),c=a(235),b=a(490);p.exports=function(d,g){if(g.left>d.right||g.right<d.left||g.top>d.bottom||g.bottom<d.top)return!1;var e=g.getLineA(),l=g.getLineB(),k=g.getLineC();if(f(d,e.x1,e.y1)||f(d,e.x2,e.y2)||f(d,l.x1,l.y1)||f(d,l.x2,l.y2)||f(d,k.x1,k.y1)||f(d,k.x2,k.y2))return!0;var m=d.getLineA(),n=d.getLineB(),q=d.getLineC(),r=d.getLineD();if(h(e,m)||h(e,n)||h(e,q)||h(e,r)||h(l,m)||h(l,n)||h(l,q)||h(l,r)||
h(k,m)||h(k,n)||h(k,q)||h(k,r))return!0;d=b(d);return 0<c(g,d,!0).length}},function(p,u){p.exports=function(a,h){void 0===h&&(h=[]);h.push({x:a.x,y:a.y});h.push({x:a.right,y:a.y});h.push({x:a.right,y:a.bottom});h.push({x:a.x,y:a.bottom});return h}},function(p,u,a){var h=a(233),f=a(115);p.exports=function(c,b){return c.left>b.right||c.right<b.left||c.top>b.bottom||c.bottom<b.top?!1:f(c,b.x,b.y)||h(c.getLineA(),b)||h(c.getLineB(),b)||h(c.getLineC(),b)?!0:!1}},function(p,u,a){var h=a(4),f=a(493),c=a(96);
p.exports=function(b,d,g){void 0===g&&(g=[]);if(f(b,d)){var e=b.getLineA(),l=b.getLineB(),k=b.getLineC();b=[new h,new h,new h];d=[c(e,d,b[0]),c(l,d,b[1]),c(k,d,b[2])];for(e=0;3>e;e++)d[e]&&g.push(b[e])}return g}},function(p,u,a){var h=a(96);p.exports=function(f,c){return f.contains(c.x1,c.y1)||f.contains(c.x2,c.y2)||h(f.getLineA(),c)||h(f.getLineB(),c)||h(f.getLineC(),c)?!0:!1}},function(p,u,a){var h=a(235),f=a(495),c=a(96);p.exports=function(b,d){if(b.left>d.right||b.right<d.left||b.top>d.bottom||
b.bottom<d.top)return!1;var g=b.getLineA(),e=b.getLineB(),l=b.getLineC(),k=d.getLineA(),m=d.getLineB(),n=d.getLineC();if(c(g,k)||c(g,m)||c(g,n)||c(e,k)||c(e,m)||c(e,n)||c(l,k)||c(l,m)||c(l,n))return!0;g=f(b);g=h(d,g,!0);if(0<g.length)return!0;g=f(d);g=h(b,g,!0);return 0<g.length?!0:!1}},function(p,u){p.exports=function(a,h){void 0===h&&(h=[]);h.push({x:a.x1,y:a.y1});h.push({x:a.x2,y:a.y2});h.push({x:a.x3,y:a.y3});return h}},function(p,u){p.exports=function(a,h,f){void 0===f&&(f=1);var c=h.x1,b=h.y1,
d=h.x2;h=h.y2;var g=a.x;a=a.y;var e=(d-c)*(d-c)+(h-b)*(h-b);if(0===e)return!1;var l=((g-c)*(d-c)+(a-b)*(h-b))/e;return 0>l?Math.sqrt((c-g)*(c-g)+(b-a)*(b-a))<=f:0<=l&&1>=l?Math.abs(((b-a)*(d-c)-(c-g)*(h-b))/e)*Math.sqrt(e)<=f:Math.sqrt((d-g)*(d-g)+(h-a)*(h-a))<=f}},function(p,u,a){var h=a(14),f=a(68),c=a(97);p.exports=function(b){b=c(b)-h.TAU;return f(b,-Math.PI,Math.PI)}},function(p,u){function a(b){0===b.models.length&&b.models.push({faces:[],name:"untitled",textureCoords:[],vertexNormals:[],vertices:[]});
f="";return b.models[b.models.length-1]}var h=!0,f="",c="";p.exports=function(b,d){void 0===d&&(d=!0);h=d;d={materials:{},materialLibraries:[],models:[]};c=f="";b=b.split("\n");for(var g=0;g<b.length;g++){var e=b[g],l=e.indexOf("#");e=(-1<l?e.substring(0,l):e).replace(/\s\s+/g," ").trim().split(" ");switch(e[0].toLowerCase()){case "o":d.models.push({faces:[],name:2<=e.length?e[1]:"untitled",textureCoords:[],vertexNormals:[],vertices:[]});f="";break;case "g":2===e.length&&(f=e[1]);break;case "v":var k=
e;e=d;var m=k.length;l=2<=m?parseFloat(k[1]):0;var n=3<=m?parseFloat(k[2]):0;k=4<=m?parseFloat(k[3]):0;a(e).vertices.push({x:l,y:n,z:k});break;case "vt":k=e;e=d;m=k.length;l=2<=m?parseFloat(k[1]):0;n=3<=m?parseFloat(k[2]):0;k=4<=m?parseFloat(k[3]):0;isNaN(l)&&(l=0);isNaN(n)&&(n=0);isNaN(k)&&(k=0);h&&(n=1-n);a(e).textureCoords.push({u:l,v:n,w:k});break;case "vn":k=e;e=d;m=k.length;l=2<=m?parseFloat(k[1]):0;n=3<=m?parseFloat(k[2]):0;k=4<=m?parseFloat(k[3]):0;a(e).vertexNormals.push({x:l,y:n,z:k});break;
case "f":l=d;n=e.length-1;if(!(3>n)){k={group:f,material:c,vertices:[]};for(m=0;m<n;m++){var q=e[m+1].split("/"),r=q.length;if(!(1>r||3<r)){var t=0,w=0;var v=parseInt(q[0],10);1<r&&""!==q[1]&&(t=parseInt(q[1],10));2<r&&(w=parseInt(q[2],10));0!==v&&(0>v&&(v=a(l).vertices.length+1+v),--t,--v,--w,k.vertices.push({textureCoordsIndex:t,vertexIndex:v,vertexNormalIndex:w}))}}a(l).faces.push(k)}break;case "mtllib":2<=e.length&&d.materialLibraries.push(e[1]);break;case "usemtl":2<=e.length&&(c=e[1])}}return d}},
function(p,u,a){var h=a(103);p.exports=function(f){var c={};f=f.split("\n");for(var b="",d=0;d<f.length;d++){var g=f[d].trim();if(0!==g.indexOf("#")&&""!==g)switch(g=g.replace(/\s\s+/g," ").trim().split(" "),g[0].toLowerCase()){case "newmtl":b=g[1];break;case "kd":var e=Math.floor(255*g[1]);c[b]=h(e,2<=g.length?Math.floor(255*g[2]):e,3<=g.length?Math.floor(255*g[3]):e)}}return c}},function(p,u){p.exports=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)}},function(p,u){p.exports=function(a){return a.x*
a.x+a.y*a.y}},function(p,u,a){u=a(10);u.Area=a(1267);u.Ceil=a(1268);u.CeilAll=a(1269);u.CenterOn=a(190);u.Clone=a(1270);u.Contains=a(57);u.ContainsPoint=a(1271);u.ContainsRect=a(503);u.CopyFrom=a(1272);u.Decompose=a(490);u.Equals=a(1273);u.FitInside=a(1274);u.FitOutside=a(1275);u.Floor=a(1276);u.FloorAll=a(1277);u.FromPoints=a(199);u.FromXY=a(1278);u.GetAspectRatio=a(237);u.GetCenter=a(1279);u.GetPoint=a(171);u.GetPoints=a(306);u.GetSize=a(1280);u.Inflate=a(1281);u.Intersection=a(1282);u.MarchingAnts=
a(316);u.MergePoints=a(1283);u.MergeRect=a(1284);u.MergeXY=a(1285);u.Offset=a(1286);u.OffsetPoint=a(1287);u.Overlaps=a(1288);u.Perimeter=a(130);u.PerimeterPoint=a(1289);u.Random=a(174);u.RandomOutside=a(1290);u.SameDimensions=a(1291);u.Scale=a(1292);u.Union=a(441);p.exports=u},function(p,u){p.exports=function(a,h){return h.width*h.height>a.width*a.height?!1:h.x>a.x&&h.x<a.right&&h.right>a.x&&h.right<a.right&&h.y>a.y&&h.y<a.bottom&&h.bottom>a.y&&h.bottom<a.bottom}},function(p,u,a){var h=a(4);p.exports=
function(f,c){void 0===c&&(c=new h);c.x=(f.x1+f.x2+f.x3)/3;c.y=(f.y1+f.y2+f.y3)/3;return c}},function(p,u){p.exports=function(a,h,f){a.x1+=h;a.y1+=f;a.x2+=h;a.y2+=f;a.x3+=h;a.y3+=f;return a}},function(p,u,a){function h(c,b,d,g){c-=d;b-=g;return Math.sqrt(c*c+b*b)}var f=a(4);p.exports=function(c,b){void 0===b&&(b=new f);var d=c.x1,g=c.y1,e=c.x2,l=c.y2,k=c.x3;c=c.y3;var m=h(k,c,e,l),n=h(d,g,k,c),q=h(e,l,d,g),r=m+n+q;b.x=(d*m+e*n+k*q)/r;b.y=(g*m+l*n+c*q)/r;return b}},function(p,u){p.exports=function(a,
h){return function(f,c,b,d){return(f=a.getPixelAlpha(c,b,d.texture.key,d.frame.name))&&f>=h}}},function(p,u){p.exports=function(a,h,f){return{gameObject:a,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:f,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(p,u,a){u=new (a(0))({initialize:function(h,f){this.pad=h;this.events=h.events;
this.index=f;this.value=0;this.threshold=.1},update:function(h){this.value=h},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.events=this.pad=null}});p.exports=u},function(p,u,a){u=a(0);var h=a(239);a=new u({initialize:function(f,c){this.pad=f;this.events=f.manager;this.index=c;this.value=0;this.threshold=1;this.pressed=!1},update:function(f){this.value=f;var c=this.pad,b=this.index;f>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(h.BUTTON_DOWN,
c,this,f),this.pad.emit(h.GAMEPAD_BUTTON_DOWN,b,f,this)):this.pressed&&(this.pressed=!1,this.events.emit(h.BUTTON_UP,c,this,f),this.pad.emit(h.GAMEPAD_BUTTON_UP,b,f,this))},destroy:function(){this.events=this.pad=null}});p.exports=a},function(p,u,a){var h=a(509),f=a(510);u=a(0);var c=a(9),b=a(3);a=new u({Extends:c,initialize:function(d,g){c.call(this);this.manager=d;this.pad=g;this.id=g.id;this.index=g.index;for(var e=[],l=0;l<g.buttons.length;l++)e.push(new f(this,l));this.buttons=e;d=[];for(l=0;l<
g.axes.length;l++)d.push(new h(this,l));this.axes=d;this.vibration=g.vibrationActuator;g={value:0,pressed:!1};this._LCLeft=e[14]?e[14]:g;this._LCRight=e[15]?e[15]:g;this._LCTop=e[12]?e[12]:g;this._LCBottom=e[13]?e[13]:g;this._RCLeft=e[2]?e[2]:g;this._RCRight=e[1]?e[1]:g;this._RCTop=e[3]?e[3]:g;this._RCBottom=e[0]?e[0]:g;this._FBLeftTop=e[4]?e[4]:g;this._FBLeftBottom=e[6]?e[6]:g;this._FBRightTop=e[5]?e[5]:g;this._FBRightBottom=e[7]?e[7]:g;g={value:0};this._HAxisLeft=d[0]?d[0]:g;this._VAxisLeft=d[1]?
d[1]:g;this._HAxisRight=d[2]?d[2]:g;this._VAxisRight=d[3]?d[3]:g;this.leftStick=new b;this.rightStick=new b;this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(d){return this.axes[d].getValue()},setAxisThreshold:function(d){for(var g=0;g<this.axes.length;g++)this.axes[g].threshold=d},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(d){return this.buttons[d].value},isButtonDown:function(d){return this.buttons[d].pressed},
update:function(d){if(!(d.timestamp<this._created)){var g,e=this.buttons,l=d.buttons,k=e.length;for(g=0;g<k;g++)e[g].update(l[g].value);e=this.axes;d=d.axes;k=e.length;for(g=0;g<k;g++)e[g].update(d[g]);2<=k&&(this.leftStick.set(e[0].getValue(),e[1].getValue()),4<=k&&this.rightStick.set(e[2].getValue(),e[3].getValue()))}},destroy:function(){this.removeAllListeners();this.pad=this.manager=null;var d;for(d=0;d<this.buttons.length;d++)this.buttons[d].destroy();for(d=0;d<this.axes.length;d++)this.axes[d].destroy();
this.buttons=[];this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},
L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});p.exports=a},function(p,u,a){u=a(0);var h=a(9),f=a(154);a=new u({Extends:h,initialize:function(c,b){h.call(this);this.plugin=c;this.keyCode=b;this.originalEvent=void 0;this.enabled=!0;this.isDown=!1;this.isUp=!0;this.metaKey=this.shiftKey=this.ctrlKey=this.altKey=!1;this.timeUp=this.duration=
this.timeDown=this.location=0;this.emitOnRepeat=!1;this.repeats=0;this._justUp=this._justDown=!1;this._tick=-1},setEmitOnRepeat:function(c){this.emitOnRepeat=c;return this},onDown:function(c){this.originalEvent=c;this.enabled&&(this.altKey=c.altKey,this.ctrlKey=c.ctrlKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.location=c.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(f.DOWN,this,c):(this.isDown=!0,this.isUp=!1,this.timeDown=c.timeStamp,this.duration=0,this._justDown=
!0,this._justUp=!1,this.emit(f.DOWN,this,c)))},onUp:function(c){this.originalEvent=c;this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=c.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(f.UP,this,c))},reset:function(){this.enabled=this.preventDefault=!0;this.isDown=!1;this.isUp=!0;this.metaKey=this.shiftKey=this.ctrlKey=this.altKey=!1;this.repeats=this.timeUp=this.duration=this.timeDown=0;this._justUp=this._justDown=!1;
this._tick=-1;return this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners();this.plugin=this.originalEvent=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(154),f=a(2),c=a(514),b=a(516);a=new u({initialize:function(d,g,e){void 0===e&&(e={});if(2>g.length)return!1;this.manager=d;this.enabled=!0;this.keyCodes=[];for(d=0;d<g.length;d++){var l=g[d];"string"===typeof l?this.keyCodes.push(l.toUpperCase().charCodeAt(0)):
"number"===typeof l?this.keyCodes.push(l):l.hasOwnProperty("keyCode")&&this.keyCodes.push(l.keyCode)}this.current=this.keyCodes[0];this.index=0;this.size=this.keyCodes.length;this.timeLastMatched=0;this.matched=!1;this.timeMatched=0;this.resetOnWrongKey=f(e,"resetOnWrongKey",!0);this.maxKeyDelay=f(e,"maxKeyDelay",0);this.resetOnMatch=f(e,"resetOnMatch",!1);this.deleteOnMatch=f(e,"deleteOnMatch",!1);var k=this;this.onKeyDown=function(m){!k.matched&&k.enabled&&c(m,k)&&(k.manager.emit(h.COMBO_MATCH,
k,m),k.resetOnMatch?b(k):k.deleteOnMatch&&k.destroy())};this.manager.on(h.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1;this.keyCodes=[];this.manager.off(h.ANY_KEY_DOWN,this.onKeyDown);this.manager=null}});p.exports=a},function(p,u,a){var h=a(515);p.exports=function(f,c){if(c.matched)return!0;var b=!1,d=!1;f.keyCode===c.current&&(0<c.index&&0<c.maxKeyDelay?f.timeStamp<=c.timeLastMatched+c.maxKeyDelay&&(d=!0,b=h(f,c)):(d=!0,
b=h(f,c)));!d&&c.resetOnWrongKey&&(c.index=0,c.current=c.keyCodes[0]);b&&(c.timeLastMatched=f.timeStamp,c.matched=!0,c.timeMatched=f.timeStamp);return b}},function(p,u){p.exports=function(a,h){h.timeLastMatched=a.timeStamp;h.index++;if(h.index===h.size)return!0;h.current=h.keyCodes[h.index];return!1}},function(p,u){p.exports=function(a){a.current=a.keyCodes[0];a.index=0;a.timeLastMatched=0;a.matched=!1;a.timeMatched=0;return a}},function(p,u,a){var h=a(240);p.exports=function(f,c){c=h(c,f.xhrSettings);
var b=new XMLHttpRequest;b.open("GET",f.src,c.async,c.user,c.password);b.responseType=f.xhrSettings.responseType;b.timeout=c.timeout;if(c.headers)for(var d in c.headers)b.setRequestHeader(d,c.headers[d]);c.header&&c.headerValue&&b.setRequestHeader(c.header,c.headerValue);c.requestedWith&&b.setRequestHeader("X-Requested-With",c.requestedWith);c.overrideMimeType&&b.overrideMimeType(c.overrideMimeType);c.withCredentials&&(b.withCredentials=!0);b.onload=f.onLoad.bind(f,b);b.onerror=f.onError.bind(f,b);
b.onprogress=f.onProgress.bind(f);b.send();return b}},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(519),g=a(7),e=new u({Extends:f,initialize:function(l,k,m,n,q){if(g(k)){var r=k;k=b(r,"key");n=b(r,"xhrSettings");q=b(r,"context",q)}f.call(this,l,{type:"audio",cache:l.cacheManager.audio,extension:m.type,responseType:"arraybuffer",key:k,url:m.url,xhrSettings:n,config:{context:q}})},onProcess:function(){this.state=h.FILE_PROCESSING;var l=this;this.config.context.decodeAudioData(this.xhrLoader.response,
function(k){l.data=k;l.onProcessComplete()},function(k){console.error("Error decoding audio: "+l.key+" - ",k?k.message:null);l.onProcessError()});this.config.context=null}});e.create=function(l,k,m,n,q){var r=l.systems.game,t=r.config.audio,w=r.device.audio;g(k)&&(m=b(k,"url",[]),n=b(k,"config",{}));return(m=e.getAudioURL(r,m))?w.webAudio&&!t.disableWebAudio?new e(l,k,m,q,r.sound.context):new d(l,k,m,n):null};e.getAudioURL=function(l,k){Array.isArray(k)||(k=[k]);for(var m=0;m<k.length;m++){var n=
b(k[m],"url",k[m]);if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return{url:n,type:""};var q=n.match(/\.([a-zA-Z0-9]+)($|\?)/);q=b(k[m],"type",q?q[1]:"").toLowerCase();if(l.device.audio[q])return{url:n,type:q}}return null};c.register("audio",function(l,k,m,n){var q=this.systems.game,r=q.device.audio;if(q.config.audio.noAudio||!r.webAudio&&!r.audioData)return this;if(Array.isArray(l))for(m=0;m<l.length;m++)(k=e.create(this,l[m]))&&this.addFile(k);else(k=e.create(this,l,k,m,n))&&this.addFile(k);
return this});p.exports=e},function(p,u,a){u=a(0);var h=a(95),f=a(23),c=a(2),b=a(155),d=a(7);a=new u({Extends:f,initialize:function(g,e,l,k){if(d(e)){var m=e;e=c(m,"key");k=c(m,"config",k)}f.call(this,g,{type:"audio",cache:g.cacheManager.audio,extension:l.type,key:e,url:l.url,config:k});this.locked="ontouchstart"in window;this.loaded=!1;this.filesTotal=this.filesLoaded=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var g=0;g<this.data.length;g++){var e=
this.data[g];e.oncanplaythrough=null;e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(g){g=g.target;g.oncanplaythrough=null;g.onerror=null;this.filesLoaded++;this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1);this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete);if(this.filesLoaded===this.filesTotal)this.onLoad()},load:function(){this.data=[];var g=this.config&&this.config.instances||1;this.filesTotal=g;for(var e=this.percentComplete=this.filesLoaded=0;e<g;e++){var l=
new Audio;l.dataset||(l.dataset={});l.dataset.name=this.key+("0"+e).slice(-2);l.dataset.used="false";this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this));this.data.push(l)}for(e=0;e<this.data.length;e++)l=this.data[e],l.src=b(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});p.exports=a},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),
d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m){var n="js";if(d(l)){var q=l;l=b(q,"key");k=b(q,"url");m=b(q,"xhrSettings");n=b(q,"extension",n)}f.call(this,e,{type:"script",cache:!1,extension:n,responseType:"text",key:l,url:k,xhrSettings:m})},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=document.createElement("script");this.data.language="javascript";this.data.type="text/javascript";this.data.defer=!1;this.data.text=this.xhrLoader.responseText;document.head.appendChild(this.data);
this.onProcessComplete()}});c.register("script",function(e,l,k){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k));return this});p.exports=g},function(p,u,a){var h=a(522),f=a(157);u=a(0);var c=a(62),b=a(524),d=a(525);a=new u({initialize:function(g){this.world=g;this.scene=g.scene;this.sys=g.scene.sys},collider:function(g,e,l,k,m){return this.world.addCollider(g,e,l,k,m)},overlap:function(g,e,l,k,m){return this.world.addOverlap(g,e,l,k,m)},
existing:function(g,e){this.world.enableBody(g,e?c.STATIC_BODY:c.DYNAMIC_BODY);return g},staticImage:function(g,e,l,k){g=new h(this.scene,g,e,l,k);this.sys.displayList.add(g);this.world.enableBody(g,c.STATIC_BODY);return g},image:function(g,e,l,k){g=new h(this.scene,g,e,l,k);this.sys.displayList.add(g);this.world.enableBody(g,c.DYNAMIC_BODY);return g},staticSprite:function(g,e,l,k){g=new f(this.scene,g,e,l,k);this.sys.displayList.add(g);this.sys.updateList.add(g);this.world.enableBody(g,c.STATIC_BODY);
return g},sprite:function(g,e,l,k){g=new f(this.scene,g,e,l,k);this.sys.displayList.add(g);this.sys.updateList.add(g);this.world.enableBody(g,c.DYNAMIC_BODY);return g},staticGroup:function(g,e){return this.sys.updateList.add(new d(this.world,this.world.scene,g,e))},group:function(g,e){return this.sys.updateList.add(new b(this.world,this.world.scene,g,e))},destroy:function(){this.sys=this.scene=this.world=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(243),f=a(125);a=new u({Extends:f,Mixins:[h.Acceleration,
h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function(c,b,d,g,e){f.call(this,c,b,d,g,e);this.body=null}});p.exports=a},function(p,u,a){var h=a(244),f=a(65),c=a(231),b=a(151);p.exports=function(d,g,e,l,k,m){d=h(d,g-l,e-l,2*l,2*l,k,m);if(0===d.length)return d;g=new f(g,e,l);e=new f;l=[];for(k=0;k<d.length;k++)m=d[k],m.isCircle?(e.setTo(m.center.x,m.center.y,m.halfWidth),c(g,e)&&l.push(m)):b(g,m)&&l.push(m);return l}},function(p,
u,a){var h=a(157);u=a(0);var f=a(62),c=a(2),b=a(113),d=a(7);a=new u({Extends:b,initialize:function(g,e,l,k){if(l||k)if(d(l))k=l,l=null,k.internalCreateCallback=this.createCallbackHandler,k.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(l)&&d(l[0])){k=l[0];var m=this;l.forEach(function(n){n.internalCreateCallback=m.createCallbackHandler;n.internalRemoveCallback=m.removeCallbackHandler});l=null}else k={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};
else k={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=g;k.classType=c(k,"classType",h);this.physicsType=f.DYNAMIC_BODY;this.defaults={setCollideWorldBounds:c(k,"collideWorldBounds",!1),setBoundsRectangle:c(k,"customBoundsRectangle",null),setAccelerationX:c(k,"accelerationX",0),setAccelerationY:c(k,"accelerationY",0),setAllowDrag:c(k,"allowDrag",!0),setAllowGravity:c(k,"allowGravity",!0),setAllowRotation:c(k,"allowRotation",!0),setBounceX:c(k,
"bounceX",0),setBounceY:c(k,"bounceY",0),setDragX:c(k,"dragX",0),setDragY:c(k,"dragY",0),setEnable:c(k,"enable",!0),setGravityX:c(k,"gravityX",0),setGravityY:c(k,"gravityY",0),setFrictionX:c(k,"frictionX",0),setFrictionY:c(k,"frictionY",0),setMaxVelocityX:c(k,"maxVelocityX",1E4),setMaxVelocityY:c(k,"maxVelocityY",1E4),setVelocityX:c(k,"velocityX",0),setVelocityY:c(k,"velocityY",0),setAngularVelocity:c(k,"angularVelocity",0),setAngularAcceleration:c(k,"angularAcceleration",0),setAngularDrag:c(k,"angularDrag",
0),setMass:c(k,"mass",1),setImmovable:c(k,"immovable",!1)};b.call(this,e,l,k);this.type="PhysicsGroup"},createCallbackHandler:function(g){g.body||this.world.enableBody(g,f.DYNAMIC_BODY);g=g.body;for(var e in this.defaults)g[e](this.defaults[e])},removeCallbackHandler:function(g){g.body&&this.world.disableBody(g)},setVelocity:function(g,e,l){void 0===l&&(l=0);for(var k=this.getChildren(),m=0;m<k.length;m++)k[m].body.velocity.set(g+m*l,e+m*l);return this},setVelocityX:function(g,e){void 0===e&&(e=0);
for(var l=this.getChildren(),k=0;k<l.length;k++)l[k].body.velocity.x=g+k*e;return this},setVelocityY:function(g,e){void 0===e&&(e=0);for(var l=this.getChildren(),k=0;k<l.length;k++)l[k].body.velocity.y=g+k*e;return this}});p.exports=a},function(p,u,a){var h=a(157);u=a(0);var f=a(62),c=a(2),b=a(113),d=a(7);a=new u({Extends:b,initialize:function(g,e,l,k){l||k?d(l)?(k=l,l=null,k.internalCreateCallback=this.createCallbackHandler,k.internalRemoveCallback=this.removeCallbackHandler,k.createMultipleCallback=
this.createMultipleCallbackHandler,k.classType=c(k,"classType",h)):Array.isArray(l)&&d(l[0])?(k=l,l=null,k.forEach(function(m){m.internalCreateCallback=this.createCallbackHandler;m.internalRemoveCallback=this.removeCallbackHandler;m.createMultipleCallback=this.createMultipleCallbackHandler;m.classType=c(m,"classType",h)})):k={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:k={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,
createMultipleCallback:this.createMultipleCallbackHandler,classType:h};this.world=g;this.physicsType=f.STATIC_BODY;b.call(this,e,l,k);this.type="StaticPhysicsGroup"},createCallbackHandler:function(g){g.body||this.world.enableBody(g,f.STATIC_BODY)},removeCallbackHandler:function(g){g.body&&this.world.disableBody(g)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var g=this.children.entries,e=0;e<g.length;e++)g[e].body.reset();return this}});p.exports=a},function(p,
u,a){var h=a(350),f=a(527),c=a(18);u=a(0);var b=a(528),d=a(62),g=a(50),e=a(9),l=a(245),k=a(124),m=a(354),n=a(355),q=a(246),r=a(247),t=a(529),w=a(6),v=a(14),x=a(211),y=a(530),A=a(10),B=a(531),z=a(532),C=a(537),E=a(538),G=a(149),H=a(539),I=a(248),K=a(25),O=a(3),R=a(68);a=new u({Extends:e,initialize:function(F,J){e.call(this);this.scene=F;this.bodies=new G;this.staticBodies=new G;this.pendingDestroy=new G;this.colliders=new x;this.gravity=new O(w(J,"gravity.x",0),w(J,"gravity.y",0));this.bounds=new A(w(J,
"x",0),w(J,"y",0),w(J,"width",F.sys.scale.width),w(J,"height",F.sys.scale.height));this.checkCollision={up:w(J,"checkCollision.up",!0),down:w(J,"checkCollision.down",!0),left:w(J,"checkCollision.left",!0),right:w(J,"checkCollision.right",!0)};this.fps=w(J,"fps",60);this.fixedStep=w(J,"fixedStep",!0);this._elapsed=0;this._frameTime=1/this.fps;this._frameTimeMS=1E3*this._frameTime;this.stepsLastFrame=0;this.timeScale=w(J,"timeScale",1);this.OVERLAP_BIAS=w(J,"overlapBias",4);this.TILE_BIAS=w(J,"tileBias",
16);this.forceX=w(J,"forceX",!1);this.isPaused=w(J,"isPaused",!1);this._total=0;this.drawDebug=w(J,"debug",!1);this.defaults={debugShowBody:w(J,"debugShowBody",!0),debugShowStaticBody:w(J,"debugShowStaticBody",!0),debugShowVelocity:w(J,"debugShowVelocity",!0),bodyDebugColor:w(J,"debugBodyColor",16711935),staticBodyDebugColor:w(J,"debugStaticBodyColor",255),velocityDebugColor:w(J,"debugVelocityColor",65280)};this.maxEntries=w(J,"maxEntries",16);this.useTree=w(J,"useTree",!0);this.tree=new B(this.maxEntries);
this.staticTree=new B(this.maxEntries);this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0};this._tempMatrix=new K;this._tempMatrix2=new K;this.drawDebug&&this.createDebugGraphic()},enable:function(F,J){void 0===J&&(J=d.DYNAMIC_BODY);Array.isArray(F)||(F=[F]);for(var N=0;N<F.length;N++){var Q=F[N];if(Q.isParent){Q=Q.getChildren();for(var T=0;T<Q.length;T++){var S=Q[T];S.isParent?this.enable(S,J):this.enableBody(S,J)}}else this.enableBody(Q,J)}},enableBody:function(F,J){void 0===J&&(J=d.DYNAMIC_BODY);F.body||
(J===d.DYNAMIC_BODY?F.body=new f(this,F):J===d.STATIC_BODY&&(F.body=new H(this,F)));this.add(F.body);return F},add:function(F){F.physicsType===d.DYNAMIC_BODY?this.bodies.set(F):F.physicsType===d.STATIC_BODY&&(this.staticBodies.set(F),this.staticTree.insert(F));F.enable=!0;return F},disable:function(F){Array.isArray(F)||(F=[F]);for(var J=0;J<F.length;J++){var N=F[J];if(N.isParent){N=N.getChildren();for(var Q=0;Q<N.length;Q++){var T=N[Q];T.isParent?this.disable(T):this.disableBody(T.body)}}else this.disableBody(N.body)}},
disableBody:function(F){this.remove(F);F.enable=!1},remove:function(F){F.physicsType===d.DYNAMIC_BODY?(this.tree.remove(F),this.bodies.delete(F)):F.physicsType===d.STATIC_BODY&&(this.staticBodies.delete(F),this.staticTree.remove(F))},createDebugGraphic:function(){var F=this.scene.sys.add.graphics({x:0,y:0});F.setDepth(Number.MAX_VALUE);this.debugGraphic=F;this.drawDebug=!0;return F},setBounds:function(F,J,N,Q,T,S,W,X){this.bounds.setTo(F,J,N,Q);void 0!==T&&this.setBoundsCollision(T,S,W,X);return this},
setBoundsCollision:function(F,J,N,Q){void 0===F&&(F=!0);void 0===J&&(J=!0);void 0===N&&(N=!0);void 0===Q&&(Q=!0);this.checkCollision.left=F;this.checkCollision.right=J;this.checkCollision.up=N;this.checkCollision.down=Q;return this},pause:function(){this.isPaused=!0;this.emit(l.PAUSE);return this},resume:function(){this.isPaused=!1;this.emit(l.RESUME);return this},addCollider:function(F,J,N,Q,T){void 0===N&&(N=null);void 0===Q&&(Q=null);void 0===T&&(T=N);F=new b(this,!1,F,J,N,Q,T);this.colliders.add(F);
return F},addOverlap:function(F,J,N,Q,T){void 0===N&&(N=null);void 0===Q&&(Q=null);void 0===T&&(T=N);F=new b(this,!0,F,J,N,Q,T);this.colliders.add(F);return F},removeCollider:function(F){this.colliders.remove(F);return this},setFPS:function(F){this.fps=F;this._frameTime=1/this.fps;this._frameTimeMS=1E3*this._frameTime;return this},update:function(F,J){if(!this.isPaused&&0!==this.bodies.size){F=this._frameTime;var N=this._frameTimeMS*this.timeScale;this._elapsed+=J;var Q=this.bodies.entries,T=this._elapsed>=
N;this.fixedStep||(F=.001*J,T=!0,this._elapsed=0);for(J=0;J<Q.length;J++){var S=Q[J];S.enable&&S.preUpdate(T,F)}if(T){this._elapsed-=N;this.stepsLastFrame=1;this.useTree&&(this.tree.clear(),this.tree.load(Q));Q=this.colliders.update();for(J=0;J<Q.length;J++)T=Q[J],T.active&&T.update();this.emit(l.WORLD_STEP,F)}for(;this._elapsed>=N;)this._elapsed-=N,this.step(F)}},step:function(F){var J,N=this.bodies.entries,Q=N.length;for(J=0;J<Q;J++){var T=N[J];T.enable&&T.update(F)}this.useTree&&(this.tree.clear(),
this.tree.load(N));T=this.colliders.update();for(J=0;J<T.length;J++)N=T[J],N.active&&N.update();this.emit(l.WORLD_STEP,F);this.stepsLastFrame++},postUpdate:function(){var F,J=this.bodies.entries,N=J.length,Q=this.bodies,T=this.staticBodies;if(this.stepsLastFrame)for(F=this.stepsLastFrame=0;F<N;F++){var S=J[F];S.enable&&S.postUpdate()}if(this.drawDebug){var W=this.debugGraphic;W.clear();for(F=0;F<N;F++)S=J[F],S.willDrawDebug()&&S.drawDebug(W);J=T.entries;N=J.length;for(F=0;F<N;F++)S=J[F],S.willDrawDebug()&&
S.drawDebug(W)}W=this.pendingDestroy;if(0<W.size){var X=this.tree,ba=this.staticTree;J=W.entries;N=J.length;for(F=0;F<N;F++)S=J[F],S.physicsType===d.DYNAMIC_BODY?(X.remove(S),Q.delete(S)):S.physicsType===d.STATIC_BODY&&(ba.remove(S),T.delete(S)),S.world=void 0,S.gameObject=void 0;W.clear()}},updateMotion:function(F,J){F.allowRotation&&this.computeAngularVelocity(F,J);this.computeVelocity(F,J)},computeAngularVelocity:function(F,J){var N=F.angularVelocity,Q=F.angularAcceleration,T=F.angularDrag,S=F.maxAngular;
Q?N+=Q*J:F.allowDrag&&T&&(T*=J,N=m(N-T,0,.1)?N-T:n(N+T,0,.1)?N+T:0);N=c(N,-S,S);F.angularVelocity+=N-F.angularVelocity;F.rotation+=F.angularVelocity*J},computeVelocity:function(F,J){var N=F.velocity.x,Q=F.acceleration.x,T=F.drag.x,S=F.maxVelocity.x,W=F.velocity.y,X=F.acceleration.y,ba=F.drag.y,fa=F.maxVelocity.y,la=F.speed,na=F.maxSpeed,pa=F.allowDrag,ma=F.useDamping;F.allowGravity&&(N+=(this.gravity.x+F.gravity.x)*J,W+=(this.gravity.y+F.gravity.y)*J);Q?N+=Q*J:pa&&T&&(ma?(T=Math.pow(T,J),N*=T,la=
Math.sqrt(N*N+W*W),k(la,0,.001)&&(N=0)):(T*=J,N=m(N-T,0,.01)?N-T:n(N+T,0,.01)?N+T:0));X?W+=X*J:pa&&ba&&(ma?(ba=Math.pow(ba,J),W*=ba,la=Math.sqrt(N*N+W*W),k(la,0,.001)&&(W=0)):(ba*=J,W=m(W-ba,0,.01)?W-ba:n(W+ba,0,.01)?W+ba:0));N=c(N,-S,S);W=c(W,-fa,fa);F.velocity.set(N,W);-1<na&&la>na&&(F.velocity.normalize().scale(na),la=na);F.speed=la},separate:function(F,J,N,Q,T,S){if(!S&&!F.enable||!J.enable||F.checkCollision.none||J.checkCollision.none||!this.intersects(F,J)||N&&!1===N.call(Q,F.gameObject,J.gameObject))return!1;
if(F.isCircle&&J.isCircle)return this.separateCircle(F,J,T);if(F.isCircle!==J.isCircle){N=F.isCircle?J:F;Q=N.x;S=N.right;var W=N.bottom,X=(F.isCircle?F:J).center;if(X.y<N.y||X.y>W)if(X.x<Q||X.x>S)return this.separateCircle(F,J,T)}Q=N=!1;T?(N=C(F,J,T,this.OVERLAP_BIAS),Q=E(F,J,T,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+F.gravity.y)<Math.abs(this.gravity.x+F.gravity.x)?(N=C(F,J,T,this.OVERLAP_BIAS),this.intersects(F,J)&&(Q=E(F,J,T,this.OVERLAP_BIAS))):(Q=E(F,J,T,this.OVERLAP_BIAS),this.intersects(F,
J)&&(N=C(F,J,T,this.OVERLAP_BIAS)));(N=N||Q)&&(T?(F.onOverlap||J.onOverlap)&&this.emit(l.OVERLAP,F.gameObject,J.gameObject,F,J):(F.onCollide||J.onCollide)&&this.emit(l.COLLIDE,F.gameObject,J.gameObject,F,J));return N},separateCircle:function(F,J,N,Q){q(F,J,!1,Q);r(F,J,!1,Q);Q=0;if(F.isCircle!==J.isCircle){var T=J.isCircle?F.position.x:J.position.x,S=J.isCircle?F.position.y:J.position.y,W=J.isCircle?F.right:J.right,X=J.isCircle?F.bottom:J.bottom,ba=F.isCircle?F.center.x:J.center.x,fa=F.isCircle?F.center.y:
J.center.y,la=F.isCircle?F.halfWidth:J.halfWidth;fa<S?ba<T?Q=g(ba,fa,T,S)-la:ba>W&&(Q=g(ba,fa,W,S)-la):fa>X&&(ba<T?Q=g(ba,fa,T,X)-la:ba>W&&(Q=g(ba,fa,W,X)-la));Q*=-1}else Q=F.halfWidth+J.halfWidth-g(F.center.x,F.center.y,J.center.x,J.center.y);F.overlapR=Q;J.overlapR=Q;if(N||0===Q||F.immovable&&J.immovable||F.customSeparateX||J.customSeparateX)return 0!==Q&&(F.onOverlap||J.onOverlap)&&this.emit(l.OVERLAP,F.gameObject,J.gameObject,F,J),0!==Q;T=Math.sqrt(Math.pow(F.center.x-J.center.x,2)+Math.pow(F.center.y-
J.center.y,2));N=(J.center.x-F.center.x)/T||0;T=(J.center.y-F.center.y)/T||0;S=2*(F.velocity.x*N+F.velocity.y*T-J.velocity.x*N-J.velocity.y*T)/(F.mass+J.mass);if(F.immovable||J.immovable)S*=2;F.immovable||(F.velocity.x-=S/F.mass*N,F.velocity.y-=S/F.mass*T);J.immovable||(J.velocity.x+=S/J.mass*N,J.velocity.y+=S/J.mass*T);F.immovable||J.immovable||(Q/=2);T=h(F.center,J.center);N=(Q+v.EPSILON)*Math.cos(T);Q=(Q+v.EPSILON)*Math.sin(T);F.immovable||(F.x-=N,F.y-=Q,F.updateCenter());J.immovable||(J.x+=N,
J.y+=Q,J.updateCenter());F.velocity.x*=F.bounce.x;F.velocity.y*=F.bounce.y;J.velocity.x*=J.bounce.x;J.velocity.y*=J.bounce.y;(F.onCollide||J.onCollide)&&this.emit(l.COLLIDE,F.gameObject,J.gameObject,F,J);return!0},intersects:function(F,J){return F===J?!1:F.isCircle||J.isCircle?F.isCircle?J.isCircle?g(F.center.x,F.center.y,J.center.x,J.center.y)<=F.halfWidth+J.halfWidth:this.circleBodyIntersects(F,J):this.circleBodyIntersects(J,F):!(F.right<=J.position.x||F.bottom<=J.position.y||F.position.x>=J.right||
F.position.y>=J.bottom)},circleBodyIntersects:function(F,J){var N=c(F.center.x,J.left,J.right);J=c(F.center.y,J.top,J.bottom);return(F.center.x-N)*(F.center.x-N)+(F.center.y-J)*(F.center.y-J)<=F.halfWidth*F.halfWidth},overlap:function(F,J,N,Q,T){void 0===N&&(N=null);void 0===Q&&(Q=null);void 0===T&&(T=N);return this.collideObjects(F,J,N,Q,T,!0)},collide:function(F,J,N,Q,T){void 0===N&&(N=null);void 0===Q&&(Q=null);void 0===T&&(T=N);return this.collideObjects(F,J,N,Q,T,!1)},collideObjects:function(F,
J,N,Q,T,S){F.isParent&&void 0===F.physicsType&&(F=F.children.entries);J&&J.isParent&&void 0===J.physicsType&&(J=J.children.entries);var W=Array.isArray(F);var X=Array.isArray(J);this._total=0;if(W||X)if(!W&&X)for(W=0;W<J.length;W++)this.collideHandler(F,J[W],N,Q,T,S);else if(W&&!X)if(J)for(W=0;W<F.length;W++)this.collideHandler(F[W],J,N,Q,T,S);else for(W=0;W<F.length;W++)for(J=F[W],X=W+1;X<F.length;X++)W!==X&&this.collideHandler(J,F[X],N,Q,T,S);else for(W=0;W<F.length;W++)for(X=0;X<J.length;X++)this.collideHandler(F[W],
J[X],N,Q,T,S);else this.collideHandler(F,J,N,Q,T,S);return 0<this._total},collideHandler:function(F,J,N,Q,T,S){if(void 0===J&&F.isParent)return this.collideGroupVsGroup(F,F,N,Q,T,S);if(!F||!J)return!1;if(F.body){if(J.body)return this.collideSpriteVsSprite(F,J,N,Q,T,S);if(J.isParent)return this.collideSpriteVsGroup(F,J,N,Q,T,S);if(J.isTilemap)return this.collideSpriteVsTilemapLayer(F,J,N,Q,T,S)}else if(F.isParent){if(J.body)return this.collideSpriteVsGroup(J,F,N,Q,T,S);if(J.isParent)return this.collideGroupVsGroup(F,
J,N,Q,T,S);if(J.isTilemap)return this.collideGroupVsTilemapLayer(F,J,N,Q,T,S)}else if(F.isTilemap){if(J.body)return this.collideSpriteVsTilemapLayer(J,F,N,Q,T,S);if(J.isParent)return this.collideGroupVsTilemapLayer(J,F,N,Q,T,S)}},collideSpriteVsSprite:function(F,J,N,Q,T,S){if(!F.body||!J.body)return!1;this.separate(F.body,J.body,Q,T,S)&&(N&&N.call(T,F,J),this._total++);return!0},collideSpriteVsGroup:function(F,J,N,Q,T,S){var W=F.body;if(0!==J.length&&W&&W.enable&&!W.checkCollision.none)if(this.useTree||
J.physicsType===d.STATIC_BODY){F=this.treeMinMax;F.minX=W.left;F.minY=W.top;F.maxX=W.right;F.maxY=W.bottom;var X=J.physicsType===d.DYNAMIC_BODY?this.tree.search(F):this.staticTree.search(F);var ba=X.length;for(F=0;F<ba;F++){var fa=X[F];W!==fa&&fa.enable&&!fa.checkCollision.none&&J.contains(fa.gameObject)&&this.separate(W,fa,Q,T,S,!0)&&(N&&N.call(T,W.gameObject,fa.gameObject),this._total++)}}else for(X=J.getChildren(),J=J.children.entries.indexOf(F),ba=X.length,F=0;F<ba;F++)(fa=X[F].body)&&F!==J&&
fa.enable&&this.separate(W,fa,Q,T,S)&&(N&&N.call(T,W.gameObject,fa.gameObject),this._total++)},collideGroupVsTilemapLayer:function(F,J,N,Q,T,S){F=F.getChildren();if(0===F.length)return!1;for(var W=!1,X=0;X<F.length;X++)F[X].body&&this.collideSpriteVsTilemapLayer(F[X],J,N,Q,T,S)&&(W=!0);return W},collideTiles:function(F,J,N,Q,T){return F.body.enable&&0!==J.length?this.collideSpriteVsTilesHandler(F,J,N,Q,T,!1,!1):!1},overlapTiles:function(F,J,N,Q,T){return F.body.enable&&0!==J.length?this.collideSpriteVsTilesHandler(F,
J,N,Q,T,!0,!1):!1},collideSpriteVsTilemapLayer:function(F,J,N,Q,T,S){var W=F.body;if(!W.enable||W.checkCollision.none)return!1;var X=W.position.x,ba=W.position.y,fa=W.width;W=W.height;var la=J.layer;if(la.tileWidth>la.baseTileWidth){var na=(la.tileWidth-la.baseTileWidth)*J.scaleX;X-=na;fa+=na}la.tileHeight>la.baseTileHeight&&(W+=(la.tileHeight-la.baseTileHeight)*J.scaleY);J=t(X,ba,fa,W,null,J.scene.cameras.main,J.layer);return 0===J.length?!1:this.collideSpriteVsTilesHandler(F,J,N,Q,T,S,!0)},collideSpriteVsTilesHandler:function(F,
J,N,Q,T,S,W){for(var X=F.body,ba,fa={left:0,right:0,top:0,bottom:0},la,na=!1,pa=0;pa<J.length;pa++){ba=J[pa];la=ba.tilemapLayer;var ma=la.tileToWorldXY(ba.x,ba.y);fa.left=ma.x;fa.top=ma.y;ba.baseHeight!==ba.height&&(fa.top-=(ba.height-ba.baseHeight)*la.scaleY);fa.right=fa.left+ba.width*la.scaleX;fa.bottom=fa.top+ba.height*la.scaleY;I(fa,X)&&(!Q||Q.call(T,F,ba))&&y(ba,F)&&(S||z(pa,X,ba,fa,la,this.TILE_BIAS,W))&&(this._total++,na=!0,N&&N.call(T,F,ba),S&&X.onOverlap?this.emit(l.TILE_OVERLAP,F,ba,X):
X.onCollide&&this.emit(l.TILE_COLLIDE,F,ba,X))}return na},collideGroupVsGroup:function(F,J,N,Q,T,S){if(0!==F.length&&0!==J.length){F=F.getChildren();for(var W=0;W<F.length;W++)this.collideSpriteVsGroup(F[W],J,N,Q,T,S)}},wrap:function(F,J){F.body?this.wrapObject(F,J):F.getChildren?this.wrapArray(F.getChildren(),J):Array.isArray(F)?this.wrapArray(F,J):this.wrapObject(F,J)},wrapArray:function(F,J){for(var N=0;N<F.length;N++)this.wrapObject(F[N],J)},wrapObject:function(F,J){void 0===J&&(J=0);F.x=R(F.x,
this.bounds.left-J,this.bounds.right+J);F.y=R(F.y,this.bounds.top-J,this.bounds.bottom+J)},shutdown:function(){this.tree.clear();this.staticTree.clear();this.bodies.clear();this.staticBodies.clear();this.colliders.destroy();this.removeAllListeners()},destroy:function(){this.shutdown();this.scene=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(62),f=a(245),c=a(196),b=a(10),d=a(57),g=a(3);a=new u({initialize:function(e,l){var k=l.displayWidth?l.displayWidth:64,m=l.displayHeight?l.displayHeight:
64;this.world=e;this.gameObject=l;this.transform={x:l.x,y:l.y,rotation:l.angle,scaleX:l.scaleX,scaleY:l.scaleY,displayOriginX:l.displayOriginX,displayOriginY:l.displayOriginY};this.debugShowBody=e.defaults.debugShowBody;this.debugShowVelocity=e.defaults.debugShowVelocity;this.debugBodyColor=e.defaults.bodyDebugColor;this.enable=!0;this.isCircle=!1;this.radius=0;this.offset=new g;this.position=new g(l.x-l.scaleX*l.displayOriginX,l.y-l.scaleY*l.displayOriginY);this.prev=this.position.clone();this.prevFrame=
this.position.clone();this.allowRotation=!0;this.preRotation=this.rotation=l.angle;this.width=k;this.height=m;this.sourceWidth=k;this.sourceHeight=m;l.frame&&(this.sourceWidth=l.frame.realWidth,this.sourceHeight=l.frame.realHeight);this.halfWidth=Math.abs(k/2);this.halfHeight=Math.abs(m/2);this.center=new g(this.position.x+this.halfWidth,this.position.y+this.halfHeight);this.velocity=new g;this.newVelocity=new g;this.deltaMax=new g;this.acceleration=new g;this.allowDrag=!0;this.drag=new g;this.allowGravity=
!0;this.gravity=new g;this.bounce=new g;this.worldBounce=null;this.customBoundsRectangle=e.bounds;this.onOverlap=this.onCollide=this.onWorldBounds=!1;this.maxVelocity=new g(1E4,1E4);this.maxSpeed=-1;this.friction=new g(1,0);this.useDamping=!1;this.angularDrag=this.angularAcceleration=this.angularVelocity=0;this.maxAngular=1E3;this.mass=1;this.speed=this.angle=0;this.facing=h.FACING_NONE;this.immovable=!1;this.moves=this.pushable=!0;this.customSeparateY=this.customSeparateX=!1;this.overlapR=this.overlapY=
this.overlapX=0;this.collideWorldBounds=this.embedded=!1;this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0};this.touching={none:!0,up:!1,down:!1,left:!1,right:!1};this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1};this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1};this.syncBounds=!1;this.physicsType=h.DYNAMIC_BODY;this._sx=l.scaleX;this._sy=l.scaleY;this._ty=this._tx=this._dy=this._dx=0;this._bounds=new b},updateBounds:function(){var e=this.gameObject,l=this.transform;if(e.parentContainer){var k=
e.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);l.x=k.tx;l.y=k.ty;l.rotation=c(k.rotation);l.scaleX=k.scaleX;l.scaleY=k.scaleY}else l.x=e.x,l.y=e.y,l.rotation=e.angle,l.scaleX=e.scaleX,l.scaleY=e.scaleY;l.displayOriginX=e.displayOriginX;l.displayOriginY=e.displayOriginY;k=!1;if(this.syncBounds)l=e.getBounds(this._bounds),this.width=l.width,this.height=l.height,k=!0;else if(e=Math.abs(l.scaleX),l=Math.abs(l.scaleY),this._sx!==e||this._sy!==l)this.width=this.sourceWidth*e,
this.height=this.sourceHeight*l,this._sx=e,this._sy=l,k=!0;k&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var e=this.transform;this.position.x=e.x+e.scaleX*(this.offset.x-e.displayOriginX);this.position.y=e.y+e.scaleY*(this.offset.y-e.displayOriginY);this.updateCenter()},resetFlags:function(e){void 0===
e&&(e=!1);var l=this.wasTouching,k=this.touching,m=this.blocked;e?(l.none=!0,l.up=!1,l.down=!1,l.left=!1,l.right=!1):(l.none=k.none,l.up=k.up,l.down=k.down,l.left=k.left,l.right=k.right);k.none=!0;k.up=!1;k.down=!1;k.left=!1;k.right=!1;m.none=!0;m.up=!1;m.down=!1;m.left=!1;m.right=!1;this.overlapY=this.overlapX=this.overlapR=0;this.embedded=!1},preUpdate:function(e,l){e&&this.resetFlags();this.updateFromGameObject();this.preRotation=this.rotation=this.transform.rotation;this.moves&&(this.prev.x=this.position.x,
this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y);e&&this.update(l)},update:function(e){this.prev.x=this.position.x;this.prev.y=this.position.y;if(this.moves){this.world.updateMotion(this,e);var l=this.velocity.x,k=this.velocity.y;this.newVelocity.set(l*e,k*e);this.position.add(this.newVelocity);this.updateCenter();this.angle=Math.atan2(k,l);this.speed=Math.sqrt(l*l+k*k);this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(f.WORLD_BOUNDS,
this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x;this._dy=this.position.y-this.prev.y},postUpdate:function(){var e=this.position.x-this.prevFrame.x,l=this.position.y-this.prevFrame.y;if(this.moves){var k=this.deltaMax.x,m=this.deltaMax.y;0!==k&&0!==e&&(0>e&&e<-k?e=-k:0<e&&e>k&&(e=k));0!==m&&0!==l&&(0>l&&l<-m?l=-m:0<l&&l>m&&(l=m));this.gameObject.x+=e;this.gameObject.y+=l}0>e?this.facing=h.FACING_LEFT:0<e&&(this.facing=h.FACING_RIGHT);
0>l?this.facing=h.FACING_UP:0<l&&(this.facing=h.FACING_DOWN);this.allowRotation&&(this.gameObject.angle+=this.deltaZ());this._tx=e;this._ty=l},setBoundsRectangle:function(e){this.customBoundsRectangle=e?e:this.world.bounds;return this},checkWorldBounds:function(){var e=this.position,l=this.customBoundsRectangle,k=this.world.checkCollision,m=this.worldBounce?-this.worldBounce.x:-this.bounce.x,n=this.worldBounce?-this.worldBounce.y:-this.bounce.y,q=!1;e.x<l.x&&k.left?(e.x=l.x,this.velocity.x*=m,q=this.blocked.left=
!0):this.right>l.right&&k.right&&(e.x=l.right-this.width,this.velocity.x*=m,q=this.blocked.right=!0);e.y<l.y&&k.up?(e.y=l.y,this.velocity.y*=n,q=this.blocked.up=!0):this.bottom>l.bottom&&k.down&&(e.y=l.bottom-this.height,this.velocity.y*=n,q=this.blocked.down=!0);q&&(this.blocked.none=!1,this.updateCenter());return q},setOffset:function(e,l){void 0===l&&(l=e);this.offset.set(e,l);return this},setSize:function(e,l,k){void 0===k&&(k=!0);var m=this.gameObject;!e&&m.frame&&(e=m.frame.realWidth);!l&&m.frame&&
(l=m.frame.realHeight);this.sourceWidth=e;this.sourceHeight=l;this.width=this.sourceWidth*this._sx;this.height=this.sourceHeight*this._sy;this.halfWidth=Math.floor(this.width/2);this.halfHeight=Math.floor(this.height/2);this.updateCenter();k&&m.getCenter&&this.offset.set((m.width-e)/2,(m.height-l)/2);this.isCircle=!1;this.radius=0;return this},setCircle:function(e,l,k){void 0===l&&(l=this.offset.x);void 0===k&&(k=this.offset.y);0<e?(this.isCircle=!0,this.radius=e,this.sourceWidth=2*e,this.sourceHeight=
2*e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,k),this.updateCenter()):this.isCircle=!1;return this},reset:function(e,l){this.stop();var k=this.gameObject;k.setPosition(e,l);k.getTopLeft?k.getTopLeft(this.position):this.position.set(e,l);this.prev.copy(this.position);this.prevFrame.copy(this.position);this.preRotation=this.rotation=k.angle;this.updateBounds();this.updateCenter();
this.resetFlags(!0)},stop:function(){this.velocity.set(0);this.acceleration.set(0);this.angularAcceleration=this.angularVelocity=this.speed=0;return this},getBounds:function(e){e.x=this.x;e.y=this.y;e.right=this.right;e.bottom=this.bottom;return e},hitTest:function(e,l){return this.isCircle?0<this.radius&&e>=this.left&&e<=this.right&&l>=this.top&&l<=this.bottom?(this.center.x-e)*(this.center.x-e)+(this.center.y-l)*(this.center.y-l)<=this.radius*this.radius:!1:d(this,e,l)},onFloor:function(){return this.blocked.down},
onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function(){return 0<this._dy?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1;this.world&&this.world.pendingDestroy.set(this)},
drawDebug:function(e){var l=this.position,k=l.x+this.halfWidth,m=l.y+this.halfHeight;this.debugShowBody&&(e.lineStyle(e.defaultStrokeWidth,this.debugBodyColor),this.isCircle?e.strokeCircle(k,m,this.width/2):(this.checkCollision.up&&e.lineBetween(l.x,l.y,l.x+this.width,l.y),this.checkCollision.right&&e.lineBetween(l.x+this.width,l.y,l.x+this.width,l.y+this.height),this.checkCollision.down&&e.lineBetween(l.x,l.y+this.height,l.x+this.width,l.y+this.height),this.checkCollision.left&&e.lineBetween(l.x,
l.y,l.x,l.y+this.height)));this.debugShowVelocity&&(e.lineStyle(e.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),e.lineBetween(k,m,k+this.velocity.x/2,m+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(e,l,k,m){void 0===e&&(e=!0);this.collideWorldBounds=e;e=void 0!==l;var n=void 0!==k;if(e||n)this.worldBounce||(this.worldBounce=new g),e&&(this.worldBounce.x=l),n&&(this.worldBounce.y=k);void 0!==m&&(this.onWorldBounds=
m);return this},setVelocity:function(e,l){this.velocity.set(e,l);e=this.velocity.x;l=this.velocity.y;this.speed=Math.sqrt(e*e+l*l);return this},setVelocityX:function(e){this.velocity.x=e;var l=this.velocity.y;this.speed=Math.sqrt(e*e+l*l);return this},setVelocityY:function(e){this.velocity.y=e;var l=this.velocity.x;this.speed=Math.sqrt(l*l+e*e);return this},setMaxVelocity:function(e,l){this.maxVelocity.set(e,l);return this},setMaxVelocityX:function(e){this.maxVelocity.x=e;return this},setMaxVelocityY:function(e){this.maxVelocity.y=
e;return this},setMaxSpeed:function(e){this.maxSpeed=e;return this},setBounce:function(e,l){this.bounce.set(e,l);return this},setBounceX:function(e){this.bounce.x=e;return this},setBounceY:function(e){this.bounce.y=e;return this},setAcceleration:function(e,l){this.acceleration.set(e,l);return this},setAccelerationX:function(e){this.acceleration.x=e;return this},setAccelerationY:function(e){this.acceleration.y=e;return this},setAllowDrag:function(e){void 0===e&&(e=!0);this.allowDrag=e;return this},
setAllowGravity:function(e){void 0===e&&(e=!0);this.allowGravity=e;return this},setAllowRotation:function(e){void 0===e&&(e=!0);this.allowRotation=e;return this},setDrag:function(e,l){this.drag.set(e,l);return this},setDamping:function(e){this.useDamping=e;return this},setDragX:function(e){this.drag.x=e;return this},setDragY:function(e){this.drag.y=e;return this},setGravity:function(e,l){this.gravity.set(e,l);return this},setGravityX:function(e){this.gravity.x=e;return this},setGravityY:function(e){this.gravity.y=
e;return this},setFriction:function(e,l){this.friction.set(e,l);return this},setFrictionX:function(e){this.friction.x=e;return this},setFrictionY:function(e){this.friction.y=e;return this},setAngularVelocity:function(e){this.angularVelocity=e;return this},setAngularAcceleration:function(e){this.angularAcceleration=e;return this},setAngularDrag:function(e){this.angularDrag=e;return this},setMass:function(e){this.mass=e;return this},setImmovable:function(e){void 0===e&&(e=!0);this.immovable=e;return this},
setEnable:function(e){void 0===e&&(e=!0);this.enable=e;return this},processX:function(e,l,k,m){this.x+=e;this.updateCenter();null!==l&&(this.velocity.x=l);e=this.blocked;k&&(e.left=!0);m&&(e.right=!0)},processY:function(e,l,k,m){this.y+=e;this.updateCenter();null!==l&&(this.velocity.y=l);e=this.blocked;k&&(e.up=!0);m&&(e.down=!0)},x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},left:{get:function(){return this.position.x}},
right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});p.exports=a},function(p,u,a){u=new (a(0))({initialize:function(h,f,c,b,d,g,e){this.world=h;this.name="";this.active=!0;this.overlapOnly=f;this.object1=c;this.object2=b;this.collideCallback=d;this.processCallback=g;this.callbackContext=e},setName:function(h){this.name=h;return this},update:function(){this.world.collideObjects(this.object1,
this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this);this.active=!1;this.callbackContext=this.processCallback=this.collideCallback=this.object2=this.object1=this.world=null}});p.exports=u},function(p,u,a){var h=a(26);u=a(3);var f=new u,c=new u;p.exports=function(b,d,g,e,l,k,m){var n=m.tilemapLayer.tilemap._convert.WorldToTileXY;n(b,d,!0,f,k,m);var q=f.x,r=f.y;n(b+g,d+e,!1,c,k,m);return h(q,r,Math.ceil(c.x)-
q,Math.ceil(c.y)-r,l,m)}},function(p,u){p.exports=function(a,h){return a.collisionCallback?!a.collisionCallback.call(a.collisionCallbackContext,h,a):a.layer.callbacks[a.index]?!a.layer.callbacks[a.index].callback.call(a.layer.callbacks[a.index].callbackContext,h,a):!0}},function(p,u,a){function h(t){var w=[".left",".top",".right",".bottom"];if(!(this instanceof h))return new h(t,w);this._maxEntries=Math.max(4,t||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()}function f(t,
w){c(t,0,t.children.length,w,t)}function c(t,w,v,x,y){y||(y=n(null));y.minX=Infinity;y.minY=Infinity;y.maxX=-Infinity;y.maxY=-Infinity;for(var A;w<v;w++)A=t.children[w],b(y,t.leaf?x(A):A);return y}function b(t,w){t.minX=Math.min(t.minX,w.minX);t.minY=Math.min(t.minY,w.minY);t.maxX=Math.max(t.maxX,w.maxX);t.maxY=Math.max(t.maxY,w.maxY);return t}function d(t,w){return t.minX-w.minX}function g(t,w){return t.minY-w.minY}function e(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function l(t){return t.maxX-t.minX+
(t.maxY-t.minY)}function k(t,w){return t.minX<=w.minX&&t.minY<=w.minY&&w.maxX<=t.maxX&&w.maxY<=t.maxY}function m(t,w){return w.minX<=t.maxX&&w.minY<=t.maxY&&w.maxX>=t.minX&&w.maxY>=t.minY}function n(t){return{children:t,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function q(t,w,v,x,y){for(var A=[w,v],B;A.length;)v=A.pop(),w=A.pop(),v-w<=x||(B=w+Math.ceil((v-w)/x/2)*x,r(t,B,w,v,y),A.push(w,B,B,v))}var r=a(436);h.prototype={all:function(){return this._all(this.data,[])},
search:function(t){var w=this.data,v=[],x=this.toBBox;if(!m(t,w))return v;for(var y=[],A,B,z,C;w;){A=0;for(B=w.children.length;A<B;A++)z=w.children[A],C=w.leaf?x(z):z,m(t,C)&&(w.leaf?v.push(z):k(t,C)?this._all(z,v):y.push(z));w=y.pop()}return v},collides:function(t){var w=this.data,v=this.toBBox;if(!m(t,w))return!1;for(var x=[],y,A,B,z;w;){y=0;for(A=w.children.length;y<A;y++)if(B=w.children[y],z=w.leaf?v(B):B,m(t,z)){if(w.leaf||k(t,z))return!0;x.push(B)}w=x.pop()}return!1},load:function(t){if(!t||
!t.length)return this;if(t.length<this._minEntries){for(var w=0,v=t.length;w<v;w++)this.insert(t[w]);return this}t=this._build(t.slice(),0,t.length-1,0);this.data.children.length?this.data.height===t.height?this._splitRoot(this.data,t):(this.data.height<t.height&&(w=this.data,this.data=t,t=w),this._insert(t,this.data.height-t.height-1,!0)):this.data=t;return this},insert:function(t){t&&this._insert(t,this.data.height-1);return this},clear:function(){this.data=n([]);return this},remove:function(t,
w){if(!t)return this;for(var v=this.data,x=this.toBBox(t),y=[],A=[],B,z,C,E;v||y.length;){v||(v=y.pop(),z=y[y.length-1],B=A.pop(),E=!0);if(v.leaf){a:{C=t;var G=v.children,H=w;if(H){for(var I=0;I<G.length;I++)if(H(C,G[I])){C=I;break a}C=-1}else C=G.indexOf(C)}if(-1!==C){v.children.splice(C,1);y.push(v);this._condense(y);break}}E||v.leaf||!k(v,x)?z?(B++,v=z.children[B],E=!1):v=null:(y.push(v),A.push(B),B=0,z=v,v=v.children[0])}return this},toBBox:function(t){return t},compareMinX:d,compareMinY:g,toJSON:function(){return this.data},
fromJSON:function(t){this.data=t;return this},_all:function(t,w){for(var v=[];t;)t.leaf?w.push.apply(w,t.children):v.push.apply(v,t.children),t=v.pop();return w},_build:function(t,w,v,x){var y=v-w+1,A=this._maxEntries;if(y<=A){var B=n(t.slice(w,v+1));f(B,this.toBBox);return B}x||(x=Math.ceil(Math.log(y)/Math.log(A)),A=Math.ceil(y/Math.pow(A,x-1)));B=n([]);B.leaf=!1;B.height=x;y=Math.ceil(y/A);A=y*Math.ceil(Math.sqrt(A));var z;for(q(t,w,v,A,this.compareMinX);w<=v;w+=A){var C=Math.min(w+A-1,v);q(t,
w,C,y,this.compareMinY);for(z=w;z<=C;z+=y){var E=Math.min(z+y-1,C);B.children.push(this._build(t,z,E,x-1))}}f(B,this.toBBox);return B},_chooseSubtree:function(t,w,v,x){for(var y,A,B,z,C,E,G,H;;){x.push(w);if(w.leaf||x.length-1===v)break;G=H=Infinity;y=0;for(A=w.children.length;y<A;y++)B=w.children[y],C=e(B),E=(Math.max(B.maxX,t.maxX)-Math.min(B.minX,t.minX))*(Math.max(B.maxY,t.maxY)-Math.min(B.minY,t.minY))-C,E<H?(H=E,G=C<G?C:G,z=B):E===H&&C<G&&(G=C,z=B);w=z||w.children[0]}return w},_insert:function(t,
w,v){var x=this.toBBox;v=v?t:x(t);x=[];var y=this._chooseSubtree(v,this.data,w,x);y.children.push(t);for(b(y,v);0<=w;)if(x[w].children.length>this._maxEntries)this._split(x,w),w--;else break;this._adjustParentBBoxes(v,x,w)},_split:function(t,w){var v=t[w],x=v.children.length,y=this._minEntries;this._chooseSplitAxis(v,y,x);x=this._chooseSplitIndex(v,y,x);x=n(v.children.splice(x,v.children.length-x));x.height=v.height;x.leaf=v.leaf;f(v,this.toBBox);f(x,this.toBBox);w?t[w-1].children.push(x):this._splitRoot(v,
x)},_splitRoot:function(t,w){this.data=n([t,w]);this.data.height=t.height+1;this.data.leaf=!1;f(this.data,this.toBBox)},_chooseSplitIndex:function(t,w,v){var x,y;var A=y=Infinity;for(x=w;x<=v-w;x++){var B=c(t,0,x,this.toBBox);var z=c(t,x,v,this.toBBox);var C=Math.max(0,Math.min(B.maxX,z.maxX)-Math.max(B.minX,z.minX))*Math.max(0,Math.min(B.maxY,z.maxY)-Math.max(B.minY,z.minY));B=e(B)+e(z);if(C<A){A=C;var E=x;y=B<y?B:y}else C===A&&B<y&&(y=B,E=x)}return E},_chooseSplitAxis:function(t,w,v){var x=t.leaf?
this.compareMinX:d,y=t.leaf?this.compareMinY:g,A=this._allDistMargin(t,w,v,x);w=this._allDistMargin(t,w,v,y);A<w&&t.children.sort(x)},_allDistMargin:function(t,w,v,x){t.children.sort(x);x=this.toBBox;var y=c(t,0,w,x),A=c(t,v-w,v,x),B=l(y)+l(A),z;for(z=w;z<v-w;z++){var C=t.children[z];b(y,t.leaf?x(C):C);B+=l(y)}for(z=v-w-1;z>=w;z--)C=t.children[z],b(A,t.leaf?x(C):C),B+=l(A);return B},_adjustParentBBoxes:function(t,w,v){for(;0<=v;v--)b(w[v],t)},_condense:function(t){for(var w=t.length-1,v;0<=w;w--)0===
t[w].children.length?0<w?(v=t[w-1].children,v.splice(v.indexOf(t[w]),1)):this.clear():f(t[w],this.toBBox)},compareMinX:function(t,w){return t.left-w.left},compareMinY:function(t,w){return t.top-w.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}};p.exports=h},function(p,u,a){var h=a(533),f=a(535),c=a(248);p.exports=function(b,d,g,e,l,k,m){b=e.left;l=e.top;var n=e.right,q=e.bottom,r=g.faceLeft||g.faceRight,t=g.faceTop||g.faceBottom;m||(t=r=!0);if(!r&&!t)return!1;var w=
0,v=0,x=0,y=1;d.deltaAbsX()>d.deltaAbsY()?x=-1:d.deltaAbsX()<d.deltaAbsY()&&(y=-1);0!==d.deltaX()&&0!==d.deltaY()&&r&&t&&(x=Math.min(Math.abs(d.position.x-n),Math.abs(d.right-b)),y=Math.min(Math.abs(d.position.y-q),Math.abs(d.bottom-l)));if(x<y){if(r&&(w=h(d,g,b,n,k,m),0!==w&&!c(e,d)))return!0;t&&(v=f(d,g,l,q,k,m))}else{if(t&&(v=f(d,g,l,q,k,m),0!==v&&!c(e,d)))return!0;r&&(w=h(d,g,b,n,k,m))}return 0!==w||0!==v}},function(p,u,a){var h=a(534);p.exports=function(f,c,b,d,g,e){var l=0,k=c.faceLeft,m=c.faceRight,
n=c.collideLeft;c=c.collideRight;e||(c=n=m=k=!0);0>f.deltaX()&&c&&f.checkCollision.left?m&&f.x<d&&(l=f.x-d,l<-g&&(l=0)):0<f.deltaX()&&n&&f.checkCollision.right&&k&&f.right>b&&(l=f.right-b,l>g&&(l=0));0!==l&&(f.customSeparateX?f.overlapX=l:h(f,l));return l}},function(p,u){p.exports=function(a,h){0>h?(a.blocked.none=!1,a.blocked.left=!0):0<h&&(a.blocked.none=!1,a.blocked.right=!0);a.position.x-=h;a.velocity.x=0===a.bounce.x?0:-a.velocity.x*a.bounce.x}},function(p,u,a){var h=a(536);p.exports=function(f,
c,b,d,g,e){var l=0,k=c.faceTop,m=c.faceBottom,n=c.collideUp;c=c.collideDown;e||(c=n=m=k=!0);0>f.deltaY()&&c&&f.checkCollision.up?m&&f.y<d&&(l=f.y-d,l<-g&&(l=0)):0<f.deltaY()&&n&&f.checkCollision.down&&k&&f.bottom>b&&(l=f.bottom-b,l>g&&(l=0));0!==l&&(f.customSeparateY?f.overlapY=l:h(f,l));return l}},function(p,u){p.exports=function(a,h){0>h?(a.blocked.none=!1,a.blocked.up=!0):0<h&&(a.blocked.none=!1,a.blocked.down=!0);a.position.y-=h;a.velocity.y=0===a.bounce.y?0:-a.velocity.y*a.bounce.y}},function(p,
u,a){var h=a(246),f=a(1389);p.exports=function(c,b,d,g){var e=h(c,b,d,g);g=c.immovable;var l=b.immovable;if(d||0===e||g&&l||c.customSeparateX||b.customSeparateX)return 0!==e||c.embedded&&b.embedded;c=f.Set(c,b,e);if(g||l)g?f.RunImmovableBody1(c):l&&f.RunImmovableBody2(c);else return 0<c?!0:f.Check();return!0}},function(p,u,a){var h=a(247),f=a(1390);p.exports=function(c,b,d,g){var e=h(c,b,d,g);g=c.immovable;var l=b.immovable;if(d||0===e||g&&l||c.customSeparateY||b.customSeparateY)return 0!==e||c.embedded&&
b.embedded;c=f.Set(c,b,e);if(g||l)g?f.RunImmovableBody1(c):l&&f.RunImmovableBody2(c);else return 0<c?!0:f.Check();return!0}},function(p,u,a){var h=a(66);u=a(0);var f=a(62),c=a(57),b=a(3);a=new u({initialize:function(d,g){var e=g.displayWidth?g.displayWidth:64,l=g.displayHeight?g.displayHeight:64;this.world=d;this.gameObject=g;this.debugShowBody=d.defaults.debugShowStaticBody;this.debugBodyColor=d.defaults.staticBodyDebugColor;this.enable=!0;this.isCircle=!1;this.radius=0;this.offset=new b;this.position=
new b(g.x-e*g.originX,g.y-l*g.originY);this.width=e;this.height=l;this.halfWidth=Math.abs(this.width/2);this.halfHeight=Math.abs(this.height/2);this.center=new b(this.position.x+this.halfWidth,this.position.y+this.halfHeight);this.velocity=b.ZERO;this.allowGravity=!1;this.bounce=this.gravity=b.ZERO;this.onOverlap=this.onCollide=this.onWorldBounds=!1;this.mass=1;this.immovable=!0;this.customSeparateY=this.customSeparateX=this.pushable=!1;this.overlapR=this.overlapY=this.overlapX=0;this.collideWorldBounds=
this.embedded=!1;this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0};this.touching={none:!0,up:!1,down:!1,left:!1,right:!1};this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1};this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1};this.physicsType=f.STATIC_BODY;this._dy=this._dx=0},setGameObject:function(d,g){d&&d!==this.gameObject&&(this.gameObject.body=null,d.body=this,this.gameObject=d);g&&this.updateFromGameObject();return this},updateFromGameObject:function(){this.world.staticTree.remove(this);
var d=this.gameObject;d.getTopLeft(this.position);this.width=d.displayWidth;this.height=d.displayHeight;this.halfWidth=Math.abs(this.width/2);this.halfHeight=Math.abs(this.height/2);this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight);this.world.staticTree.insert(this);return this},setOffset:function(d,g){void 0===g&&(g=d);this.world.staticTree.remove(this);this.position.x-=this.offset.x;this.position.y-=this.offset.y;this.offset.set(d,g);this.position.x+=this.offset.x;
this.position.y+=this.offset.y;this.updateCenter();this.world.staticTree.insert(this);return this},setSize:function(d,g,e){void 0===e&&(e=!0);var l=this.gameObject;!d&&l.frame&&(d=l.frame.realWidth);!g&&l.frame&&(g=l.frame.realHeight);this.world.staticTree.remove(this);this.width=d;this.height=g;this.halfWidth=Math.floor(d/2);this.halfHeight=Math.floor(g/2);e&&l.getCenter&&(d=l.displayWidth/2,l=l.displayHeight/2,this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(d-this.halfWidth,
l-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y);this.updateCenter();this.isCircle=!1;this.radius=0;this.world.staticTree.insert(this);return this},setCircle:function(d,g,e){void 0===g&&(g=this.offset.x);void 0===e&&(e=this.offset.y);0<d?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=d,this.width=2*d,this.height=2*d,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(g,e),this.updateCenter(),this.world.staticTree.insert(this)):
this.isCircle=!1;return this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(d,g){var e=this.gameObject;void 0===d&&(d=e.x);void 0===g&&(g=e.y);this.world.staticTree.remove(this);e.setPosition(d,g);e.getTopLeft(this.position);this.updateCenter();this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(d){d.x=this.x;d.y=this.y;d.right=this.right;d.bottom=this.bottom;return d},hitTest:function(d,g){return this.isCircle?
h(this,d,g):c(this,d,g)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1;this.world.pendingDestroy.set(this)},drawDebug:function(d){var g=this.position,e=g.x+this.halfWidth,l=g.y+this.halfHeight;this.debugShowBody&&(d.lineStyle(d.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?d.strokeCircle(e,l,this.width/2):d.strokeRect(g.x,g.y,this.width,
this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(d){0>=d&&(d=.1);this.mass=d;return this},x:{get:function(){return this.position.x},set:function(d){this.world.staticTree.remove(this);this.position.x=d;this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(d){this.world.staticTree.remove(this);this.position.y=d;this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+
this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});p.exports=a},function(p,u,a){u=new (a(0))({initialize:function(h){this.pluginManager=h;this.game=h.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.systems=this.scene=this.game=this.pluginManager=null}});p.exports=u},function(p,u,a){var h=new (a(3));p.exports=function(f,c,b,d){var g=b.tilemapLayer,e=g.cullPaddingX,l=g.cullPaddingY;f=g.tilemap.tileToWorldXY(f,
c,h,d,g);return f.x>d.worldView.x+g.scaleX*b.tileWidth*(-e-.5)&&f.x<d.worldView.right+g.scaleX*b.tileWidth*(e-.5)&&f.y>d.worldView.y+g.scaleY*b.tileHeight*(-l-1)&&f.y<d.worldView.bottom+g.scaleY*b.tileHeight*(l-.5)}},function(p,u,a){var h=a(26);p.exports=function(f,c,b,d,g,e,l){b=h(b,d,g,e,null,l);for(d=0;d<b.length;d++)b[d]&&b[d].index===f&&(b[d].index=c)}},function(p,u,a){u=a(10);var h=a(139),f=a(76),c=new u;p.exports=function(b,d){var g=b.tilemapLayer.tilemap;b=b.tilemapLayer;var e=Math.floor(g.tileWidth*
b.scaleX),l=Math.floor(g.tileHeight*b.scaleY);g=f(d.worldView.x-b.x,e,0,!0)-b.cullPaddingX;e=h(d.worldView.right-b.x,e,0,!0)+b.cullPaddingX;var k=f(d.worldView.y-b.y,l,0,!0)-b.cullPaddingY;d=h(d.worldView.bottom-b.y,l,0,!0)+b.cullPaddingY;return c.setTo(g,k,e-g,d-k)}},function(p,u,a){var h=a(543),f=a(159);p.exports=function(c,b,d,g){void 0===d&&(d=[]);void 0===g&&(g=0);d.length=0;var e=c.tilemapLayer;b=h(c,b);if(e.skipCull||1!==e.scrollFactorX||1!==e.scrollFactorY)b.left=0,b.right=c.width,b.top=0,
b.bottom=c.height;f(c,b,g,d);return d}},function(p,u,a){var h=a(546),f=a(159);p.exports=function(c,b,d,g){void 0===d&&(d=[]);void 0===g&&(g=0);d.length=0;var e=c.tilemapLayer;e.skipCull||1!==e.scrollFactorX||1!==e.scrollFactorY||(b=h(c,b),f(c,b,g,d));return d}},function(p,u,a){var h=a(139),f=a(76);p.exports=function(c,b){var d=c.tilemapLayer.tilemap,g=c.tilemapLayer,e=Math.floor(d.tileWidth*g.scaleX);c=c.hexSideLength;c=(Math.floor(d.tileHeight*g.scaleY)-c)/2+c;d=f(b.worldView.x-g.x,e,0,!0)-g.cullPaddingX;
e=h(b.worldView.right-g.x,e,0,!0)+g.cullPaddingX;var l=f(b.worldView.y-g.y,c,0,!0)-g.cullPaddingY;b=h(b.worldView.bottom-g.y,c,0,!0)+g.cullPaddingY;return{left:d,right:e,top:l,bottom:b}}},function(p,u,a){var h=a(541);p.exports=function(f,c,b,d){void 0===b&&(b=[]);void 0===d&&(d=0);b.length=0;var g=f.tilemapLayer,e=f.data,l=f.width,k=f.height;if(!g.skipCull){var m,n;if(0===d)for(m=0;m<k;m++)for(d=0;e[m]&&d<l;d++)h(d,m,f,c)&&(n=e[m][d])&&-1!==n.index&&n.visible&&0!==n.alpha&&b.push(n);else if(1===d)for(m=
0;m<k;m++)for(d=l;e[m]&&0<=d;d--)h(d,m,f,c)&&(n=e[m][d])&&-1!==n.index&&n.visible&&0!==n.alpha&&b.push(n);else if(2===d)for(m=k;0<=m;m--)for(d=0;e[m]&&d<l;d++)h(d,m,f,c)&&(n=e[m][d])&&-1!==n.index&&n.visible&&0!==n.alpha&&b.push(n);else if(3===d)for(m=k;0<=m;m--)for(d=l;e[m]&&0<=d;d--)h(d,m,f,c)&&(n=e[m][d])&&-1!==n.index&&n.visible&&0!==n.alpha&&b.push(n)}g.tilesDrawn=b.length;g.tilesTotal=l*k;return b}},function(p,u,a){var h=a(549),f=a(159);p.exports=function(c,b,d,g){void 0===d&&(d=[]);void 0===
g&&(g=0);d.length=0;var e=c.tilemapLayer;e.skipCull||1!==e.scrollFactorX||1!==e.scrollFactorY||(b=h(c,b),f(c,b,g,d));return d}},function(p,u,a){var h=a(139),f=a(76);p.exports=function(c,b){var d=c.tilemapLayer.tilemap;c=c.tilemapLayer;var g=Math.floor(d.tileWidth*c.scaleX),e=Math.floor(d.tileHeight*c.scaleY);d=f(b.worldView.x-c.x,g,0,!0)-c.cullPaddingX;g=h(b.worldView.right-c.x,g,0,!0)+c.cullPaddingX;var l=f(b.worldView.y-c.y,e/2,0,!0)-c.cullPaddingY;b=h(b.worldView.bottom-c.y,e/2,0,!0)+c.cullPaddingY;
return{left:d,right:g,top:l,bottom:b}}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g){b||(b=new h);var e=g.baseTileWidth,l=g.baseTileHeight,k=g.tilemapLayer,m=0,n=0;k&&(d||(d=k.scene.cameras.main),m=k.x+d.scrollX*(1-k.scrollFactorX),e*=k.scaleX,n=k.y+d.scrollY*(1-k.scrollFactorY),l*=k.scaleY);d=g.hexSideLength;return b.set(m+f*e+c%2*(e/2),n+c*((l-d)/2+d))}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g){b||(b=new h);var e=g.baseTileWidth,l=g.baseTileHeight;g=g.tilemapLayer;var k=
0,m=0;g&&(d||(d=g.scene.cameras.main),k=g.x+d.scrollX*(1-g.scrollFactorX),e*=g.scaleX,m=g.y+d.scrollY*(1-g.scrollFactorY),l*=g.scaleY);return b.set(k+e/2*(f-c),m+l/2*(f+c))}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g){b||(b=new h);var e=g.baseTileWidth,l=g.baseTileHeight;g=g.tilemapLayer;var k=0,m=0;g&&(d||(d=g.scene.cameras.main),k=g.x+d.scrollX*(1-g.scrollFactorX),e*=g.scaleX,m=g.y+d.scrollY*(1-g.scrollFactorY),l*=g.scaleY);return b.set(k+f*e+c%2*(e/2),m+l/2*c)}},function(p,u,a){var h=
a(253),f=a(254),c=a(3);p.exports=function(b,d,g,e,l){g||(g=new c(0,0));g.x=h(b,e,l);g.y=f(d,e,l);return g}},function(p,u){p.exports=function(a,h,f){var c=f.baseTileHeight,b=f.tilemapLayer;f=0;b&&(void 0===h&&(h=b.scene.cameras.main),f=b.y+h.scrollY*(1-b.scrollFactorY),c*=b.scaleY);h=b.tilemap.hexSideLength;return f+a*((c-h)/2+h)}},function(p,u){p.exports=function(a,h,f){var c=f.baseTileHeight;f=f.tilemapLayer;var b=0;f&&(void 0===h&&(h=f.scene.cameras.main),b=f.y+h.scrollY*(1-f.scrollFactorY),c*=
f.scaleY);return b+c/2*a}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g,e){d||(d=new h);var l=e.baseTileWidth,k=e.baseTileHeight,m=e.tilemapLayer;m&&(g||(g=m.scene.cameras.main),c-=m.y+g.scrollY*(1-m.scrollFactorY),k*=m.scaleY,f-=m.x+g.scrollX*(1-m.scrollFactorX),l*=m.scaleX);g=e.hexSideLength;k=(k-g)/2+g;c=b?Math.floor(c/k):c/k;return d.set(b?Math.floor((f-c%2*.5*l)/l):(f-c%2*.5*l)/l,c)}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g,e){d||(d=new h);var l=e.baseTileWidth,k=e.baseTileHeight;
if(e=e.tilemapLayer)g||(g=e.scene.cameras.main),c-=e.y+g.scrollY*(1-e.scrollFactorY),k*=e.scaleY,f-=e.x+g.scrollX*(1-e.scrollFactorX),l*=e.scaleX;return d.set(b?Math.floor((f/(l/2)+c/(k/2))/2):(f/(l/2)+c/(k/2))/2,b?Math.floor((c/(k/2)-f/(l/2))/2):(c/(k/2)-f/(l/2))/2)}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g,e){d||(d=new h);var l=e.baseTileWidth,k=e.baseTileHeight;if(e=e.tilemapLayer)g||(g=e.scene.cameras.main),c-=e.y+g.scrollY*(1-e.scrollFactorY),k*=e.scaleY,f-=e.x+g.scrollX*(1-e.scrollFactorX),
l*=e.scaleX;c=b?Math.floor(c/(k/2)):c/(k/2);return d.set(b?Math.floor((f+c%2*.5*l)/l):(f+c%2*.5*l)/l,c)}},function(p,u,a){var h=a(255),f=a(256),c=a(3);p.exports=function(b,d,g,e,l,k){void 0===g&&(g=!0);e||(e=new c(0,0));e.x=h(b,g,l,k);e.y=f(d,g,l,k);return e}},function(p,u){p.exports=function(a,h,f,c){var b=c.baseTileHeight,d=c.tilemapLayer;d&&(f||(f=d.scene.cameras.main),a-=d.y+f.scrollY*(1-d.scrollFactorY),b*=d.scaleY);f=c.hexSideLength;b=(b-f)/2+f;return h?Math.floor(a/b):a/b}},function(p,u){p.exports=
function(a,h,f,c){var b=c.baseTileHeight;if(c=c.tilemapLayer)f||(f=c.scene.cameras.main),a-=c.y+f.scrollY*(1-c.scrollFactorY),b*=c.scaleY;return h?Math.floor(a/(b/2)):a/(b/2)}},function(p,u,a){var h=a(119);p.exports=function(f,c,b){return h(f,c,b)?(f=b.data[c][f],null!==f&&-1<f.index):!1}},function(p,u,a){var h=a(85),f=a(119),c=a(252);p.exports=function(b,d,g,e,l){void 0===g&&(g=!0);void 0===e&&(e=!0);if(!f(b,d,l))return null;var k=l.data[d][b];if(k)l.data[d][b]=g?null:new h(l,-1,b,d,l.tileWidth,
l.tileHeight);else return null;e&&k&&k.collides&&c(b,d,l);return k}},function(p,u,a){var h=a(40),f=a(259),c=a(565),b=a(566),d=a(577);p.exports=function(g,e,l,k,m,n){switch(e){case h.ARRAY_2D:g=f(g,l,k,m,n);break;case h.CSV:g=c(g,l,k,m,n);break;case h.TILED_JSON:g=b(g,l,n);break;case h.WELTMEISTER:g=d(g,l,n);break;default:console.warn("Unrecognized tilemap data format: "+e),g=null}return g}},function(p,u,a){var h=a(40),f=a(259);p.exports=function(c,b,d,g,e){b=b.trim().split("\n").map(function(l){return l.split(",")});
c=f(c,b,d,g,e);c.format=h.CSV;return c}},function(p,u,a){var h=a(567),f=a(568),c=a(29),b=a(40),d=a(258),g=a(121),e=a(569),l=a(570),k=a(573),m=a(575);p.exports=function(n,q,r){n=new g({width:q.width,height:q.height,name:n,tileWidth:q.tilewidth,tileHeight:q.tileheight,orientation:d(q.orientation),format:b.TILED_JSON,version:q.version,properties:q.properties,renderOrder:q.renderorder,infinite:q.infinite});n.orientation===c.HEXAGONAL&&(n.hexSideLength=q.hexsidelength);n.layers=k(q,r);n.images=e(q);r=
m(q);n.tilesets=r.tilesets;n.imageCollections=r.imageCollections;n.objects=l(q);n.tiles=f(n);h(n);return n}},function(p,u,a){var h=a(17);p.exports=function(f){for(var c,b,d,g,e=0;e<f.layers.length;e++){c=f.layers[e];for(var l=0;l<c.data.length;l++){g=c.data[l];for(var k=0;k<g.length;k++)b=g[k],null===b||0>b.index||(d=f.tiles[b.index][2],d=f.tilesets[d],b.width=d.tileWidth,b.height=d.tileHeight,d.tileProperties&&d.tileProperties[b.index-d.firstgid]&&(b.properties=h(b.properties,d.tileProperties[b.index-
d.firstgid])))}}}},function(p,u,a){var h=a(122);p.exports=function(f){var c,b=[];for(c=0;c<f.imageCollections.length;c++)for(var d=f.imageCollections[c],g=d.images,e=0;e<g.length;e++){var l=g[e];l=new h(l.image,l.gid,d.imageWidth,d.imageHeight,0,0);l.updateTileData(d.imageWidth,d.imageHeight);f.tilesets.push(l)}for(c=0;c<f.tilesets.length;c++){l=f.tilesets[c];g=d=l.tileMargin;for(var k=e=0,m=0,n=l.firstgid;n<l.firstgid+l.total;n++){b[n]=[d,g,c];d+=l.tileWidth+l.tileSpacing;e++;if(e===l.total)break;
k++;if(k===l.columns&&(d=l.tileMargin,g+=l.tileHeight+l.tileSpacing,k=0,m++,m===l.rows))break}}return b}},function(p,u,a){var h=a(2),f=a(161);p.exports=function(c){for(var b=[],d=[],g=f(c);g.i<g.layers.length||0<d.length;)if(g.i>=g.layers.length){if(1>d.length){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}g=d.pop()}else{var e=g.layers[g.i];g.i++;if("imagelayer"!==e.type)"group"===e.type&&(e=f(c,e,g),d.push(g),g=e);else{var l=h(e,"offsetx",0)+h(e,"startx",0),k=
h(e,"offsety",0)+h(e,"starty",0);b.push({name:g.name+e.name,image:e.image,x:g.x+l+e.x,y:g.y+k+e.y,alpha:g.opacity*e.opacity,visible:g.visible&&e.visible,properties:h(e,"properties",{})})}}return b}},function(p,u,a){var h=a(2),f=a(260),c=a(572),b=a(161);p.exports=function(d){for(var g=[],e=[],l=b(d);l.i<l.layers.length||0<e.length;)if(l.i>=l.layers.length){if(1>e.length){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}l=e.pop()}else{var k=l.layers[l.i];l.i++;k.opacity*=
l.opacity;k.visible=l.visible&&k.visible;if("objectgroup"!==k.type){if("group"===k.type){var m=b(d,k,l);e.push(l);l=m}}else{k.name=l.name+k.name;var n=l.x+h(k,"startx",0)+h(k,"offsetx",0),q=l.y+h(k,"starty",0)+h(k,"offsety",0);m=[];for(var r=0;r<k.objects.length;r++){var t=f(k.objects[r],n,q);m.push(t)}k=new c(k);k.objects=m;g.push(k)}}return g}},function(p,u,a){var h=a(126);p.exports=function(f,c){for(var b={},d=0;d<c.length;d++){var g=c[d];h(f,g)&&(b[g]=f[g])}return b}},function(p,u,a){u=a(0);var h=
a(2);a=new u({initialize:function(f){void 0===f&&(f={});this.name=h(f,"name","object layer");this.opacity=h(f,"opacity",1);this.properties=h(f,"properties",{});this.propertyTypes=h(f,"propertytypes",{});this.type=h(f,"type","objectgroup");this.visible=h(f,"visible",!0);this.objects=h(f,"objects",[])}});p.exports=a},function(p,u,a){var h=a(574),f=a(29),c=a(161),b=a(258),d=a(2),g=a(120),e=a(261),l=a(85);p.exports=function(k,m){for(var n=d(k,"infinite",!1),q=[],r=[],t=c(k);t.i<t.layers.length||0<r.length;)if(t.i>=
t.layers.length){if(1>r.length){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}t=r.pop()}else{var w=t.layers[t.i];t.i++;if("tilelayer"!==w.type)"group"===w.type&&(w=c(k,w,t),r.push(t),t=w);else if(w.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+w.name+"'");else{if(w.encoding&&"base64"===w.encoding){if(w.chunks)for(var v=0;v<w.chunks.length;v++)w.chunks[v].data=h(w.chunks[v].data);w.data&&(w.data=h(w.data));
delete w.encoding}var x=[],y=0;if(n){var A=d(w,"startx",0)+w.x,B=d(w,"starty",0)+w.y;v=new g({name:t.name+w.name,x:t.x+d(w,"offsetx",0)+A*k.tilewidth,y:t.y+d(w,"offsety",0)+B*k.tileheight,width:w.width,height:w.height,tileWidth:k.tilewidth,tileHeight:k.tileheight,alpha:t.opacity*w.opacity,visible:t.visible&&w.visible,properties:d(w,"properties",[]),orientation:b(k.orientation)});v.orientation===f.HEXAGONAL&&(v.hexSideLength=k.hexsidelength);for(var z=0;z<w.height;z++){x.push([null]);for(var C=0;C<
w.width;C++)x[z][C]=null}z=0;for(C=w.chunks.length;z<C;z++)for(var E=w.chunks[z],G=E.x-A,H=E.y-B,I=0,K=0,O=E.data.length;K<O;K++){var R=y+G,F=I+H;var J=e(E.data[K]);if(0<J.gid){var N=new l(v,J.gid,R,F,k.tilewidth,k.tileheight);N.rotation=J.rotation;N.flipX=J.flipped;x[F][R]=N}else J=m?null:new l(v,-1,R,F,k.tilewidth,k.tileheight),x[F][R]=J;y++;y===E.width&&(I++,y=0)}}else for(v=new g({name:t.name+w.name,x:t.x+d(w,"offsetx",0)+w.x,y:t.y+d(w,"offsety",0)+w.y,width:w.width,height:w.height,tileWidth:k.tilewidth,
tileHeight:k.tileheight,alpha:t.opacity*w.opacity,visible:t.visible&&w.visible,properties:d(w,"properties",[]),orientation:b(k.orientation)}),v.orientation===f.HEXAGONAL&&(v.hexSideLength=k.hexsidelength),A=[],B=0,C=w.data.length;B<C;B++)J=e(w.data[B]),0<J.gid?(N=new l(v,J.gid,y,x.length,k.tilewidth,k.tileheight),N.rotation=J.rotation,N.flipX=J.flipped,A.push(N)):(J=m?null:new l(v,-1,y,x.length,k.tilewidth,k.tileheight),A.push(J)),y++,y===w.width&&(x.push(A),y=0,A=[]);v.data=x;q.push(v)}}return q}},
function(p,u){p.exports=function(a){a=window.atob(a);for(var h=a.length,f=Array(h/4),c=0;c<h;c+=4)f[c/4]=(a.charCodeAt(c)|a.charCodeAt(c+1)<<8|a.charCodeAt(c+2)<<16|a.charCodeAt(c+3)<<24)>>>0;return f}},function(p,u,a){var h=a(122),f=a(576),c=a(260),b=a(1453);p.exports=function(d){for(var g=[],e=[],l=null,k,m=0;m<d.tilesets.length;m++){var n=d.tilesets[m];if(n.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(n.image){var q=new h(n.name,n.firstgid,n.tilewidth,
n.tileheight,n.margin,n.spacing);if(1<d.version){var r=void 0,t=void 0;if(Array.isArray(n.tiles)){r=r||{};t=t||{};for(var w=0;w<n.tiles.length;w++){var v=n.tiles[w];if(v.properties){var x={};v.properties.forEach(function(A){x[A.name]=A.value});t[v.id]=x}if(v.objectgroup&&((r[v.id]||(r[v.id]={})).objectgroup=v.objectgroup,v.objectgroup.objects)){var y=v.objectgroup.objects.map(function(A){return c(A)});r[v.id].objectgroup.objects=y}v.animation&&((r[v.id]||(r[v.id]={})).animation=v.animation);v.type&&
((r[v.id]||(r[v.id]={})).type=v.type)}}Array.isArray(n.wangsets)&&(r=r||{},t=t||{},b(n.wangsets,r));r&&(q.tileData=r,q.tileProperties=t)}else if(n.tileproperties&&(q.tileProperties=n.tileproperties),n.tiles)for(k in q.tileData=n.tiles,q.tileData)(w=q.tileData[k].objectgroup)&&w.objects&&(w=w.objects.map(function(A){return c(A)}),q.tileData[k].objectgroup.objects=w);q.updateTileData(n.imagewidth,n.imageheight);g.push(q)}else{q=new f(n.name,n.firstgid,n.tilewidth,n.tileheight,n.margin,n.spacing,n.properties);
for(w=r=0;w<n.tiles.length;w++)v=n.tiles[w],t=v.image,v=parseInt(v.id,10),q.addImage(n.firstgid+v,t),r=Math.max(v,r);q.maxId=r;e.push(q)}l&&(l.lastgid=n.firstgid-1);l=n}return{tilesets:g,imageCollections:e}}},function(p,u,a){u=new (a(0))({initialize:function(h,f,c,b,d,g,e){if(void 0===c||0>=c)c=32;if(void 0===b||0>=b)b=32;void 0===d&&(d=0);void 0===g&&(g=0);this.name=h;this.firstgid=f|0;this.imageWidth=c|0;this.imageHeight=b|0;this.imageMargin=d|0;this.imageSpacing=g|0;this.properties=e||{};this.images=
[];this.total=0},containsImageIndex:function(h){return h>=this.firstgid&&h<this.firstgid+this.total},addImage:function(h,f){this.images.push({gid:h,image:f});this.total++;return this}});p.exports=u},function(p,u,a){var h=a(40),f=a(121),c=a(578),b=a(579);p.exports=function(d,g,e){if(0===g.layer.length)return console.warn("No layers found in the Weltmeister map: "+d),null;for(var l=0,k=0,m=0;m<g.layer.length;m++)g.layer[m].width>l&&(l=g.layer[m].width),g.layer[m].height>k&&(k=g.layer[m].height);d=new f({width:l,
height:k,name:d,tileWidth:g.layer[0].tilesize,tileHeight:g.layer[0].tilesize,format:h.WELTMEISTER});d.layers=c(g,e);d.tilesets=b(g);return d}},function(p,u,a){var h=a(120),f=a(85);p.exports=function(c,b){for(var d=[],g=0;g<c.layer.length;g++){for(var e=c.layer[g],l=new h({name:e.name,width:e.width,height:e.height,tileWidth:e.tilesize,tileHeight:e.tilesize,visible:1===e.visible}),k=[],m=[],n=0;n<e.data.length;n++){for(var q=0;q<e.data[n].length;q++){var r=e.data[n][q]-1;r=-1<r?new f(l,r,q,n,e.tilesize,
e.tilesize):b?null:new f(l,-1,q,n,e.tilesize,e.tilesize);k.push(r)}m.push(k);k=[]}l.data=m;d.push(l)}return d}},function(p,u,a){var h=a(122);p.exports=function(f){for(var c=[],b=[],d=0;d<f.layer.length;d++){var g=f.layer[d],e=g.tilesetName;""!==e&&-1===b.indexOf(e)&&(b.push(e),c.push(new h(e,0,g.tilesize,g.tilesize,0,0)))}return c}},function(p,u,a){u=a(0);var h=a(36),f=a(40),c=a(2),b=a(120),d=a(29),g=a(362),e=a(74),l=a(73),k=a(85),m=a(251),n=a(581),q=a(122);a=new u({initialize:function(r,t){this.scene=
r;this.tileWidth=t.tileWidth;this.tileHeight=t.tileHeight;this.width=t.width;this.height=t.height;this.orientation=t.orientation;this.renderOrder=t.renderOrder;this.format=t.format;this.version=t.version;this.properties=t.properties;this.widthInPixels=t.widthInPixels;this.heightInPixels=t.heightInPixels;this.imageCollections=t.imageCollections;this.images=t.images;this.layers=t.layers;this.tilesets=t.tilesets;this.objects=t.objects;this.currentLayerIndex=0;this.hexSideLength=t.hexSideLength;r=this.orientation;
this._convert={WorldToTileXY:m.GetWorldToTileXYFunction(r),WorldToTileX:m.GetWorldToTileXFunction(r),WorldToTileY:m.GetWorldToTileYFunction(r),TileToWorldXY:m.GetTileToWorldXYFunction(r),TileToWorldX:m.GetTileToWorldXFunction(r),TileToWorldY:m.GetTileToWorldYFunction(r)}},createBlankDynamicLayer:function(r,t,w,v,x,y,A,B){console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer");return this.createBlankLayer(r,t,w,v,x,y,A,B)},createDynamicLayer:function(r,t,w,v){console.warn("createDynamicLayer is deprecated. Use createLayer");
return this.createLayer(r,t,w,v)},createStaticLayer:function(r,t,w,v){console.warn("createStaticLayer is deprecated. Use createLayer");return this.createLayer(r,t,w,v)},setRenderOrder:function(r){var t=["right-down","left-down","right-up","left-up"];"number"===typeof r&&(r=t[r]);-1<t.indexOf(r)&&(this.renderOrder=r);return this},addTilesetImage:function(r,t,w,v,x,y,A){if(void 0===r)return null;if(void 0===t||null===t)t=r;if(!this.scene.sys.textures.exists(t))return console.warn("Invalid Tileset Image: "+
t),null;t=this.scene.sys.textures.get(t);var B=this.getTilesetIndex(r);if(null===B&&this.format===f.TILED_JSON)return console.warn("No data found for Tileset: "+r),null;if(B=this.tilesets[B])return B.setTileSize(w,v),B.setSpacing(x,y),B.setImage(t),B;void 0===w&&(w=this.tileWidth);void 0===v&&(v=this.tileHeight);void 0===x&&(x=0);void 0===y&&(y=0);void 0===A&&(A=0);B=new q(r,A,w,v,x,y);B.setImage(t);this.tilesets.push(B);return B},copy:function(r,t,w,v,x,y,A,B){B=this.getLayer(B);return null!==B?
(m.Copy(r,t,w,v,x,y,A,B),this):null},createBlankLayer:function(r,t,w,v,x,y,A,B){void 0===w&&(w=0);void 0===v&&(v=0);void 0===x&&(x=this.width);void 0===y&&(y=this.height);void 0===A&&(A=this.tileWidth);void 0===B&&(B=this.tileHeight);if(null!==this.getLayerIndex(r))return console.warn("Invalid Tilemap Layer ID: "+r),null;r=new b({name:r,tileWidth:A,tileHeight:B,width:x,height:y,orientation:this.orientation});for(var z,C=0;C<y;C++){z=[];for(var E=0;E<x;E++)z.push(new k(r,-1,E,C,A,B,this.tileWidth,
this.tileHeight));r.data.push(z)}this.layers.push(r);this.currentLayerIndex=this.layers.length-1;t=new n(this.scene,this,this.currentLayerIndex,t,w,v);t.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(t);return t},createLayer:function(r,t,w,v){var x=this.getLayerIndex(r);if(null===x)return console.warn("Invalid Tilemap Layer ID: "+r),"string"===typeof r&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var y=this.layers[x];if(y.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+
r),null;this.currentLayerIndex=x;void 0===w&&(w=y.x);void 0===v&&(v=y.y);r=new n(this.scene,this,x,t,w,v);r.setRenderOrder(this.renderOrder);this.scene.sys.displayList.add(r);return r},createFromObjects:function(r,t){var w=[],v=this.getObjectLayer(r);if(!v)return console.warn("createFromObjects: Invalid objectLayerName given: "+r),w;Array.isArray(t)||(t=[t]);r=v.objects;for(v=0;v<t.length;v++){for(var x=t[v],y=c(x,"id",null),A=c(x,"gid",null),B=c(x,"name",null),z,C=[],E=0;E<r.length;E++)z=r[E],(null===
y&&null===A&&null===B||null!==y&&z.id===y||null!==A&&z.gid===A||null!==B&&z.name===B)&&C.push(z);y=c(x,"classType",l);A=c(x,"scene",this.scene);B=c(x,"container",null);E=c(x,"key",null);x=c(x,"frame",null);for(var G=0;G<C.length;G++){z=C[G];var H=new y(A);H.setName(z.name);H.setPosition(z.x,z.y);H.setTexture(E,x);z.width&&(H.displayWidth=z.width);z.height&&(H.displayHeight=z.height);var I={x:H.originX*z.width,y:(H.originY-1)*z.height};if(z.rotation){var K=h(z.rotation);g(I,K);H.rotation=K}H.x+=I.x;
H.y+=I.y;void 0===z.flippedHorizontal&&void 0===z.flippedVertical||H.setFlip(z.flippedHorizontal,z.flippedVertical);z.visible||(H.visible=!1);if(Array.isArray(z.properties))z.properties.forEach(function(R){var F=R.name;void 0!==H[F]?H[F]=R.value:H.setData(F,R.value)});else for(var O in z.properties)void 0!==H[O]?H[O]=z.properties[O]:H.setData(O,z.properties[O]);B?B.add(H):A.add.existing(H);w.push(H)}}return w},createFromTiles:function(r,t,w,v,x,y){y=this.getLayer(y);return null===y?null:m.CreateFromTiles(r,
t,w,v,x,y)},fill:function(r,t,w,v,x,y,A){void 0===y&&(y=!0);A=this.getLayer(A);if(null===A)return null;m.Fill(r,t,w,v,x,y,A);return this},filterObjects:function(r,t,w){if("string"===typeof r){var v=r;r=this.getObjectLayer(r);if(!r)return console.warn("No object layer found with the name: "+v),null}return r.objects.filter(t,w)},filterTiles:function(r,t,w,v,x,y,A,B){B=this.getLayer(B);return null===B?null:m.FilterTiles(r,t,w,v,x,y,A,B)},findByIndex:function(r,t,w,v){v=this.getLayer(v);return null===
v?null:m.FindByIndex(r,t,w,v)},findObject:function(r,t,w){if("string"===typeof r){var v=r;r=this.getObjectLayer(r);if(!r)return console.warn("No object layer found with the name: "+v),null}return r.objects.find(t,w)||null},findTile:function(r,t,w,v,x,y,A,B){B=this.getLayer(B);return null===B?null:m.FindTile(r,t,w,v,x,y,A,B)},forEachTile:function(r,t,w,v,x,y,A,B){B=this.getLayer(B);if(null===B)return null;m.ForEachTile(r,t,w,v,x,y,A,B);return this},getImageIndex:function(r){return this.getIndex(this.images,
r)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(r){return r.name}):[]},getIndex:function(r,t){for(var w=0;w<r.length;w++)if(r[w].name===t)return w;return null},getLayer:function(r){r=this.getLayerIndex(r);return null!==r?this.layers[r]:null},getObjectLayer:function(r){r=this.getIndex(this.objects,r);return null!==r?this.objects[r]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(r){return r.name}):
[]},getLayerIndex:function(r){return void 0===r?this.currentLayerIndex:"string"===typeof r?this.getLayerIndexByName(r):"number"===typeof r&&r<this.layers.length?r:r instanceof n?r.layerIndex:null},getLayerIndexByName:function(r){return this.getIndex(this.layers,r)},getTileAt:function(r,t,w,v){v=this.getLayer(v);return null===v?null:m.GetTileAt(r,t,w,v)},getTileAtWorldXY:function(r,t,w,v,x){x=this.getLayer(x);return null===x?null:m.GetTileAtWorldXY(r,t,w,v,x)},getTileLayerNames:function(){return this.layers&&
Array.isArray(this.layers)?this.layers.map(function(r){return r.name}):[]},getTilesWithin:function(r,t,w,v,x,y){y=this.getLayer(y);return null===y?null:m.GetTilesWithin(r,t,w,v,x,y)},getTilesWithinShape:function(r,t,w,v){v=this.getLayer(v);return null===v?null:m.GetTilesWithinShape(r,t,w,v)},getTilesWithinWorldXY:function(r,t,w,v,x,y,A){A=this.getLayer(A);return null===A?null:m.GetTilesWithinWorldXY(r,t,w,v,x,y,A)},getTileset:function(r){r=this.getIndex(this.tilesets,r);return null!==r?this.tilesets[r]:
null},getTilesetIndex:function(r){return this.getIndex(this.tilesets,r)},hasTileAt:function(r,t,w){w=this.getLayer(w);return null===w?null:m.HasTileAt(r,t,w)},hasTileAtWorldXY:function(r,t,w,v){v=this.getLayer(v);return null===v?null:m.HasTileAtWorldXY(r,t,w,v)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(r){this.setLayer(r)}},putTileAt:function(r,t,w,v,x){void 0===v&&(v=!0);x=this.getLayer(x);return null===x?null:m.PutTileAt(r,t,w,v,x)},putTileAtWorldXY:function(r,
t,w,v,x,y){void 0===v&&(v=!0);y=this.getLayer(y);return null===y?null:m.PutTileAtWorldXY(r,t,w,v,x,y)},putTilesAt:function(r,t,w,v,x){void 0===v&&(v=!0);x=this.getLayer(x);if(null===x)return null;m.PutTilesAt(r,t,w,v,x);return this},randomize:function(r,t,w,v,x,y){y=this.getLayer(y);if(null===y)return null;m.Randomize(r,t,w,v,x,y);return this},calculateFacesAt:function(r,t,w){w=this.getLayer(w);if(null===w)return null;m.CalculateFacesAt(r,t,w);return this},calculateFacesWithin:function(r,t,w,v,x){x=
this.getLayer(x);if(null===x)return null;m.CalculateFacesWithin(r,t,w,v,x);return this},removeLayer:function(r){r=this.getLayerIndex(r);if(null!==r){e(this.layers,r);for(var t=r;t<this.layers.length;t++)this.layers[t].tilemapLayer&&this.layers[t].tilemapLayer.layerIndex--;this.currentLayerIndex===r&&(this.currentLayerIndex=0);return this}return null},destroyLayer:function(r){var t=this.getLayerIndex(r);return null!==t?(r=this.layers[t],r.destroy(),e(this.layers,t),this.currentLayerIndex===t&&(this.currentLayerIndex=
0),this):null},removeAllLayers:function(){for(var r=this.layers,t=0;t<r.length;t++)r[t].tilemapLayer&&r[t].tilemapLayer.destroy(!1);this.currentLayerIndex=r.length=0;return this},removeTile:function(r,t,w){void 0===t&&(t=-1);void 0===w&&(w=!0);var v=[];Array.isArray(r)||(r=[r]);for(var x=0;x<r.length;x++){var y=r[x];v.push(this.removeTileAt(y.x,y.y,!0,w,y.tilemapLayer));-1<t&&this.putTileAt(t,y.x,y.y,w,y.tilemapLayer)}return v},removeTileAt:function(r,t,w,v,x){void 0===w&&(w=!0);void 0===v&&(v=!0);
x=this.getLayer(x);return null===x?null:m.RemoveTileAt(r,t,w,v,x)},removeTileAtWorldXY:function(r,t,w,v,x,y){void 0===w&&(w=!0);void 0===v&&(v=!0);y=this.getLayer(y);return null===y?null:m.RemoveTileAtWorldXY(r,t,w,v,x,y)},renderDebug:function(r,t,w){w=this.getLayer(w);if(null===w)return null;this.orientation===d.ORTHOGONAL&&m.RenderDebug(r,t,w);return this},renderDebugFull:function(r,t){for(var w=this.layers,v=0;v<w.length;v++)m.RenderDebug(r,t,w[v]);return this},replaceByIndex:function(r,t,w,v,
x,y,A){A=this.getLayer(A);if(null===A)return null;m.ReplaceByIndex(r,t,w,v,x,y,A);return this},setCollision:function(r,t,w,v,x){void 0===t&&(t=!0);void 0===w&&(w=!0);void 0===x&&(x=!0);v=this.getLayer(v);if(null===v)return null;m.SetCollision(r,t,w,v,x);return this},setCollisionBetween:function(r,t,w,v,x){void 0===w&&(w=!0);void 0===v&&(v=!0);x=this.getLayer(x);if(null===x)return null;m.SetCollisionBetween(r,t,w,v,x);return this},setCollisionByProperty:function(r,t,w,v){void 0===t&&(t=!0);void 0===
w&&(w=!0);v=this.getLayer(v);if(null===v)return null;m.SetCollisionByProperty(r,t,w,v);return this},setCollisionByExclusion:function(r,t,w,v){void 0===t&&(t=!0);void 0===w&&(w=!0);v=this.getLayer(v);if(null===v)return null;m.SetCollisionByExclusion(r,t,w,v);return this},setCollisionFromCollisionGroup:function(r,t,w){void 0===r&&(r=!0);void 0===t&&(t=!0);w=this.getLayer(w);if(null===w)return null;m.SetCollisionFromCollisionGroup(r,t,w);return this},setTileIndexCallback:function(r,t,w,v){v=this.getLayer(v);
if(null===v)return null;m.SetTileIndexCallback(r,t,w,v);return this},setTileLocationCallback:function(r,t,w,v,x,y,A){A=this.getLayer(A);if(null===A)return null;m.SetTileLocationCallback(r,t,w,v,x,y,A);return this},setLayer:function(r){r=this.getLayerIndex(r);null!==r&&(this.currentLayerIndex=r);return this},setBaseTileSize:function(r,t){this.tileWidth=r;this.tileHeight=t;this.widthInPixels=this.width*r;this.heightInPixels=this.height*t;for(var w=0;w<this.layers.length;w++){this.layers[w].baseTileWidth=
r;this.layers[w].baseTileHeight=t;for(var v=this.layers[w].data,x=this.layers[w].width,y=this.layers[w].height,A=0;A<y;A++)for(var B=0;B<x;B++){var z=v[A][B];null!==z&&z.setSize(void 0,void 0,r,t)}}return this},setLayerTileSize:function(r,t,w){w=this.getLayer(w);if(null===w)return this;w.tileWidth=r;w.tileHeight=t;var v=w.data,x=w.width;w=w.height;for(var y=0;y<w;y++)for(var A=0;A<x;A++){var B=v[y][A];null!==B&&B.setSize(r,t)}return this},shuffle:function(r,t,w,v,x){x=this.getLayer(x);if(null===x)return null;
m.Shuffle(r,t,w,v,x);return this},swapByIndex:function(r,t,w,v,x,y,A){A=this.getLayer(A);if(null===A)return null;m.SwapByIndex(r,t,w,v,x,y,A);return this},tileToWorldX:function(r,t,w){w=this.getLayer(w);return null===w?null:this._convert.TileToWorldX(r,t,w)},tileToWorldY:function(r,t,w){w=this.getLayer(w);return null===w?null:this._convert.TileToWorldY(r,t,w)},tileToWorldXY:function(r,t,w,v,x){x=this.getLayer(x);return null===x?null:this._convert.TileToWorldXY(r,t,w,v,x)},weightedRandomize:function(r,
t,w,v,x,y){y=this.getLayer(y);if(null===y)return null;m.WeightedRandomize(t,w,v,x,r,y);return this},worldToTileX:function(r,t,w,v){v=this.getLayer(v);return null===v?null:this._convert.WorldToTileX(r,t,w,v)},worldToTileY:function(r,t,w,v){v=this.getLayer(v);return null===v?null:this._convert.WorldToTileY(r,t,w,v)},worldToTileXY:function(r,t,w,v,x,y){y=this.getLayer(y);return null===y?null:this._convert.WorldToTileXY(r,t,w,v,x,y)},destroy:function(){this.removeAllLayers();this.tilesets.length=0;this.objects.length=
0;this.scene=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(11),f=a(15),c=a(251);a=a(1456);a=new u({Extends:f,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Depth,h.Flip,h.GetBounds,h.Origin,h.Pipeline,h.Transform,h.Visible,h.ScrollFactor,a],initialize:function(b,d,g,e,l,k){f.call(this,b,"TilemapLayer");this.isTilemap=!0;this.tilemap=d;this.layerIndex=g;this.layer=d.layers[g];this.layer.tilemapLayer=this;this.tileset=[];this.tilesDrawn=0;this.tilesTotal=this.layer.width*this.layer.height;this.culledTiles=
[];this.skipCull=!1;this.cullPaddingY=this.cullPaddingX=1;this.cullCallback=c.GetCullTilesFunction(this.layer.orientation);this._renderOrder=0;this.gidMap=[];this.setTilesets(e);this.setAlpha(this.layer.alpha);this.setPosition(l,k);this.setOrigin();this.setSize(d.tileWidth*this.layer.width,d.tileHeight*this.layer.height);this.initPipeline()},setTilesets:function(b){var d=[],g=[],e=this.tilemap;Array.isArray(b)||(b=[b]);for(var l=0;l<b.length;l++){var k=b[l];"string"===typeof k&&(k=e.getTileset(k));
if(k){g.push(k);for(var m=k.firstgid,n=0;n<k.total;n++)d[m+n]=k}}this.gidMap=d;this.tileset=g},setRenderOrder:function(b){var d=["right-down","left-down","right-up","left-up"];"string"===typeof b&&(b=d.indexOf(b));0<=b&&4>b&&(this._renderOrder=b);return this},calculateFacesAt:function(b,d){c.CalculateFacesAt(b,d,this.layer);return this},calculateFacesWithin:function(b,d,g,e){c.CalculateFacesWithin(b,d,g,e,this.layer);return this},createFromTiles:function(b,d,g,e,l){return c.CreateFromTiles(b,d,g,
e,l,this.layer)},cull:function(b){return this.cullCallback(this.layer,b,this.culledTiles,this._renderOrder)},copy:function(b,d,g,e,l,k,m){c.Copy(b,d,g,e,l,k,m,this.layer);return this},fill:function(b,d,g,e,l,k){c.Fill(b,d,g,e,l,k,this.layer);return this},filterTiles:function(b,d,g,e,l,k,m){return c.FilterTiles(b,d,g,e,l,k,m,this.layer)},findByIndex:function(b,d,g){return c.FindByIndex(b,d,g,this.layer)},findTile:function(b,d,g,e,l,k,m){return c.FindTile(b,d,g,e,l,k,m,this.layer)},forEachTile:function(b,
d,g,e,l,k,m){c.ForEachTile(b,d,g,e,l,k,m,this.layer);return this},getTileAt:function(b,d,g){return c.GetTileAt(b,d,g,this.layer)},getTileAtWorldXY:function(b,d,g,e){return c.GetTileAtWorldXY(b,d,g,e,this.layer)},getTilesWithin:function(b,d,g,e,l){return c.GetTilesWithin(b,d,g,e,l,this.layer)},getTilesWithinShape:function(b,d,g){return c.GetTilesWithinShape(b,d,g,this.layer)},getTilesWithinWorldXY:function(b,d,g,e,l,k){return c.GetTilesWithinWorldXY(b,d,g,e,l,k,this.layer)},hasTileAt:function(b,d){return c.HasTileAt(b,
d,this.layer)},hasTileAtWorldXY:function(b,d,g){return c.HasTileAtWorldXY(b,d,g,this.layer)},putTileAt:function(b,d,g,e){return c.PutTileAt(b,d,g,e,this.layer)},putTileAtWorldXY:function(b,d,g,e,l){return c.PutTileAtWorldXY(b,d,g,e,l,this.layer)},putTilesAt:function(b,d,g,e){c.PutTilesAt(b,d,g,e,this.layer);return this},randomize:function(b,d,g,e,l){c.Randomize(b,d,g,e,l,this.layer);return this},removeTileAt:function(b,d,g,e){return c.RemoveTileAt(b,d,g,e,this.layer)},removeTileAtWorldXY:function(b,
d,g,e,l){return c.RemoveTileAtWorldXY(b,d,g,e,l,this.layer)},renderDebug:function(b,d){c.RenderDebug(b,d,this.layer);return this},replaceByIndex:function(b,d,g,e,l,k){c.ReplaceByIndex(b,d,g,e,l,k,this.layer);return this},setSkipCull:function(b){void 0===b&&(b=!0);this.skipCull=b;return this},setCullPadding:function(b,d){void 0===b&&(b=1);void 0===d&&(d=1);this.cullPaddingX=b;this.cullPaddingY=d;return this},setCollision:function(b,d,g,e){c.SetCollision(b,d,g,this.layer,e);return this},setCollisionBetween:function(b,
d,g,e){c.SetCollisionBetween(b,d,g,e,this.layer);return this},setCollisionByProperty:function(b,d,g){c.SetCollisionByProperty(b,d,g,this.layer);return this},setCollisionByExclusion:function(b,d,g){c.SetCollisionByExclusion(b,d,g,this.layer);return this},setCollisionFromCollisionGroup:function(b,d){c.SetCollisionFromCollisionGroup(b,d,this.layer);return this},setTileIndexCallback:function(b,d,g){c.SetTileIndexCallback(b,d,g,this.layer);return this},setTileLocationCallback:function(b,d,g,e,l,k){c.SetTileLocationCallback(b,
d,g,e,l,k,this.layer);return this},shuffle:function(b,d,g,e){c.Shuffle(b,d,g,e,this.layer);return this},swapByIndex:function(b,d,g,e,l,k){c.SwapByIndex(b,d,g,e,l,k,this.layer);return this},tileToWorldX:function(b,d){return this.tilemap.tileToWorldX(b,d,this)},tileToWorldY:function(b,d){return this.tilemap.tileToWorldY(b,d,this)},tileToWorldXY:function(b,d,g,e){return this.tilemap.tileToWorldXY(b,d,g,e,this)},weightedRandomize:function(b,d,g,e,l){c.WeightedRandomize(d,g,e,l,b,this.layer);return this},
worldToTileX:function(b,d,g){return this.tilemap.worldToTileX(b,d,g,this)},worldToTileY:function(b,d,g){return this.tilemap.worldToTileY(b,d,g,this)},worldToTileXY:function(b,d,g,e,l){return this.tilemap.worldToTileXY(b,d,g,e,l,this)},destroy:function(b){void 0===b&&(b=!0);this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),b&&this.tilemap.removeLayer(this),this.layer=this.tilemap=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],f.prototype.destroy.call(this))}});
p.exports=a},function(p,u,a){u=a(0);var h=a(2);a=new u({initialize:function(f){this.repeatCount=this.repeat=this.delay=0;this.loop=!1;this.timeScale=1;this.elapsed=this.startAt=0;this.hasDispatched=this.paused=!1;this.reset(f)},reset:function(f){this.delay=h(f,"delay",0);this.repeat=h(f,"repeat",0);this.loop=h(f,"loop",!1);this.callback=h(f,"callback",void 0);this.callbackScope=h(f,"callbackScope",this.callback);this.args=h(f,"args",[]);this.timeScale=h(f,"timeScale",1);this.startAt=h(f,"startAt",
0);this.paused=h(f,"paused",!1);this.elapsed=this.startAt;this.hasDispatched=!1;this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat;return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){return 0<this.repeat?(this.elapsed+this.delay*(this.repeat-this.repeatCount))/(this.delay+this.delay*this.repeat):this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*
this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(f){void 0===f&&(f=!1);this.elapsed=this.delay;this.hasDispatched=!f;this.repeatCount=0},destroy:function(){this.callbackScope=this.callback=void 0;this.args=[]}});p.exports=a},function(p,u,a){var h=
a(1465);p.exports=function(f){var c,b=[];if(f.hasOwnProperty("props"))for(c in f.props)"_"!==c.substr(0,1)&&b.push({key:c,value:f.props[c]});else for(c in f)-1===h.indexOf(c)&&"_"!==c.substr(0,1)&&b.push({key:c,value:f[c]});return b}},function(p,u,a){var h=a(6);p.exports=function(f){f=h(f,"tweens",null);if(null===f)return[];"function"===typeof f&&(f=f.call());Array.isArray(f)||(f=[f]);return f}},function(p,u,a){var h=a(265),f=a(13),c=a(99),b=a(80),d=a(162),g=a(6),e=a(264),l=a(266),k=a(268);p.exports=
function(m,n,q){void 0===q&&(q=h);var r=g(n,"from",0),t=g(n,"to",1),w=[{value:r}],v=d(n,"delay",q.delay),x=d(n,"duration",q.duration),y=g(n,"easeParams",q.easeParams);y=b(g(n,"ease",q.ease),y);var A=d(n,"hold",q.hold),B=d(n,"repeat",q.repeat),z=d(n,"repeatDelay",q.repeatDelay),C=c(n,"yoyo",q.yoyo);q=[];var E=e("value",t);v=k(w[0],0,"value",E.getEnd,E.getStart,E.getActive,y,v,x,C,A,B,z,!1,!1);v.start=r;v.current=r;v.to=t;q.push(v);m=new l(m,q,w);m.offset=f(n,"offset",null);m.completeDelay=f(n,"completeDelay",
0);m.loop=Math.round(f(n,"loop",0));m.loopDelay=Math.round(f(n,"loopDelay",0));m.paused=c(n,"paused",!1);m.useFrames=c(n,"useFrames",!1);r=g(n,"callbackScope",m);t=[m,null];w=l.TYPES;for(v=0;v<w.length;v++)if(x=w[v],y=g(n,x,!1))A=g(n,x+"Scope",r),B=g(n,x+"Params",[]),m.setCallback(x,y,t.concat(B),A);return m}},function(p,u,a){var h=a(80),f=a(6),c=a(14);p.exports=function(b,d){void 0===d&&(d={});var g=f(d,"start",0),e=f(d,"ease",null),l=f(d,"grid",null),k=f(d,"from",0),m="first"===k,n="center"===k,
q="last"===k,r="number"===typeof k,t=Array.isArray(b),w=t?parseFloat(b[0]):parseFloat(b),v=t?parseFloat(b[1]):0,x=Math.max(w,v);t&&(g+=w);if(l){var y=l[0],A=l[1],B=d=b=0,z=0,C=[];q?(b=y-1,d=A-1):r?(b=k%y,d=Math.floor(k/y)):n&&(b=(y-1)/2,d=(A-1)/2);for(var E=c.MIN_SAFE_INTEGER,G=0;G<A;G++){C[G]=[];for(var H=0;H<y;H++)B=b-H,z=d-G,B=Math.sqrt(B*B+z*z),B>E&&(E=B),C[G][H]=B}}var I=e?h(e):null;return l?function(K,O,R,F){K=0;O=F%y;F=Math.floor(F/y);0<=O&&O<y&&0<=F&&F<A&&(K=C[F][O]);t?(F=v-w,F=I?K/E*F*I(K/
E):K/E*F):F=I?K*w*I(K/E):K*w;return F+g}:function(K,O,R,F,J){J--;var N;m?N=F:n?N=Math.abs(J/2-F):q?N=J-F:r&&(N=Math.abs(k-F));t?(K=n?(v-w)/J*2*N:(v-w)/J*N,J=I?K*I(N/J):K):J=I?J*x*I(N/J):N*w;return J+g}}},function(p,u,a){var h=a(77),f=a(265),c=a(13),b=a(99),d=a(80),g=a(162),e=a(263),l=a(584),k=a(6),m=a(588),n=a(163);p.exports=function(q,r){q=new m(q);q.completeDelay=c(r,"completeDelay",0);q.loop=Math.round(c(r,"loop",0));q.loopDelay=Math.round(c(r,"loopDelay",0));q.paused=b(r,"paused",!1);q.useFrames=
b(r,"useFrames",!1);var t=k(r,"callbackScope",q),w=[q],v=k(r,"onStart",!1);if(v){var x=k(r,"onStartScope",t),y=k(r,"onStartParams",[]);q.setCallback("onStart",v,w.concat(y),x)}if(v=k(r,"onUpdate",!1))x=k(r,"onUpdateScope",t),y=k(r,"onUpdateParams",[]),q.setCallback("onUpdate",v,w.concat(y),x);if(v=k(r,"onLoop",!1))x=k(r,"onLoopScope",t),y=k(r,"onLoopParams",[]),q.setCallback("onLoop",v,w.concat(y),x);if(v=k(r,"onYoyo",!1))x=k(r,"onYoyoScope",t),y=k(r,"onYoyoParams",[]),q.setCallback("onYoyo",v,w.concat(null,
y),x);if(v=k(r,"onComplete",!1))t=k(r,"onCompleteScope",t),x=k(r,"onCompleteParams",[]),q.setCallback("onComplete",v,w.concat(x),t);w=l(r);if(0===w.length)return q.paused=!0,q;t=h(f);t.targets=e(r);v=c(r,"totalDuration",0);t.duration=0<v?Math.floor(v/w.length):g(r,"duration",t.duration);t.delay=g(r,"delay",t.delay);t.easeParams=k(r,"easeParams",t.easeParams);t.ease=d(k(r,"ease",t.ease),t.easeParams);t.hold=g(r,"hold",t.hold);t.repeat=g(r,"repeat",t.repeat);t.repeatDelay=g(r,"repeatDelay",t.repeatDelay);
t.yoyo=b(r,"yoyo",t.yoyo);t.flipX=b(r,"flipX",t.flipX);t.flipY=b(r,"flipY",t.flipY);for(r=0;r<w.length;r++)q.queue(n(q,w[r],t));return q}},function(p,u,a){u=a(0);var h=a(9),f=a(267),c=a(163),b=a(100),d=new u({Extends:h,initialize:function(g){h.call(this);this.manager=g;this.isTimeline=!0;this.data=[];this.totalData=0;this.useFrames=!1;this.timeScale=1;this.countdown=this.completeDelay=this.loopCounter=this.loopDelay=this.loop=0;this._pausedState=this.state=b.PENDING_ADD;this.paused=!1;this.totalProgress=
this.totalDuration=this.progress=this.duration=this.totalElapsed=this.elapsed=0;this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null}},dispatchTimelineEvent:function(g,e){this.emit(g,this);e&&e.func.apply(e.scope,e.params)},setTimeScale:function(g){this.timeScale=g;return this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===b.ACTIVE},add:function(g){return this.queue(c(this,g))},queue:function(g){this.isPlaying()||(g.parent=this,
g.parentIsTimeline=!0,this.data.push(g),this.totalData=this.data.length);return this},hasOffset:function(g){return null!==g.offset},isOffsetAbsolute:function(g){return"number"===typeof g},isOffsetRelative:function(g){return"string"===typeof g&&(g=g[0],"-"===g||"+"===g)?!0:!1},getRelativeOffset:function(g,e){var l=g[0];g=parseFloat(g.substr(2));switch(l){case "+":e+=g;break;case "-":e-=g}return Math.max(0,e)},calcDuration:function(){for(var g=0,e=0,l=0,k=0;k<this.totalData;k++){var m=this.data[k];
m.init();this.hasOffset(m)?this.isOffsetAbsolute(m.offset)?(m.calculatedOffset=m.offset,0===m.offset&&(l=0)):this.isOffsetRelative(m.offset)&&(m.calculatedOffset=this.getRelativeOffset(m.offset,g)):m.calculatedOffset=l;g=m.totalDuration+m.calculatedOffset;e+=m.totalDuration;l+=m.totalDuration}this.duration=e;this.loopCounter=-1===this.loop?999999999999:this.loop;this.totalDuration=0<this.loopCounter?this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.duration+this.completeDelay},
init:function(){this.calcDuration();this.totalProgress=this.progress=0;return this.paused?(this.state=b.PAUSED,!1):!0},resetTweens:function(g){for(var e=0;e<this.totalData;e++)this.data[e].play(g)},setCallback:function(g,e,l,k){-1!==d.TYPES.indexOf(g)&&(this.callbacks[g]={func:e,scope:k,params:l});return this},makeActive:function(g){return this.manager.makeActive(g)},play:function(){this.state!==b.ACTIVE&&(this.paused?(this.paused=!1,this.manager.makeActive(this)):(this.resetTweens(!1),this.state=
b.ACTIVE,this.dispatchTimelineEvent(f.TIMELINE_START,this.callbacks.onStart)))},nextState:function(){0<this.loopCounter?(this.progress=this.elapsed=0,this.loopCounter--,this.resetTweens(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=b.LOOP_DELAY):(this.state=b.ACTIVE,this.dispatchTimelineEvent(f.TIMELINE_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=b.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=b.PENDING_REMOVE,this.dispatchTimelineEvent(f.TIMELINE_COMPLETE,
this.callbacks.onComplete))},update:function(g,e){if(this.state!==b.PAUSED){this.useFrames&&(e=1*this.manager.timeScale);e*=this.timeScale;this.elapsed+=e;this.progress=Math.min(this.elapsed/this.duration,1);this.totalElapsed+=e;this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1);switch(this.state){case b.ACTIVE:for(var l=this.totalData,k=0;k<this.totalData;k++)this.data[k].update(g,e)&&l--;this.dispatchTimelineEvent(f.TIMELINE_UPDATE,this.callbacks.onUpdate);0===l&&this.nextState();
break;case b.LOOP_DELAY:this.countdown-=e;0>=this.countdown&&(this.state=b.ACTIVE,this.dispatchTimelineEvent(f.TIMELINE_LOOP,this.callbacks.onLoop));break;case b.COMPLETE_DELAY:this.countdown-=e,0>=this.countdown&&(this.state=b.PENDING_REMOVE,this.dispatchTimelineEvent(f.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===b.PENDING_REMOVE}},stop:function(){this.state=b.PENDING_REMOVE},pause:function(){if(this.state!==b.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=
b.PAUSED,this.emit(f.TIMELINE_PAUSE,this),this},resume:function(){this.state===b.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(f.TIMELINE_RESUME,this));return this},hasTarget:function(g){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(g))return!0;return!1},destroy:function(){for(var g=0;g<this.data.length;g++)this.data[g].stop()}});d.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"];p.exports=d},function(p,u,a){var h=a(86),f=a(41),c=a(32),b=a(2),d=a(64);p.exports=
{parseBody:function(g,e,l,k){void 0===k&&(k={});for(var m=b(l,"fixtures",[]),n=[],q=0;q<m.length;q++)for(var r=this.parseFixture(m[q]),t=0;t<r.length;t++)n.push(r[t]);l=c.clone(l,!0);c.extend(l,k,!0);delete l.fixtures;delete l.type;k=f.create(l);f.setParts(k,n);f.setPosition(k,{x:g,y:e});return k},parseFixture:function(g){var e=c.extend({},!1,g);delete e.circle;delete e.vertices;if(g.circle){var l=b(g.circle,"x");var k=b(g.circle,"y");g=b(g.circle,"radius");l=[h.circle(l,k,g,e)]}else g.vertices&&
(l=this.parseVertices(g.vertices,e));return l},parseVertices:function(g,e){void 0===e&&(e={});for(var l=[],k=0;k<g.length;k++)d.clockwiseSort(g[k]),l.push(f.create(c.extend({position:d.centre(g[k]),vertices:g[k]},e)));return h.flagCoincidentParts(l)}}},function(p,u,a){var h=a(86),f=a(41);p.exports={parseBody:function(c,b,d,g){void 0===g&&(g={});var e=d.vertices;if(1===e.length)g.vertices=e[0],g=f.create(g),h.flagCoincidentParts(g.parts);else{for(var l=[],k=0;k<e.length;k++){var m=f.create({vertices:e[k]});
l.push(m)}h.flagCoincidentParts(l);g.parts=l;g=f.create(g)}g.label=d.label;f.setPosition(g,{x:c,y:b});return g}}},function(p,u,a){var h={};p.exports=h;var f=a(118),c=a(128),b=a(32),d=a(41),g=a(86);(function(){h.stack=function(e,l,k,m,n,q,r){for(var t=f.create({label:"Stack"}),w=e,v,x=0,y=0;y<m;y++){for(var A=0,B=0;B<k;B++){var z=r(w,l,B,y,v,x);z?(w=z.bounds.max.y-z.bounds.min.y,v=z.bounds.max.x-z.bounds.min.x,w>A&&(A=w),d.translate(z,{x:.5*v,y:.5*w}),w=z.bounds.max.x+n,f.addBody(t,z),v=z,x+=1):w+=
n}l+=A+q;w=e}return t};h.chain=function(e,l,k,m,n,q){for(var r=e.bodies,t=1;t<r.length;t++){var w=r[t-1],v=r[t];w=b.extend({bodyA:w,pointA:{x:(w.bounds.max.x-w.bounds.min.x)*l,y:(w.bounds.max.y-w.bounds.min.y)*k},bodyB:v,pointB:{x:(v.bounds.max.x-v.bounds.min.x)*m,y:(v.bounds.max.y-v.bounds.min.y)*n}},q);f.addConstraint(e,c.create(w))}e.label+=" Chain";return e};h.mesh=function(e,l,k,m,n){var q=e.bodies,r,t;for(r=0;r<k;r++){for(t=1;t<l;t++){var w=q[t-1+r*l];var v=q[t+r*l];f.addConstraint(e,c.create(b.extend({bodyA:w,
bodyB:v},n)))}if(0<r)for(t=0;t<l;t++)w=q[t+(r-1)*l],v=q[t+r*l],f.addConstraint(e,c.create(b.extend({bodyA:w,bodyB:v},n))),m&&0<t&&(w=q[t-1+(r-1)*l],f.addConstraint(e,c.create(b.extend({bodyA:w,bodyB:v},n)))),m&&t<l-1&&(w=q[t+1+(r-1)*l],f.addConstraint(e,c.create(b.extend({bodyA:w,bodyB:v},n))))}e.label+=" Mesh";return e};h.pyramid=function(e,l,k,m,n,q,r){return h.stack(e,l,k,m,n,q,function(t,w,v,x,y,A){var B=Math.min(m,Math.ceil(k/2));t=y?y.bounds.max.x-y.bounds.min.x:0;if(!(x>B||(x=B-x,B=k-1-x,v<
x||v>B)))return 1===A&&d.translate(y,{x:(v+(1===k%2?1:-1))*t,y:0}),r(e+(y?v*t:0)+v*n,w,v,x,y,A)})};h.newtonsCradle=function(e,l,k,m,n){for(var q=f.create({label:"Newtons Cradle"}),r=0;r<k;r++){var t=g.circle(e+1.9*r*m,l+n,m,{inertia:Infinity,restitution:1,friction:0,frictionAir:1E-4,slop:1}),w=c.create({pointA:{x:e+1.9*r*m,y:l},bodyB:t});f.addBody(q,t);f.addConstraint(q,w)}return q};h.car=function(e,l,k,m,n){var q=d.nextGroup(!0),r=.5*-k+20,t=.5*k-20,w=f.create({label:"Car"});k=g.rectangle(e,l,k,
m,{collisionFilter:{group:q},chamfer:{radius:.5*m},density:2E-4});m=g.circle(e+r,l+0,n,{collisionFilter:{group:q},friction:.8});e=g.circle(e+t,l+0,n,{collisionFilter:{group:q},friction:.8});r=c.create({bodyB:k,pointB:{x:r,y:0},bodyA:m,stiffness:1,length:0});t=c.create({bodyB:k,pointB:{x:t,y:0},bodyA:e,stiffness:1,length:0});f.addBody(w,k);f.addBody(w,m);f.addBody(w,e);f.addConstraint(w,r);f.addConstraint(w,t);return w};h.softBody=function(e,l,k,m,n,q,r,t,w,v){w=b.extend({inertia:Infinity},w);v=b.extend({stiffness:.2,
render:{type:"line",anchors:!1}},v);e=h.stack(e,l,k,m,n,q,function(x,y){return g.circle(x,y,t,w)});h.mesh(e,k,m,r,v);e.label="Soft Body";return e}})()},function(p,u,a){var h={};p.exports=h;a(84);var f=a(32);(function(){h.pathToVertices=function(c,b){"undefined"===typeof window||"SVGPathSeg"in window||f.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var d,g,e,l=[],k,m,n=0,q=0,r=0;b=b||15;var t=function(A,B,z){z=1===z%2&&1<z;if(!e||A!=e.x||B!=e.y){e&&z?(k=e.x,m=e.y):m=k=
0;var C={x:k+A,y:m+B};if(z||!e)e=C;l.push(C);q=k+A;r=m+B}},w=function(A){var B=A.pathSegTypeAsLetter.toUpperCase();if("Z"!==B){switch(B){case "M":case "L":case "T":case "C":case "S":case "Q":q=A.x;r=A.y;break;case "H":q=A.x;break;case "V":r=A.y}t(q,r,A.pathSegType)}};h._svgPathToAbsolute(c);var v=c.getTotalLength();var x=[];for(d=0;d<c.pathSegList.numberOfItems;d+=1)x.push(c.pathSegList.getItem(d));for(g=x.concat();n<v;){d=c.getPathSegAtLength(n);d=x[d];if(d!=y){for(;g.length&&g[0]!=d;)w(g.shift());
var y=d}switch(d.pathSegTypeAsLetter.toUpperCase()){case "C":case "T":case "S":case "Q":case "A":d=c.getPointAtLength(n),t(d.x,d.y,0)}n+=b}d=0;for(c=g.length;d<c;++d)w(g[d]);return l};h._svgPathToAbsolute=function(c){for(var b,d,g,e,l,k,m=c.pathSegList,n=0,q=0,r=m.numberOfItems,t=0;t<r;++t){var w=m.getItem(t),v=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in w&&(n=w.x),"y"in w&&(q=w.y);else switch("x1"in w&&(g=n+w.x1),"x2"in w&&(l=n+w.x2),"y1"in w&&(e=q+w.y1),"y2"in w&&(k=q+w.y2),"x"in w&&(n+=
w.x),"y"in w&&(q+=w.y),v){case "m":m.replaceItem(c.createSVGPathSegMovetoAbs(n,q),t);break;case "l":m.replaceItem(c.createSVGPathSegLinetoAbs(n,q),t);break;case "h":m.replaceItem(c.createSVGPathSegLinetoHorizontalAbs(n),t);break;case "v":m.replaceItem(c.createSVGPathSegLinetoVerticalAbs(q),t);break;case "c":m.replaceItem(c.createSVGPathSegCurvetoCubicAbs(n,q,g,e,l,k),t);break;case "s":m.replaceItem(c.createSVGPathSegCurvetoCubicSmoothAbs(n,q,l,k),t);break;case "q":m.replaceItem(c.createSVGPathSegCurvetoQuadraticAbs(n,
q,g,e),t);break;case "t":m.replaceItem(c.createSVGPathSegCurvetoQuadraticSmoothAbs(n,q),t);break;case "a":m.replaceItem(c.createSVGPathSegArcAbs(n,q,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),t);break;case "z":case "Z":n=b,q=d}if("M"==v||"m"==v)b=n,d=q}}})()},function(p,u,a){var h=a(86),f=a(41);u=a(0);var c=a(249),b=a(9),d=a(2),g=a(126),e=a(64);a=new u({Extends:b,Mixins:[c.Bounce,c.Collision,c.Friction,c.Gravity,c.Mass,c.Sensor,c.Sleep,c.Static],initialize:function(l,k,m){b.call(this);this.tile=
k;this.world=l;k.physics.matterBody&&k.physics.matterBody.destroy();k.physics.matterBody=this;l=d(m,"body",null);var n=d(m,"addToWorld",!0);l?this.setBody(l,n):(k=k.getCollisionGroup(),0<d(k,"objects",[]).length?this.setFromTileCollision(m):this.setFromTileRectangle(m))},setFromTileRectangle:function(l){void 0===l&&(l={});g(l,"isStatic")||(l.isStatic=!0);g(l,"addToWorld")||(l.addToWorld=!0);var k=this.tile.getBounds();k=h.rectangle(k.x+k.width/2,k.y+k.height/2,k.width,k.height,l);this.setBody(k,l.addToWorld);
return this},setFromTileCollision:function(l){void 0===l&&(l={});g(l,"isStatic")||(l.isStatic=!0);g(l,"addToWorld")||(l.addToWorld=!0);var k=this.tile.tilemapLayer.scaleX,m=this.tile.tilemapLayer.scaleY,n=this.tile.getLeft(),q=this.tile.getTop(),r=this.tile.getCollisionGroup();r=d(r,"objects",[]);for(var t=[],w=0;w<r.length;w++){var v=r[w],x=n+v.x*k,y=q+v.y*m,A=v.width*k,B=v.height*m,z=null;if(v.rectangle)z=h.rectangle(x+A/2,y+B/2,A,B,l);else if(v.ellipse)z=h.circle(x+A/2,y+B/2,A/2,l);else if(v.polygon||
v.polyline)v=(v.polygon?v.polygon:v.polyline).map(function(C){return{x:C.x*k,y:C.y*m}}),v=e.create(v),A=e.centre(v),x+=A.x,y+=A.y,z=h.fromVertices(x,y,v,l);z&&t.push(z)}1===t.length?this.setBody(t[0],l.addToWorld):1<t.length&&(l.parts=t,this.setBody(f.create(l),l.addToWorld));return this},setBody:function(l,k){void 0===k&&(k=!0);this.body&&this.removeBody();this.body=l;this.body.gameObject=this;k&&this.world.add(this.body);return this},removeBody:function(){this.body&&(this.world.remove(this.body),
this.body=this.body.gameObject=void 0);return this},destroy:function(){this.removeBody();this.tile.physics.matterBody=void 0;this.removeAllListeners()}});p.exports=a},function(p,u,a){u=a(1399);u.Body=a(41);u.Composite=a(118);u.World=a(596);u.Detector=a(273);u.Grid=a(597);u.Pairs=a(598);u.Pair=a(250);u.Query=a(1400);u.Resolver=a(599);u.SAT=a(274);u.Constraint=a(128);u.Common=a(32);u.Engine=a(1401);u.Events=a(166);u.Sleeping=a(165);u.Plugin=a(595);u.Bodies=a(86);u.Composites=a(591);u.Axes=a(271);u.Bounds=
a(84);u.Svg=a(592);u.Vector=a(83);u.Vertices=a(64);u.World.add=u.Composite.add;u.World.remove=u.Composite.remove;u.World.addComposite=u.Composite.addComposite;u.World.addBody=u.Composite.addBody;u.World.addConstraint=u.Composite.addConstraint;u.World.clear=u.Composite.clear;p.exports=u},function(p,u,a){var h={};p.exports=h;var f=a(32);(function(){h._registry={};h.register=function(c){h.isPlugin(c)||f.warn("Plugin.register:",h.toString(c),"does not implement all required fields.");if(c.name in h._registry){var b=
h._registry[c.name],d=h.versionParse(c.version).number,g=h.versionParse(b.version).number;d>g?(f.warn("Plugin.register:",h.toString(b),"was upgraded to",h.toString(c)),h._registry[c.name]=c):d<g?f.warn("Plugin.register:",h.toString(b),"can not be downgraded to",h.toString(c)):c!==b&&f.warn("Plugin.register:",h.toString(c),"is already registered to different plugin object")}else h._registry[c.name]=c;return c};h.resolve=function(c){return h._registry[h.dependencyParse(c).name]};h.toString=function(c){return"string"===
typeof c?c:(c.name||"anonymous")+"@"+(c.version||c.range||"0.0.0")};h.isPlugin=function(c){return c&&c.name&&c.version&&c.install};h.isUsed=function(c,b){return-1<c.used.indexOf(b)};h.isFor=function(c,b){var d=c.for&&h.dependencyParse(c.for);return!c.for||b.name===d.name&&h.versionSatisfies(b.version,d.range)};h.use=function(c,b){c.uses=(c.uses||[]).concat(b||[]);if(0===c.uses.length)f.warn("Plugin.use:",h.toString(c),"does not specify any dependencies to install.");else{b=h.dependencies(c);b=f.topologicalSort(b);
for(var d=[],g=0;g<b.length;g+=1)if(b[g]!==c.name){var e=h.resolve(b[g]);e?h.isUsed(c,e.name)||(h.isFor(e,c)||(f.warn("Plugin.use:",h.toString(e),"is for",e.for,"but installed on",h.toString(c)+"."),e._warned=!0),e.install?e.install(c):(f.warn("Plugin.use:",h.toString(e),"does not specify an install function."),e._warned=!0),e._warned?(d.push("\ud83d\udd36 "+h.toString(e)),delete e._warned):d.push("\u2705 "+h.toString(e)),c.used.push(e.name)):d.push("\u274c "+b[g])}0<d.length&&!e.silent&&f.info(d.join("  "))}};
h.dependencies=function(c,b){var d=h.dependencyParse(c),g=d.name;b=b||{};if(!(g in b)){c=h.resolve(c)||c;b[g]=f.map(c.uses||[],function(l){h.isPlugin(l)&&h.register(l);var k=h.dependencyParse(l),m=h.resolve(l);m&&!h.versionSatisfies(m.version,k.range)?(f.warn("Plugin.dependencies:",h.toString(m),"does not satisfy",h.toString(k),"used by",h.toString(d)+"."),m._warned=!0,c._warned=!0):m||(f.warn("Plugin.dependencies:",h.toString(l),"used by",h.toString(d),"could not be resolved."),c._warned=!0);return k.name});
for(var e=0;e<b[g].length;e+=1)h.dependencies(b[g][e],b);return b}};h.dependencyParse=function(c){return f.isString(c)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(c)||f.warn("Plugin.dependencyParse:",c,"is not a valid dependency string."),{name:c.split("@")[0],range:c.split("@")[1]||"*"}):{name:c.name,range:c.range||c.version}};h.versionParse=function(c){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(c)||f.warn("Plugin.versionParse:",c,"is not a valid version or range.");var b=
c.split("-");c=b[0];var d=isNaN(Number(c[0])),g=d?c.substr(1):c,e=f.map(g.split("."),function(l){return Number(l)});return{isRange:d,version:g,range:c,operator:d?c[0]:"",parts:e,prerelease:b[1],number:1E8*e[0]+1E4*e[1]+e[2]}};h.versionSatisfies=function(c,b){b=b||"*";var d=h.versionParse(b),g=d.parts,e=h.versionParse(c),l=e.parts;if(d.isRange){if("*"===d.operator||"*"===c)return!0;if("~"===d.operator)return l[0]===g[0]&&l[1]===g[1]&&l[2]>=g[2];if("^"===d.operator)return 0<g[0]?l[0]===g[0]&&e.number>=
d.number:0<g[1]?l[1]===g[1]&&l[2]>=g[2]:l[2]===g[2]}return c===b||"*"===c}})()},function(p,u,a){var h={};p.exports=h;var f=a(118);a(128);var c=a(32);(function(){h.create=function(b){var d=f.create();return c.extend(d,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-Infinity,y:-Infinity},max:{x:Infinity,y:Infinity}}},b)}})()},function(p,u,a){var h={};p.exports=h;var f=a(250),c=a(273),b=a(32);(function(){h.create=function(d){return b.extend({controller:h,detector:c.collisions,buckets:{},
pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},d)};h.update=function(d,g,e,l){var k,m=e.world,n=d.buckets;var q=!1;var r=e.metrics;for(e=r.broadphaseTests=0;e<g.length;e++){var t=g[e];if(!(t.isSleeping&&!l||t.bounds.max.x<m.bounds.min.x||t.bounds.min.x>m.bounds.max.x||t.bounds.max.y<m.bounds.min.y||t.bounds.min.y>m.bounds.max.y)){var w=h._getRegion(d,t);if(!t.region||w.id!==t.region.id||l){r.broadphaseTests+=1;if(!t.region||l)t.region=w;var v=h._regionUnion(w,t.region);for(q=v.startCol;q<=
v.endCol;q++)for(k=v.startRow;k<=v.endRow;k++){var x=h._getBucketId(q,k);var y=n[x];var A=q>=w.startCol&&q<=w.endCol&&k>=w.startRow&&k<=w.endRow,B=q>=t.region.startCol&&q<=t.region.endCol&&k>=t.region.startRow&&k<=t.region.endRow;!A&&B&&B&&y&&h._bucketRemoveBody(d,y,t);if(t.region===w||A&&!B||l)y||(y=h._createBucket(n,x)),h._bucketAddBody(d,y,t)}t.region=w;q=!0}}}q&&(d.pairsList=h._createActivePairsList(d))};h.clear=function(d){d.buckets={};d.pairs={};d.pairsList=[]};h._regionUnion=function(d,g){return h._createRegion(Math.min(d.startCol,
g.startCol),Math.max(d.endCol,g.endCol),Math.min(d.startRow,g.startRow),Math.max(d.endRow,g.endRow))};h._getRegion=function(d,g){g=g.bounds;return h._createRegion(Math.floor(g.min.x/d.bucketWidth),Math.floor(g.max.x/d.bucketWidth),Math.floor(g.min.y/d.bucketHeight),Math.floor(g.max.y/d.bucketHeight))};h._createRegion=function(d,g,e,l){return{id:d+","+g+","+e+","+l,startCol:d,endCol:g,startRow:e,endRow:l}};h._getBucketId=function(d,g){return"C"+d+"R"+g};h._createBucket=function(d,g){return d[g]=[]};
h._bucketAddBody=function(d,g,e){for(var l=0;l<g.length;l++){var k=g[l];if(!(e.id===k.id||e.isStatic&&k.isStatic)){var m=f.id(e,k),n=d.pairs[m];n?n[2]+=1:d.pairs[m]=[e,k,1]}}g.push(e)};h._bucketRemoveBody=function(d,g,e){g.splice(g.indexOf(e),1);for(var l=0;l<g.length;l++){var k=f.id(e,g[l]);(k=d.pairs[k])&&--k[2]}};h._createActivePairsList=function(d){var g=[];var e=b.keys(d.pairs);for(var l=0;l<e.length;l++){var k=d.pairs[e[l]];0<k[2]?g.push(k):delete d.pairs[e[l]]}return g}})()},function(p,u,a){var h=
{};p.exports=h;var f=a(250),c=a(32);(function(){h._pairMaxIdleLife=1E3;h.create=function(b){return c.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},b)};h.update=function(b,d,g){var e=b.list,l=b.table,k=b.collisionStart,m=b.collisionEnd;b=b.collisionActive;var n,q;k.length=0;m.length=0;for(q=b.length=0;q<e.length;q++)e[q].confirmedActive=!1;for(q=0;q<d.length;q++){var r=d[q];if(r.collided){var t=f.id(r.bodyA,r.bodyB);(n=l[t])?(n.isActive?b.push(n):k.push(n),f.update(n,
r,g),n.confirmedActive=!0):(n=f.create(r,g),l[t]=n,k.push(n),e.push(n))}}for(q=0;q<e.length;q++)n=e[q],n.isActive&&!n.confirmedActive&&(f.setActive(n,!1,g),m.push(n))};h.removeOld=function(b,d){var g=b.list;b=b.table;var e=[],l;for(l=0;l<g.length;l++){var k=g[l];var m=k.collision;m.bodyA.isSleeping||m.bodyB.isSleeping?k.timeUpdated=d:d-k.timeUpdated>h._pairMaxIdleLife&&e.push(l)}for(l=0;l<e.length;l++)d=e[l]-l,k=g[d],delete b[k.id],g.splice(d,1)};h.clear=function(b){b.table={};b.list.length=0;b.collisionStart.length=
0;b.collisionActive.length=0;b.collisionEnd.length=0;return b}})()},function(p,u,a){var h={};p.exports=h;var f=a(64),c=a(83),b=a(32),d=a(84);(function(){h._restingThresh=4;h._restingThreshTangent=6;h._positionDampen=.9;h._positionWarming=.8;h._frictionNormalMultiplier=5;h.preSolvePosition=function(g){var e;for(e=0;e<g.length;e++){var l=g[e];if(l.isActive){var k=l.activeContacts.length;l.collision.parentA.totalContacts+=k;l.collision.parentB.totalContacts+=k}}};h.solvePosition=function(g,e,l){var k=
l*h._positionDampen;for(l=0;l<e.length;l++){var m=e[l];m.previousPositionImpulse.x=m.positionImpulse.x;m.previousPositionImpulse.y=m.positionImpulse.y}for(l=0;l<g.length;l++){var n=g[l];if(n.isActive&&!n.isSensor){var q=n.collision;e=q.parentA;m=q.parentB;var r=q.normal;var t=e.previousPositionImpulse;var w=m.previousPositionImpulse;var v=q.penetration;q=w.x-t.x+v.x;w=w.y-t.y+v.y;t=r.x;r=r.y;q=t*q+r*w;n.separation=q;q=(q-n.slop)*k;if(e.isStatic||m.isStatic)q*=2;e.isStatic||e.isSleeping||(n=q/e.totalContacts,
e.positionImpulse.x+=t*n,e.positionImpulse.y+=r*n);m.isStatic||m.isSleeping||(n=q/m.totalContacts,m.positionImpulse.x-=t*n,m.positionImpulse.y-=r*n)}}};h.postSolvePosition=function(g){for(var e=0;e<g.length;e++){var l=g[e];l.totalContacts=0;if(0!==l.positionImpulse.x||0!==l.positionImpulse.y){for(var k=0;k<l.parts.length;k++){var m=l.parts[k];f.translate(m.vertices,l.positionImpulse);d.update(m.bounds,m.vertices,l.velocity);m.position.x+=l.positionImpulse.x;m.position.y+=l.positionImpulse.y}l.positionPrev.x+=
l.positionImpulse.x;l.positionPrev.y+=l.positionImpulse.y;0>c.dot(l.positionImpulse,l.velocity)?(l.positionImpulse.x=0,l.positionImpulse.y=0):(l.positionImpulse.x*=h._positionWarming,l.positionImpulse.y*=h._positionWarming)}}};h.preSolveVelocity=function(g){var e,l=c._temp[0],k=c._temp[1];for(e=0;e<g.length;e++){var m=g[e];if(m.isActive&&!m.isSensor){var n=m.activeContacts;var q=m.collision;m=q.parentA;var r=q.parentB;var t=q.normal;var w=q.tangent;for(q=0;q<n.length;q++){var v=n[q];var x=v.vertex;
var y=v.normalImpulse;v=v.tangentImpulse;if(0!==y||0!==v)l.x=t.x*y+w.x*v,l.y=t.y*y+w.y*v,m.isStatic||m.isSleeping||(y=c.sub(x,m.position,k),m.positionPrev.x+=l.x*m.inverseMass,m.positionPrev.y+=l.y*m.inverseMass,m.anglePrev+=c.cross(y,l)*m.inverseInertia),r.isStatic||r.isSleeping||(y=c.sub(x,r.position,k),r.positionPrev.x-=l.x*r.inverseMass,r.positionPrev.y-=l.y*r.inverseMass,r.anglePrev-=c.cross(y,l)*r.inverseInertia)}}}};h.solveVelocity=function(g,e){e*=e;for(var l=c._temp[0],k=c._temp[1],m=c._temp[2],
n=c._temp[3],q=c._temp[4],r=c._temp[5],t=0;t<g.length;t++){var w=g[t];if(w.isActive&&!w.isSensor){var v=w.collision,x=v.parentA,y=v.parentB,A=v.normal;v=v.tangent;var B=w.activeContacts,z=1/B.length;x.velocity.x=x.position.x-x.positionPrev.x;x.velocity.y=x.position.y-x.positionPrev.y;y.velocity.x=y.position.x-y.positionPrev.x;y.velocity.y=y.position.y-y.positionPrev.y;x.angularVelocity=x.angle-x.anglePrev;y.angularVelocity=y.angle-y.anglePrev;for(var C=0;C<B.length;C++){var E=B[C],G=E.vertex,H=c.sub(G,
x.position,k);G=c.sub(G,y.position,m);var I=c.add(x.velocity,c.mult(c.perp(H),x.angularVelocity),n),K=c.add(y.velocity,c.mult(c.perp(G),y.angularVelocity),q);I=c.sub(I,K,r);var O=c.dot(A,I),R=c.dot(v,I),F=Math.abs(R),J=b.sign(R);I=(1+w.restitution)*O;var N=b.clamp(w.separation+O,0,1)*h._frictionNormalMultiplier;K=R;var Q=Infinity;F>w.friction*w.frictionStatic*N*e&&(Q=F,K=b.clamp(w.friction*J*e,-Q,Q));F=c.cross(H,A);J=c.cross(G,A);F=z/(x.inverseMass+y.inverseMass+x.inverseInertia*F*F+y.inverseInertia*
J*J);I*=F;K*=F;0>O&&O*O>h._restingThresh*e?E.normalImpulse=0:(O=E.normalImpulse,E.normalImpulse=Math.min(E.normalImpulse+I,0),I=E.normalImpulse-O);R*R>h._restingThreshTangent*e?E.tangentImpulse=0:(O=E.tangentImpulse,E.tangentImpulse=b.clamp(E.tangentImpulse+K,-Q,Q),K=E.tangentImpulse-O);l.x=A.x*I+v.x*K;l.y=A.y*I+v.y*K;x.isStatic||x.isSleeping||(x.positionPrev.x+=l.x*x.inverseMass,x.positionPrev.y+=l.y*x.inverseMass,x.anglePrev+=c.cross(H,l)*x.inverseInertia);y.isStatic||y.isSleeping||(y.positionPrev.x-=
l.x*y.inverseMass,y.positionPrev.y-=l.y*y.inverseMass,y.anglePrev-=c.cross(G,l)*y.inverseInertia)}}}}})()},function(p,u){u=function(){return this}();try{u=u||(new Function("return this"))()}catch(a){"object"===typeof window&&(u=window)}p.exports=u},function(p,u,a){var h=a(276);p.exports=function(f,c,b,d){for(var g=f[0],e=1;e<f.length;e++){var l=f[e];h(l,g,c,b,d);g=l}return f}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g){return h(f,"angle",c,b,d,g)}},function(p,u){p.exports=function(a,
h,f){for(var c=0;c<a.length;c++)h.call(f,a[c]);return a}},function(p,u){p.exports=function(a,h,f){for(void 0===f&&(f=0);f<a.length;f++){var c=a[f],b=!0,d;for(d in h)c[d]!==h[d]&&(b=!1);if(b)return c}return null}},function(p,u){p.exports=function(a,h,f){for(void 0===f&&(f=0);f<a.length;f++){var c=a[f],b=!0,d;for(d in h)c[d]!==h[d]&&(b=!1);if(b)return c}return null}},function(p,u,a){var h=a(289),f=a(123),c=a(2);u=a(1);var b=new (a(129))({sys:{queueDepthSort:u,events:{once:u}}},0,0,1,1);p.exports=function(d,
g){void 0===g&&(g={});var e=g.hasOwnProperty("width"),l=g.hasOwnProperty("height"),k=c(g,"width",-1),m=c(g,"height",-1),n=c(g,"cellWidth",1),q=c(g,"cellHeight",n),r=c(g,"position",f.TOP_LEFT),t=c(g,"x",0);g=c(g,"y",0);var w=0,v=0,x=k*n,y=m*q;b.setPosition(t,g);b.setSize(n,q);for(var A=0;A<d.length;A++)if(h(d[A],b,r),e&&-1===k)b.x+=n;else if(l&&-1===m)b.y+=q;else if(l&&!e){if(v+=q,b.y+=q,v===y&&(v=0,w+=n,b.y=g,b.x+=n,w===x))break}else if(w+=n,b.x+=n,w===x&&(w=0,v+=q,b.x=t,b.y+=q,v===y))break;return d}},
function(p,u,a){var h=a(18);p.exports={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(f,c,b,d){void 0===f&&(f=1);void 0===c?this.alpha=f:(this._alphaTL=h(f,0,1),this._alphaTR=h(c,0,1),this._alphaBL=h(b,0,1),this._alphaBR=h(d,0,1));return this},alpha:{get:function(){return this._alpha},set:function(f){this._alphaBR=this._alphaBL=this._alphaTR=this._alphaTL=this._alpha=f=h(f,0,1);this.renderFlags=0===f?this.renderFlags&-3:this.renderFlags|
2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(f){this._alphaTL=f=h(f,0,1);0!==f&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(f){this._alphaTR=f=h(f,0,1);0!==f&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(f){this._alphaBL=f=h(f,0,1);0!==f&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(f){this._alphaBR=f=h(f,0,1);0!==f&&(this.renderFlags|=2)}}}},
function(p,u){p.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(a){this.scaleX=a/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(a){this.scaleY=a/this.height}},setSize:function(a,h){this.width=a;this.height=h;return this},setDisplaySize:function(a,h){this.displayWidth=a;this.displayHeight=h;return this}}},function(p,u){p.exports={texture:null,frame:null,isCropped:!1,setCrop:function(a,h,f,c){void 0===a?this.isCropped=
!1:this.frame&&("number"===typeof a?this.frame.setCropUVs(this._crop,a,h,f,c,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY),this.isCropped=!0);return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(p,u){p.exports={flipX:!1,flipY:!1,toggleFlipX:function(){this.flipX=!this.flipX;return this},toggleFlipY:function(){this.flipY=!this.flipY;return this},setFlipX:function(a){this.flipX=
a;return this},setFlipY:function(a){this.flipY=a;return this},setFlip:function(a,h){this.flipX=a;this.flipY=h;return this},resetFlip:function(){this.flipY=this.flipX=!1;return this}}},function(p,u,a){var h=a(10),f=a(308),c=a(3);p.exports={prepareBoundsOutput:function(b,d){void 0===d&&(d=!1);0!==this.rotation&&f(b,this.x,this.y,this.rotation);d&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(b.x,b.y,b);return b},getCenter:function(b){void 0===b&&(b=new c);b.x=
this.x-this.displayWidth*this.originX+this.displayWidth/2;b.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return b},getTopLeft:function(b,d){b||(b=new c);b.x=this.x-this.displayWidth*this.originX;b.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(b,d)},getTopCenter:function(b,d){b||(b=new c);b.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;b.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(b,d)},getTopRight:function(b,d){b||
(b=new c);b.x=this.x-this.displayWidth*this.originX+this.displayWidth;b.y=this.y-this.displayHeight*this.originY;return this.prepareBoundsOutput(b,d)},getLeftCenter:function(b,d){b||(b=new c);b.x=this.x-this.displayWidth*this.originX;b.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;return this.prepareBoundsOutput(b,d)},getRightCenter:function(b,d){b||(b=new c);b.x=this.x-this.displayWidth*this.originX+this.displayWidth;b.y=this.y-this.displayHeight*this.originY+this.displayHeight/2;
return this.prepareBoundsOutput(b,d)},getBottomLeft:function(b,d){b||(b=new c);b.x=this.x-this.displayWidth*this.originX;b.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(b,d)},getBottomCenter:function(b,d){b||(b=new c);b.x=this.x-this.displayWidth*this.originX+this.displayWidth/2;b.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(b,d)},getBottomRight:function(b,d){b||(b=new c);b.x=this.x-this.displayWidth*this.originX+
this.displayWidth;b.y=this.y-this.displayHeight*this.originY+this.displayHeight;return this.prepareBoundsOutput(b,d)},getBounds:function(b){void 0===b&&(b=new h);if(this.parentContainer){var d=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(b);d.transformPoint(b.x,b.y,b);var g=b.x;var e=b.y;this.getTopRight(b);d.transformPoint(b.x,b.y,b);var l=b.x;var k=b.y;this.getBottomLeft(b);d.transformPoint(b.x,b.y,b);var m=b.x;var n=b.y;this.getBottomRight(b);d.transformPoint(b.x,b.y,b)}else this.getTopLeft(b),
g=b.x,e=b.y,this.getTopRight(b),l=b.x,k=b.y,this.getBottomLeft(b),m=b.x,n=b.y,this.getBottomRight(b);d=b.x;var q=b.y;b.x=Math.min(g,l,m,d);b.y=Math.min(e,k,n,q);b.width=Math.max(g,l,m,d)-b.x;b.height=Math.max(e,k,n,q)-b.y;return b}}},function(p,u){p.exports="blur"},function(p,u){p.exports="boot"},function(p,u){p.exports="contextlost"},function(p,u){p.exports="contextrestored"},function(p,u){p.exports="destroy"},function(p,u){p.exports="focus"},function(p,u){p.exports="hidden"},function(p,u){p.exports=
"pause"},function(p,u){p.exports="postrender"},function(p,u){p.exports="poststep"},function(p,u){p.exports="prerender"},function(p,u){p.exports="prestep"},function(p,u){p.exports="ready"},function(p,u){p.exports="resume"},function(p,u){p.exports="step"},function(p,u){p.exports="visible"},function(p,u){p.exports="postrender"},function(p,u){p.exports="prerender"},function(p,u){p.exports="render"},function(p,u){p.exports="resize"},function(p,u){p.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,
_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(a){this._displayOriginX=a;this.originX=a/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(a){this._displayOriginY=a;this.originY=a/this.height}},setOrigin:function(a,h){void 0===a&&(a=.5);void 0===h&&(h=a);this.originX=a;this.originY=h;return this.updateDisplayOrigin()},setOriginFromFrame:function(){if(this.frame&&this.frame.customPivot)this.originX=this.frame.pivotX,this.originY=
this.frame.pivotY;else return this.setOrigin();return this.updateDisplayOrigin()},setDisplayOrigin:function(a,h){void 0===a&&(a=0);void 0===h&&(h=a);this.displayOriginX=a;this.displayOriginY=h;return this},updateDisplayOrigin:function(){this._displayOriginX=this.originX*this.width;this._displayOriginY=this.originY*this.height;return this}}},function(p,u,a){var h=a(36),f=a(99),c=a(6),b=a(100),d=a(3);p.exports={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,
pathTween:null,pathConfig:null,_prevDirection:b.PLAYING_FORWARD,setPath:function(g,e){void 0===e&&(e=this.pathConfig);var l=this.pathTween;l&&l.isPlaying()&&l.stop();this.path=g;e&&this.startFollow(e);return this},setRotateToPath:function(g,e){void 0===e&&(e=0);this.rotateToPath=g;this.pathRotationOffset=e;return this},isFollowing:function(){var g=this.pathTween;return g&&g.isPlaying()},startFollow:function(g,e){void 0===g&&(g={});void 0===e&&(e=0);var l=this.pathTween;l&&l.isPlaying()&&l.stop();
"number"===typeof g&&(g={duration:g});g.from=c(g,"from",0);g.to=c(g,"to",1);l=f(g,"positionOnPath",!1);this.rotateToPath=f(g,"rotateToPath",!1);this.pathRotationOffset=c(g,"rotationOffset",0);var k=c(g,"startAt",e);k&&(g.onStart=function(m){m=m.data[0];m.progress=k;m.elapsed=m.duration*k;var n=m.ease(m.progress);m.current=m.start+(m.end-m.start)*n;m.target[m.key]=m.current});this.pathOffset||(this.pathOffset=new d(this.x,this.y));this.pathVector||(this.pathVector=new d);this.pathDelta||(this.pathDelta=
new d);this.pathDelta.reset();this.pathTween=this.scene.sys.tweens.addCounter(g);this.path.getStartPoint(this.pathOffset);l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y);this.pathOffset.x=this.x-this.pathOffset.x;this.pathOffset.y=this.y-this.pathOffset.y;this._prevDirection=b.PLAYING_FORWARD;this.rotateToPath&&(e=this.path.getPoint(.1),this.rotation=Math.atan2(e.y-this.y,e.x-this.x)+h(this.pathRotationOffset));this.pathConfig=g;return this},pauseFollow:function(){var g=this.pathTween;g&&g.isPlaying()&&
g.pause();return this},resumeFollow:function(){var g=this.pathTween;g&&g.isPaused()&&g.resume();return this},stopFollow:function(){var g=this.pathTween;g&&g.isPlaying()&&g.stop();return this},pathUpdate:function(){var g=this.pathTween;if(g){var e=g.data[0],l=this.pathDelta,k=this.pathVector;l.copy(k).negate();if(e.state===b.COMPLETE)this.path.getPoint(1,k),l.add(k),k.add(this.pathOffset),this.setPosition(k.x,k.y);else if(e.state===b.PLAYING_FORWARD||e.state===b.PLAYING_BACKWARD)if(this.path.getPoint(g.getValue(),
k),l.add(k),k.add(this.pathOffset),l=this.x,g=this.y,this.setPosition(k.x,k.y),k=this.x-l,g=this.y-g,0!==k||0!==g)e.state!==this._prevDirection?this._prevDirection=e.state:this.rotateToPath&&(this.rotation=Math.atan2(g,k)+h(this.pathRotationOffset))}}}},function(p,u){p.exports={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(a){this.scaleX=a/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*
this.frame.realHeight)},set:function(a){this.scaleY=a/this.frame.realHeight}},setSizeToFrame:function(a){void 0===a&&(a=this.frame);this.width=a.realWidth;this.height=a.realHeight;return this},setSize:function(a,h){this.width=a;this.height=h;return this},setDisplaySize:function(a,h){this.displayWidth=a;this.displayHeight=h;return this}}},function(p,u){p.exports={texture:null,frame:null,isCropped:!1,setTexture:function(a,h){this.texture=this.scene.sys.textures.get(a);return this.setFrame(h)},setFrame:function(a,
h,f){void 0===h&&(h=!0);void 0===f&&(f=!0);this.frame=this.texture.get(a);this.renderFlags=this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|8:this.renderFlags&-9;this._sizeComponent&&h&&this.setSizeToFrame();this._originComponent&&f&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin());return this}}},function(p,u){p.exports={texture:null,frame:null,isCropped:!1,setCrop:function(a,h,f,c){void 0===a?this.isCropped=!1:this.frame&&("number"===
typeof a?this.frame.setCropUVs(this._crop,a,h,f,c,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY),this.isCropped=!0);return this},setTexture:function(a,h){this.texture=this.scene.sys.textures.get(a);return this.setFrame(h)},setFrame:function(a,h,f){void 0===h&&(h=!0);void 0===f&&(f=!0);this.frame=this.texture.get(a);this.renderFlags=this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|8:this.renderFlags&-9;this._sizeComponent&&h&&this.setSizeToFrame();
this._originComponent&&f&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin());this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY);return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(p,u){p.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){this.setTint(16777215);
return this},setTint:function(a,h,f,c){void 0===a&&(a=16777215);void 0===h&&(c=f=h=a);this.tintTopLeft=a;this.tintTopRight=h;this.tintBottomLeft=f;this.tintBottomRight=c;this.tintFill=!1;return this},setTintFill:function(a,h,f,c){this.setTint(a,h,f,c);this.tintFill=!0;return this},tint:{set:function(a){this.setTint(a,a,a,a)}},isTinted:{get:function(){return this.tintFill||16777215!==this.tintTopLeft||16777215!==this.tintTopRight||16777215!==this.tintBottomLeft||16777215!==this.tintBottomRight}}}},
function(p,u){p.exports="changedata"},function(p,u){p.exports="changedata-"},function(p,u){p.exports="destroy"},function(p,u){p.exports="removedata"},function(p,u){p.exports="setdata"},function(p,u){p.exports="addedtoscene"},function(p,u){p.exports="destroy"},function(p,u){p.exports="removedfromscene"},function(p,u){p.exports="complete"},function(p,u){p.exports="created"},function(p,u){p.exports="error"},function(p,u){p.exports="loop"},function(p,u){p.exports="play"},function(p,u){p.exports="seeked"},
function(p,u){p.exports="seeking"},function(p,u){p.exports="stop"},function(p,u){p.exports="timeout"},function(p,u){p.exports="unlocked"},function(p,u){p.exports="addedtoscene"},function(p,u){p.exports="boot"},function(p,u){p.exports="create"},function(p,u){p.exports="destroy"},function(p,u){p.exports="pause"},function(p,u){p.exports="postupdate"},function(p,u){p.exports="prerender"},function(p,u){p.exports="preupdate"},function(p,u){p.exports="ready"},function(p,u){p.exports="removedfromscene"},
function(p,u){p.exports="render"},function(p,u){p.exports="resume"},function(p,u){p.exports="shutdown"},function(p,u){p.exports="sleep"},function(p,u){p.exports="start"},function(p,u){p.exports="transitioncomplete"},function(p,u){p.exports="transitioninit"},function(p,u){p.exports="transitionout"},function(p,u){p.exports="transitionstart"},function(p,u){p.exports="transitionwake"},function(p,u){p.exports="update"},function(p,u){p.exports="wake"},function(p,u,a){var h=a(46);p.exports=function(f,c,
b,d,g){return h(f,"alpha",c,b,d,g)}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g){return h(f,"x",c,b,d,g)}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g,e,l){if(void 0===b||null===b)b=c;h(f,"x",c,d,e,l);return h(f,"y",b,g,e,l)}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g){return h(f,"y",c,b,d,g)}},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=0);void 0===c&&(c=6.28);var b=f;f=(c-f)/a.length;for(c=0;c<a.length;c++)a[c].x=h.x+h.radius*Math.cos(b),a[c].y=
h.y+h.radius*Math.sin(b),b+=f;return a}},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=0);void 0===c&&(c=6.28);var b=f;f=(c-f)/a.length;c=h.width/2;for(var d=h.height/2,g=0;g<a.length;g++)a[g].x=h.x+c*Math.cos(b),a[g].y=h.y+d*Math.sin(b),b+=f;return a}},function(p,u,a){var h=a(172);p.exports=function(f,c){c=h(c,f.length);for(var b=0;b<f.length;b++){var d=f[b],g=c[b];d.x=g.x;d.y=g.y}return f}},function(p,u,a){var h=a(316),f=a(178),c=a(179);p.exports=function(b,d,g){void 0===g&&(g=0);d=h(d,
!1,b.length);0<g?f(d,g):0>g&&c(d,Math.abs(g));for(g=0;g<b.length;g++)b[g].x=d[g].x,b[g].y=d[g].y;return b}},function(p,u,a){var h=a(317);p.exports=function(f,c,b){var d=h({x1:c.x1,y1:c.y1,x2:c.x2,y2:c.y2},b),g=h({x1:c.x2,y1:c.y2,x2:c.x3,y2:c.y3},b);c=h({x1:c.x3,y1:c.y3,x2:c.x1,y2:c.y1},b);d.pop();g.pop();c.pop();d=d.concat(g,c);g=d.length/f.length;for(b=c=0;b<f.length;b++){var e=f[b],l=d[Math.floor(c)];e.x=l.x;e.y=l.y;c+=g}return f}},function(p,u){p.exports=function(a,h,f){for(var c=0;c<a.length;c++){var b=
a[c];b.anims&&b.anims.play(h,f)}return a}},function(p,u,a){var h=a(170);p.exports=function(f,c){for(var b=0;b<f.length;b++)h(c,f[b]);return f}},function(p,u,a){var h=a(180);p.exports=function(f,c){for(var b=0;b<f.length;b++)h(c,f[b]);return f}},function(p,u,a){var h=a(173);p.exports=function(f,c){for(var b=0;b<f.length;b++)h(c,f[b]);return f}},function(p,u,a){var h=a(174);p.exports=function(f,c){for(var b=0;b<f.length;b++)h(c,f[b]);return f}},function(p,u,a){var h=a(181);p.exports=function(f,c){for(var b=
0;b<f.length;b++)h(c,f[b]);return f}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g){return h(f,"rotation",c,b,d,g)}},function(p,u,a){var h=a(182),f=a(50);p.exports=function(c,b,d){var g=b.x;b=b.y;for(var e=0;e<c.length;e++){var l=c[e];h(l,g,b,d,Math.max(1,f(l.x,l.y,g,b)))}return c}},function(p,u,a){var h=a(182);p.exports=function(f,c,b,d){var g=c.x;c=c.y;if(0===d)return f;for(var e=0;e<f.length;e++)h(f[e],g,c,b,d);return f}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g){return h(f,
"scaleX",c,b,d,g)}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g,e,l){if(void 0===b||null===b)b=c;h(f,"scaleX",c,d,e,l);return h(f,"scaleY",b,g,e,l)}},function(p,u,a){var h=a(46);p.exports=function(f,c,b,d,g){return h(f,"scaleY",c,b,d,g)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g){return h(f,"alpha",c,b,d,g)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d){return h(f,"blendMode",c,0,b,d)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g){return h(f,"depth",
c,b,d,g)}},function(p,u){p.exports=function(a,h,f){for(var c=0;c<a.length;c++)a[c].setInteractive(h,f);return a}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g,e,l){if(void 0===b||null===b)b=c;h(f,"originX",c,d,e,l);h(f,"originY",b,g,e,l);f.forEach(function(k){k.updateDisplayOrigin()});return f}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g){return h(f,"rotation",c,b,d,g)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g,e,l){if(void 0===b||null===b)b=c;h(f,"scaleX",
c,d,e,l);return h(f,"scaleY",b,g,e,l)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g){return h(f,"scaleX",c,b,d,g)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g){return h(f,"scaleY",c,b,d,g)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g,e,l){if(void 0===b||null===b)b=c;h(f,"scrollFactorX",c,d,e,l);return h(f,"scrollFactorY",b,g,e,l)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g){return h(f,"scrollFactorX",c,b,d,g)}},function(p,u,a){var h=a(27);p.exports=
function(f,c,b,d,g){return h(f,"scrollFactorY",c,b,d,g)}},function(p,u){p.exports=function(a,h,f,c,b){for(var d=0;d<a.length;d++)a[d].setTint(h,f,c,b);return a}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d){return h(f,"visible",c,0,b,d)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g){return h(f,"x",c,b,d,g)}},function(p,u,a){var h=a(27);p.exports=function(f,c,b,d,g,e,l){if(void 0===b||null===b)b=c;h(f,"x",c,d,e,l);return h(f,"y",b,g,e,l)}},function(p,u,a){var h=a(27);p.exports=
function(f,c,b,d,g){return h(f,"y",c,b,d,g)}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d,g){void 0===d&&(d=0);void 0===g&&(g=new h);if(1<f.length){var e;if(0===d){var l=f.length-1;d=f[l].x;var k=f[l].y;for(e=l-1;0<=e;e--){var m=f[e];var n=m.x;var q=m.y;m.x=d;m.y=k;d=n;k=q}f[l].x=c;f[l].y=b}else{d=f[0].x;k=f[0].y;for(e=1;e<f.length;e++)m=f[e],n=m.x,q=m.y,m.x=d,m.y=k,d=n,k=q;f[0].x=c;f[0].y=b}}else d=f[0].x,k=f[0].y,f[0].x=c,f[0].y=b;g.x=d;g.y=k;return g}},function(p,u,a){var h=a(131);p.exports=
function(f){return h(f)}},function(p,u,a){var h=a(183);p.exports=function(f,c,b,d,g){void 0===g&&(g=!1);var e=Math.abs(d-b)/f.length;if(g)for(g=0;g<f.length;g++)f[g][c]+=h(g*e,b,d);else for(g=0;g<f.length;g++)f[g][c]=h(g*e,b,d);return f}},function(p,u,a){var h=a(184);p.exports=function(f,c,b,d,g){void 0===g&&(g=!1);var e=Math.abs(d-b)/f.length;if(g)for(g=0;g<f.length;g++)f[g][c]+=h(g*e,b,d);else for(g=0;g<f.length;g++)f[g][c]=h(g*e,b,d);return f}},function(p,u){p.exports=function(a,h,f,c,b){void 0===
b&&(b=!1);c=Math.abs(c-f)/a.length;if(b)for(b=0;b<a.length;b++)a[b][h]+=b*c+f;else for(b=0;b<a.length;b++)a[b][h]=b*c+f;return a}},function(p,u){p.exports=function(a){for(var h=0;h<a.length;h++)a[h].visible=!a[h].visible;return a}},function(p,u,a){var h=a(68);p.exports=function(f,c,b){void 0===b&&(b=0);for(var d=0;d<f.length;d++){var g=f[d];g.x=h(g.x,c.left-b,c.right+b);g.y=h(g.y,c.top-b,c.bottom+b)}return f}},function(p,u,a){p.exports={Animation:a(185),AnimationFrame:a(319),AnimationManager:a(321),
AnimationState:a(164),Events:a(132)}},function(p,u){p.exports="add"},function(p,u){p.exports="animationcomplete"},function(p,u){p.exports="animationcomplete-"},function(p,u){p.exports="animationrepeat"},function(p,u){p.exports="animationrestart"},function(p,u){p.exports="animationstart"},function(p,u){p.exports="animationstop"},function(p,u){p.exports="animationupdate"},function(p,u){p.exports="pauseall"},function(p,u){p.exports="remove"},function(p,u){p.exports="resumeall"},function(p,u,a){p.exports=
{BaseCache:a(323),CacheManager:a(325),Events:a(324)}},function(p,u){p.exports="add"},function(p,u){p.exports="remove"},function(p,u,a){p.exports={Controls:a(739),Scene2D:a(742)}},function(p,u,a){p.exports={FixedKeyControl:a(740),SmoothedKeyControl:a(741)}},function(p,u,a){u=a(0);var h=a(6);a=new u({initialize:function(f){this.camera=h(f,"camera",null);this.left=h(f,"left",null);this.right=h(f,"right",null);this.up=h(f,"up",null);this.down=h(f,"down",null);this.zoomIn=h(f,"zoomIn",null);this.zoomOut=
h(f,"zoomOut",null);this.zoomSpeed=h(f,"zoomSpeed",.01);this.minZoom=h(f,"minZoom",.001);this.maxZoom=h(f,"maxZoom",1E3);this.speedY=this.speedX=0;var c=h(f,"speed",null);"number"===typeof c?this.speedY=this.speedX=c:(this.speedX=h(f,"speed.x",0),this.speedY=h(f,"speed.y",0));this._zoom=0;this.active=null!==this.camera},start:function(){this.active=null!==this.camera;return this},stop:function(){this.active=!1;return this},setCamera:function(f){this.camera=f;return this},update:function(f){if(this.active){void 0===
f&&(f=1);var c=this.camera;this.up&&this.up.isDown?c.scrollY-=this.speedY*f|0:this.down&&this.down.isDown&&(c.scrollY+=this.speedY*f|0);this.left&&this.left.isDown?c.scrollX-=this.speedX*f|0:this.right&&this.right.isDown&&(c.scrollX+=this.speedX*f|0);this.zoomIn&&this.zoomIn.isDown?(c.zoom-=this.zoomSpeed,c.zoom<this.minZoom&&(c.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(c.zoom+=this.zoomSpeed,c.zoom>this.maxZoom&&(c.zoom=this.maxZoom))}},destroy:function(){this.zoomOut=this.zoomIn=this.down=
this.up=this.right=this.left=this.camera=null}});p.exports=a},function(p,u,a){u=a(0);var h=a(6);a=new u({initialize:function(f){this.camera=h(f,"camera",null);this.left=h(f,"left",null);this.right=h(f,"right",null);this.up=h(f,"up",null);this.down=h(f,"down",null);this.zoomIn=h(f,"zoomIn",null);this.zoomOut=h(f,"zoomOut",null);this.zoomSpeed=h(f,"zoomSpeed",.01);this.minZoom=h(f,"minZoom",.001);this.maxZoom=h(f,"maxZoom",1E3);this.accelY=this.accelX=0;var c=h(f,"acceleration",null);"number"===typeof c?
this.accelY=this.accelX=c:(this.accelX=h(f,"acceleration.x",0),this.accelY=h(f,"acceleration.y",0));this.dragY=this.dragX=0;c=h(f,"drag",null);"number"===typeof c?this.dragY=this.dragX=c:(this.dragX=h(f,"drag.x",0),this.dragY=h(f,"drag.y",0));this.maxSpeedY=this.maxSpeedX=0;c=h(f,"maxSpeed",null);"number"===typeof c?this.maxSpeedY=this.maxSpeedX=c:(this.maxSpeedX=h(f,"maxSpeed.x",0),this.maxSpeedY=h(f,"maxSpeed.y",0));this._zoom=this._speedY=this._speedX=0;this.active=null!==this.camera},start:function(){this.active=
null!==this.camera;return this},stop:function(){this.active=!1;return this},setCamera:function(f){this.camera=f;return this},update:function(f){if(this.active){void 0===f&&(f=1);var c=this.camera;0<this._speedX?(this._speedX-=this.dragX*f,0>this._speedX&&(this._speedX=0)):0>this._speedX&&(this._speedX+=this.dragX*f,0<this._speedX&&(this._speedX=0));0<this._speedY?(this._speedY-=this.dragY*f,0>this._speedY&&(this._speedY=0)):0>this._speedY&&(this._speedY+=this.dragY*f,0<this._speedY&&(this._speedY=
0));this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY));this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX));this._zoom=this.zoomIn&&this.zoomIn.isDown?
-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this.zoomSpeed:0;0!==this._speedX&&(c.scrollX-=this._speedX*f|0);0!==this._speedY&&(c.scrollY-=this._speedY*f|0);0!==this._zoom&&(c.zoom+=this._zoom,c.zoom<this.minZoom?c.zoom=this.minZoom:c.zoom>this.maxZoom&&(c.zoom=this.maxZoom))}},destroy:function(){this.zoomOut=this.zoomIn=this.down=this.up=this.right=this.left=this.camera=null}});p.exports=a},function(p,u,a){p.exports={Camera:a(326),BaseCamera:a(133),CameraManager:a(799),Effects:a(333),Events:a(37)}},
function(p,u){p.exports="cameradestroy"},function(p,u){p.exports="camerafadeincomplete"},function(p,u){p.exports="camerafadeinstart"},function(p,u){p.exports="camerafadeoutcomplete"},function(p,u){p.exports="camerafadeoutstart"},function(p,u){p.exports="cameraflashcomplete"},function(p,u){p.exports="cameraflashstart"},function(p,u){p.exports="followupdate"},function(p,u){p.exports="camerapancomplete"},function(p,u){p.exports="camerapanstart"},function(p,u){p.exports="postrender"},function(p,u){p.exports=
"prerender"},function(p,u){p.exports="camerarotatecomplete"},function(p,u){p.exports="camerarotatestart"},function(p,u){p.exports="camerashakecomplete"},function(p,u){p.exports="camerashakestart"},function(p,u){p.exports="camerazoomcomplete"},function(p,u){p.exports="camerazoomstart"},function(p,u,a){var h=a(18);u=a(0);var f=a(37);a=new u({initialize:function(c){this.camera=c;this.isComplete=this.isRunning=!1;this.direction=!0;this._elapsed=this.progress=this.alpha=this.blue=this.green=this.red=this.duration=
0},start:function(c,b,d,g,e,l,k,m){void 0===c&&(c=!0);void 0===b&&(b=1E3);void 0===d&&(d=0);void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=!1);void 0===k&&(k=null);void 0===m&&(m=this.camera.scene);if(!l&&this.isRunning)return this.camera;this.isRunning=!0;this.isComplete=!1;this.duration=b;this.direction=c;this.progress=0;this.red=d;this.green=g;this.blue=e;this.alpha=c?Number.MIN_VALUE:1;this._elapsed=0;this._onUpdate=k;this._onUpdateScope=m;this.camera.emit(c?f.FADE_OUT_START:f.FADE_IN_START,
this.camera,this,b,d,g,e);return this.camera},update:function(c,b){this.isRunning&&(this._elapsed+=b,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(c){if(!this.isRunning&&!this.isComplete)return!1;var b=this.camera;c.fillStyle="rgba("+this.red+","+this.green+
","+this.blue+","+this.alpha+")";c.fillRect(b.x,b.y,b.width,b.height);return!0},postRenderWebGL:function(c,b){if(!this.isRunning&&!this.isComplete)return!1;var d=this.camera;c.drawFillRect(d.x,d.y,d.width,d.height,b(this.blue/255,this.green/255,this.red/255,1),this.alpha);return!0},effectComplete:function(){this._onUpdateScope=this._onUpdate=null;this.isRunning=!1;this.isComplete=!0;this.camera.emit(this.direction?f.FADE_OUT_COMPLETE:f.FADE_IN_COMPLETE,this.camera,this)},reset:function(){this.isComplete=
this.isRunning=!1;this._onUpdateScope=this._onUpdate=null},destroy:function(){this.reset();this.camera=null}});p.exports=a},function(p,u,a){var h=a(18);u=a(0);var f=a(37);a=new u({initialize:function(c){this.camera=c;this.isRunning=!1;this._elapsed=this.progress=this.alpha=this.blue=this.green=this.red=this.duration=0},start:function(c,b,d,g,e,l,k){void 0===c&&(c=250);void 0===b&&(b=255);void 0===d&&(d=255);void 0===g&&(g=255);void 0===e&&(e=!1);void 0===l&&(l=null);void 0===k&&(k=this.camera.scene);
if(!e&&this.isRunning)return this.camera;this.isRunning=!0;this.duration=c;this.progress=0;this.red=b;this.green=d;this.blue=g;this.alpha=1;this._elapsed=0;this._onUpdate=l;this._onUpdateScope=k;this.camera.emit(f.FLASH_START,this.camera,this,c,b,d,g);return this.camera},update:function(c,b){this.isRunning&&(this._elapsed+=b,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:
this.effectComplete())},postRenderCanvas:function(c){if(!this.isRunning)return!1;var b=this.camera;c.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")";c.fillRect(b.x,b.y,b.width,b.height);return!0},postRenderWebGL:function(c,b){if(!this.isRunning)return!1;var d=this.camera;c.drawFillRect(d.x,d.y,d.width,d.height,b(this.blue/255,this.green/255,this.red/255,1),this.alpha);return!0},effectComplete:function(){this._onUpdateScope=this._onUpdate=null;this.isRunning=!1;this.camera.emit(f.FLASH_COMPLETE,
this.camera,this)},reset:function(){this.isRunning=!1;this._onUpdateScope=this._onUpdate=null},destroy:function(){this.reset();this.camera=null}});p.exports=a},function(p,u,a){var h=a(18);u=a(0);var f=a(134),c=a(37),b=a(3);a=new u({initialize:function(d){this.camera=d;this.isRunning=!1;this.duration=0;this.source=new b;this.current=new b;this.destination=new b;this._elapsed=this.progress=0},start:function(d,g,e,l,k,m,n){void 0===e&&(e=1E3);void 0===l&&(l=f.Linear);void 0===k&&(k=!1);void 0===m&&(m=
null);void 0===n&&(n=this.camera.scene);var q=this.camera;if(!k&&this.isRunning)return q;this.isRunning=!0;this.duration=e;this.progress=0;this.source.set(q.scrollX,q.scrollY);this.destination.set(d,g);q.getScroll(d,g,this.current);"string"===typeof l&&f.hasOwnProperty(l)?this.ease=f[l]:"function"===typeof l&&(this.ease=l);this._elapsed=0;this._onUpdate=m;this._onUpdateScope=n;this.camera.emit(c.PAN_START,this.camera,this,e,d,g);return q},update:function(d,g){if(this.isRunning)if(this._elapsed+=g,
this.progress=d=h(this._elapsed/this.duration,0,1),g=this.camera,this._elapsed<this.duration){var e=this.ease(d);g.getScroll(this.destination.x,this.destination.y,this.current);var l=this.source.x+(this.current.x-this.source.x)*e;e=this.source.y+(this.current.y-this.source.y)*e;g.setScroll(l,e);this._onUpdate&&this._onUpdate.call(this._onUpdateScope,g,d,l,e)}else g.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,g,d,g.scrollX,g.scrollY),this.effectComplete()},
effectComplete:function(){this._onUpdateScope=this._onUpdate=null;this.isRunning=!1;this.camera.emit(c.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1;this._onUpdateScope=this._onUpdate=null},destroy:function(){this.reset();this.destination=this.source=this.camera=null}});p.exports=a},function(p,u){p.exports=function(a,h){void 0===h&&(h=1.70158);return a*a*((h+1)*a-h)}},function(p,u){p.exports=function(a,h){void 0===h&&(h=1.70158);return--a*a*((h+1)*a+h)+1}},function(p,u){p.exports=
function(a,h){void 0===h&&(h=1.70158);h*=1.525;return 1>(a*=2)?.5*a*a*((h+1)*a-h):.5*((a-=2)*a*((h+1)*a+h)+2)}},function(p,u){p.exports=function(a){a=1-a;return a<1/2.75?1-7.5625*a*a:a<2/2.75?1-(7.5625*(a-=1.5/2.75)*a+.75):a<2.5/2.75?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}},function(p,u){p.exports=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},function(p,u){p.exports=
function(a){var h=!1;.5>a?(a=1-2*a,h=!0):a=2*a-1;a=a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375;return h?.5*(1-a):.5*a+.5}},function(p,u){p.exports=function(a){return 1-Math.sqrt(1-a*a)}},function(p,u){p.exports=function(a){return Math.sqrt(1- --a*a)}},function(p,u){p.exports=function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)}},function(p,u){p.exports=function(a){return a*a*a}},function(p,
u){p.exports=function(a){return--a*a*a+1}},function(p,u){p.exports=function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)}},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=.1);void 0===f&&(f=.1);if(0===a)return 0;if(1===a)return 1;var c=f/4;1>h?h=1:c=f*Math.asin(1/h)/(2*Math.PI);return-(h*Math.pow(2,10*--a)*Math.sin(2*(a-c)*Math.PI/f))}},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=.1);void 0===f&&(f=.1);if(0===a)return 0;if(1===a)return 1;var c=f/4;1>h?h=1:c=f*Math.asin(1/h)/(2*
Math.PI);return h*Math.pow(2,-10*a)*Math.sin(2*(a-c)*Math.PI/f)+1}},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=.1);void 0===f&&(f=.1);if(0===a)return 0;if(1===a)return 1;var c=f/4;1>h?h=1:c=f*Math.asin(1/h)/(2*Math.PI);return 1>(a*=2)?-.5*h*Math.pow(2,10*--a)*Math.sin(2*(a-c)*Math.PI/f):h*Math.pow(2,-10*--a)*Math.sin(2*(a-c)*Math.PI/f)*.5+1}},function(p,u){p.exports=function(a){return Math.pow(2,10*(a-1))-.001}},function(p,u){p.exports=function(a){return 1-Math.pow(2,-10*a)}},function(p,
u){p.exports=function(a){return 1>(a*=2)?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))}},function(p,u){p.exports=function(a){return a}},function(p,u){p.exports=function(a){return a*a}},function(p,u){p.exports=function(a){return a*(2-a)}},function(p,u){p.exports=function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)}},function(p,u){p.exports=function(a){return a*a*a*a}},function(p,u){p.exports=function(a){return 1- --a*a*a*a}},function(p,u){p.exports=function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*
((a-=2)*a*a*a-2)}},function(p,u){p.exports=function(a){return a*a*a*a*a}},function(p,u){p.exports=function(a){return--a*a*a*a*a+1}},function(p,u){p.exports=function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)}},function(p,u){p.exports=function(a){return 0===a?0:1===a?1:1-Math.cos(a*Math.PI/2)}},function(p,u){p.exports=function(a){return 0===a?0:1===a?1:Math.sin(a*Math.PI/2)}},function(p,u){p.exports=function(a){return 0===a?0:1===a?1:.5*(1-Math.cos(Math.PI*a))}},function(p,u){p.exports=
function(a,h){void 0===h&&(h=1);return 0>=a?0:1<=a?1:1/h*((h*a|0)+1)}},function(p,u,a){var h=a(18);u=a(0);var f=a(37),c=a(3);a=new u({initialize:function(b){this.camera=b;this.isRunning=!1;this.duration=0;this.intensity=new c;this._offsetY=this._offsetX=this._elapsed=this.progress=0},start:function(b,d,g,e,l){void 0===b&&(b=100);void 0===d&&(d=.05);void 0===g&&(g=!1);void 0===e&&(e=null);void 0===l&&(l=this.camera.scene);if(!g&&this.isRunning)return this.camera;this.isRunning=!0;this.duration=b;this.progress=
0;"number"===typeof d?this.intensity.set(d):this.intensity.set(d.x,d.y);this._offsetY=this._offsetX=this._elapsed=0;this._onUpdate=e;this._onUpdateScope=l;this.camera.emit(f.SHAKE_START,this.camera,this,b,d);return this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(b,d){if(this.isRunning)if(this._elapsed+=d,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),
this._elapsed<this.duration){b=this.intensity;d=this.camera.width;var g=this.camera.height,e=this.camera.zoom;this._offsetX=(Math.random()*b.x*d*2-b.x*d)*e;this._offsetY=(Math.random()*b.y*g*2-b.y*g)*e;this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetY=this._offsetX=0;this._onUpdateScope=this._onUpdate=null;this.isRunning=!1;this.camera.emit(f.SHAKE_COMPLETE,this.camera,this)},
reset:function(){this.isRunning=!1;this._offsetY=this._offsetX=0;this._onUpdateScope=this._onUpdate=null},destroy:function(){this.reset();this.intensity=this.camera=null}});p.exports=a},function(p,u,a){var h=a(18);u=a(0);var f=a(37),c=a(134);a=new u({initialize:function(b){this.camera=b;this.isRunning=!1;this._elapsed=this.progress=this.destination=this.current=this.source=this.duration=0;this.clockwise=!0;this.shortestPath=!1},start:function(b,d,g,e,l,k,m){void 0===g&&(g=1E3);void 0===e&&(e=c.Linear);
void 0===l&&(l=!1);void 0===k&&(k=null);void 0===m&&(m=this.camera.scene);void 0===d&&(d=!1);this.shortestPath=d;d=b;0>b?(d=-1*b,this.clockwise=!1):this.clockwise=!0;var n=360*Math.PI/180;d-=Math.floor(d/n)*n;b=this.camera;if(!l&&this.isRunning)return b;this.isRunning=!0;this.duration=g;this.progress=0;this.source=b.rotation;this.destination=d;"string"===typeof e&&c.hasOwnProperty(e)?this.ease=c[e]:"function"===typeof e&&(this.ease=e);this._elapsed=0;this._onUpdate=k;this._onUpdateScope=m;this.shortestPath&&
(e=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+n)-this.source,l=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+n)-this.destination,e<l?this.clockwise=!0:e>l&&(this.clockwise=!1));this.camera.emit(f.ROTATE_START,this.camera,this,g,d);return b},update:function(b,d){if(this.isRunning)if(this._elapsed+=d,this.progress=b=h(this._elapsed/this.duration,0,1),d=this.camera,this._elapsed<this.duration){var g=this.ease(b);
this.current=d.rotation;var e=360*Math.PI/180;var l=this.destination,k=this.current;!1===this.clockwise&&(l=this.current,k=this.destination);e=l>=k?Math.abs(l-k):Math.abs(l+e)-k;g=this.clockwise?d.rotation+e*g:d.rotation-e*g;d.rotation=g;this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,b,g)}else d.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,d,b,this.destination),this.effectComplete()},effectComplete:function(){this._onUpdateScope=this._onUpdate=null;
this.isRunning=!1;this.camera.emit(f.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1;this._onUpdateScope=this._onUpdate=null},destroy:function(){this.reset();this.destination=this.source=this.camera=null}});p.exports=a},function(p,u,a){var h=a(18);u=a(0);var f=a(134),c=a(37);a=new u({initialize:function(b){this.camera=b;this.isRunning=!1;this.duration=0;this.destination=this.source=1;this._elapsed=this.progress=0},start:function(b,d,g,e,l,k){void 0===d&&(d=1E3);void 0===g&&(g=
f.Linear);void 0===e&&(e=!1);void 0===l&&(l=null);void 0===k&&(k=this.camera.scene);var m=this.camera;if(!e&&this.isRunning)return m;this.isRunning=!0;this.duration=d;this.progress=0;this.source=m.zoom;this.destination=b;"string"===typeof g&&f.hasOwnProperty(g)?this.ease=f[g]:"function"===typeof g&&(this.ease=g);this._elapsed=0;this._onUpdate=l;this._onUpdateScope=k;this.camera.emit(c.ZOOM_START,this.camera,this,d,b);return m},update:function(b,d){this.isRunning&&(this._elapsed+=d,this.progress=h(this._elapsed/
this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdateScope=this._onUpdate=null;this.isRunning=!1;this.camera.emit(c.ZOOM_COMPLETE,
this.camera,this)},reset:function(){this.isRunning=!1;this._onUpdateScope=this._onUpdate=null},destroy:function(){this.reset();this.camera=null}});p.exports=a},function(p,u,a){var h=a(326),f=a(0),c=a(2);u=a(24);var b=a(57),d=a(104),g=a(20);a=new f({initialize:function(e){this.scene=e;this.systems=e.sys;this.roundPixels=e.sys.game.config.roundPixels;this.cameras=[];e.sys.events.once(g.BOOT,this.boot,this);e.sys.events.on(g.START,this.start,this)},boot:function(){var e=this.systems;e.settings.cameras?
this.fromJSON(e.settings.cameras):this.add();this.main=this.cameras[0];this.default=(new h(0,0,e.scale.width,e.scale.height)).setScene(this.scene);e.game.scale.on(d.RESIZE,this.onResize,this);this.systems.events.once(g.DESTROY,this.destroy,this)},start:function(){if(!this.main){var e=this.systems;e.settings.cameras?this.fromJSON(e.settings.cameras):this.add();this.main=this.cameras[0]}e=this.systems.events;e.on(g.UPDATE,this.update,this);e.once(g.SHUTDOWN,this.shutdown,this)},add:function(e,l,k,m,
n,q){void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=this.scene.sys.scale.width);void 0===m&&(m=this.scene.sys.scale.height);void 0===n&&(n=!1);void 0===q&&(q="");e=new h(e,l,k,m);e.setName(q);e.setScene(this.scene);e.setRoundPixels(this.roundPixels);e.id=this.getNextID();this.cameras.push(e);n&&(this.main=e);return e},addExisting:function(e,l){void 0===l&&(l=!1);return-1===this.cameras.indexOf(e)?(e.id=this.getNextID(),e.setRoundPixels(this.roundPixels),this.cameras.push(e),l&&(this.main=e),e):
null},getNextID:function(){for(var e=this.cameras,l=1,k=0;32>k;k++){for(var m=!1,n=0;n<e.length;n++){var q=e[n];q&&q.id===l&&(m=!0)}if(m)l<<=1;else return l}return 0},getTotal:function(e){void 0===e&&(e=!1);for(var l=0,k=this.cameras,m=0;m<k.length;m++){var n=k[m];(!e||e&&n.visible)&&l++}return l},fromJSON:function(e){Array.isArray(e)||(e=[e]);for(var l=this.scene.sys.scale.width,k=this.scene.sys.scale.height,m=0;m<e.length;m++){var n=e[m],q=c(n,"x",0),r=c(n,"y",0),t=c(n,"width",l),w=c(n,"height",
k);q=this.add(q,r,t,w);q.name=c(n,"name","");q.zoom=c(n,"zoom",1);q.rotation=c(n,"rotation",0);q.scrollX=c(n,"scrollX",0);q.scrollY=c(n,"scrollY",0);q.roundPixels=c(n,"roundPixels",!1);q.visible=c(n,"visible",!0);(r=c(n,"backgroundColor",!1))&&q.setBackgroundColor(r);if(w=c(n,"bounds",null))n=c(w,"x",0),r=c(w,"y",0),t=c(w,"width",l),w=c(w,"height",k),q.setBounds(n,r,t,w)}return this},getCamera:function(e){for(var l=this.cameras,k=0;k<l.length;k++)if(l[k].name===e)return l[k];return null},getCamerasBelowPointer:function(e){var l=
this.cameras,k=e.x;e=e.y;for(var m=[],n=0;n<l.length;n++){var q=l[n];q.visible&&q.inputEnabled&&b(q,k,e)&&m.unshift(q)}return m},remove:function(e,l){void 0===l&&(l=!0);Array.isArray(e)||(e=[e]);for(var k=0,m=this.cameras,n=0;n<e.length;n++){var q=m.indexOf(e[n]);-1!==q&&(l?m[q].destroy():m[q].renderList=[],m.splice(q,1),k++)}!this.main&&m[0]&&(this.main=m[0]);return k},render:function(e,l){for(var k=this.scene,m=this.cameras,n=0;n<this.cameras.length;n++){var q=m[n];if(q.visible&&0<q.alpha){q.preRender();
var r=this.getVisibleChildren(l.getChildren(),q);e.render(k,r,q)}}},getVisibleChildren:function(e,l){for(var k=[],m=0;m<e.length;m++){var n=e[m];n.willRender(l)&&k.push(n)}return k},resetAll:function(){for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();this.cameras=[];return this.main=this.add()},update:function(e,l){for(var k=0;k<this.cameras.length;k++)this.cameras[k].update(e,l)},onResize:function(e,l,k,m,n){for(e=0;e<this.cameras.length;e++)k=this.cameras[e],0===k._x&&0===k._y&&k._width===
m&&k._height===n&&k.setSize(l.width,l.height)},resize:function(e,l){for(var k=0;k<this.cameras.length;k++)this.cameras[k].setSize(e,l)},shutdown:function(){this.main=void 0;for(var e=0;e<this.cameras.length;e++)this.cameras[e].destroy();this.cameras=[];e=this.systems.events;e.off(g.UPDATE,this.update,this);e.off(g.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.default.destroy();this.scene.sys.events.off(g.START,this.start,this);this.systems=this.scene=null}});u.register("CameraManager",
a,"cameras");p.exports=a},function(p,u){p.exports="enterfullscreen"},function(p,u){p.exports="fullscreenfailed"},function(p,u){p.exports="fullscreenunsupported"},function(p,u){p.exports="leavefullscreen"},function(p,u){p.exports="orientationchange"},function(p,u){p.exports="resize"},function(p,u,a){p.exports={Config:a(346),CreateRenderer:a(366),DebugHeader:a(384),Events:a(22),TimeStep:a(385),VisibilityHandler:a(387)}},function(p,u){function a(){throw Error("setTimeout has not been defined");}function h(){throw Error("clearTimeout has not been defined");
}function f(t){if(l===setTimeout)return setTimeout(t,0);if((l===a||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(w){try{return l.call(null,t,0)}catch(v){return l.call(this,t,0)}}}function c(t){if(k===clearTimeout)return clearTimeout(t);if((k===h||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(t);try{return k(t)}catch(w){try{return k.call(null,t)}catch(v){return k.call(this,t)}}}function b(){n&&q&&(n=!1,q.length?m=q.concat(m):r=-1,m.length&&d())}function d(){if(!n){var t=
f(b);n=!0;for(var w=m.length;w;){q=m;for(m=[];++r<w;)q&&q[r].run();r=-1;w=m.length}q=null;n=!1;c(t)}}function g(t,w){this.fun=t;this.array=w}function e(){}p=p.exports={};try{var l="function"===typeof setTimeout?setTimeout:a}catch(t){l=a}try{var k="function"===typeof clearTimeout?clearTimeout:h}catch(t){k=h}var m=[],n=!1,q,r=-1;p.nextTick=function(t){var w=Array(arguments.length-1);if(1<arguments.length)for(var v=1;v<arguments.length;v++)w[v-1]=arguments[v];m.push(new g(t,w));1!==m.length||n||f(d)};
g.prototype.run=function(){this.fun.apply(null,this.array)};p.title="browser";p.browser=!0;p.env={};p.argv=[];p.version="";p.versions={};p.on=e;p.addListener=e;p.once=e;p.off=e;p.removeListener=e;p.removeAllListeners=e;p.emit=e;p.prependListener=e;p.prependOnceListener=e;p.listeners=function(t){return[]};p.binding=function(t){throw Error("process.binding is not supported");};p.cwd=function(){return"/"};p.chdir=function(t){throw Error("process.chdir is not supported");};p.umask=function(){return 0}},
function(p,u,a){u=a(136);a={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};if("function"!==typeof importScripts){if("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)a.touch=!0;if(navigator.msPointerEnabled||navigator.pointerEnabled)a.mspointer=!0;navigator.getGamepads&&(a.gamepads=!0);"onwheel"in window||u.ie&&"WheelEvent"in window?a.wheelEvent="wheel":"onmousewheel"in window?a.wheelEvent="mousewheel":u.firefox&&"MouseScrollEvent"in window&&(a.wheelEvent=
"DOMMouseScroll")}p.exports=a},function(p,u,a){u=a(136);a={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};if("function"!==typeof importScripts){a.audioData=!!window.Audio;a.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var h=document.createElement("audio"),f=!!h.canPlayType;try{if(f){h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(a.ogg=!0);if(h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||h.canPlayType("audio/opus;").replace(/^no$/,
""))a.opus=!0;h.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(a.mp3=!0);h.canPlayType("audio/wav").replace(/^no$/,"")&&(a.wav=!0);if(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/aac;").replace(/^no$/,""))a.m4a=!0;h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(a.webm=!0);if(""!==h.canPlayType('audio/mp4;codecs="ec-3"'))if(u.edge)a.dolby=!0;else if(u.safari&&9<=u.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var c=parseInt(RegExp.$1,10),b=parseInt(RegExp.$2,
10);if(10===c&&11<=b||10<c)a.dolby=!0}}}catch(d){}}p.exports=a},function(p,u){u={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};if("function"!==typeof importScripts){var a=document.createElement("video"),h=!!a.canPlayType;try{h&&(a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(u.ogg=!0),a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(u.h264=!0,u.mp4=!0),a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(u.webm=!0),a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,
"")&&(u.vp9=!0),a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(u.hls=!0))}catch(f){}}p.exports=u},function(p,u){var a={available:!1,cancel:"",keyboard:!1,request:""};p.exports=function(){if("function"===typeof importScripts)return a;var h,f="requestFullscreen requestFullScreen webkitRequestFullscreen webkitRequestFullScreen msRequestFullscreen msRequestFullScreen mozRequestFullScreen mozRequestFullscreen".split(" ");for(h=0;h<f.length;h++)if(document.documentElement[f[h]]){a.available=
!0;a.request=f[h];break}f="cancelFullScreen exitFullscreen webkitCancelFullScreen webkitExitFullscreen msCancelFullScreen msExitFullscreen mozCancelFullScreen mozExitFullscreen".split(" ");if(a.available)for(h=0;h<f.length;h++)if(document[f[h]]){a.cancel=f[h];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(a.keyboard=!0);Object.defineProperty(a,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||
document.mozFullScreenElement||document.msFullscreenElement)}});return a}()},function(p,u,a){p.exports={Between:a(349),BetweenPoints:a(350),BetweenPointsY:a(813),BetweenY:a(814),CounterClockwise:a(815),Normalize:a(351),Random:a(816),RandomDegrees:a(817),Reverse:a(818),RotateTo:a(819),ShortestBetween:a(820),Wrap:a(269),WrapDegrees:a(270)}},function(p,u){p.exports=function(a,h){return Math.atan2(h.x-a.x,h.y-a.y)}},function(p,u){p.exports=function(a,h,f,c){return Math.atan2(f-a,c-h)}},function(p,u,a){var h=
a(14);p.exports=function(f){f>Math.PI&&(f-=h.PI2);return Math.abs(((f+h.TAU)%h.PI2-h.PI2)%h.PI2)}},function(p,u,a){var h=a(137);p.exports=function(){return h(-Math.PI,Math.PI)}},function(p,u,a){var h=a(137);p.exports=function(){return h(-180,180)}},function(p,u,a){var h=a(351);p.exports=function(f){return h(f+Math.PI)}},function(p,u,a){var h=a(14);p.exports=function(f,c,b){void 0===b&&(b=.05);if(f===c)return f;Math.abs(c-f)<=b||Math.abs(c-f)>=h.PI2-b?f=c:(Math.abs(c-f)>Math.PI&&(c=c<f?c+h.PI2:c-h.PI2),
c>f?f+=b:c<f&&(f-=b));return f}},function(p,u){p.exports=function(a,h){a=h-a;return 0===a?0:a-360*Math.floor((a- -180)/360)}},function(p,u,a){p.exports={Between:a(50),BetweenPoints:a(352),BetweenPointsSquared:a(822),Chebyshev:a(823),Power:a(824),Snake:a(825),Squared:a(353)}},function(p,u){p.exports=function(a,h){var f=a.x-h.x;a=a.y-h.y;return f*f+a*a}},function(p,u){p.exports=function(a,h,f,c){return Math.max(Math.abs(a-f),Math.abs(h-c))}},function(p,u){p.exports=function(a,h,f,c,b){void 0===b&&(b=
2);return Math.sqrt(Math.pow(f-a,b)+Math.pow(c-h,b))}},function(p,u){p.exports=function(a,h,f,c){return Math.abs(a-f)+Math.abs(h-c)}},function(p,u,a){p.exports={Back:a(334),Bounce:a(335),Circular:a(336),Cubic:a(337),Elastic:a(338),Expo:a(339),Linear:a(340),Quadratic:a(341),Quartic:a(342),Quintic:a(343),Sine:a(344),Stepped:a(345)}},function(p,u,a){p.exports={Ceil:a(828),Equal:a(124),Floor:a(829),GreaterThan:a(354),LessThan:a(355)}},function(p,u){p.exports=function(a,h){void 0===h&&(h=1E-4);return Math.ceil(a-
h)}},function(p,u){p.exports=function(a,h){void 0===h&&(h=1E-4);return Math.floor(a+h)}},function(p,u,a){p.exports={Bezier:a(831),CatmullRom:a(832),CubicBezier:a(358),Linear:a(833),QuadraticBezier:a(359),SmoothStep:a(360),SmootherStep:a(834)}},function(p,u,a){var h=a(356);p.exports=function(f,c){for(var b=0,d=f.length-1,g=0;g<=d;g++)b+=Math.pow(1-c,d-g)*Math.pow(c,g)*f[g]*h(d,g);return b}},function(p,u,a){var h=a(194);p.exports=function(f,c){var b=f.length-1,d=b*c,g=Math.floor(d);return f[0]===f[b]?
(0>c&&(g=Math.floor(d=b*(1+c))),h(d-g,f[(g-1+b)%b],f[g],f[(g+1)%b],f[(g+2)%b])):0>c?f[0]-(h(-d,f[0],f[0],f[1],f[1])-f[0]):1<c?f[b]-(h(d-b,f[b],f[b],f[b-1],f[b-1])-f[b]):h(d-g,f[g?g-1:0],f[g],f[b<g+1?b:g+1],f[b<g+2?b:g+2])}},function(p,u,a){var h=a(135);p.exports=function(f,c){var b=f.length-1,d=b*c,g=Math.floor(d);return 0>c?h(f[0],f[1],d):1<c?h(f[b],f[b-1],b-d):h(f[g],f[g+1>b?b:g+1],d-g)}},function(p,u,a){var h=a(183);p.exports=function(f,c,b){return c+(b-c)*h(f,0,1)}},function(p,u,a){p.exports=
{GetNext:a(361),IsSize:a(138),IsValue:a(836)}},function(p,u){p.exports=function(a){return 0<a&&0===(a&a-1)}},function(p,u,a){p.exports={Ceil:a(139),Floor:a(76),To:a(838)}},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=0);if(0===h)return a;a=h*Math.round((a-f)/h);return c?(f+a)/h:f+a}},function(p,u,a){u=new (a(0))({initialize:function(h){void 0===h&&(h=[(Date.now()*Math.random()).toString()]);this.c=1;this.n=this.s2=this.s1=this.s0=0;this.signs=[-1,1];h&&this.init(h)},rnd:function(){var h=
2091639*this.s0+2.3283064365386963E-10*this.c;this.c=h|0;this.s0=this.s1;this.s1=this.s2;return this.s2=h-this.c},hash:function(h){var f=this.n;h=h.toString();for(var c=0;c<h.length;c++){f+=h.charCodeAt(c);var b=.02519603282416938*f;f=b>>>0;b-=f;b*=f;f=b>>>0;b-=f;f+=4294967296*b}this.n=f;return 2.3283064365386963E-10*(f>>>0)},init:function(h){"string"===typeof h?this.state(h):this.sow(h)},sow:function(h){this.n=4022871197;this.s0=this.hash(" ");this.s1=this.hash(" ");this.s2=this.hash(" ");this.c=
1;if(h)for(var f=0;f<h.length&&null!=h[f];f++){var c=h[f];this.s0-=this.hash(c);this.s0+=~~(0>this.s0);this.s1-=this.hash(c);this.s1+=~~(0>this.s1);this.s2-=this.hash(c);this.s2+=~~(0>this.s2)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+1.1102230246251565E-16*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(h,f){return Math.floor(this.realInRange(0,f-h+1)+h)},between:function(h,f){return Math.floor(this.realInRange(0,
f-h+1)+h)},realInRange:function(h,f){return this.frac()*(f-h)+h},normal:function(){return 1-2*this.frac()},uuid:function(){var h,f;for(f=h="";36>h++;f+=~h%5|3*h&4?(h^15?8^this.frac()*(h^20?16:4):4).toString(16):"-");return f},pick:function(h){return h[this.integerInRange(0,h.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(h){return h[~~(Math.pow(this.frac(),2)*(h.length-1)+.5)]},timestamp:function(h,f){return this.realInRange(h||9466848E5,f||1577862E6)},angle:function(){return this.integerInRange(-180,
180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(h){"string"===typeof h&&h.match(/^!rnd/)&&(h=h.split(","),this.c=parseFloat(h[1]),this.s0=parseFloat(h[2]),this.s1=parseFloat(h[3]),this.s2=parseFloat(h[4]));return["!rnd",this.c,this.s0,this.s1,this.s2].join()},shuffle:function(h){for(var f=h.length-1;0<f;f--){var c=Math.floor(this.frac()*(f+1)),b=h[c];h[c]=h[f];h[f]=b}return h}});p.exports=u},function(p,u){p.exports=function(a){for(var h=0,f=0;f<a.length;f++)h+=
+a[f];return h/a.length}},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=0);void 0===f&&(f=10);h=Math.pow(f,-h);return Math.ceil(a*h)/h}},function(p,u){p.exports=function(a,h){return Math.abs(a-h)}},function(p,u,a){var h=a(18);u=a(0);var f=a(69),c=a(1),b=new f;a=new u({initialize:function m(g,e,l,k){void 0===g&&(g=0);void 0===e&&(e=0);void 0===l&&(l=0);void 0===k&&(k=m.DefaultOrder);this._x=g;this._y=e;this._z=l;this._order=k;this.onChangeCallback=c},x:{get:function(){return this._x},set:function(g){this._x=
g;this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(g){this._y=g;this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(g){this._z=g;this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(g){this._order=g;this.onChangeCallback(this)}},set:function(g,e,l,k){void 0===k&&(k=this._order);this._x=g;this._y=e;this._z=l;this._order=k;this.onChangeCallback(this);return this},copy:function(g){return this.set(g.x,g.y,g.z,g.order)},
setFromQuaternion:function(g,e,l){void 0===e&&(e=this._order);void 0===l&&(l=!1);b.fromQuat(g);return this.setFromRotationMatrix(b,e,l)},setFromRotationMatrix:function(g,e,l){void 0===e&&(e=this._order);void 0===l&&(l=!1);var k=g.val;g=k[0];var m=k[4],n=k[8],q=k[1],r=k[5],t=k[9],w=k[2],v=k[6];k=k[10];var x=0,y=0,A=0;switch(e){case "XYZ":y=Math.asin(h(n,-1,1));.99999>Math.abs(n)?(x=Math.atan2(-t,k),A=Math.atan2(-m,g)):x=Math.atan2(v,r);break;case "YXZ":x=Math.asin(-h(t,-1,1));.99999>Math.abs(t)?(y=
Math.atan2(n,k),A=Math.atan2(q,r)):y=Math.atan2(-w,g);break;case "ZXY":x=Math.asin(h(v,-1,1));.99999>Math.abs(v)?(y=Math.atan2(-w,k),A=Math.atan2(-m,r)):A=Math.atan2(q,g);break;case "ZYX":y=Math.asin(-h(w,-1,1));.99999>Math.abs(w)?(x=Math.atan2(v,k),A=Math.atan2(q,g)):A=Math.atan2(-m,r);break;case "YZX":A=Math.asin(h(q,-1,1));.99999>Math.abs(q)?(x=Math.atan2(-t,r),y=Math.atan2(-w,g)):y=Math.atan2(n,k);break;case "XZY":A=Math.asin(-h(m,-1,1)),.99999>Math.abs(m)?(x=Math.atan2(v,r),y=Math.atan2(n,g)):
x=Math.atan2(-t,k)}this._x=x;this._y=y;this._z=A;this._order=e;if(l)this.onChangeCallback(this);return this}});a.RotationOrders="XYZ YXZ ZXY ZYX YZX XZY".split(" ");a.DefaultOrder="XYZ";p.exports=a},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=0);void 0===f&&(f=10);h=Math.pow(f,-h);return Math.floor(a*h)/h}},function(p,u){p.exports=function(a,h){return a/h/1E3}},function(p,u){p.exports=function(a){return a==parseFloat(a)?!(a%2):void 0}},function(p,u){p.exports=function(a){return a===parseFloat(a)?
!(a%2):void 0}},function(p,u){p.exports=function(a,h,f){return Math.min(a+h,f)}},function(p,u){p.exports=function(a){var h=a.length;if(0===h)return 0;a.sort(function(c,b){return c-b});var f=Math.floor(h/2);return 0===h%2?(a[f]+a[f-1])/2:a[f]}},function(p,u){p.exports=function(a,h,f){return Math.max(a-h,f)}},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=h+1);h=(a-h)/(f-h);1<h?void 0!==c?(h=(c-a)/(c-f),0>h&&(h=0)):h=1:0>h&&(h=0);return h}},function(p,u){p.exports=function(a,h){void 0===h&&
(h=1);var f=2*Math.random()*Math.PI;a.x=Math.cos(f)*h;a.y=Math.sin(f)*h;return a}},function(p,u){p.exports=function(a,h){void 0===h&&(h=1);var f=2*Math.random()*Math.PI,c=2*Math.random()-1,b=Math.sqrt(1-c*c)*h;a.x=Math.cos(f)*b;a.y=Math.sin(f)*b;a.z=c*h;return a}},function(p,u){p.exports=function(a,h){void 0===h&&(h=1);a.x=(2*Math.random()-1)*h;a.y=(2*Math.random()-1)*h;a.z=(2*Math.random()-1)*h;a.w=(2*Math.random()-1)*h;return a}},function(p,u){p.exports=function(a,h,f,c,b){a.x=h+b*Math.cos(c);a.y=
f+b*Math.sin(c);return a}},function(p,u){p.exports=function(a,h,f){void 0===h&&(h=0);void 0===f&&(f=10);h=Math.pow(f,-h);return Math.round(a*h)/h}},function(p,u){p.exports=function(a,h,f,c){void 0===h&&(h=1);void 0===f&&(f=1);void 0===c&&(c=1);c*=Math.PI/a;for(var b=[],d=[],g=0;g<a;g++)f-=h*c,h+=f*c,b[g]=f,d[g]=h;return{sin:d,cos:b,length:a}}},function(p,u,a){var h=a(3);p.exports=function(f,c,b,d){void 0===d&&(d=new h);var g=0,e=0;0<f&&f<=c*b&&(f>c-1?(e=Math.floor(f/c),g=f-e*c):g=f);return d.set(g,
e)}},function(p,u){p.exports=function(a,h,f){return Math.abs(a-h)<=f}},function(p,u,a){u=a(39);var h=a(69);a=a(365);var f=new h,c=new a,b=new u;p.exports=function(d,g,e){c.setAxisAngle(g,e);f.fromRotationTranslation(c,b.set(0,0,0));return d.transformMat4(f)}},function(p,u){p.exports="addtexture"},function(p,u){p.exports="onerror"},function(p,u){p.exports="onload"},function(p,u){p.exports="ready"},function(p,u){p.exports="removetexture"},function(p,u){p.exports="#define SHADER_NAME PHASER_BITMAP_MASK_FS\n\nprecision mediump float;\n\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uMaskSampler;\nuniform bool uInvertMaskAlpha;\n\nvoid main ()\n{\n    vec2 uv = gl_FragCoord.xy / uResolution;\n    vec4 mainColor = texture2D(uMainSampler, uv);\n    vec4 maskColor = texture2D(uMaskSampler, uv);\n    float alpha = mainColor.a;\n\n    if (!uInvertMaskAlpha)\n    {\n        alpha *= (maskColor.a);\n    }\n    else\n    {\n        alpha *= (1.0 - maskColor.a);\n    }\n\n    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_BITMAP_MASK_VS\n\nprecision mediump float;\n\nattribute vec2 inPosition;\n\nvoid main ()\n{\n    gl_Position = vec4(inPosition, 0.0, 1.0);\n}\n"},function(p,u){p.exports="pipelineafterflush"},function(p,u){p.exports="pipelinebeforeflush"},function(p,u){p.exports="pipelinebind"},function(p,u){p.exports="pipelineboot"},function(p,u){p.exports="pipelinedestroy"},function(p,u){p.exports="pipelinerebind"},function(p,u){p.exports="pipelineresize"},function(p,
u){p.exports="#define SHADER_NAME PHASER_GRAPHICS_FS\n\nprecision mediump float;\n\nvarying vec4 outColor;\n\nvoid main ()\n{\n    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);\n}\n"},function(p,u){p.exports="#define SHADER_NAME PHASER_GRAPHICS_VS\n\nprecision mediump float;\n\nuniform mat4 uProjectionMatrix;\n\nattribute vec2 inPosition;\nattribute vec4 inColor;\n\nvarying vec4 outColor;\n\nvoid main ()\n{\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n\n    outColor = inColor;\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_LIGHT_FS\n\nprecision mediump float;\n\nstruct Light\n{\n    vec2 position;\n    vec3 color;\n    float intensity;\n    float radius;\n};\n\nconst int kMaxLights = %LIGHT_COUNT%;\n\nuniform vec4 uCamera; /* x, y, rotation, zoom */\nuniform vec2 uResolution;\nuniform sampler2D uMainSampler;\nuniform sampler2D uNormSampler;\nuniform vec3 uAmbientLightColor;\nuniform Light uLights[kMaxLights];\nuniform mat3 uInverseRotationMatrix;\n\nvarying vec2 outTexCoord;\nvarying vec4 outTint;\n\nvoid main()\n{\n    vec3 finalColor = vec3(0.0, 0.0, 0.0);\n    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);\n    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;\n    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));\n    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;\n\n    for (int index = 0; index < kMaxLights; ++index)\n    {\n        Light light = uLights[index];\n        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);\n        vec3 lightNormal = normalize(lightDir);\n        float distToSurf = length(lightDir) * uCamera.w;\n        float diffuseFactor = max(dot(normal, lightNormal), 0.0);\n        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;\n        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);\n        vec3 diffuse = light.color * diffuseFactor;\n        finalColor += (attenuation * diffuse) * light.intensity;\n    }\n\n    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);\n\n    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_MULTI_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler[%count%];\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying float outTintEffect;\nvarying vec4 outTint;\n\nvoid main ()\n{\n    vec4 texture;\n\n    %forloop%\n\n    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);\n\n    //  Multiply texture tint\n    vec4 color = texture * texel;\n\n    if (outTintEffect == 1.0)\n    {\n        //  Solid color + texture alpha\n        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);\n    }\n    else if (outTintEffect == 2.0)\n    {\n        //  Solid color, no texture\n        color = texel;\n    }\n\n    gl_FragColor = color;\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_MULTI_VS\n\nprecision mediump float;\n\nuniform mat4 uProjectionMatrix;\n\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nattribute float inTexId;\nattribute float inTintEffect;\nattribute vec4 inTint;\n\nvarying vec2 outTexCoord;\nvarying float outTexId;\nvarying float outTintEffect;\nvarying vec4 outTint;\n\nvoid main ()\n{\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n\n    outTexCoord = inTexCoord;\n    outTexId = inTexId;\n    outTint = inTint;\n    outTintEffect = inTintEffect;\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_POINTLIGHT_FS\n\nprecision mediump float;\n\nuniform vec2 uResolution;\nuniform float uCameraZoom;\n\nvarying vec4 lightPosition;\nvarying vec4 lightColor;\nvarying float lightRadius;\nvarying float lightAttenuation;\n\nvoid main ()\n{\n    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);\n\n    float distToSurf = length(center - gl_FragCoord.xy);\n\n    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);\n\n    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);\n\n    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;\n\n    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_POINTLIGHT_VS\n\nprecision mediump float;\n\nuniform mat4 uProjectionMatrix;\n\nattribute vec2 inPosition;\nattribute vec2 inLightPosition;\nattribute vec4 inLightColor;\nattribute float inLightRadius;\nattribute float inLightAttenuation;\n\nvarying vec4 lightPosition;\nvarying vec4 lightColor;\nvarying float lightRadius;\nvarying float lightAttenuation;\n\nvoid main ()\n{\n    lightColor = inLightColor;\n    lightRadius = inLightRadius;\n    lightAttenuation = inLightAttenuation;\n    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);\n\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_SINGLE_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler;\n\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\n\nvoid main ()\n{\n    vec4 texture = texture2D(uMainSampler, outTexCoord);\n    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);\n\n    //  Multiply texture tint\n    vec4 color = texture * texel;\n\n    if (outTintEffect == 1.0)\n    {\n        //  Solid color + texture alpha\n        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);\n    }\n    else if (outTintEffect == 2.0)\n    {\n        //  Solid color, no texture\n        color = texel;\n    }\n\n    gl_FragColor = color;\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_SINGLE_VS\n\nprecision mediump float;\n\nuniform mat4 uProjectionMatrix;\n\nattribute vec2 inPosition;\nattribute vec2 inTexCoord;\nattribute float inTexId;\nattribute float inTintEffect;\nattribute vec4 inTint;\n\nvarying vec2 outTexCoord;\nvarying float outTintEffect;\nvarying vec4 outTint;\n\nvoid main ()\n{\n    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);\n\n    outTexCoord = inTexCoord;\n    outTint = inTint;\n    outTintEffect = inTintEffect;\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_ADD_BLEND_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler1;\nuniform sampler2D uMainSampler2;\nuniform float uStrength;\n\nvarying vec2 outTexCoord;\n\nvoid main ()\n{\n    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);\n    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);\n\n    gl_FragColor = frame1 + frame2 * uStrength;\n}\n"},function(p,u){p.exports="#define SHADER_NAME PHASER_COLORMATRIX_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler;\nuniform float uColorMatrix[20];\nuniform float uAlpha;\n\nvarying vec2 outTexCoord;\n\nvoid main ()\n{\n    vec4 c = texture2D(uMainSampler, outTexCoord);\n\n    if (uAlpha == 0.0)\n    {\n        gl_FragColor = c;\n\n        return;\n    }\n\n    if (c.a > 0.0)\n    {\n        c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];\n    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];\n    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];\n    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"},
function(p,u){p.exports="#define SHADER_NAME PHASER_COPY_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler;\nuniform float uBrightness;\n\nvarying vec2 outTexCoord;\n\nvoid main ()\n{\n    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;\n}\n"},function(p,u){p.exports="#define SHADER_NAME PHASER_LINEAR_BLEND_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler1;\nuniform sampler2D uMainSampler2;\nuniform float uStrength;\n\nvarying vec2 outTexCoord;\n\nvoid main ()\n{\n    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);\n    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);\n\n    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);\n}\n"},
function(p,u,a){p.exports={GenerateTexture:a(388),Palettes:a(889)}},function(p,u,a){p.exports={ARNE16:a(389),C64:a(890),CGA:a(891),JMP:a(892),MSX:a(893)}},function(p,u){p.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(p,u){p.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",
A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(p,u){p.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(p,u){p.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(p,
u,a){p.exports={Path:a(895),MoveTo:a(393),CubicBezier:a(390),Curve:a(94),Ellipse:a(391),Line:a(392),QuadraticBezier:a(394),Spline:a(395)}},function(p,u,a){u=a(0);var h=a(390),f=a(391),c=a(5),b=a(392),d=a(393),g=a(394),e=a(10),l=a(395),k=a(3),m=a(14),n=new u({initialize:function(q,r){void 0===q&&(q=0);void 0===r&&(r=0);this.name="";this.curves=[];this.cacheLengths=[];this.autoClose=!1;this.startPoint=new k;this._tmpVec2A=new k;this._tmpVec2B=new k;"object"===typeof q?this.fromJSON(q):this.startPoint.set(q,
r)},add:function(q){this.curves.push(q);return this},circleTo:function(q,r,t){void 0===r&&(r=!1);return this.ellipseTo(q,q,0,360,r,t)},closePath:function(){var q=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);q.equals(r)||this.curves.push(new b(r,q));return this},cubicBezierTo:function(q,r,t,w,v,x){var y=this.getEndPoint();q instanceof k?(w=q,v=r,q=t):(w=new k(t,w),v=new k(v,x),q=new k(q,r));return this.add(new h(y,w,v,q))},quadraticBezierTo:function(q,r,t,w){var v=this.getEndPoint();
q instanceof k?(t=q,q=r):(t=new k(t,w),q=new k(q,r));return this.add(new g(v,t,q))},draw:function(q,r){for(var t=0;t<this.curves.length;t++){var w=this.curves[t];w.active&&w.draw(q,r)}return q},ellipseTo:function(q,r,t,w,v,x){q=new f(0,0,q,r,t,w,v,x);r=this.getEndPoint(this._tmpVec2A);t=q.getStartPoint(this._tmpVec2B);r.subtract(t);q.x=r.x;q.y=r.y;return this.add(q)},fromJSON:function(q){this.curves=[];this.cacheLengths=[];this.startPoint.set(q.x,q.y);this.autoClose=q.autoClose;for(var r=0;r<q.curves.length;r++){var t=
q.curves[r];switch(t.type){case "LineCurve":this.add(b.fromJSON(t));break;case "EllipseCurve":this.add(f.fromJSON(t));break;case "SplineCurve":this.add(l.fromJSON(t));break;case "CubicBezierCurve":this.add(h.fromJSON(t));break;case "QuadraticBezierCurve":this.add(g.fromJSON(t))}}return this},getBounds:function(q,r){void 0===q&&(q=new e);void 0===r&&(r=16);q.x=Number.MAX_VALUE;q.y=Number.MAX_VALUE;for(var t=new e,w=m.MIN_SAFE_INTEGER,v=m.MIN_SAFE_INTEGER,x=0;x<this.curves.length;x++){var y=this.curves[x];
y.active&&(y.getBounds(t,r),q.x=Math.min(q.x,t.x),q.y=Math.min(q.y,t.y),w=Math.max(w,t.right),v=Math.max(v,t.bottom))}q.right=w;q.bottom=v;return q},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var q=[],r=0,t=0;t<this.curves.length;t++)r+=this.curves[t].getLength(),q.push(r);return this.cacheLengths=q},getEndPoint:function(q){void 0===q&&(q=new k);0<this.curves.length?this.curves[this.curves.length-1].getPoint(1,q):q.copy(this.startPoint);
return q},getLength:function(){var q=this.getCurveLengths();return q[q.length-1]},getPoint:function(q,r){void 0===r&&(r=new k);var t=q*this.getLength(),w=this.getCurveLengths();for(q=0;q<w.length;){if(w[q]>=t)return t=w[q]-t,q=this.curves[q],w=q.getLength(),q.getPointAt(0===w?0:1-t/w,r);q++}return null},getPoints:function(q){void 0===q&&(q=12);for(var r=[],t,w=0;w<this.curves.length;w++){var v=this.curves[w];if(v.active){var x=v.getResolution(q);v=v.getPoints(x);for(x=0;x<v.length;x++){var y=v[x];
t&&t.equals(y)||(r.push(y),t=y)}}}this.autoClose&&1<r.length&&!r[r.length-1].equals(r[0])&&r.push(r[0]);return r},getRandomPoint:function(q){void 0===q&&(q=new k);return this.getPoint(Math.random(),q)},getSpacedPoints:function(q){void 0===q&&(q=40);for(var r=[],t=0;t<=q;t++)r.push(this.getPoint(t/q));this.autoClose&&r.push(r[0]);return r},getStartPoint:function(q){void 0===q&&(q=new k);return q.copy(this.startPoint)},getTangent:function(q,r){void 0===r&&(r=new k);var t=q*this.getLength(),w=this.getCurveLengths();
for(q=0;q<w.length;){if(w[q]>=t)return t=w[q]-t,q=this.curves[q],w=q.getLength(),q.getTangentAt(0===w?0:1-t/w,r);q++}return null},lineTo:function(q,r){q instanceof k?this._tmpVec2B.copy(q):this._tmpVec2B.set(q,r);q=this.getEndPoint(this._tmpVec2A);return this.add(new b([q.x,q.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(q){q.unshift(this.getEndPoint());return this.add(new l(q))},moveTo:function(q,r){return q instanceof k?this.add(new d(q.x,q.y)):this.add(new d(q,r))},toJSON:function(){for(var q=
[],r=0;r<this.curves.length;r++)q.push(this.curves[r].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:q}},updateArcLengths:function(){this.cacheLengths=[];this.getCurveLengths()},destroy:function(){this.curves.length=0;this.cacheLengths.length=0;this.startPoint=void 0}});c.register("path",function(q,r){return new n(q,r)});p.exports=n},function(p,u,a){p.exports={DataManager:a(101),DataManagerPlugin:a(897),Events:a(315)}},function(p,u,a){var h=a(0),
f=a(101);u=a(24);var c=a(20);a=new h({Extends:f,initialize:function(b){f.call(this,b,b.sys.events);this.scene=b;this.systems=b.sys;b.sys.events.once(c.BOOT,this.boot,this);b.sys.events.on(c.START,this.start,this)},boot:function(){this.events=this.systems.events;this.events.once(c.DESTROY,this.destroy,this)},start:function(){this.events.once(c.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){f.prototype.destroy.call(this);
this.events.off(c.START,this.start,this);this.systems=this.scene=null}});u.register("DataManagerPlugin",a,"data");p.exports=a},function(p,u,a){p.exports={Align:a(899),BaseShader:a(396),Bounds:a(902),Canvas:a(906),Color:a(397),ColorMatrix:a(198),Masks:a(916),RGB:a(200)}},function(p,u,a){u=a(123);var h=a(17);a={In:a(900),To:a(901)};a=h(!1,a,u);p.exports=a},function(p,u,a){p.exports={BottomCenter:a(290),BottomLeft:a(291),BottomRight:a(292),Center:a(293),LeftCenter:a(295),QuickSet:a(289),RightCenter:a(296),
TopCenter:a(297),TopLeft:a(298),TopRight:a(299)}},function(p,u,a){p.exports={BottomCenter:a(277),BottomLeft:a(278),BottomRight:a(279),LeftBottom:a(280),LeftCenter:a(281),LeftTop:a(282),QuickSet:a(276),RightBottom:a(283),RightCenter:a(284),RightTop:a(285),TopCenter:a(286),TopLeft:a(287),TopRight:a(288)}},function(p,u,a){p.exports={CenterOn:a(294),GetBottom:a(42),GetBounds:a(903),GetCenterX:a(87),GetCenterY:a(89),GetLeft:a(43),GetOffsetX:a(904),GetOffsetY:a(905),GetRight:a(44),GetTop:a(45),SetBottom:a(55),
SetCenterX:a(88),SetCenterY:a(90),SetLeft:a(53),SetRight:a(54),SetTop:a(52)}},function(p,u,a){var h=a(42),f=a(43),c=a(44),b=a(45);p.exports=function(d,g){void 0===g&&(g={});var e=f(d),l=b(d);g.x=e;g.y=l;g.width=c(d)-e;g.height=h(d)-l;return g}},function(p,u){p.exports=function(a){return a.width*a.originX}},function(p,u){p.exports=function(a){return a.height*a.originY}},function(p,u,a){p.exports={CanvasInterpolation:a(367),CanvasPool:a(31),Smoothing:a(192),TouchAction:a(907),UserSelect:a(908)}},function(p,
u){p.exports=function(a,h){void 0===h&&(h="none");a.style.msTouchAction=h;a.style["ms-touch-action"]=h;a.style["touch-action"]=h;return a}},function(p,u){p.exports=function(a,h){void 0===h&&(h="none");["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(f){a.style[f+"user-select"]=h});a.style["-webkit-touch-callout"]=h;a.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)";return a}},function(p,u,a){var h=a(103);p.exports=function(f){void 0===f&&(f=1024);var c=[],b,d=255,g,e=0;for(b=0;255>=
b;b++)c.push({r:d,g:b,b:e,color:h(d,b,e)});for(b=g=255;0<=b;b--)c.push({r:b,g:g,b:e,color:h(b,g,e)});for(b=d=0;255>=b;b++,g--)c.push({r:d,g:g,b:b,color:h(d,g,b)});g=0;e=255;for(b=0;255>=b;b++,e--,d++)c.push({r:d,g:g,b:e,color:h(d,g,e)});if(1024===f)return c;d=[];g=0;e=1024/f;for(b=0;b<f;b++)d.push(c[Math.floor(g)]),g+=e;return d}},function(p,u){p.exports=function(a){var h={r:a>>16&255,g:a>>8&255,b:a&255,a:255};16777215<a&&(h.a=a>>>24);return h}},function(p,u,a){var h=a(38),f=a(399);p.exports=function(c,
b,d){var g=d,e=d,l=d;0!==b&&(b=.5>d?d*(1+b):d+b-d*b,d=2*d-b,g=f(d,b,c+1/3),e=f(d,b,c),l=f(d,b,c-1/3));return(new h).setGLTo(g,e,l,1)}},function(p,u,a){var h=a(188);p.exports=function(f,c){void 0===f&&(f=1);void 0===c&&(c=1);for(var b=[],d=0;359>=d;d++)b.push(h(d/359,f,c));return b}},function(p,u,a){var h=a(135),f=function(c,b,d,g,e,l,k,m){void 0===k&&(k=100);void 0===m&&(m=0);k=m/k;return{r:h(c,g,k),g:h(b,e,k),b:h(d,l,k)}};p.exports={RGBWithRGB:f,ColorWithRGB:function(c,b,d,g,e,l){void 0===e&&(e=
100);void 0===l&&(l=0);return f(c.r,c.g,c.b,b,d,g,e,l)},ColorWithColor:function(c,b,d,g){void 0===d&&(d=100);void 0===g&&(g=0);return f(c.r,c.g,c.b,b.r,b.g,b.b,d,g)}}},function(p,u,a){var h=a(195),f=a(38);p.exports=function(c,b){void 0===c&&(c=0);void 0===b&&(b=255);return new f(h(c,b),h(c,b),h(c,b))}},function(p,u,a){var h=a(398);p.exports=function(f,c,b,d,g){void 0===d&&(d=255);void 0===g&&(g="#");return"#"===g?"#"+(16777216+(f<<16)+(c<<8)+b).toString(16).slice(1,7):"0x"+h(d)+h(f)+h(c)+h(b)}},function(p,
u,a){p.exports={BitmapMask:a(310),GeometryMask:a(311)}},function(p,u,a){u={AddToDOM:a(142),DOMContentLoaded:a(400),GetInnerHeight:a(401),GetScreenOrientation:a(402),GetTarget:a(407),ParseXML:a(408),RemoveFromDOM:a(202),RequestAnimationFrame:a(386)};p.exports=u},function(p,u,a){p.exports={EventEmitter:a(919)}},function(p,u,a){u=a(0);var h=a(9);a=a(24);u=new u({Extends:h,initialize:function(){h.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});
a.register("EventEmitter",u,"events");p.exports=u},function(p,u,a){var h=a(142),f=a(321),c=a(325),b=a(31);u=a(0);var d=a(346),g=a(921),e=a(366),l=a(101),k=a(384),m=a(347),n=a(400),q=a(9),r=a(22),t=a(409),w=a(24),v=a(414),x=a(415),y=a(417),A=a(106),B=a(422),z=a(385),C=a(387),E=a(426);a=new u({initialize:function(G){this.config=new d(G);this.context=this.canvas=this.domContainer=this.renderer=null;this.isRunning=this.isBooted=!1;this.events=new q;this.anims=new f(this);this.textures=new B(this);this.cache=
new c(this);this.registry=new l(this);this.input=new t(this,this.config);this.scene=new y(this,this.config.sceneConfig);this.device=m;this.scale=new x(this,this.config);this.sound=null;this.sound=E.create(this);this.loop=new z(this,this.config.fps);this.plugins=new v(this,this.config);this.hasFocus=this.noReturn=this.removeCanvas=this.pendingDestroy=!1;n(this.boot.bind(this))},boot:function(){w.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),e(this),g(this),
k(this),h(this.canvas,this.config.parent),this.textures.once(A.READY,this.texturesReady,this),this.events.emit(r.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(r.READY);this.start()},start:function(){this.isRunning=!0;this.config.postBoot(this);this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this));C(this);var G=this.events;G.on(r.HIDDEN,this.onHidden,this);G.on(r.VISIBLE,this.onVisible,this);G.on(r.BLUR,
this.onBlur,this);G.on(r.FOCUS,this.onFocus,this)},step:function(G,H){if(this.pendingDestroy)return this.runDestroy();var I=this.events;I.emit(r.PRE_STEP,G,H);I.emit(r.STEP,G,H);this.scene.update(G,H);I.emit(r.POST_STEP,G,H);var K=this.renderer;K.preRender();I.emit(r.PRE_RENDER,K,G,H);this.scene.render(K);K.postRender();I.emit(r.POST_RENDER,K,G,H)},headlessStep:function(G,H){if(this.pendingDestroy)return this.runDestroy();var I=this.events;I.emit(r.PRE_STEP,G,H);I.emit(r.STEP,G,H);this.scene.update(G,
H);I.emit(r.POST_STEP,G,H);I.emit(r.PRE_RENDER);I.emit(r.POST_RENDER)},onHidden:function(){this.loop.pause();this.events.emit(r.PAUSE)},onVisible:function(){this.loop.resume();this.events.emit(r.RESUME)},onBlur:function(){this.hasFocus=!1;this.loop.blur()},onFocus:function(){this.hasFocus=!0;this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(G,H){void 0===H&&(H=!1);this.pendingDestroy=!0;this.removeCanvas=G;this.noReturn=H},runDestroy:function(){this.scene.destroy();
this.events.emit(r.DESTROY);this.events.removeAllListeners();this.renderer&&this.renderer.destroy();this.removeCanvas&&this.canvas&&(b.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas));this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer);this.loop.destroy();this.pendingDestroy=!1}});p.exports=a},function(p,u,a){var h=a(142);p.exports=function(f){var c=f.config;if(c.parent&&c.domCreateContainer){var b=document.createElement("div");
b.style.cssText=["display: block;","width: "+f.scale.width+"px;","height: "+f.scale.height+"px;","padding: 0; margin: 0; position: absolute; overflow: hidden;","pointer-events: "+c.domPointerEvents+";","transform: scale(1); transform-origin: left top;"].join(" ");f.domContainer=b;h(b,c.parent)}}},function(p,u){p.exports="boot"},function(p,u){p.exports="destroy"},function(p,u){p.exports="dragend"},function(p,u){p.exports="dragenter"},function(p,u){p.exports="drag"},function(p,u){p.exports="dragleave"},
function(p,u){p.exports="dragover"},function(p,u){p.exports="dragstart"},function(p,u){p.exports="drop"},function(p,u){p.exports="gameout"},function(p,u){p.exports="gameover"},function(p,u){p.exports="gameobjectdown"},function(p,u){p.exports="dragend"},function(p,u){p.exports="dragenter"},function(p,u){p.exports="drag"},function(p,u){p.exports="dragleave"},function(p,u){p.exports="dragover"},function(p,u){p.exports="dragstart"},function(p,u){p.exports="drop"},function(p,u){p.exports="gameobjectmove"},
function(p,u){p.exports="gameobjectout"},function(p,u){p.exports="gameobjectover"},function(p,u){p.exports="pointerdown"},function(p,u){p.exports="pointermove"},function(p,u){p.exports="pointerout"},function(p,u){p.exports="pointerover"},function(p,u){p.exports="pointerup"},function(p,u){p.exports="wheel"},function(p,u){p.exports="gameobjectup"},function(p,u){p.exports="gameobjectwheel"},function(p,u){p.exports="boot"},function(p,u){p.exports="process"},function(p,u){p.exports="update"},function(p,
u){p.exports="pointerdown"},function(p,u){p.exports="pointerdownoutside"},function(p,u){p.exports="pointermove"},function(p,u){p.exports="pointerout"},function(p,u){p.exports="pointerover"},function(p,u){p.exports="pointerup"},function(p,u){p.exports="pointerupoutside"},function(p,u){p.exports="wheel"},function(p,u){p.exports="pointerlockchange"},function(p,u){p.exports="preupdate"},function(p,u){p.exports="shutdown"},function(p,u){p.exports="start"},function(p,u){p.exports="update"},function(p,u){p.exports=
"addfile"},function(p,u){p.exports="complete"},function(p,u){p.exports="filecomplete"},function(p,u){p.exports="filecomplete-"},function(p,u){p.exports="loaderror"},function(p,u){p.exports="load"},function(p,u){p.exports="fileprogress"},function(p,u){p.exports="postprocess"},function(p,u){p.exports="progress"},function(p,u){p.exports="start"},function(p,u,a){p.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",
events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(p,u){p.exports=function(a,h,f){if(f.getElementsByTagName("TextureAtlas")){var c=a.source[h];a.add("__BASE",h,0,0,c.width,c.height);f=f.getElementsByTagName("SubTexture");for(c=0;c<f.length;c++){var b=f[c].attributes;var d=b.name.value;var g=
parseInt(b.x.value,10),e=parseInt(b.y.value,10),l=parseInt(b.width.value,10),k=parseInt(b.height.value,10);d=a.add(d,h,g,e,l,k);if(b.frameX){g=Math.abs(parseInt(b.frameX.value,10));e=Math.abs(parseInt(b.frameY.value,10));var m=parseInt(b.frameWidth.value,10);b=parseInt(b.frameHeight.value,10);d.setTrim(l,k,g,e,m,b)}}return a}console.warn("Invalid Texture Atlas XML given")}},function(p,u){p.exports=function(a,h){var f=a.source[h];a.add("__BASE",h,0,0,f.width,f.height);return a}},function(p,u){p.exports=
function(a,h){var f=a.source[h];a.add("__BASE",h,0,0,f.width,f.height);return a}},function(p,u,a){var h=a(77);p.exports=function(f,c,b){if(b.frames||b.textures){var d=f.source[c];f.add("__BASE",c,0,0,d.width,d.height);d=Array.isArray(b.textures)?b.textures[c].frames:b.frames;for(var g,e=0;e<d.length;e++){var l=d[e];g=f.add(l.filename,c,l.frame.x,l.frame.y,l.frame.w,l.frame.h);l.trimmed&&g.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h);
l.rotated&&(g.rotated=!0,g.updateUVsInverted());var k=l.anchor||l.pivot;k&&(g.customPivot=!0,g.pivotX=k.x,g.pivotY=k.y);g.customData=h(l)}for(var m in b)"frames"!==m&&(Array.isArray(b[m])?f.customData[m]=b[m].slice(0):f.customData[m]=b[m]);return f}console.warn("Invalid Texture Atlas JSON Array")}},function(p,u,a){var h=a(77);p.exports=function(f,c,b){if(b.frames){var d=f.source[c];f.add("__BASE",c,0,0,d.width,d.height);d=b.frames;var g;for(g in d)if(d.hasOwnProperty(g)){var e=d[g];var l=f.add(g,
c,e.frame.x,e.frame.y,e.frame.w,e.frame.h);e.trimmed&&l.setTrim(e.sourceSize.w,e.sourceSize.h,e.spriteSourceSize.x,e.spriteSourceSize.y,e.spriteSourceSize.w,e.spriteSourceSize.h);e.rotated&&(l.rotated=!0,l.updateUVsInverted());var k=e.anchor||e.pivot;k&&(l.customPivot=!0,l.pivotX=k.x,l.pivotY=k.y);l.customData=h(e)}for(var m in b)"frames"!==m&&(Array.isArray(b[m])?f.customData[m]=b[m].slice(0):f.customData[m]=b[m]);return f}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},
function(p,u,a){var h=a(2);p.exports=function(f,c,b,d,g,e,l){var k=h(l,"frameWidth",null),m=h(l,"frameHeight",k);if(null===k)throw Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var n=f.source[c];f.add("__BASE",c,0,0,n.width,n.height);var q=h(l,"startFrame",0),r=h(l,"endFrame",-1);n=h(l,"margin",0);l=h(l,"spacing",0);var t=Math.floor((g-n+l)/(k+l))*Math.floor((e-n+l)/(m+l));0===t&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",f.key);if(q>t||q<
-t)q=0;0>q&&(q=t+q);-1!==r&&(t=q+(r+1));r=q=n;for(var w,v,x=0;x<t;x++){v=w=0;var y=q+k,A=r+m;y>g&&(w=y-g);A>e&&(v=A-e);f.add(x,c,b+q,d+r,k-w,m-v);q+=k+l;q+k>g&&(q=n,r+=m+l)}return f}},function(p,u,a){var h=a(2);p.exports=function(f,c,b){var d=h(b,"frameWidth",null),g=h(b,"frameHeight",d);if(!d)throw Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var e=f.source[0];f.add("__BASE",0,0,0,e.width,e.height);h(b,"startFrame",0);h(b,"endFrame",-1);e=h(b,"margin",0);b=h(b,"spacing",
0);var l=c.cutX,k=c.cutY,m=c.realWidth,n=c.realHeight,q=Math.floor((m-e+b)/(d+b)),r=Math.floor((n-e+b)/(g+b)),t=c.x,w=d-t;m=d-(m-c.cutWidth-t);var v=c.y,x=g-v;n=g-(n-c.cutHeight-v);for(var y=e,A=e,B=0,z=c.sourceIndex,C=0;C<r;C++){for(var E=0===C,G=C===r-1,H=0;H<q;H++){var I=0===H,K=H===q-1;c=f.add(B,z,l+y,k+A,d,g);if(I||E||K||G){var O=I?t:0,R=E?v:0,F=0,J=0;I&&(F+=d-w);K&&(F+=d-m);E&&(J+=g-x);G&&(J+=g-n);F=d-F;J=g-J;c.cutWidth=F;c.cutHeight=J;c.setTrim(d,g,O,R,F,J)}y+=b;y=I?y+w:K?y+m:y+d;B++}y=e;A+=
b;A=E?A+x:G?A+n:A+g}return f}},function(p,u){var a=0;p.exports=function(h,f,c){var b=h.source[f];h.add("__BASE",f,0,0,b.width,b.height);a=b.height;c=c.split("\n");b=/^[ ]*(- )*(\w+)+[: ]+(.*)/;for(var d="",g="",e={x:0,y:0,width:0,height:0},l=0;l<c.length;l++){var k=c[l].match(b);if(k){var m=k[2],n=k[3];"- "===k[1]&&(g!==d&&(h.add(g,f,e.x,a-e.y-e.height,e.width,e.height),d=g),e={x:0,y:0,width:0,height:0});if("name"===m)g=n;else switch(m){case "x":case "y":case "width":case "height":e[m]=parseInt(n,
10)}}}g!==d&&h.add(g,f,e.x,a-e.y-e.height,e.width,e.height);return h}},function(p,u){p.exports="complete"},function(p,u){p.exports="decoded"},function(p,u){p.exports="decodedall"},function(p,u){p.exports="destroy"},function(p,u){p.exports="detune"},function(p,u){p.exports="detune"},function(p,u){p.exports="mute"},function(p,u){p.exports="rate"},function(p,u){p.exports="volume"},function(p,u){p.exports="loop"},function(p,u){p.exports="looped"},function(p,u){p.exports="mute"},function(p,u){p.exports=
"pan"},function(p,u){p.exports="pauseall"},function(p,u){p.exports="pause"},function(p,u){p.exports="play"},function(p,u){p.exports="rate"},function(p,u){p.exports="resumeall"},function(p,u){p.exports="resume"},function(p,u){p.exports="seek"},function(p,u){p.exports="stopall"},function(p,u){p.exports="stop"},function(p,u){p.exports="unlocked"},function(p,u){p.exports="volume"},function(p,u,a){u={Events:a(75),DisplayList:a(1012),GameObjectCreator:a(16),GameObjectFactory:a(5),UpdateList:a(1040),Components:a(11),
GetCalcMatrix:a(19),BuildGameObject:a(28),BuildGameObjectAnimation:a(439),GameObject:a(15),BitmapText:a(148),Blitter:a(213),Bob:a(440),Container:a(214),DOMElement:a(442),DynamicBitmapText:a(215),Extern:a(444),Graphics:a(216),Group:a(113),Image:a(125),Layer:a(219),Particles:a(1074),PathFollower:a(457),RenderTexture:a(221),RetroFont:a(1082),Rope:a(223),Sprite:a(73),Text:a(224),GetTextSize:a(458),MeasureText:a(460),TextStyle:a(459),TileSprite:a(225),Zone:a(129),Video:a(226),Shape:a(34),Arc:a(461),Curve:a(462),
Ellipse:a(463),Grid:a(464),IsoBox:a(465),IsoTriangle:a(466),Line:a(467),Polygon:a(468),Rectangle:a(473),Star:a(474),Triangle:a(475),Factories:{Blitter:a(1130),Container:a(1131),DOMElement:a(1132),DynamicBitmapText:a(1133),Extern:a(1134),Graphics:a(1135),Group:a(1136),Image:a(1137),Layer:a(1138),Particles:a(1139),PathFollower:a(1140),RenderTexture:a(1141),Rope:a(1142),Sprite:a(1143),StaticBitmapText:a(1144),Text:a(1145),TileSprite:a(1146),Zone:a(1147),Video:a(1148),Arc:a(1149),Curve:a(1150),Ellipse:a(1151),
Grid:a(1152),IsoBox:a(1153),IsoTriangle:a(1154),Line:a(1155),Polygon:a(1156),Rectangle:a(1157),Star:a(1158),Triangle:a(1159)},Creators:{Blitter:a(1160),Container:a(1161),DynamicBitmapText:a(1162),Graphics:a(1163),Group:a(1164),Image:a(1165),Layer:a(1166),Particles:a(1167),RenderTexture:a(1168),Rope:a(1169),Sprite:a(1170),StaticBitmapText:a(1171),Text:a(1172),TileSprite:a(1173),Zone:a(1174),Video:a(1175)}};u.Shader=a(229);u.Mesh=a(230);u.PointLight=a(150);u.Factories.Shader=a(1184);u.Factories.Mesh=
a(1185);u.Factories.PointLight=a(1186);u.Creators.Shader=a(1187);u.Creators.Mesh=a(1188);u.Creators.PointLight=a(1189);u.Light=a(481);u.LightsManager=a(482);u.LightsPlugin=a(1190);p.exports=u},function(p,u,a){var h=a(0),f=a(110);u=a(24);var c=a(75),b=a(20),d=a(79);a=new h({Extends:f,initialize:function(g){f.call(this,g);this.sortChildrenFlag=!1;this.scene=g;this.systems=g.sys;this.events=g.sys.events;this.addCallback=this.addChildCallback;this.removeCallback=this.removeChildCallback;this.events.once(b.BOOT,
this.boot,this);this.events.on(b.START,this.start,this)},boot:function(){this.events.once(b.DESTROY,this.destroy,this)},addChildCallback:function(g){g.displayList&&g.displayList!==this&&g.removeFromDisplayList();g.displayList||(this.queueDepthSort(),g.displayList=this,g.emit(c.ADDED_TO_SCENE,g,this.scene),this.events.emit(b.ADDED_TO_SCENE,g,this.scene))},removeChildCallback:function(g){this.queueDepthSort();g.displayList=null;g.emit(c.REMOVED_FROM_SCENE,g,this.scene);this.events.emit(b.REMOVED_FROM_SCENE,
g,this.scene)},start:function(){this.events.once(b.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(d(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(g,e){return g._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var g=this.list,e=g.length;e--;)g[e].destroy(!0);g.length=0;this.events.off(b.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.events.off(b.START,
this.start,this);this.events=this.systems=this.scene=null}});u.register("DisplayList",a,"displayList");p.exports=a},function(p,u,a){p.exports={CheckMatrix:a(209),MatrixToString:a(1014),ReverseColumns:a(1015),ReverseRows:a(1016),Rotate180:a(1017),RotateLeft:a(1018),RotateMatrix:a(147),RotateRight:a(1019),Translate:a(1020),TransposeMatrix:a(435)}},function(p,u,a){var h=a(186),f=a(209);p.exports=function(c){var b="";if(!f(c))return b;for(var d=0;d<c.length;d++){for(var g=0;g<c[d].length;g++){var e=c[d][g].toString();
b="undefined"!==e?b+h(e,2):b+"?";g<c[d].length-1&&(b+=" |")}if(d<c.length-1){b+="\n";for(g=0;g<c[d].length;g++)b+="---",g<c[d].length-1&&(b+="+");b+="\n"}}return b}},function(p,u){p.exports=function(a){return a.reverse()}},function(p,u){p.exports=function(a){for(var h=0;h<a.length;h++)a[h].reverse();return a}},function(p,u,a){var h=a(147);p.exports=function(f){return h(f,180)}},function(p,u,a){var h=a(147);p.exports=function(f){return h(f,90)}},function(p,u,a){var h=a(147);p.exports=function(f){return h(f,
-90)}},function(p,u,a){var h=a(178),f=a(179);p.exports=function(c,b,d){void 0===b&&(b=0);void 0===d&&(d=0);0!==d&&(0>d?h(c,Math.abs(d)):f(c,d));if(0!==b)for(d=0;d<c.length;d++){var g=c[d];0>b?h(g,Math.abs(b)):f(g,b)}return c}},function(p,u){p.exports=function(a,h,f,c,b){void 0===b&&(b=a);if(0<f){var d=f-a.length;if(0>=d)return null}if(!Array.isArray(h))return-1===a.indexOf(h)?(a.push(h),c&&c.call(b,h),h):null;for(var g=h.length-1;0<=g;)-1!==a.indexOf(h[g])&&h.splice(g,1),g--;g=h.length;if(0===g)return null;
0<f&&g>d&&(h.splice(d),g=d);for(f=0;f<g;f++)d=h[f],a.push(d),c&&c.call(b,d);return h}},function(p,u){p.exports=function(a,h,f,c,b,d){void 0===f&&(f=0);void 0===d&&(d=a);if(0<c){var g=c-a.length;if(0>=g)return null}if(!Array.isArray(h))return-1===a.indexOf(h)?(a.splice(f,0,h),b&&b.call(d,h),h):null;for(var e=h.length-1;0<=e;)-1!==a.indexOf(h[e])&&h.pop(),e--;e=h.length;if(0===e)return null;0<c&&e>g&&(h.splice(g),e=g);for(c=e-1;0<=c;c--)g=h[c],a.splice(f,0,g),b&&b.call(d,g);return h}},function(p,u){p.exports=
function(a,h){var f=a.indexOf(h);-1!==f&&f<a.length&&(a.splice(f,1),a.push(h));return h}},function(p,u,a){var h=a(78);p.exports=function(f,c,b,d,g){void 0===d&&(d=0);void 0===g&&(g=f.length);var e=0;if(h(f,d,g))for(;d<g;d++)f[d][c]===b&&e++;return e}},function(p,u){p.exports=function(a,h,f){var c,b=[null];for(c=3;c<arguments.length;c++)b.push(arguments[c]);for(c=0;c<a.length;c++)b[0]=a[c],h.apply(f,b);return a}},function(p,u,a){var h=a(78);p.exports=function(f,c,b,d,g){void 0===d&&(d=0);void 0===
g&&(g=f.length);if(h(f,d,g)){var e,l=[null];for(e=5;e<arguments.length;e++)l.push(arguments[e]);for(e=d;e<g;e++)l[0]=f[e],c.apply(b,l)}return f}},function(p,u){p.exports=function(a,h){var f=a.indexOf(h);if(0<f){var c=a[f-1],b=a.indexOf(c);a[f]=c;a[b]=h}return a}},function(p,u){p.exports=function(a,h,f){var c=a.indexOf(h);if(-1===c||0>f||f>=a.length)throw Error("Supplied index out of bounds");c!==f&&(a.splice(c,1),a.splice(f,0,h));return h}},function(p,u){p.exports=function(a,h){var f=a.indexOf(h);
if(-1!==f&&f<a.length-1){var c=a[f+1],b=a.indexOf(c);a[f]=c;a[b]=h}return a}},function(p,u){p.exports=function(a,h,f){if(h===f)return a;var c=a.indexOf(h);f=a.indexOf(f);if(0>c||0>f)throw Error("Supplied items must be elements of the same array");if(c>f)return a;a.splice(c,1);f===a.length-1?a.push(h):a.splice(f,0,h);return a}},function(p,u){p.exports=function(a,h,f){if(h===f)return a;var c=a.indexOf(h);f=a.indexOf(f);if(0>c||0>f)throw Error("Supplied items must be elements of the same array");if(c<
f)return a;a.splice(c,1);0===f?a.unshift(h):a.splice(f,0,h);return a}},function(p,u,a){var h=a(363);p.exports=function(f,c,b){void 0===f&&(f=0);void 0===c&&(c=null);void 0===b&&(b=1);null===c&&(c=f,f=0);var d=[];c=Math.max(h((c-f)/(b||1)),0);for(var g=0;g<c;g++)d.push(f),f+=b;return d}},function(p,u,a){var h=a(74);p.exports=function(f,c,b,d){void 0===d&&(d=f);if(0>c||c>f.length-1)throw Error("Index out of bounds");f=h(f,c);b&&b.call(d,f);return f}},function(p,u,a){var h=a(78);p.exports=function(f,
c,b,d,g){void 0===c&&(c=0);void 0===b&&(b=f.length);void 0===g&&(g=f);if(h(f,c,b)){f=f.splice(c,b-c);if(d)for(c=0;c<f.length;c++)d.call(g,f[c]);return f}return[]}},function(p,u,a){var h=a(74);p.exports=function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=f.length);return h(f,c+Math.floor(Math.random()*b))}},function(p,u){p.exports=function(a,h,f){h=a.indexOf(h);var c=a.indexOf(f);return-1!==h&&-1===c?(a[h]=f,!0):!1}},function(p,u){p.exports=function(a,h){var f=a.indexOf(h);-1!==f&&0<f&&(a.splice(f,1),
a.unshift(h));return h}},function(p,u,a){var h=a(78);p.exports=function(f,c,b,d,g){void 0===d&&(d=0);void 0===g&&(g=f.length);if(h(f,d,g))for(;d<g;d++){var e=f[d];e.hasOwnProperty(c)&&(e[c]=b)}return f}},function(p,u){p.exports=function(a,h,f){if(h===f)return a;var c=a.indexOf(h),b=a.indexOf(f);if(0>c||0>b)throw Error("Supplied items must be elements of the same array");a[c]=f;a[b]=h;return a}},function(p,u,a){var h=a(0),f=a(211);u=a(24);var c=a(20);a=new h({Extends:f,initialize:function(b){f.call(this);
this.checkQueue=!0;this.scene=b;this.systems=b.sys;b.sys.events.once(c.BOOT,this.boot,this);b.sys.events.on(c.START,this.start,this)},boot:function(){this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){var b=this.systems.events;b.on(c.PRE_UPDATE,this.update,this);b.on(c.UPDATE,this.sceneUpdate,this);b.once(c.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(b,d){for(var g=this._active,e=g.length,l=0;l<e;l++){var k=g[l];k.active&&k.preUpdate.call(k,b,d)}},shutdown:function(){for(var b=
this._active.length;b--;)this._active[b].destroy(!0);for(b=this._pending.length;b--;)this._pending[b].destroy(!0);for(b=this._destroy.length;b--;)this._destroy[b].destroy(!0);this._toProcess=0;this._pending=[];this._active=[];this._destroy=[];this.removeAllListeners();b=this.systems.events;b.off(c.PRE_UPDATE,this.update,this);b.off(c.UPDATE,this.sceneUpdate,this);b.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.systems.events.off(c.START,this.start,this);this.systems=
this.scene=null}});u.register("UpdateList",a,"updateList");p.exports=a},function(p,u){p.exports="add"},function(p,u){p.exports="remove"},function(p,u){p.exports=function(a,h,f,c){void 0===f&&(f=!1);if(void 0===c)return c={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var b=a.text,d=b.length,g=a.maxWidth,e=a.wordWrapCharCode,l=Number.MAX_VALUE,k=Number.MAX_VALUE,m=0,n=0,
q=a.fontData.chars,r=a.fontData.lineHeight,t=a.letterSpacing,w=0,v=0,x,y=a._align,A=a.fontSize/a.fontData.size,B=A*a.scaleX,z=A*a.scaleY,C=null,E=0,G=[],H=Number.MAX_VALUE,I=0,K=0;var O=0;var R,F=[],J=[],N=null;if(0<g){for(R=0;R<d;R++){var Q=b.charCodeAt(R);if(10===Q)null!==N&&(F.push({word:N.word,i:N.i,x:N.x*B,y:N.y*z,w:N.w*B,h:N.h*z,cr:!0}),N=null),w=0,v+=r,C=null;else if(x=q[Q]){if(null!==C)var T=x.kerning[E];Q===e?null!==N&&(F.push({word:N.word,i:N.i,x:N.x*B,y:N.y*z,w:N.w*B,h:N.h*z,cr:!1}),N=
null):(null===N&&(N={word:"",i:R,x:w,y:v,w:0,h:r,cr:!1}),N.word=N.word.concat(b[R]),N.w+=x.xOffset+x.xAdvance+(void 0!==T?T:0));w+=x.xAdvance+t;C=x;E=Q}}null!==N&&F.push({word:N.word,i:N.i,x:N.x*B,y:N.y*z,w:N.w*B,h:N.h*z,cr:!1});v=w=0;C=null;Q=E=0;d=[];for(R=0;R<F.length;R++){x=F[R];N=x.x;T=x.x+x.w;if(S){Q=N-(N-(S.x+S.w)+S.w);var S=null}T-=Q;N-Q>g||T>g?(d.push(x.i-1),x.cr?(d.push(x.i+x.word.length),Q=0,S=null):S=x):x.cr&&(d.push(x.i+x.word.length),Q=0,S=null)}for(R=d.length-1;0<=R;R--)F=b,b=d[R],
b=F.substr(0,b)+"\n"+F.substr(b+1);c.wrappedText=b;d=b.length;F=[];N=null}for(R=g=0;R<d;R++)if(Q=b.charCodeAt(R),10===Q)null!==N&&(F.push({word:N.word,i:N.i,x:N.x*B,y:N.y*z,w:N.w*B,h:N.h*z}),N=null),w=0,v+=r,C=null,G[K]=O,O>I&&(I=O),O<H&&(H=O),K++,O=0;else if(x=q[Q]){O=w;S=v;if(null!==C){var W=x.kerning[E];O+=void 0!==W?W:0}l>O&&(l=O);k>S&&(k=S);O+=x.xAdvance;C=S+r;m<O&&(m=O);n<C&&(n=C);C=x.xOffset+x.xAdvance+(void 0!==W?W:0);Q===e?null!==N&&(F.push({word:N.word,i:N.i,x:N.x*B,y:N.y*z,w:N.w*B,h:N.h*
z}),N=null):(null===N&&(N={word:"",i:g,x:w,y:v,w:0,h:r}),N.word=N.word.concat(b[R]),N.w+=C);J.push({i:g,char:b[R],code:Q,x:(x.xOffset+w)*A,y:(x.yOffset+v)*A,w:x.width*A,h:x.height*A,t:v*A,r:O*A,b:r*A,line:K,glyph:x});w+=x.xAdvance+t;C=x;E=Q;O*=A;g++}null!==N&&F.push({word:N.word,i:N.i,x:N.x*B,y:N.y*z,w:N.w*B,h:N.h*z});G[K]=O;O>I&&(I=O);O<H&&(H=O);if(0<y)for(e=0;e<J.length;e++)q=J[e],1===y?(t=(I-G[q.line])/2,q.x+=t,q.r+=t):2===y&&(t=I-G[q.line],q.x+=t,q.r+=t);y=c.local;e=c.global;q=c.lines;y.x=l*A;
y.y=k*A;y.width=m*A;y.height=n*A;e.x=a.x-a._displayOriginX+l*B;e.y=a.y-a._displayOriginY+k*z;e.width=m*B;e.height=n*z;q.shortest=H;q.longest=I;q.lengths=G;h&&(y.x=Math.ceil(y.x),y.y=Math.ceil(y.y),y.width=Math.ceil(y.width),y.height=Math.ceil(y.height),e.x=Math.ceil(e.x),e.y=Math.ceil(e.y),e.width=Math.ceil(e.width),e.height=Math.ceil(e.height),q.shortest=Math.ceil(H),q.longest=Math.ceil(I));f&&(a._displayOriginX=a.originX*y.width,a._displayOriginY=a.originY*y.height,e.x=a.x-a._displayOriginX*a.scaleX,
e.y=a.y-a._displayOriginY*a.scaleY,h&&(e.x=Math.ceil(e.x),e.y=Math.ceil(e.y)));c.words=F;c.characters=J;c.lines.height=r;c.scale=A;c.scaleX=a.scaleX;c.scaleY=a.scaleY;return c}},function(p,u,a){var h=a(212);p.exports=function(f,c,b,d,g,e,l){var k=f.sys.textures.get(b),m=k.get(d);g=f.sys.cache.xml.get(g);return m&&g?(e=h(g,m,e,l,k),f.sys.cache.bitmapFont.add(c,{data:e,texture:b,frame:d,fromAtlas:!0}),!0):!1}},function(p,u,a){a(1);a(1);u=a(1046);a=a(1048);p.exports={renderWebGL:u,renderCanvas:a}},function(p,
u,a){var h=a(1047),f=a(19),c=a(12);p.exports=function(b,d,g,e){if(0!==d._text.length){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline,d);e=f(d,g,e).calc;var k=g.roundPixels;g=g.alpha;var m=d.charColors,n=d.tintFill,q=c.getTintAppendFloatAlpha,r=q(d.tintTopLeft,g*d._alphaTL),t=q(d.tintTopRight,g*d._alphaTR),w=q(d.tintBottomLeft,g*d._alphaBL),v=q(d.tintBottomRight,g*d._alphaBR),x=d.frame.glTexture,y=l.setGameObject(d),A=d.getTextBounds(!1).characters,B=d.dropShadowX,z=d.dropShadowY;var C=0!==
B||0!==z;b.pipelines.preBatch(d);if(C){C=d.dropShadowColor;var E=d.dropShadowAlpha;var G=q(C,g*E*d._alphaTL),H=q(C,g*E*d._alphaTR),I=q(C,g*E*d._alphaBL),K=q(C,g*E*d._alphaBR);for(C=0;C<A.length;C++){E=A[C];var O=E.glyph;32!==E.code&&0!==O.width&&0!==O.height&&h(l,d,E,O,B,z,e,k,G,H,I,K,1,x,y)}}for(C=0;C<A.length;C++)E=A[C],O=E.glyph,32!==E.code&&0!==O.width&&0!==O.height&&(m[E.i]?(I=m[E.i],B=I.tintEffect,z=q(I.tintTL,g*d._alphaTL),G=q(I.tintTR,g*d._alphaTR),H=q(I.tintBL,g*d._alphaBL),I=q(I.tintBR,
g*d._alphaBR),h(l,d,E,O,0,0,e,k,z,G,H,I,B,x,y)):h(l,d,E,O,0,0,e,k,r,t,w,v,n,x,y));b.pipelines.postBatch(d)}}},function(p,u){p.exports=function(a,h,f,c,b,d,g,e,l,k,m,n,q,r,t){var w=f.x-h.displayOriginX+b;d=f.y-h.displayOriginY+d;b=w+f.w;var v=d+f.h;f=g.getXRound(w,d,e);var x=g.getYRound(w,d,e),y=g.getXRound(w,v,e);w=g.getYRound(w,v,e);var A=g.getXRound(b,v,e);v=g.getYRound(b,v,e);var B=g.getXRound(b,d,e);g=g.getYRound(b,d,e);a.batchQuad(h,f,x,y,w,A,v,B,g,c.u0,c.v0,c.u1,c.v1,l,k,m,n,q,r,t)}},function(p,
u,a){var h=a(30);p.exports=function(f,c,b,d){var g=c._text,e=g.length,l=f.currentContext;if(0!==e&&h(f,l,c,b,d)){b.addToRenderList(c);var k=c.fromAtlas?c.frame:c.texture.frames.__BASE;f=c.fontData.chars;d=c.fontData.lineHeight;var m=c._letterSpacing,n=0,q=0,r=null,t=0,w=k.source.image,v=k.cutX;k=k.cutY;var x=c._fontSize/c.fontData.size,y=c._align,A=0,B=0,z=c.getTextBounds(!1);0<c.maxWidth&&(g=z.wrappedText,e=g.length);z=c._bounds.lines;1===y?B=(z.longest-z.lengths[0])/2:2===y&&(B=z.longest-z.lengths[0]);
l.translate(-c.displayOriginX,-c.displayOriginY);for(var C=b.roundPixels,E=0;E<e;E++)if(c=g.charCodeAt(E),10===c)A++,1===y?B=(z.longest-z.lengths[A])/2:2===y&&(B=z.longest-z.lengths[A]),n=0,q+=d,r=null;else if(b=f[c]){var G=v+b.x;var H=k+b.y;var I=b.width;var K=b.height;var O=b.xOffset+n;var R=b.yOffset+q;null!==r&&(r=b.kerning[t],O+=void 0!==r?r:0);O*=x;R*=x;O+=B;n+=b.xAdvance+m;r=b;t=c;0!==I&&0!==K&&32!==c&&(C&&(O=Math.round(O),R=Math.round(R)),l.save(),l.translate(O,R),l.scale(x,x),l.drawImage(w,
G,H,I,K,0,0,I,K),l.restore())}l.restore()}}},function(p,u,a){a(1);a(1);u=a(1050);a=a(1051);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){u=a(25);var h=a(12),f=new u;p.exports=function(c,b,d,g){var e=b.getRenderList();if(0!==e.length){var l=d.alpha*b.alpha;if(0!==l){d.addToRenderList(b);var k=c.pipelines.set(this.pipeline,b),m=d.scrollX*b.scrollFactorX,n=d.scrollY*b.scrollFactorY,q=f.copyFrom(d.matrix);g&&(q.multiplyWithOffset(g,-m,-n),n=m=0);g=b.x-m;n=b.y-n;m=-1;d=d.roundPixels;c.pipelines.preBatch(b);
for(var r=0;r<e.length;r++){var t=e[r],w=t.frame,v=t.alpha*l;if(0!==v){var x=w.width,y=w.height,A=g+t.x+w.x,B=n+t.y+w.y;t.flipX&&(x*=-1,A+=w.width);t.flipY&&(y*=-1,B+=w.height);x=A+x;var z=B+y;y=q.getX(A,B);A=q.getY(A,B);B=q.getX(x,z);x=q.getY(x,z);t=h.getTintAppendFloatAlpha(t.tint,v);if(w.sourceIndex!==m){var C=k.setGameObject(b,w);m=w.sourceIndex}d&&(y=Math.round(y),A=Math.round(A),B=Math.round(B),x=Math.round(x));k.batchQuad(b,y,A,y,x,B,x,B,A,w.u0,w.v0,w.u1,w.v1,t,t,t,t,!1,w.glTexture,C)&&(m=
-1)}}c.pipelines.postBatch(b)}}}},function(p,u){p.exports=function(a,h,f,c){var b=h.getRenderList();if(0!==b.length){var d=a.currentContext,g=f.alpha*h.alpha;if(0!==g){f.addToRenderList(h);d.globalCompositeOperation=a.blendModes[h.blendMode];d.imageSmoothingEnabled=!(!a.antialias||h.frame.source.scaleMode);a=h.x-f.scrollX*h.scrollFactorX;h=h.y-f.scrollY*h.scrollFactorY;d.save();c&&c.copyToContext(d);f=f.roundPixels;for(c=0;c<b.length;c++){var e=b[c],l=e.flipX||e.flipY,k=e.frame,m=k.canvasData,n=k.x,
q=k.y,r=1,t=1,w=e.alpha*g;0!==w&&(d.globalAlpha=w,l?(e.flipX&&(r=-1,n-=m.width),e.flipY&&(t=-1,q-=m.height),d.save(),d.translate(e.x+a,e.y+h),d.scale(r,t),d.drawImage(k.source.image,m.x,m.y,m.width,m.height,n,q,m.width,m.height),d.restore()):(f&&(n=Math.round(n),q=Math.round(q)),d.drawImage(k.source.image,m.x,m.y,m.width,m.height,n+e.x+a,q+e.y+h,m.width,m.height)))}d.restore()}}}},function(p,u,a){a(1);a(1);u=a(1053);a=a(1054);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u){p.exports=function(a,
h,f,c){f.addToRenderList(h);var b=h.list,d=b.length;if(0!==d){var g=h.localTransform;c?(g.loadIdentity(),g.multiply(c),g.translate(h.x,h.y),g.rotate(h.rotation),g.scale(h.scaleX,h.scaleY)):g.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);a.pipelines.preBatch(h);(c=-1!==h.blendMode)||a.setBlendMode(0);for(var e=h.alpha,l=h.scrollFactorX,k=h.scrollFactorY,m=0;m<d;m++){var n=b[m];if(n.willRender(f)){if(void 0!==n.alphaTopLeft){var q=n.alphaTopLeft;var r=n.alphaTopRight;var t=n.alphaBottomLeft;var w=
n.alphaBottomRight}else t=r=q=w=n.alpha;var v=n.scrollFactorX,x=n.scrollFactorY;c||n.blendMode===a.currentBlendMode||a.setBlendMode(n.blendMode);var y=n.mask;y&&y.preRenderWebGL(a,n,f);var A=n.type;A!==a.currentType&&(a.newType=!0,a.currentType=A);a.nextTypeMatch=m<d-1?b[m+1].type===a.currentType:!1;n.setScrollFactor(v*l,x*k);n.setAlpha(q*e,r*e,t*e,w*e);n.renderWebGL(a,n,f,g);n.setAlpha(q,r,t,w);n.setScrollFactor(v,x);y&&y.postRenderWebGL(a,f);a.newType=!1}}a.pipelines.postBatch(h)}}},function(p,
u){p.exports=function(a,h,f,c){f.addToRenderList(h);var b=h.list;if(0!==b.length){var d=h.localTransform;c?(d.loadIdentity(),d.multiply(c),d.translate(h.x,h.y),d.rotate(h.rotation),d.scale(h.scaleX,h.scaleY)):d.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);(c=-1!==h.blendMode)||a.setBlendMode(0);var g=h._alpha,e=h.scrollFactorX,l=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(a,null,f);for(var k=0;k<b.length;k++){var m=b[k];if(m.willRender(f)){var n=m.alpha,q=m.scrollFactorX,r=m.scrollFactorY;c||
m.blendMode===a.currentBlendMode||a.setBlendMode(m.blendMode);m.setScrollFactor(q*e,r*l);m.setAlpha(n*g);m.renderCanvas(a,m,f,d);m.setAlpha(n);m.setScrollFactor(q,r)}}h.mask&&h.mask.postRenderCanvas(a)}}},function(p,u,a){a(1);a(1);u=a(443);a=a(443);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u){p.exports="normal multiply multiply screen overlay darken lighten color-dodge color-burn hard-light soft-light difference exclusion hue saturation color luminosity".split(" ")},function(p,u,a){a(1);
a(1);u=a(1058);a=a(1059);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19);u=a(25);var f=a(12),c=new u;p.exports=function(b,d,g,e){var l=d.text,k=l.length;if(0!==k){g.addToRenderList(d);var m=b.pipelines.set(d.pipeline,d),n=h(d,g,e);e=n.sprite;n=n.calc;var q=0<d.cropWidth||0<d.cropHeight;q&&(m.flush(),b.pushScissor(n.tx,n.ty,d.cropWidth*n.scaleX,d.cropHeight*n.scaleY));var r=d.frame.glTexture,t=d.tintFill,w=f.getTintAppendFloatAlpha(d.tintTopLeft,g.alpha*d._alphaTL),v=f.getTintAppendFloatAlpha(d.tintTopRight,
g.alpha*d._alphaTR),x=f.getTintAppendFloatAlpha(d.tintBottomLeft,g.alpha*d._alphaBL),y=f.getTintAppendFloatAlpha(d.tintBottomRight,g.alpha*d._alphaBR),A=m.setGameObject(d),B=0,z=0,C=0,E=d.letterSpacing,G,H=d.scrollX,I=d.scrollY,K=d.fontData,O=K.chars;K=K.lineHeight;var R=d._align,F=0,J=0,N=d.getTextBounds(!1);0<d.maxWidth&&(l=N.wrappedText,k=l.length);N=d._bounds.lines;1===R?J=(N.longest-N.lengths[0])/2:2===R&&(J=N.longest-N.lengths[0]);var Q=g.roundPixels,T=d.displayCallback,S=d.callbackData;b.pipelines.preBatch(d);
for(var W=0;W<k;W++){var X=l.charCodeAt(W);if(10===X){F++;1===R?J=(N.longest-N.lengths[F])/2:2===R&&(J=N.longest-N.lengths[F]);B=0;z+=K;var ba=null}else if(G=O[X]){var fa=G.width;var la=G.height;var na=G.xOffset+B-H,pa=G.yOffset+z-I;null!==ba&&(ba=G.kerning[C],na+=void 0!==ba?ba:0);B+=G.xAdvance+E;ba=G;C=X;if(0!==fa&&0!==la&&32!==X){var ma=d.fontSize/d.fontData.size;var ta=0;T&&(S.color=0,S.tint.topLeft=w,S.tint.topRight=v,S.tint.bottomLeft=x,S.tint.bottomRight=y,S.index=W,S.charCode=X,S.x=na,S.y=
pa,S.scale=ma,S.rotation=ta,S.data=G.data,y=T(S),na=y.x,pa=y.y,ma=y.scale,ta=y.rotation,y.color?y=x=v=w=y.color:(w=y.tint.topLeft,v=y.tint.topRight,x=y.tint.bottomLeft,y=y.tint.bottomRight),w=f.getTintAppendFloatAlpha(w,g.alpha*d._alphaTL),v=f.getTintAppendFloatAlpha(v,g.alpha*d._alphaTR),x=f.getTintAppendFloatAlpha(x,g.alpha*d._alphaBL),y=f.getTintAppendFloatAlpha(y,g.alpha*d._alphaBR));na*=ma;pa*=ma;na-=d.displayOriginX;pa-=d.displayOriginY;na+=J;c.applyITRS(na,pa,ta,ma,ma);n.multiply(c,e);na=G.u0;
pa=G.v0;X=G.u1;G=G.v1;var xa=la;la=e.e;ma=e.f;ta=xa*e.c+e.e;var ya=xa*e.d+e.f,Aa=fa*e.a+xa*e.c+e.e;xa=fa*e.b+xa*e.d+e.f;var Da=fa*e.a+e.e;fa=fa*e.b+e.f;Q&&(la=Math.round(la),ma=Math.round(ma),ta=Math.round(ta),ya=Math.round(ya),Aa=Math.round(Aa),xa=Math.round(xa),Da=Math.round(Da),fa=Math.round(fa));m.batchQuad(d,la,ma,ta,ya,Aa,xa,Da,fa,na,pa,X,G,w,v,x,y,t,r,A)}}}q&&(m.flush(),b.popScissor());b.pipelines.postBatch(d)}}},function(p,u,a){var h=a(30);p.exports=function(f,c,b,d){var g=c._text,e=g.length,
l=f.currentContext;if(0!==e&&h(f,l,c,b,d)){b.addToRenderList(c);var k=c.fromAtlas?c.frame:c.texture.frames.__BASE;f=c.displayCallback;d=c.callbackData;var m=c.fontData.chars,n=c.fontData.lineHeight,q=c._letterSpacing,r=0,t=0,w,v=null,x=0,y=c.frame.source.image,A=k.cutX;k=k.cutY;var B=c._fontSize/c.fontData.size,z=c._align,C=0,E=0;c.getTextBounds(!1);var G=c._bounds.lines;1===z?E=(G.longest-G.lengths[0])/2:2===z&&(E=G.longest-G.lengths[0]);l.translate(-c.displayOriginX,-c.displayOriginY);var H=b.roundPixels;
0<c.cropWidth&&0<c.cropHeight&&(l.beginPath(),l.rect(0,0,c.cropWidth,c.cropHeight),l.clip());for(var I=0;I<e;I++){var K=B;var O=0;b=g.charCodeAt(I);if(10===b)C++,1===z?E=(G.longest-G.lengths[C])/2:2===z&&(E=G.longest-G.lengths[C]),r=0,t+=n,v=null;else if(w=m[b]){var R=A+w.x;var F=k+w.y;var J=w.width;var N=w.height;var Q=w.xOffset+r-c.scrollX;var T=w.yOffset+t-c.scrollY;null!==v&&(v=w.kerning[x],Q+=void 0!==v?v:0);f&&(d.index=I,d.charCode=b,d.x=Q,d.y=T,d.scale=K,d.rotation=O,d.data=w.data,v=f(d),Q=
v.x,T=v.y,K=v.scale,O=v.rotation);Q*=K;T*=K;Q+=E;r+=w.xAdvance+q;v=w;x=b;0!==J&&0!==N&&32!==b&&(H&&(Q=Math.round(Q),T=Math.round(T)),l.save(),l.translate(Q,T),l.rotate(O),l.scale(K,K),l.drawImage(y,R,F,J,N,0,0,J,N),l.restore())}}l.restore()}}},function(p,u,a){a(1);a(1);u=a(1061);a=a(1062);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19);p.exports=function(f,c,b,d){f.pipelines.clear();d=h(c,b,d).calc;c.render.call(c,f,b,d);f.pipelines.rebind()}},function(p,u){},function(p,u,a){a(1);
a(1);u=a(1064);a(448);a=a(448);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(217),f=a(19);u=a(25);var c=a(12),b=function(l,k,m){this.x=l;this.y=k;this.width=m},d=function(l,k,m){this.points=[];this.pointsLength=1;this.points[0]=new b(l,k,m)},g=[],e=new u;p.exports=function(l,k,m,n){if(0!==k.commandBuffer.length){m.addToRenderList(k);var q=l.pipelines.set(k.pipeline,k);l.pipelines.preBatch(k);n=f(k,m,n).calc;var r=e.loadIdentity(),t=k.commandBuffer;m=m.alpha*k.alpha;for(var w=1,
v=q.fillTint,x=q.strokeTint,y,A,B=2*Math.PI,z,C=[],E=!0,G=null,H=c.getTintAppendFloatAlpha,I=0;I<t.length;I++)switch(z=t[I],z){case h.BEGIN_PATH:C.length=0;G=null;E=!0;break;case h.CLOSE_PATH:E=!1;G&&G.points.length&&G.points.push(G.points[0]);break;case h.FILL_PATH:for(z=0;z<C.length;z++)q.batchFillPath(C[z].points,r,n);break;case h.STROKE_PATH:for(z=0;z<C.length;z++)q.batchStrokePath(C[z].points,w,E,r,n);break;case h.LINE_STYLE:w=t[++I];z=t[++I];var K=t[++I]*m;z=H(z,K);x.TL=z;x.TR=z;x.BL=z;x.BR=
z;break;case h.FILL_STYLE:z=t[++I];K=t[++I]*m;z=H(z,K);v.TL=z;v.TR=z;v.BL=z;v.BR=z;break;case h.GRADIENT_FILL_STYLE:z=t[++I]*m;K=t[++I]*m;var O=t[++I]*m,R=t[++I]*m;v.TL=H(t[++I],z);v.TR=H(t[++I],K);v.BL=H(t[++I],O);v.BR=H(t[++I],R);break;case h.GRADIENT_LINE_STYLE:w=t[++I];z=t[++I]*m;x.TL=H(t[++I],z);x.TR=H(t[++I],z);x.BL=H(t[++I],z);x.BR=H(t[++I],z);break;case h.ARC:z=0;K=t[++I];O=t[++I];R=t[++I];var F=t[++I],J=t[++I];y=t[++I];var N=t[++I];J-=F;y?J<-B?J=-B:0<J&&(J=-B+J%B):J>B?J=B:0>J&&(J=B+J%B);
null===G&&(G=new d(K+Math.cos(F)*R,O+Math.sin(F)*R,w),C.push(G),z+=.01);for(;z<1+N;)A=J*z+F,y=K+Math.cos(A)*R,A=O+Math.sin(A)*R,G.points.push(new b(y,A,w)),z+=.01;A=J+F;y=K+Math.cos(A)*R;A=O+Math.sin(A)*R;G.points.push(new b(y,A,w));break;case h.FILL_RECT:q.batchFillRect(t[++I],t[++I],t[++I],t[++I],r,n);break;case h.FILL_TRIANGLE:q.batchFillTriangle(t[++I],t[++I],t[++I],t[++I],t[++I],t[++I],r,n);break;case h.STROKE_TRIANGLE:q.batchStrokeTriangle(t[++I],t[++I],t[++I],t[++I],t[++I],t[++I],w,r,n);break;
case h.LINE_TO:null!==G?G.points.push(new b(t[++I],t[++I],w)):(G=new d(t[++I],t[++I],w),C.push(G));break;case h.MOVE_TO:G=new d(t[++I],t[++I],w);C.push(G);break;case h.SAVE:g.push(r.copyToArray());break;case h.RESTORE:r.copyFromArray(g.pop());break;case h.TRANSLATE:K=t[++I];O=t[++I];r.translate(K,O);break;case h.SCALE:K=t[++I];O=t[++I];r.scale(K,O);break;case h.ROTATE:r.rotate(t[++I])}l.pipelines.postBatch(k)}}},function(p,u,a){a(1);a(1);u=a(1066);a=a(1067);p.exports={renderWebGL:u,renderCanvas:a}},
function(p,u){p.exports=function(a,h,f,c){f.addToRenderList(h);h.pipeline.batchSprite(h,f,c)}},function(p,u){p.exports=function(a,h,f,c){f.addToRenderList(h);a.batchSprite(h,h.frame,f,c)}},function(p,u,a){a(1);a(1);u=a(1069);a=a(1070);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u){p.exports=function(a,h,f,c){f.addToRenderList(h);this.pipeline.batchSprite(h,f,c)}},function(p,u){p.exports=function(a,h,f,c){f.addToRenderList(h);a.batchSprite(h,h.frame,f,c)}},function(p,u,a){a(1);a(1);u=a(1072);
a=a(1073);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u){p.exports=function(a,h,f){var c=h.list,b=c.length;if(0!==b){h.depthSort();a.pipelines.preBatch(h);var d=-1!==h.blendMode;d||a.setBlendMode(0);for(var g=h.alpha,e=0;e<b;e++){var l=c[e];if(l.willRender(f)){if(void 0!==l.alphaTopLeft){var k=l.alphaTopLeft;var m=l.alphaTopRight;var n=l.alphaBottomLeft;var q=l.alphaBottomRight}else n=m=k=q=l.alpha;d||l.blendMode===a.currentBlendMode||a.setBlendMode(l.blendMode);var r=l.mask;r&&r.preRenderWebGL(a,
l,f);var t=l.type;t!==a.currentType&&(a.newType=!0,a.currentType=t);a.nextTypeMatch=e<b-1?c[e+1].type===a.currentType:!1;l.setAlpha(k*g,m*g,n*g,q*g);l.renderWebGL(a,l,f);l.setAlpha(k,m,n,q);r&&r.postRenderWebGL(a,f);a.newType=!1}}a.pipelines.postBatch(h)}}},function(p,u){p.exports=function(a,h,f){var c=h.list;if(0!==c.length){h.depthSort();var b=-1!==h.blendMode;b||a.setBlendMode(0);var d=h._alpha;h.mask&&h.mask.preRenderCanvas(a,null,f);for(var g=0;g<c.length;g++){var e=c[g];if(e.willRender(f)){var l=
e.alpha;b||e.blendMode===a.currentBlendMode||a.setBlendMode(e.blendMode);e.setAlpha(l*d);e.renderCanvas(a,e,f);e.setAlpha(l)}}h.mask&&h.mask.postRenderCanvas(a)}}},function(p,u,a){p.exports={EmitterOp:a(449),GravityWell:a(450),Particle:a(451),ParticleEmitter:a(452),ParticleEmitterManager:a(220),Zones:a(1078)}},function(p,u,a){a(1);a(1);u=a(1076);a=a(1077);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){u=a(25);var h=a(12),f=new u,c=new u,b=new u,d=new u;p.exports=function(g,e,l,k){var m=
e.emitters.list,n=m.length;if(0!==n){var q=g.pipelines.set(e.pipeline);k?(d.loadIdentity(),d.multiply(k),d.translate(e.x,e.y),d.rotate(e.rotation),d.scale(e.scaleX,e.scaleY)):d.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);k=l.roundPixels;var r=e.defaultFrame.glTexture,t=h.getTintAppendFloatAlpha,w=q.setGameObject(e,e.defaultFrame);g.pipelines.preBatch(e);for(var v=0;v<n;v++){var x=m[v],y=x.alive,A=y.length;if(x.visible&&0!==A){l.addToRenderList(x);var B=x.scrollFactorX,z=x.scrollFactorY;g.setBlendMode(x.blendMode);
x.mask&&(x.mask.preRenderWebGL(g,x,l),g.pipelines.set(e.pipeline));for(var C=0;C<A;C++){var E=y[C],G=E.alpha*l.alpha;if(!(0>=G)){b.applyITRS(E.x,E.y,E.rotation,E.scaleX,E.scaleY);f.copyFrom(l.matrix);f.multiplyWithOffset(d,-l.scrollX*B,-l.scrollY*z);b.e=E.x;b.f=E.y;f.multiply(b,c);var H=E.frame,I=-H.halfWidth,K=-H.halfHeight,O=I+H.width,R=K+H.height,F=c.getXRound(I,K,k),J=c.getYRound(I,K,k),N=c.getXRound(I,R,k);I=c.getYRound(I,R,k);var Q=c.getXRound(O,R,k);R=c.getYRound(O,R,k);var T=c.getXRound(O,
K,k);K=c.getYRound(O,K,k);E=t(E.tint,G);q.batchQuad(x,F,J,N,I,Q,R,T,K,H.u0,H.v0,H.u1,H.v1,E,E,E,E,0,r,w)}}x.mask&&x.mask.postRenderWebGL(g,l)}}g.pipelines.postBatch(e)}}},function(p,u,a){u=a(25);var h=new u,f=new u,c=new u,b=new u;p.exports=function(d,g,e,l){var k=g.emitters.list,m=k.length;if(0!==m){var n=h.copyFrom(e.matrix);l?(b.loadIdentity(),b.multiply(l),b.translate(g.x,g.y),b.rotate(g.rotation),b.scale(g.scaleX,g.scaleY)):b.applyITRS(g.x,g.y,g.rotation,g.scaleX,g.scaleY);g=d.currentContext;
l=e.roundPixels;for(var q=0;q<m;q++){var r=k[q],t=r.alive,w=t.length;if(r.visible&&0!==w){e.addToRenderList(r);var v=r.scrollFactorX,x=r.scrollFactorY;g.save();g.globalCompositeOperation=d.blendModes[r.blendMode];for(r=0;r<w;r++){var y=t[r],A=y.alpha*e.alpha;if(!(0>=A)){c.applyITRS(y.x,y.y,y.rotation,y.scaleX,y.scaleY);n.copyFrom(e.matrix);n.multiplyWithOffset(b,-e.scrollX*v,-e.scrollY*x);c.e=y.x;c.f=y.y;n.multiply(c,f);y=y.frame;var B=y.canvasData,z=-y.halfWidth,C=-y.halfHeight;g.globalAlpha=A;g.save();
f.setToContext(g);l&&(z=Math.round(z),C=Math.round(C));g.imageSmoothingEnabled=!(!d.antialias||y.source.scaleMode);g.drawImage(y.source.image,B.x,B.y,B.width,B.height,z,C,B.width,B.height);g.restore()}}g.restore()}}}}},function(p,u,a){p.exports={DeathZone:a(453),EdgeZone:a(454),RandomZone:a(456)}},function(p,u,a){a(1);a(1);u=a(1080);a=a(1081);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(12);p.exports=function(f,c,b,d){b.addToRenderList(c);var g=b.alpha,e=c.renderTarget,l=e.width,
k=e.height,m=h.getTintAppendFloatAlpha,n=f.pipelines.set(c.pipeline),q=n.setTexture2D(e.texture);f.pipelines.preBatch(c);n.batchTexture(c,e.texture,l,k,c.x,c.y,l,k,c.scaleX,c.scaleY,c.rotation,c.flipX,!c.flipY,c.scrollFactorX,c.scrollFactorY,c.displayOriginX,c.displayOriginY,0,0,l,k,m(c.tintTopLeft,g*c._alphaTL),m(c.tintTopRight,g*c._alphaTR),m(c.tintBottomLeft,g*c._alphaBL),m(c.tintBottomRight,g*c._alphaBR),c.tintFill,0,0,b,d,!0,q);f.resetTextures();f.pipelines.postBatch(c)}},function(p,u){p.exports=
function(a,h,f,c){f.addToRenderList(h);a.batchSprite(h,h.frame,f,c)}},function(p,u,a){u=a(1083);var h=a(17);a={Parse:a(1084)};a=h(!1,a,u);p.exports=a},function(p,u){p.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",
TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(p,u,a){var h=a(6);p.exports=function(f,c){var b=c.width,d=c.height,g=Math.floor(b/2),e=Math.floor(d/2),l=h(c,"chars","");if(""!==l){var k=h(c,"image",""),
m=f.sys.textures.getFrame(k);f=m.cutX;var n=m.cutY,q=m.source.width;m=m.source.height;var r=h(c,"offset.x",0),t=h(c,"offset.y",0),w=h(c,"spacing.x",0),v=h(c,"spacing.y",0),x=h(c,"lineSpacing",0);c=h(c,"charsPerRow",null);null===c&&(c=q/b,c>l.length&&(c=l.length));var y=r;x={retroFont:!0,font:k,size:b,lineHeight:d+x,chars:{}};for(var A=0,B=0;B<l.length;B++){var z=l.charCodeAt(B);x.chars[z]={x:y,y:t,width:b,height:d,centerX:g,centerY:e,xOffset:0,yOffset:0,xAdvance:b,data:{},kerning:{},u0:(f+y)/q,v0:(n+
t)/m,u1:(f+y+b)/q,v1:(n+t+d)/m};A++;A===c?(A=0,y=r,t+=d+v):y+=b+w}return{data:x,frame:null,texture:k}}}},function(p,u,a){a(1);a(1);u=a(1086);a=a(1087);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19),f=a(12);p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.pipelines.set(b.pipeline,b);g=h(b,d,g).calc;var l=b.vertices,k=b.uv,m=b.colors,n=b.alphas,q=b.alpha,r=f.getTintAppendFloatAlpha,t=d.roundPixels,w=l.length,v=Math.floor(.5*w);e.flush();c.pipelines.preBatch(b);var x=e.setGameObject(b),
y=e.vertexViewF32,A=e.vertexViewU32,B=e.vertexCount*e.currentShader.vertexComponentCount-1,z=0,C=b.tintFill;b.dirty&&b.updateVertices();for(var E=b.debugCallback,G=[],H=0;H<w;H+=2){var I=l[H+0],K=l[H+1],O=I*g.a+K*g.c+g.e;I=I*g.b+K*g.d+g.f;t&&(O=Math.round(O),I=Math.round(I));y[++B]=O;y[++B]=I;y[++B]=k[H+0];y[++B]=k[H+1];y[++B]=x;y[++B]=C;A[++B]=r(m[z],d.alpha*n[z]*q);z++;E&&(G[H+0]=O,G[H+1]=I)}E&&E.call(b,b,w,G);e.vertexCount+=v;c.pipelines.postBatch(b)}},function(p,u){p.exports=function(){}},function(p,
u,a){a(1);a(1);u=a(1089);a=a(1090);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(12);p.exports=function(f,c,b,d){if(0!==c.width&&0!==c.height){b.addToRenderList(c);var g=c.frame,e=g.width,l=g.height,k=h.getTintAppendFloatAlpha,m=f.pipelines.set(c.pipeline,c),n=m.setTexture2D(g.glTexture,c);f.pipelines.preBatch(c);m.batchTexture(c,g.glTexture,e,l,c.x,c.y,e/c.style.resolution,l/c.style.resolution,c.scaleX,c.scaleY,c.rotation,c.flipX,c.flipY,c.scrollFactorX,c.scrollFactorY,c.displayOriginX,
c.displayOriginY,0,0,e,l,k(c.tintTopLeft,b.alpha*c._alphaTL),k(c.tintTopRight,b.alpha*c._alphaTR),k(c.tintBottomLeft,b.alpha*c._alphaBL),k(c.tintBottomRight,b.alpha*c._alphaBR),c.tintFill,0,0,b,d,!1,n);f.pipelines.postBatch(c)}}},function(p,u){p.exports=function(a,h,f,c){0!==h.width&&0!==h.height&&(f.addToRenderList(h),a.batchSprite(h,h.frame,f,c))}},function(p,u,a){a(1);a(1);u=a(1092);a=a(1093);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(12);p.exports=function(f,c,b,d){c.updateCanvas();
var g=c.width,e=c.height;if(0!==g&&0!==e){b.addToRenderList(c);f.pipelines.preBatch(c);var l=h.getTintAppendFloatAlpha,k=f.pipelines.set(c.pipeline,c),m=k.setTexture2D(c.fillPattern,c);k.batchTexture(c,c.fillPattern,c.displayFrame.width*c.tileScaleX,c.displayFrame.height*c.tileScaleY,c.x,c.y,g,e,c.scaleX,c.scaleY,c.rotation,c.flipX,c.flipY,c.scrollFactorX,c.scrollFactorY,c.originX*g,c.originY*e,0,0,g,e,l(c.tintTopLeft,b.alpha*c._alphaTL),l(c.tintTopRight,b.alpha*c._alphaTR),l(c.tintBottomLeft,b.alpha*
c._alphaBL),l(c.tintBottomRight,b.alpha*c._alphaBR),c.tintFill,c.tilePositionX%c.displayFrame.width/c.displayFrame.width,c.tilePositionY%c.displayFrame.height/c.displayFrame.height,b,d,!1,m);f.pipelines.postBatch(c)}}},function(p,u){p.exports=function(a,h,f,c){h.updateCanvas();f.addToRenderList(h);a.batchSprite(h,h.frame,f,c)}},function(p,u,a){a(1);a(1);u=a(1095);a=a(1096);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u){p.exports=function(a,h,f,c){h.videoTexture&&(f.addToRenderList(h),h.pipeline.batchSprite(h,
f,c))}},function(p,u){p.exports=function(a,h,f,c){h.videoTexture&&(f.addToRenderList(h),a.batchSprite(h,h.frame,f,c))}},function(p,u,a){a(1);a(1);u=a(1098);a=a(1099);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19),f=a(114),c=a(81);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline);e=h(d,g,e);e=l.calcMatrix.copyFrom(e.calc);var k=d._displayOriginX,m=d._displayOriginY;g=g.alpha*d.alpha;b.pipelines.preBatch(d);d.isFilled&&f(l,e,d,g,k,m);d.isStroked&&
c(l,d,g,k,m);b.pipelines.postBatch(d)}},function(p,u,a){var h=a(36),f=a(48),c=a(60),b=a(30);p.exports=function(d,g,e,l){e.addToRenderList(g);var k=d.currentContext;b(d,k,g,e,l)&&(d=g.radius,k.beginPath(),k.arc(d-2*g.originX*d,d-2*g.originY*d,d,h(g._startAngle),h(g._endAngle),g.anticlockwise),g.closePath&&k.closePath(),g.isFilled&&(f(k,g),k.fill()),g.isStroked&&(c(k,g),k.stroke()),k.restore())}},function(p,u,a){a(1);a(1);u=a(1101);a=a(1102);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=
a(114),f=a(19),c=a(81);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline);e=f(d,g,e);e=l.calcMatrix.copyFrom(e.calc);var k=d._displayOriginX+d._curveBounds.x,m=d._displayOriginY+d._curveBounds.y;g=g.alpha*d.alpha;b.pipelines.preBatch(d);d.isFilled&&h(l,e,d,g,k,m);d.isStroked&&c(l,d,g,k,m);b.pipelines.postBatch(d)}},function(p,u,a){var h=a(48),f=a(60),c=a(30);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.currentContext;if(c(b,l,d,g,e)){b=d._displayOriginX+
d._curveBounds.x;g=d._displayOriginY+d._curveBounds.y;e=d.pathData;var k=e.length-1,m=e[0]-b,n=e[1]-g;l.beginPath();l.moveTo(m,n);d.closePath||(k-=2);for(m=2;m<k;m+=2)l.lineTo(e[m]-b,e[m+1]-g);d.closePath&&l.closePath();d.isFilled&&(h(l,d),l.fill());d.isStroked&&(f(l,d),l.stroke());l.restore()}}},function(p,u,a){a(1);a(1);u=a(1104);a=a(1105);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(114),f=a(19),c=a(81);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline);
e=f(d,g,e);e=l.calcMatrix.copyFrom(e.calc);var k=d._displayOriginX,m=d._displayOriginY;g=g.alpha*d.alpha;b.pipelines.preBatch(d);d.isFilled&&h(l,e,d,g,k,m);d.isStroked&&c(l,d,g,k,m);b.pipelines.postBatch(d)}},function(p,u,a){var h=a(48),f=a(60),c=a(30);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.currentContext;if(c(b,l,d,g,e)){b=d._displayOriginX;g=d._displayOriginY;e=d.pathData;var k=e.length-1,m=e[0]-b,n=e[1]-g;l.beginPath();l.moveTo(m,n);d.closePath||(k-=2);for(m=2;m<k;m+=2)l.lineTo(e[m]-
b,e[m+1]-g);l.closePath();d.isFilled&&(h(l,d),l.fill());d.isStroked&&(f(l,d),l.stroke());l.restore()}}},function(p,u,a){a(1);a(1);u=a(1107);a=a(1108);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19),f=a(12);p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.pipelines.set(b.pipeline);g=h(b,d,g);e.calcMatrix.copyFrom(g.calc).translate(-b._displayOriginX,-b._displayOriginY);var l=d.alpha*b.alpha;d=b.width;var k=b.height,m=b.cellWidth;g=b.cellHeight;var n=Math.ceil(d/m),q=Math.ceil(k/
g),r=m,t=g,w=m-(n*m-d),v=g-(q*g-k);var x=b.showCells;var y=b.showAltCells,A=b.showOutline,B=0;A&&(r--,t--,w===m&&w--,v===g&&v--);c.pipelines.preBatch(b);if(x&&0<b.fillAlpha){x=e.fillTint;var z=f.getTintAppendFloatAlpha(b.fillColor,b.fillAlpha*l);x.TL=z;x.TR=z;x.BL=z;x.BR=z;for(z=0;z<q;z++)for(y&&(B=z%2),x=0;x<n;x++)if(y&&B)B=0;else{B++;var C=x<n-1?r:w;var E=z<q-1?t:v;e.batchFillRect(x*m,z*g,C,E)}}if(y&&0<b.altFillAlpha)for(x=e.fillTint,z=f.getTintAppendFloatAlpha(b.altFillColor,b.altFillAlpha*l),
x.TL=z,x.TR=z,x.BL=z,x.BR=z,z=0;z<q;z++)for(y&&(B=z%2),x=0;x<n;x++)y&&!B?B=1:(B=0,C=x<n-1?r:w,E=z<q-1?t:v,e.batchFillRect(x*m,z*g,C,E));if(A&&0<b.outlineFillAlpha){r=e.strokeTint;l=f.getTintAppendFloatAlpha(b.outlineFillColor,b.outlineFillAlpha*l);r.TL=l;r.TR=l;r.BL=l;r.BR=l;for(x=1;x<n;x++)l=x*m,e.batchLine(l,0,l,k,1,1,1,0,!1);for(z=1;z<q;z++)k=z*g,e.batchLine(0,k,d,k,1,1,1,0,!1)}c.pipelines.postBatch(b)}},function(p,u,a){var h=a(48),f=a(60),c=a(30);p.exports=function(b,d,g,e){g.addToRenderList(d);
var l=b.currentContext;if(c(b,l,d,g,e)){b=-d._displayOriginX;e=-d._displayOriginY;var k=g.alpha*d.alpha;g=d.width;var m=d.height,n=d.cellWidth,q=d.cellHeight,r=Math.ceil(g/n),t=Math.ceil(m/q),w=n,v=q,x=n-(r*n-g),y=q-(t*q-m),A=d.showCells,B=d.showAltCells,z=d.showOutline,C,E=0;z&&(w--,v--,x===n&&x--,y===q&&y--);if(A&&0<d.fillAlpha)for(h(l,d),C=0;C<t;C++)for(B&&(E=C%2),A=0;A<r;A++)if(B&&E)E=0;else{E++;var G=A<r-1?w:x;var H=C<t-1?v:y;l.fillRect(b+A*n,e+C*q,G,H)}if(B&&0<d.altFillAlpha)for(h(l,d,d.altFillColor,
d.altFillAlpha*k),C=0;C<t;C++)for(B&&(E=C%2),A=0;A<r;A++)B&&!E?E=1:(E=0,G=A<r-1?w:x,H=C<t-1?v:y,l.fillRect(b+A*n,e+C*q,G,H));if(z&&0<d.outlineFillAlpha){f(l,d,d.outlineFillColor,d.outlineFillAlpha*k);for(A=1;A<r;A++)d=A*n,l.beginPath(),l.moveTo(d+b,e),l.lineTo(d+b,m+e),l.stroke();for(C=1;C<t;C++)d=C*q,l.beginPath(),l.moveTo(b,d+e),l.lineTo(b+g,d+e),l.stroke()}l.restore()}}},function(p,u,a){a(1);a(1);u=a(1110);a=a(1111);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19),f=a(12);
p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.pipelines.set(b.pipeline);g=h(b,d,g);g=e.calcMatrix.copyFrom(g.calc);var l=b.width,k=b.height,m=l/2;l/=b.projection;d=d.alpha*b.alpha;if(b.isFilled){c.pipelines.preBatch(b);if(b.showTop){var n=f.getTintAppendFloatAlpha(b.fillTop,d);var q=g.getX(-m,-k);var r=g.getY(-m,-k);var t=g.getX(0,-l-k);var w=g.getY(0,-l-k);var v=g.getX(m,-k);var x=g.getY(m,-k);var y=g.getX(0,l-k);var A=g.getY(0,l-k);e.batchQuad(b,q,r,t,w,v,x,y,A,0,0,1,1,n,n,n,n,2)}b.showLeft&&
(n=f.getTintAppendFloatAlpha(b.fillLeft,d),q=g.getX(-m,0),r=g.getY(-m,0),t=g.getX(0,l),w=g.getY(0,l),v=g.getX(0,l-k),x=g.getY(0,l-k),y=g.getX(-m,-k),A=g.getY(-m,-k),e.batchQuad(b,q,r,t,w,v,x,y,A,0,0,1,1,n,n,n,n,2));b.showRight&&(n=f.getTintAppendFloatAlpha(b.fillRight,d),q=g.getX(m,0),r=g.getY(m,0),t=g.getX(0,l),w=g.getY(0,l),v=g.getX(0,l-k),x=g.getY(0,l-k),y=g.getX(m,-k),A=g.getY(m,-k),e.batchQuad(b,q,r,t,w,v,x,y,A,0,0,1,1,n,n,n,n,2));c.pipelines.postBatch(b)}}},function(p,u,a){var h=a(48),f=a(30);
p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.currentContext;f(c,e,b,d,g)&&b.isFilled&&(g=b.width,c=b.height,d=g/2,g/=b.projection,b.showTop&&(h(e,b,b.fillTop),e.beginPath(),e.moveTo(-d,-c),e.lineTo(0,-g-c),e.lineTo(d,-c),e.lineTo(d,-1),e.lineTo(0,g-1),e.lineTo(-d,-1),e.lineTo(-d,-c),e.fill()),b.showLeft&&(h(e,b,b.fillLeft),e.beginPath(),e.moveTo(-d,0),e.lineTo(0,g),e.lineTo(0,g-c),e.lineTo(-d,-c),e.lineTo(-d,0),e.fill()),b.showRight&&(h(e,b,b.fillRight),e.beginPath(),e.moveTo(d,0),e.lineTo(0,
g),e.lineTo(0,g-c),e.lineTo(d,-c),e.lineTo(d,0),e.fill()),e.restore())}},function(p,u,a){a(1);a(1);u=a(1113);a=a(1114);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19),f=a(12);p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.pipelines.set(b.pipeline);g=h(b,d,g);g=e.calcMatrix.copyFrom(g.calc);var l=b.width,k=b.height,m=l/2;l/=b.projection;var n=b.isReversed;d=d.alpha*b.alpha;if(b.isFilled){c.pipelines.preBatch(b);if(b.showTop&&n){var q=f.getTintAppendFloatAlpha(b.fillTop,
d);var r=g.getX(-m,-k);var t=g.getY(-m,-k);var w=g.getX(0,-l-k);var v=g.getY(0,-l-k);var x=g.getX(m,-k);var y=g.getY(m,-k);var A=g.getX(0,l-k),B=g.getY(0,l-k);e.batchQuad(b,r,t,w,v,x,y,A,B,0,0,1,1,q,q,q,q,2)}b.showLeft&&(q=f.getTintAppendFloatAlpha(b.fillLeft,d),n?(r=g.getX(-m,-k),t=g.getY(-m,-k)):(r=g.getX(-m,0),t=g.getY(-m,0)),w=g.getX(0,l),v=g.getY(0,l),x=g.getX(0,l-k),y=g.getY(0,l-k),e.batchTri(b,r,t,w,v,x,y,0,0,1,1,q,q,q,2));b.showRight&&(q=f.getTintAppendFloatAlpha(b.fillRight,d),n?(r=g.getX(m,
-k),t=g.getY(m,-k)):(r=g.getX(m,0),t=g.getY(m,0)),w=g.getX(0,l),v=g.getY(0,l),x=g.getX(0,l-k),y=g.getY(0,l-k),e.batchTri(b,r,t,w,v,x,y,0,0,1,1,q,q,q,2));c.pipelines.postBatch(b)}}},function(p,u,a){var h=a(48),f=a(30);p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.currentContext;if(f(c,e,b,d,g)&&b.isFilled){g=b.width;c=b.height;d=g/2;g/=b.projection;var l=b.isReversed;b.showTop&&l&&(h(e,b,b.fillTop),e.beginPath(),e.moveTo(-d,-c),e.lineTo(0,-g-c),e.lineTo(d,-c),e.lineTo(0,g-c),e.fill());b.showLeft&&
(h(e,b,b.fillLeft),e.beginPath(),l?e.moveTo(-d,-c):e.moveTo(-d,0),e.lineTo(0,g),e.lineTo(0,g-c),e.fill());b.showRight&&(h(e,b,b.fillRight),e.beginPath(),l?e.moveTo(d,-c):e.moveTo(d,0),e.lineTo(0,g),e.lineTo(0,g-c),e.fill());e.restore()}}},function(p,u,a){a(1);a(1);u=a(1116);a=a(1117);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19),f=a(12);p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.pipelines.set(b.pipeline);g=h(b,d,g);e.calcMatrix.copyFrom(g.calc);var l=b._displayOriginX,
k=b._displayOriginY,m=d.alpha*b.alpha;c.pipelines.preBatch(b);b.isStroked&&(d=e.strokeTint,m=f.getTintAppendFloatAlpha(b.strokeColor,b.strokeAlpha*m),d.TL=m,d.TR=m,d.BL=m,d.BR=m,e.batchLine(b.geom.x1-l,b.geom.y1-k,b.geom.x2-l,b.geom.y2-k,b._startWidth,b._endWidth,1,0,!1,g.sprite,g.camera));c.pipelines.postBatch(b)}},function(p,u,a){var h=a(60),f=a(30);p.exports=function(c,b,d,g){d.addToRenderList(b);var e=c.currentContext;f(c,e,b,d,g)&&(c=b._displayOriginX,d=b._displayOriginY,b.isStroked&&(h(e,b),
e.beginPath(),e.moveTo(b.geom.x1-c,b.geom.y1-d),e.lineTo(b.geom.x2-c,b.geom.y2-d),e.stroke()),e.restore())}},function(p,u,a){a(1);a(1);u=a(1119);a=a(1120);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(114),f=a(19),c=a(81);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline);e=f(d,g,e);e=l.calcMatrix.copyFrom(e.calc);var k=d._displayOriginX,m=d._displayOriginY;g=g.alpha*d.alpha;b.pipelines.preBatch(d);d.isFilled&&h(l,e,d,g,k,m);d.isStroked&&c(l,d,g,
k,m);b.pipelines.postBatch(d)}},function(p,u,a){var h=a(48),f=a(60),c=a(30);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.currentContext;if(c(b,l,d,g,e)){b=d._displayOriginX;g=d._displayOriginY;e=d.pathData;var k=e.length-1,m=e[0]-b,n=e[1]-g;l.beginPath();l.moveTo(m,n);d.closePath||(k-=2);for(m=2;m<k;m+=2)l.lineTo(e[m]-b,e[m+1]-g);l.closePath();d.isFilled&&(h(l,d),l.fill());d.isStroked&&(f(l,d),l.stroke());l.restore()}}},function(p,u,a){a(1);a(1);u=a(1122);a=a(1123);p.exports={renderWebGL:u,
renderCanvas:a}},function(p,u,a){var h=a(19),f=a(81),c=a(12);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline);e=h(d,g,e);l.calcMatrix.copyFrom(e.calc);e=d._displayOriginX;var k=d._displayOriginY;g=g.alpha*d.alpha;b.pipelines.preBatch(d);if(d.isFilled){var m=l.fillTint,n=c.getTintAppendFloatAlpha(d.fillColor,d.fillAlpha*g);m.TL=n;m.TR=n;m.BL=n;m.BR=n;l.batchFillRect(-e,-k,d.width,d.height)}d.isStroked&&f(l,d,g,e,k);b.pipelines.postBatch(d)}},function(p,u,a){var h=
a(48),f=a(60),c=a(30);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.currentContext;c(b,l,d,g,e)&&(b=d._displayOriginX,g=d._displayOriginY,d.isFilled&&(h(l,d),l.fillRect(-b,-g,d.width,d.height)),d.isStroked&&(f(l,d),l.beginPath(),l.rect(-b,-g,d.width,d.height),l.stroke()),l.restore())}},function(p,u,a){a(1);a(1);u=a(1125);a=a(1126);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(114),f=a(19),c=a(81);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline);
e=f(d,g,e);e=l.calcMatrix.copyFrom(e.calc);var k=d._displayOriginX,m=d._displayOriginY;g=g.alpha*d.alpha;b.pipelines.preBatch(d);d.isFilled&&h(l,e,d,g,k,m);d.isStroked&&c(l,d,g,k,m);b.pipelines.postBatch(d)}},function(p,u,a){var h=a(48),f=a(60),c=a(30);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.currentContext;if(c(b,l,d,g,e)){b=d._displayOriginX;g=d._displayOriginY;e=d.pathData;var k=e.length-1,m=e[0]-b,n=e[1]-g;l.beginPath();l.moveTo(m,n);d.closePath||(k-=2);for(m=2;m<k;m+=2)l.lineTo(e[m]-
b,e[m+1]-g);l.closePath();d.isFilled&&(h(l,d),l.fill());d.isStroked&&(f(l,d),l.stroke());l.restore()}}},function(p,u,a){a(1);a(1);u=a(1128);a=a(1129);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19),f=a(81),c=a(12);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.pipelines.set(d.pipeline);e=h(d,g,e);l.calcMatrix.copyFrom(e.calc);var k=d._displayOriginX,m=d._displayOriginY;g=g.alpha*d.alpha;b.pipelines.preBatch(d);if(d.isFilled){var n=l.fillTint,q=c.getTintAppendFloatAlpha(d.fillColor,
d.fillAlpha*g);n.TL=q;n.TR=q;n.BL=q;n.BR=q;l.batchFillTriangle(d.geom.x1-k,d.geom.y1-m,d.geom.x2-k,d.geom.y2-m,d.geom.x3-k,d.geom.y3-m,e.sprite,e.camera)}d.isStroked&&f(l,d,g,k,m);b.pipelines.postBatch(d)}},function(p,u,a){var h=a(48),f=a(60),c=a(30);p.exports=function(b,d,g,e){g.addToRenderList(d);var l=b.currentContext;if(c(b,l,d,g,e)){var k=d._displayOriginX,m=d._displayOriginY;b=d.geom.x1-k;g=d.geom.y1-m;e=d.geom.x2-k;var n=d.geom.y2-m;k=d.geom.x3-k;m=d.geom.y3-m;l.beginPath();l.moveTo(b,g);l.lineTo(e,
n);l.lineTo(k,m);l.closePath();d.isFilled&&(h(l,d),l.fill());d.isStroked&&(f(l,d),l.stroke());l.restore()}}},function(p,u,a){var h=a(213);a(5).register("blitter",function(f,c,b,d){return this.displayList.add(new h(this.scene,f,c,b,d))})},function(p,u,a){var h=a(214);a(5).register("container",function(f,c,b){return this.displayList.add(new h(this.scene,f,c,b))})},function(p,u,a){var h=a(442);a(5).register("dom",function(f,c,b,d,g){f=new h(this.scene,f,c,b,d,g);this.displayList.add(f);return f})},function(p,
u,a){var h=a(215);a(5).register("dynamicBitmapText",function(f,c,b,d,g){return this.displayList.add(new h(this.scene,f,c,b,d,g))})},function(p,u,a){var h=a(444);a(5).register("extern",function(){var f=new h(this.scene);this.displayList.add(f);return f})},function(p,u,a){var h=a(216);a(5).register("graphics",function(f){return this.displayList.add(new h(this.scene,f))})},function(p,u,a){var h=a(113);a(5).register("group",function(f,c){return this.updateList.add(new h(this.scene,f,c))})},function(p,
u,a){var h=a(125);a(5).register("image",function(f,c,b,d){return this.displayList.add(new h(this.scene,f,c,b,d))})},function(p,u,a){var h=a(219);a(5).register("layer",function(f){return this.displayList.add(new h(this.scene,f))})},function(p,u,a){p=a(5);var h=a(220);p.register("particles",function(f,c,b){return this.displayList.add(new h(this.scene,f,c,b))})},function(p,u,a){p=a(5);var h=a(457);p.register("follower",function(f,c,b,d,g){f=new h(this.scene,f,c,b,d,g);this.displayList.add(f);this.updateList.add(f);
return f})},function(p,u,a){p=a(5);var h=a(221);p.register("renderTexture",function(f,c,b,d,g,e){return this.displayList.add(new h(this.scene,f,c,b,d,g,e))})},function(p,u,a){var h=a(223);a(5).register("rope",function(f,c,b,d,g,e,l,k){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l,k))})},function(p,u,a){p=a(5);var h=a(73);p.register("sprite",function(f,c,b,d){f=new h(this.scene,f,c,b,d);this.displayList.add(f);return f})},function(p,u,a){var h=a(148);a(5).register("bitmapText",function(f,
c,b,d,g,e){return this.displayList.add(new h(this.scene,f,c,b,d,g,e))})},function(p,u,a){var h=a(224);a(5).register("text",function(f,c,b,d){return this.displayList.add(new h(this.scene,f,c,b,d))})},function(p,u,a){var h=a(225);a(5).register("tileSprite",function(f,c,b,d,g,e){return this.displayList.add(new h(this.scene,f,c,b,d,g,e))})},function(p,u,a){var h=a(129);a(5).register("zone",function(f,c,b,d){return this.displayList.add(new h(this.scene,f,c,b,d))})},function(p,u,a){var h=a(226);a(5).register("video",
function(f,c,b){return this.displayList.add(new h(this.scene,f,c,b))})},function(p,u,a){var h=a(461);p=a(5);p.register("arc",function(f,c,b,d,g,e,l,k){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l,k))});p.register("circle",function(f,c,b,d,g){return this.displayList.add(new h(this.scene,f,c,b,0,360,!1,d,g))})},function(p,u,a){p=a(5);var h=a(462);p.register("curve",function(f,c,b,d,g){return this.displayList.add(new h(this.scene,f,c,b,d,g))})},function(p,u,a){var h=a(463);a(5).register("ellipse",
function(f,c,b,d,g,e){return this.displayList.add(new h(this.scene,f,c,b,d,g,e))})},function(p,u,a){p=a(5);var h=a(464);p.register("grid",function(f,c,b,d,g,e,l,k,m,n){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l,k,m,n))})},function(p,u,a){p=a(5);var h=a(465);p.register("isobox",function(f,c,b,d,g,e,l){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l))})},function(p,u,a){p=a(5);var h=a(466);p.register("isotriangle",function(f,c,b,d,g,e,l,k){return this.displayList.add(new h(this.scene,
f,c,b,d,g,e,l,k))})},function(p,u,a){p=a(5);var h=a(467);p.register("line",function(f,c,b,d,g,e,l,k){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l,k))})},function(p,u,a){p=a(5);var h=a(468);p.register("polygon",function(f,c,b,d,g){return this.displayList.add(new h(this.scene,f,c,b,d,g))})},function(p,u,a){p=a(5);var h=a(473);p.register("rectangle",function(f,c,b,d,g,e){return this.displayList.add(new h(this.scene,f,c,b,d,g,e))})},function(p,u,a){var h=a(474);a(5).register("star",function(f,
c,b,d,g,e,l){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l))})},function(p,u,a){p=a(5);var h=a(475);p.register("triangle",function(f,c,b,d,g,e,l,k,m,n){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l,k,m,n))})},function(p,u,a){var h=a(213),f=a(28);p=a(16);var c=a(13);p.register("blitter",function(b,d){void 0===b&&(b={});var g=c(b,"key",null),e=c(b,"frame",null);g=new h(this.scene,0,0,g,e);void 0!==d&&(b.add=d);f(this.scene,g,b);return g})},function(p,u,a){var h=a(28),f=a(214);
p=a(16);var c=a(13);p.register("container",function(b,d){void 0===b&&(b={});var g=c(b,"x",0),e=c(b,"y",0),l=c(b,"children",null);g=new f(this.scene,g,e,l);void 0!==d&&(b.add=d);h(this.scene,g,b);return g})},function(p,u,a){var h=a(215),f=a(28);p=a(16);var c=a(13);p.register("dynamicBitmapText",function(b,d){void 0===b&&(b={});var g=c(b,"font",""),e=c(b,"text",""),l=c(b,"size",!1);g=new h(this.scene,0,0,g,e,l);void 0!==d&&(b.add=d);f(this.scene,g,b);return g})},function(p,u,a){p=a(16);var h=a(216);
p.register("graphics",function(f,c){void 0===f&&(f={});void 0!==c&&(f.add=c);c=new h(this.scene,f);f.add&&this.scene.sys.displayList.add(c);return c})},function(p,u,a){p=a(16);var h=a(113);p.register("group",function(f){return new h(this.scene,null,f)})},function(p,u,a){var h=a(28);p=a(16);var f=a(13),c=a(125);p.register("image",function(b,d){void 0===b&&(b={});var g=f(b,"key",null),e=f(b,"frame",null);g=new c(this.scene,0,0,g,e);void 0!==d&&(b.add=d);h(this.scene,g,b);return g})},function(p,u,a){var h=
a(28),f=a(219);p=a(16);var c=a(13);p.register("layer",function(b,d){void 0===b&&(b={});var g=c(b,"children",null);g=new f(this.scene,g);void 0!==d&&(b.add=d);h(this.scene,g,b);return g})},function(p,u,a){p=a(16);var h=a(13),f=a(2),c=a(220);p.register("particles",function(b,d){void 0===b&&(b={});var g=h(b,"key",null),e=h(b,"frame",null),l=f(b,"emitters",null);g=new c(this.scene,g,e,l);void 0!==d&&(b.add=d);f(b,"add",!1)?this.displayList.add(g):this.updateList.add(g);return g})},function(p,u,a){var h=
a(28);p=a(16);var f=a(13),c=a(221);p.register("renderTexture",function(b,d){void 0===b&&(b={});var g=f(b,"x",0),e=f(b,"y",0),l=f(b,"width",32),k=f(b,"height",32),m=f(b,"key",void 0),n=f(b,"frame",void 0);g=new c(this.scene,g,e,l,k,m,n);void 0!==d&&(b.add=d);h(this.scene,g,b);return g})},function(p,u,a){var h=a(28);p=a(16);var f=a(13),c=a(6),b=a(223);p.register("rope",function(d,g){void 0===d&&(d={});var e=f(d,"key",null),l=f(d,"frame",null),k=f(d,"horizontal",!0),m=c(d,"points",void 0),n=c(d,"colors",
void 0),q=c(d,"alphas",void 0);e=new b(this.scene,0,0,e,l,m,k,n,q);void 0!==g&&(d.add=g);h(this.scene,e,d);d.add||this.updateList.add(e);return e})},function(p,u,a){var h=a(28),f=a(439);p=a(16);var c=a(13),b=a(73);p.register("sprite",function(d,g){void 0===d&&(d={});var e=c(d,"key",null),l=c(d,"frame",null);e=new b(this.scene,0,0,e,l);void 0!==g&&(d.add=g);h(this.scene,e,d);f(e,d);return e})},function(p,u,a){var h=a(148),f=a(28);p=a(16);var c=a(13),b=a(6);p.register("bitmapText",function(d,g){void 0===
d&&(d={});var e=b(d,"font",""),l=c(d,"text",""),k=c(d,"size",!1),m=b(d,"align",0);e=new h(this.scene,0,0,e,l,k,m);void 0!==g&&(d.add=g);f(this.scene,e,d);return e})},function(p,u,a){var h=a(28);p=a(16);var f=a(13),c=a(224);p.register("text",function(b,d){void 0===b&&(b={});var g=f(b,"text",""),e=f(b,"style",null),l=f(b,"padding",null);null!==l&&(e.padding=l);g=new c(this.scene,0,0,g,e);void 0!==d&&(b.add=d);h(this.scene,g,b);g.autoRound=f(b,"autoRound",!0);g.resolution=f(b,"resolution",1);return g})},
function(p,u,a){var h=a(28);p=a(16);var f=a(13),c=a(225);p.register("tileSprite",function(b,d){void 0===b&&(b={});var g=f(b,"x",0),e=f(b,"y",0),l=f(b,"width",512),k=f(b,"height",512),m=f(b,"key",""),n=f(b,"frame","");g=new c(this.scene,g,e,l,k,m,n);void 0!==d&&(b.add=d);h(this.scene,g,b);return g})},function(p,u,a){p=a(16);var h=a(13),f=a(129);p.register("zone",function(c){var b=h(c,"x",0),d=h(c,"y",0),g=h(c,"width",1);c=h(c,"height",g);return new f(this.scene,b,d,g,c)})},function(p,u,a){var h=a(28);
p=a(16);var f=a(13),c=a(226);p.register("video",function(b,d){void 0===b&&(b={});var g=f(b,"key",null);g=new c(this.scene,0,0,g);void 0!==d&&(b.add=d);h(this.scene,g,b);b.add||this.updateList.add(g);return g})},function(p,u,a){a(1);a(1);u=a(1177);a=a(1178);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19);p.exports=function(f,c,b,d){c.shader&&(b.addToRenderList(c),f.pipelines.clear(),c.renderToTexture?c.load():(b=h(c,b,d).calc,f.width===c._rendererWidth&&f.height===c._rendererHeight||
c.projOrtho(0,f.width,f.height,0),c.load(b.matrix)),c.flush(),f.pipelines.rebind())}},function(p,u){p.exports=function(){}},function(p,u,a){a(1);a(1);u=a(1180);a=a(1181);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(19);p.exports=function(f,c,b,d){var g=c.faces,e=g.length;if(0!==e){b.addToRenderList(c);var l=f.pipelines.set(c.pipeline,c),k=h(c,b,d).calc;d=l.setGameObject(c);var m=l.vertexViewF32,n=l.vertexViewU32,q=l.vertexCount*l.currentShader.vertexComponentCount-1,r=c.tintFill,
t=[],w=c.debugCallback,v=k.a,x=k.b,y=k.c,A=k.d,B=k.e;k=k.f;var z=c.viewPosition.z,C=c.hideCCW,E=b.roundPixels,G=b.alpha*c.alpha,H=0;f.pipelines.preBatch(c);for(var I=0;I<e;I++){var K=g[I];K.isInView(b,C,z,G,v,x,y,A,B,k,E)&&(l.shouldFlush(3)&&(l.flush(),q=0),q=K.load(m,n,q,d,r),H++,l.vertexCount+=3,w&&t.push(K))}c.totalFrame+=H;w&&w.call(c,c,t);f.pipelines.postBatch(c)}}},function(p,u){p.exports=function(){}},function(p,u,a){a(1);u=a(1);a=a(1183);p.exports={renderWebGL:a,renderCanvas:u}},function(p,
u,a){var h=a(19);p.exports=function(f,c,b,d){b.addToRenderList(c);var g=f.pipelines.set(c.pipeline),e=h(c,b,d).calc,l=-c._radius,k=-c._radius,m=l+c.width,n=k+c.height;d=e.getX(0,0);var q=e.getY(0,0),r=e.getX(l,k),t=e.getY(l,k),w=e.getX(l,n);l=e.getY(l,n);var v=e.getX(m,n);n=e.getY(m,n);var x=e.getX(m,k);e=e.getY(m,k);f.pipelines.preBatch(c);g.batchPointLight(c,b,r,t,w,l,v,n,x,e,d,q);f.pipelines.postBatch(c)}},function(p,u,a){var h=a(229);a(5).register("shader",function(f,c,b,d,g,e,l){return this.displayList.add(new h(this.scene,
f,c,b,d,g,e,l))})},function(p,u,a){var h=a(230);a(5).register("mesh",function(f,c,b,d,g,e,l,k,m,n,q){return this.displayList.add(new h(this.scene,f,c,b,d,g,e,l,k,m,n,q))})},function(p,u,a){p=a(5);var h=a(150);p.register("pointlight",function(f,c,b,d,g,e){return this.displayList.add(new h(this.scene,f,c,b,d,g,e))})},function(p,u,a){var h=a(28);p=a(16);var f=a(13),c=a(229);p.register("shader",function(b,d){void 0===b&&(b={});var g=f(b,"key",null),e=f(b,"x",0),l=f(b,"y",0),k=f(b,"width",128),m=f(b,"height",
128);g=new c(this.scene,g,e,l,k,m);void 0!==d&&(b.add=d);h(this.scene,g,b);return g})},function(p,u,a){var h=a(28);p=a(16);var f=a(13),c=a(6),b=a(230);p.register("mesh",function(d,g){void 0===d&&(d={});var e=f(d,"key",null),l=f(d,"frame",null),k=c(d,"vertices",[]),m=c(d,"uvs",[]),n=c(d,"indicies",[]),q=c(d,"containsZ",!1),r=c(d,"normals",[]),t=c(d,"colors",16777215),w=c(d,"alphas",1);e=new b(this.scene,0,0,e,l,k,m,n,q,r,t,w);void 0!==g&&(d.add=g);h(this.scene,e,d);return e})},function(p,u,a){var h=
a(28);p=a(16);var f=a(13),c=a(150);p.register("pointlight",function(b,d){void 0===b&&(b={});var g=f(b,"color",16777215),e=f(b,"radius",128),l=f(b,"intensity",1),k=f(b,"attenuation",.1);g=new c(this.scene,0,0,g,e,l,k);void 0!==d&&(b.add=d);h(this.scene,g,b);return g})},function(p,u,a){var h=a(0),f=a(482);u=a(24);var c=a(20);a=new h({Extends:f,initialize:function(b){this.scene=b;this.systems=b.sys;if(!b.sys.settings.isBooted)b.sys.events.once(c.BOOT,this.boot,this);f.call(this)},boot:function(){var b=
this.systems.events;b.on(c.SHUTDOWN,this.shutdown,this);b.on(c.DESTROY,this.destroy,this)},destroy:function(){this.shutdown();this.systems=this.scene=void 0}});u.register("LightsPlugin",a,"lights");p.exports=a},function(p,u,a){u=a(65);u.Area=a(1192);u.Circumference=a(302);u.CircumferencePoint=a(169);u.Clone=a(1193);u.Contains=a(66);u.ContainsPoint=a(1194);u.ContainsRect=a(1195);u.CopyFrom=a(1196);u.Equals=a(1197);u.GetBounds=a(1198);u.GetPoint=a(300);u.GetPoints=a(301);u.Offset=a(1199);u.OffsetPoint=
a(1200);u.Random=a(170);p.exports=u},function(p,u){p.exports=function(a){return 0<a.radius?Math.PI*a.radius*a.radius:0}},function(p,u,a){var h=a(65);p.exports=function(f){return new h(f.x,f.y,f.radius)}},function(p,u,a){var h=a(66);p.exports=function(f,c){return h(f,c.x,c.y)}},function(p,u,a){var h=a(66);p.exports=function(f,c){return h(f,c.x,c.y)&&h(f,c.right,c.y)&&h(f,c.x,c.bottom)&&h(f,c.right,c.bottom)}},function(p,u){p.exports=function(a,h){return h.setTo(a.x,a.y,a.radius)}},function(p,u){p.exports=
function(a,h){return a.x===h.x&&a.y===h.y&&a.radius===h.radius}},function(p,u,a){var h=a(10);p.exports=function(f,c){void 0===c&&(c=new h);c.x=f.left;c.y=f.top;c.width=f.diameter;c.height=f.diameter;return c}},function(p,u){p.exports=function(a,h,f){a.x+=h;a.y+=f;return a}},function(p,u){p.exports=function(a,h){a.x+=h.x;a.y+=h.y;return a}},function(p,u,a){u=a(111);u.Area=a(1202);u.Circumference=a(447);u.CircumferencePoint=a(218);u.Clone=a(1203);u.Contains=a(112);u.ContainsPoint=a(1204);u.ContainsRect=
a(1205);u.CopyFrom=a(1206);u.Equals=a(1207);u.GetBounds=a(1208);u.GetPoint=a(445);u.GetPoints=a(446);u.Offset=a(1209);u.OffsetPoint=a(1210);u.Random=a(180);p.exports=u},function(p,u){p.exports=function(a){return a.isEmpty()?0:a.getMajorRadius()*a.getMinorRadius()*Math.PI}},function(p,u,a){var h=a(111);p.exports=function(f){return new h(f.x,f.y,f.width,f.height)}},function(p,u,a){var h=a(112);p.exports=function(f,c){return h(f,c.x,c.y)}},function(p,u,a){var h=a(112);p.exports=function(f,c){return h(f,
c.x,c.y)&&h(f,c.right,c.y)&&h(f,c.x,c.bottom)&&h(f,c.right,c.bottom)}},function(p,u){p.exports=function(a,h){return h.setTo(a.x,a.y,a.width,a.height)}},function(p,u){p.exports=function(a,h){return a.x===h.x&&a.y===h.y&&a.width===h.width&&a.height===h.height}},function(p,u,a){var h=a(10);p.exports=function(f,c){void 0===c&&(c=new h);c.x=f.left;c.y=f.top;c.width=f.width;c.height=f.height;return c}},function(p,u){p.exports=function(a,h,f){a.x+=h;a.y+=f;return a}},function(p,u){p.exports=function(a,h){a.x+=
h.x;a.y+=h.y;return a}},function(p,u,a){var h=a(4),f=a(231);p.exports=function(c,b,d){void 0===d&&(d=[]);if(f(c,b)){var g=c.x,e=c.y,l=c.radius,k=b.x,m=b.y,n=b.radius;if(e===m)g=(n*n-l*l-k*k+g*g)/(2*(g-k)),b=1,c=-2*m,e=c*c-4*b*(k*k+g*g-2*k*g+m*m-n*n),0===e?d.push(new h(g,-c/(2*b))):0<e&&(d.push(new h(g,(-c+Math.sqrt(e))/(2*b))),d.push(new h(g,(-c-Math.sqrt(e))/(2*b))));else{var q=(g-k)/(e-m);k=(n*n-l*l-k*k+g*g-m*m+e*e)/(2*(e-m));b=q*q+1;c=2*e*q-2*k*q-2*g;e=c*c-4*b*(g*g+e*e+k*k-l*l-2*e*k);0===e?(g=
-c/(2*b),d.push(new h(g,k-g*q))):0<e&&(g=(-c+Math.sqrt(e))/(2*b),d.push(new h(g,k-g*q)),g=(-c-Math.sqrt(e))/(2*b),d.push(new h(g,k-g*q)))}}return d}},function(p,u,a){var h=a(232),f=a(151);p.exports=function(c,b,d){void 0===d&&(d=[]);if(f(c,b)){var g=b.getLineA(),e=b.getLineB(),l=b.getLineC();b=b.getLineD();h(g,c,d);h(e,c,d);h(l,c,d);h(b,c,d)}return d}},function(p,u,a){function h(g,e,l,k,m){d.setTo(e,l,e+Math.cos(g),l+Math.sin(g));(e=b(d,k))&&m.push(new c(e.x,e.y,g,e.w))}function f(g,e){return g.z-
e.z}var c=a(140),b=a(487),d=new (a(47));p.exports=function(g,e,l){Array.isArray(l)||(l=[l]);for(var k=[],m=[],n=0;n<l.length;n++)for(var q=l[n].points,r=0;r<q.length;r++){var t=Math.atan2(q[r].y-e,q[r].x-g);-1===m.indexOf(t)&&(h(t,g,e,l,k),h(t-1E-5,g,e,l,k),h(t+1E-5,g,e,l,k),m.push(t))}return k.sort(f)}},function(p,u,a){var h=a(10),f=a(152);p.exports=function(c,b,d){void 0===d&&(d=new h);f(c,b)&&(d.x=Math.max(c.x,b.x),d.y=Math.max(c.y,b.y),d.width=Math.min(c.right,b.right)-d.x,d.height=Math.min(c.bottom,
b.bottom)-d.y);return d}},function(p,u,a){var h=a(234),f=a(152);p.exports=function(c,b,d){void 0===d&&(d=[]);if(f(c,b)){var g=c.getLineA(),e=c.getLineB(),l=c.getLineC();c=c.getLineD();h(g,b,d);h(e,b,d);h(l,b,d);h(c,b,d)}return d}},function(p,u,a){var h=a(489),f=a(234);p.exports=function(c,b,d){void 0===d&&(d=[]);if(h(c,b)){var g=b.getLineA(),e=b.getLineB();b=b.getLineC();f(g,c,d);f(e,c,d);f(b,c,d)}return d}},function(p,u,a){var h=a(232),f=a(491);p.exports=function(c,b,d){void 0===d&&(d=[]);if(f(c,
b)){var g=c.getLineA(),e=c.getLineB();c=c.getLineC();h(g,b,d);h(e,b,d);h(c,b,d)}return d}},function(p,u,a){var h=a(494),f=a(492);p.exports=function(c,b,d){void 0===d&&(d=[]);if(h(c,b)){var g=b.getLineA(),e=b.getLineB();b=b.getLineC();f(c,g,d);f(c,e,d);f(c,b,d)}return d}},function(p,u,a){var h=a(496);p.exports=function(f,c){if(!h(f,c))return!1;var b=Math.max(c.x1,c.x2),d=Math.min(c.y1,c.y2),g=Math.max(c.y1,c.y2);return f.x>=Math.min(c.x1,c.x2)&&f.x<=b&&f.y>=d&&f.y<=g}},function(p,u){p.exports=function(a,
h,f,c,b,d){void 0===d&&(d=0);return!(h>a.right+d||f<a.left-d||c>a.bottom+d||b<a.top-d)}},function(p,u,a){u=a(47);u.Angle=a(97);u.BresenhamPoints=a(317);u.CenterOn=a(1222);u.Clone=a(1223);u.CopyFrom=a(1224);u.Equals=a(1225);u.Extend=a(1226);u.GetEasedPoints=a(1227);u.GetMidPoint=a(1228);u.GetNearestPoint=a(1229);u.GetNormal=a(1230);u.GetPoint=a(307);u.GetPoints=a(172);u.GetShortestDistance=a(1231);u.Height=a(1232);u.Length=a(67);u.NormalAngle=a(497);u.NormalX=a(1233);u.NormalY=a(1234);u.Offset=a(1235);
u.PerpSlope=a(1236);u.Random=a(173);u.ReflectAngle=a(1237);u.Rotate=a(1238);u.RotateAroundPoint=a(1239);u.RotateAroundXY=a(236);u.SetToAngle=a(1240);u.Slope=a(1241);u.Width=a(1242);p.exports=u},function(p,u){p.exports=function(a,h,f){h-=(a.x1+a.x2)/2;f-=(a.y1+a.y2)/2;a.x1+=h;a.y1+=f;a.x2+=h;a.y2+=f;return a}},function(p,u,a){var h=a(47);p.exports=function(f){return new h(f.x1,f.y1,f.x2,f.y2)}},function(p,u){p.exports=function(a,h){return h.setTo(a.x1,a.y1,a.x2,a.y2)}},function(p,u){p.exports=function(a,
h){return a.x1===h.x1&&a.y1===h.y1&&a.x2===h.x2&&a.y2===h.y2}},function(p,u,a){var h=a(67);p.exports=function(f,c,b){void 0===b&&(b=c);var d=h(f),g=f.x2-f.x1,e=f.y2-f.y1;c&&(f.x1-=g/d*c,f.y1-=e/d*c);b&&(f.x2+=g/d*b,f.y2+=e/d*b);return f}},function(p,u,a){var h=a(352),f=a(80),c=a(4);p.exports=function(b,d,g,e,l){void 0===e&&(e=0);void 0===l&&(l=[]);var k=[],m=b.x1,n=b.y1,q=b.x2-m;b=b.y2-n;d=f(d,l);var r=g-1;for(g=0;g<r;g++)l=d(g/r),k.push(new c(m+q*l,n+b*l));l=d(1);k.push(new c(m+q*l,n+b*l));if(0<
e){m=k[0];n=[m];for(g=1;g<k.length-1;g++)q=k[g],h(m,q)>=e&&(n.push(q),m=q);k=k[k.length-1];h(m,k)<e&&n.pop();n.push(k);return n}return k}},function(p,u,a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);c.x=(f.x1+f.x2)/2;c.y=(f.y1+f.y2)/2;return c}},function(p,u,a){var h=a(4);p.exports=function(f,c,b){void 0===b&&(b=new h);var d=f.x1,g=f.y1,e=f.x2;f=f.y2;var l=(e-d)*(e-d)+(f-g)*(f-g);if(0===l)return b;c=((c.x-d)*(e-d)+(c.y-g)*(f-g))/l;b.x=d+c*(e-d);b.y=g+c*(f-g);return b}},function(p,u,a){var h=
a(14),f=a(97),c=a(4);p.exports=function(b,d){void 0===d&&(d=new c);b=f(b)-h.TAU;d.x=Math.cos(b);d.y=Math.sin(b);return d}},function(p,u){p.exports=function(a,h){var f=a.x1,c=a.y1,b=a.x2;a=a.y2;var d=(b-f)*(b-f)+(a-c)*(a-c);return 0===d?!1:Math.abs(((c-h.y)*(b-f)-(f-h.x)*(a-c))/d)*Math.sqrt(d)}},function(p,u){p.exports=function(a){return Math.abs(a.y1-a.y2)}},function(p,u,a){var h=a(14),f=a(97);p.exports=function(c){return Math.cos(f(c)-h.TAU)}},function(p,u,a){var h=a(14),f=a(97);p.exports=function(c){return Math.sin(f(c)-
h.TAU)}},function(p,u){p.exports=function(a,h,f){a.x1+=h;a.y1+=f;a.x2+=h;a.y2+=f;return a}},function(p,u){p.exports=function(a){return-((a.x2-a.x1)/(a.y2-a.y1))}},function(p,u,a){var h=a(97),f=a(497);p.exports=function(c,b){return 2*f(b)-Math.PI-h(c)}},function(p,u,a){var h=a(236);p.exports=function(f,c){return h(f,(f.x1+f.x2)/2,(f.y1+f.y2)/2,c)}},function(p,u,a){var h=a(236);p.exports=function(f,c,b){return h(f,c.x,c.y,b)}},function(p,u){p.exports=function(a,h,f,c,b){a.x1=h;a.y1=f;a.x2=h+Math.cos(c)*
b;a.y2=f+Math.sin(c)*b;return a}},function(p,u){p.exports=function(a){return(a.y2-a.y1)/(a.x2-a.x1)}},function(p,u){p.exports=function(a){return Math.abs(a.x1-a.x2)}},function(p,u,a){u={Face:a(116),GenerateGridVerts:a(1244),GenerateObjVerts:a(480),GenerateVerts:a(479),ParseObj:a(498),ParseObjMaterial:a(499),RotateFace:a(1245),Vertex:a(117)};p.exports=u},function(p,u,a){var h=a(116),f=a(2);u=a(69);var c=a(39),b=a(117),d=new c,g=new c,e=new u;p.exports=function(l){var k=f(l,"mesh"),m=f(l,"texture",
null),n=f(l,"frame"),q=f(l,"width",1),r=f(l,"height",q),t=f(l,"widthSegments",1),w=f(l,"heightSegments",t),v=f(l,"x",0),x=f(l,"y",0),y=f(l,"z",0),A=f(l,"rotateX",0),B=f(l,"rotateY",0),z=f(l,"rotateZ",0),C=f(l,"zIsUp",!0),E=f(l,"isOrtho",k?k.dirtyCache[11]:!1),G=f(l,"colors",[16777215]),H=f(l,"alphas",[1]),I=f(l,"tile",!1),K=f(l,"flipY",!1),O=f(l,"width",null);l={faces:[],verts:[]};d.set(v,x,y);g.set(A,B,z);e.fromRotationXYTranslation(g,d,C);if(!m&&k)m=k.texture;else if(k&&"string"===typeof m)m=k.scene.sys.textures.get(m);
else return l;y=m.get(n);!O&&E&&m&&k&&(q=y.width/k.height,r=y.height/k.height);A=q/2;B=r/2;t=Math.floor(t);w=Math.floor(w);m=t+1;z=w+1;C=q/t;O=r/w;r=[];q=[];E=0;n=1;v=0;x=1;y&&(E=y.u0,n=y.u1,K?(v=y.v1,x=y.v0):(v=y.v0,x=y.v1));var R=n-E,F=x-v;for(y=0;y<z;y++){var J=y*O-B;for(K=0;K<m;K++)q.push(K*C-A,-J),r.push(E+K/t*R,v+y/w*F)}Array.isArray(G)||(G=[G]);Array.isArray(H)||(H=[H]);for(y=B=A=0;y<w;y++)for(K=0;K<t;K++){R=2*(K+m*y);var N=2*(K+m*(y+1)),Q=2*(K+1+m*(y+1));z=2*(K+1+m*y);C=G[B];O=H[A];R=(new b(q[R],
q[R+1],0,r[R],r[R+1],C,O)).transformMat4(e);F=(new b(q[N],q[N+1],0,r[N],r[N+1],C,O)).transformMat4(e);J=(new b(q[z],q[z+1],0,r[z],r[z+1],C,O)).transformMat4(e);N=(new b(q[N],q[N+1],0,r[N],r[N+1],C,O)).transformMat4(e);Q=(new b(q[Q],q[Q+1],0,r[Q],r[Q+1],C,O)).transformMat4(e);z=(new b(q[z],q[z+1],0,r[z],r[z+1],C,O)).transformMat4(e);I&&(R.setUVs(E,x),F.setUVs(E,v),J.setUVs(n,x),N.setUVs(E,v),Q.setUVs(n,v),z.setUVs(n,x));B++;B===G.length&&(B=0);A++;A===H.length&&(A=0);l.verts.push(R,F,J,N,Q,z);l.faces.push(new h(R,
F,J),new h(N,Q,z))}k&&(k.faces=k.faces.concat(l.faces),k.vertices=k.vertices.concat(l.verts));return l}},function(p,u){p.exports=function(a,h,f,c){if(void 0===f&&void 0===c){var b=a.getInCenter();var d=b.x;b=b.y}f=Math.cos(h);h=Math.sin(h);c=a.vertex1;var g=a.vertex2;a=a.vertex3;var e=c.x-d,l=c.y-b;c.set(e*f-l*h+d,e*h+l*f+b);e=g.x-d;l=g.y-b;g.set(e*f-l*h+d,e*h+l*f+b);e=a.x-d;l=a.y-b;a.set(e*f-l*h+d,e*h+l*f+b)}},function(p,u,a){u=a(4);u.Ceil=a(1247);u.Clone=a(1248);u.CopyFrom=a(1249);u.Equals=a(1250);
u.Floor=a(1251);u.GetCentroid=a(1252);u.GetMagnitude=a(500);u.GetMagnitudeSq=a(501);u.GetRectangleFromPoints=a(1253);u.Interpolate=a(1254);u.Invert=a(1255);u.Negative=a(1256);u.Project=a(1257);u.ProjectUnit=a(1258);u.SetMagnitude=a(1259);p.exports=u},function(p,u){p.exports=function(a){return a.setTo(Math.ceil(a.x),Math.ceil(a.y))}},function(p,u,a){var h=a(4);p.exports=function(f){return new h(f.x,f.y)}},function(p,u){p.exports=function(a,h){return h.setTo(a.x,a.y)}},function(p,u){p.exports=function(a,
h){return a.x===h.x&&a.y===h.y}},function(p,u){p.exports=function(a){return a.setTo(Math.floor(a.x),Math.floor(a.y))}},function(p,u,a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);if(!Array.isArray(f))throw Error("GetCentroid points argument must be an array");var b=f.length;if(1>b)throw Error("GetCentroid points array must not be empty");if(1===b)c.x=f[0].x,c.y=f[0].y;else{for(var d=0;d<b;d++)c.x+=f[d].x,c.y+=f[d].y;c.x/=b;c.y/=b}return c}},function(p,u,a){var h=a(10);p.exports=function(f,
c){void 0===c&&(c=new h);for(var b=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,l=0;l<f.length;l++){var k=f[l];k.x>b&&(b=k.x);k.x<d&&(d=k.x);k.y>g&&(g=k.y);k.y<e&&(e=k.y)}c.x=d;c.y=e;c.width=b-d;c.height=g-e;return c}},function(p,u,a){var h=a(4);p.exports=function(f,c,b,d){void 0===b&&(b=0);void 0===d&&(d=new h);d.x=f.x+(c.x-f.x)*b;d.y=f.y+(c.y-f.y)*b;return d}},function(p,u){p.exports=function(a){return a.setTo(a.y,a.x)}},function(p,u,
a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);return c.setTo(-f.x,-f.y)}},function(p,u,a){var h=a(4),f=a(501);p.exports=function(c,b,d){void 0===d&&(d=new h);c=(c.x*b.x+c.y*b.y)/f(b);0!==c&&(d.x=c*b.x,d.y=c*b.y);return d}},function(p,u,a){var h=a(4);p.exports=function(f,c,b){void 0===b&&(b=new h);f=f.x*c.x+f.y*c.y;0!==f&&(b.x=f*c.x,b.y=f*c.y);return b}},function(p,u,a){var h=a(500);p.exports=function(f,c){if(0!==f.x||0!==f.y){var b=h(f);f.x/=b;f.y/=b}f.x*=c;f.y*=c;return f}},function(p,
u,a){u=a(227);u.Clone=a(1261);u.Contains=a(228);u.ContainsPoint=a(1262);u.Earcut=a(59);u.GetAABB=a(469);u.GetNumberArray=a(1263);u.GetPoints=a(470);u.Perimeter=a(471);u.Reverse=a(1264);u.Simplify=a(1265);u.Smooth=a(472);u.Translate=a(1266);p.exports=u},function(p,u,a){var h=a(227);p.exports=function(f){return new h(f.points)}},function(p,u,a){var h=a(228);p.exports=function(f,c){return h(f,c.x,c.y)}},function(p,u){p.exports=function(a,h){void 0===h&&(h=[]);for(var f=0;f<a.points.length;f++)h.push(a.points[f].x),
h.push(a.points[f].y);return h}},function(p,u){p.exports=function(a){a.points.reverse();return a}},function(p,u){function a(h,f,c,b,d){for(var g=b,e,l=f+1;l<c;l++){var k=h[l];var m=h[f],n=h[c],q=m.x;m=m.y;var r=n.x-q,t=n.y-m;if(0!==r||0!==t){var w=((k.x-q)*r+(k.y-m)*t)/(r*r+t*t);1<w?(q=n.x,m=n.y):0<w&&(q+=r*w,m+=t*w)}r=k.x-q;t=k.y-m;k=r*r+t*t;k>g&&(e=l,g=k)}g>b&&(1<e-f&&a(h,f,e,b,d),d.push(h[e]),1<c-e&&a(h,e,c,b,d))}p.exports=function(h,f,c){void 0===f&&(f=1);void 0===c&&(c=!1);var b=h.points;if(2<
b.length){f*=f;if(!c){c=b[0];for(var d=[c],g,e=1,l=b.length;e<l;e++){g=b[e];var k=g.x-c.x,m=g.y-c.y;k*k+m*m>f&&(d.push(g),c=g)}c!==g&&d.push(g);b=d}g=h.setTo;c=b.length-1;d=[b[0]];a(b,0,c,f,d);d.push(b[c]);g.call(h,d)}return h}},function(p,u){p.exports=function(a,h,f){for(var c=a.points,b=0;b<c.length;b++)c[b].x+=h,c[b].y+=f;return a}},function(p,u){p.exports=function(a){return a.width*a.height}},function(p,u){p.exports=function(a){a.x=Math.ceil(a.x);a.y=Math.ceil(a.y);return a}},function(p,u){p.exports=
function(a){a.x=Math.ceil(a.x);a.y=Math.ceil(a.y);a.width=Math.ceil(a.width);a.height=Math.ceil(a.height);return a}},function(p,u,a){var h=a(10);p.exports=function(f){return new h(f.x,f.y,f.width,f.height)}},function(p,u,a){var h=a(57);p.exports=function(f,c){return h(f,c.x,c.y)}},function(p,u){p.exports=function(a,h){return h.setTo(a.x,a.y,a.width,a.height)}},function(p,u){p.exports=function(a,h){return a.x===h.x&&a.y===h.y&&a.width===h.width&&a.height===h.height}},function(p,u,a){var h=a(237);p.exports=
function(f,c){var b=h(f);b<h(c)?f.setSize(c.height*b,c.height):f.setSize(c.width,c.width/b);return f.setPosition(c.centerX-f.width/2,c.centerY-f.height/2)}},function(p,u,a){var h=a(237);p.exports=function(f,c){var b=h(f);b>h(c)?f.setSize(c.height*b,c.height):f.setSize(c.width,c.width/b);return f.setPosition(c.centerX-f.width/2,c.centerY-f.height/2)}},function(p,u){p.exports=function(a){a.x=Math.floor(a.x);a.y=Math.floor(a.y);return a}},function(p,u){p.exports=function(a){a.x=Math.floor(a.x);a.y=Math.floor(a.y);
a.width=Math.floor(a.width);a.height=Math.floor(a.height);return a}},function(p,u,a){var h=a(10);p.exports=function(f,c,b,d,g){void 0===g&&(g=new h);return g.setTo(Math.min(f,b),Math.min(c,d),Math.abs(f-b),Math.abs(c-d))}},function(p,u,a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);c.x=f.centerX;c.y=f.centerY;return c}},function(p,u,a){var h=a(4);p.exports=function(f,c){void 0===c&&(c=new h);c.x=f.width;c.y=f.height;return c}},function(p,u,a){var h=a(190);p.exports=function(f,c,b){var d=
f.centerX,g=f.centerY;f.setSize(f.width+2*c,f.height+2*b);return h(f,d,g)}},function(p,u,a){var h=a(10),f=a(152);p.exports=function(c,b,d){void 0===d&&(d=new h);f(c,b)?(d.x=Math.max(c.x,b.x),d.y=Math.max(c.y,b.y),d.width=Math.min(c.right,b.right)-d.x,d.height=Math.min(c.bottom,b.bottom)-d.y):d.setEmpty();return d}},function(p,u){p.exports=function(a,h){for(var f=a.x,c=a.right,b=a.y,d=a.bottom,g=0;g<h.length;g++)f=Math.min(f,h[g].x),c=Math.max(c,h[g].x),b=Math.min(b,h[g].y),d=Math.max(d,h[g].y);a.x=
f;a.y=b;a.width=c-f;a.height=d-b;return a}},function(p,u){p.exports=function(a,h){var f=Math.min(a.x,h.x),c=Math.max(a.right,h.right);a.x=f;a.width=c-f;f=Math.min(a.y,h.y);h=Math.max(a.bottom,h.bottom);a.y=f;a.height=h-f;return a}},function(p,u){p.exports=function(a,h,f){var c=Math.min(a.x,h);h=Math.max(a.right,h);a.x=c;a.width=h-c;c=Math.min(a.y,f);f=Math.max(a.bottom,f);a.y=c;a.height=f-c;return a}},function(p,u){p.exports=function(a,h,f){a.x+=h;a.y+=f;return a}},function(p,u){p.exports=function(a,
h){a.x+=h.x;a.y+=h.y;return a}},function(p,u){p.exports=function(a,h){return a.x<h.right&&a.right>h.x&&a.y<h.bottom&&a.bottom>h.y}},function(p,u,a){var h=a(4),f=a(36);p.exports=function(c,b,d){void 0===d&&(d=new h);b=f(b);var g=Math.sin(b);b=Math.cos(b);var e=0<b?c.width/2:c.width/-2,l=0<g?c.height/2:c.height/-2;Math.abs(e*g)<Math.abs(l*b)?l=e*g/b:e=l*b/g;d.x=e+c.centerX;d.y=l+c.centerY;return d}},function(p,u,a){var h=a(195),f=a(503),c=a(4);p.exports=function(b,d,g){void 0===g&&(g=new c);if(f(b,
d))switch(h(0,3)){case 0:g.x=b.x+Math.random()*(d.right-b.x);g.y=b.y+Math.random()*(d.top-b.y);break;case 1:g.x=d.x+Math.random()*(b.right-d.x);g.y=d.bottom+Math.random()*(b.bottom-d.bottom);break;case 2:g.x=b.x+Math.random()*(d.x-b.x);g.y=d.y+Math.random()*(b.bottom-d.y);break;case 3:g.x=d.right+Math.random()*(b.right-d.right),g.y=b.y+Math.random()*(d.bottom-b.y)}return g}},function(p,u){p.exports=function(a,h){return a.width===h.width&&a.height===h.height}},function(p,u){p.exports=function(a,h,
f){void 0===f&&(f=h);a.width*=h;a.height*=f;return a}},function(p,u,a){u=a(82);u.Area=a(1294);u.BuildEquilateral=a(1295);u.BuildFromPolygon=a(1296);u.BuildRight=a(1297);u.CenterOn=a(1298);u.Centroid=a(504);u.CircumCenter=a(1299);u.CircumCircle=a(1300);u.Clone=a(1301);u.Contains=a(115);u.ContainsArray=a(235);u.ContainsPoint=a(1302);u.CopyFrom=a(1303);u.Decompose=a(495);u.Equals=a(1304);u.GetPoint=a(476);u.GetPoints=a(477);u.InCenter=a(506);u.Perimeter=a(1305);u.Offset=a(505);u.Random=a(181);u.Rotate=
a(1306);u.RotateAroundPoint=a(1307);u.RotateAroundXY=a(238);p.exports=u},function(p,u){p.exports=function(a){var h=a.x1,f=a.y1;return Math.abs(((a.x3-h)*(a.y2-f)-(a.x2-h)*(a.y3-f))/2)}},function(p,u,a){var h=a(82);p.exports=function(f,c,b){var d=Math.sqrt(3)/2*b;return new h(f,c,f+b/2,c+d,f-b/2,c+d)}},function(p,u,a){var h=a(59),f=a(82);p.exports=function(c,b,d,g,e){void 0===b&&(b=null);void 0===d&&(d=1);void 0===g&&(g=1);void 0===e&&(e=[]);b=h(c,b);for(var l,k,m,n,q,r,t=0;t<b.length;t+=3)l=b[t],
k=b[t+1],m=b[t+2],n=c[2*l]*d,l=c[2*l+1]*g,q=c[2*k]*d,k=c[2*k+1]*g,r=c[2*m]*d,m=c[2*m+1]*g,e.push(new f(n,l,q,k,r,m));return e}},function(p,u,a){var h=a(82);p.exports=function(f,c,b,d){void 0===d&&(d=b);return new h(f,c,f,c-d,f+b,c)}},function(p,u,a){var h=a(504),f=a(505);p.exports=function(c,b,d,g){void 0===g&&(g=h);g=g(c);return f(c,b-g.x,d-g.y)}},function(p,u,a){var h=a(3);p.exports=function(f,c){void 0===c&&(c=new h);var b=f.x3,d=f.y3,g=f.x1-b,e=f.y1-d,l=f.x2-b;f=f.y2-d;var k=2*(g*f-e*l);c.x=b-
(e*(l*l+f*f)-(g*g+e*e)*f)/k;c.y=d+(g*(l*l+f*f)-(g*g+e*e)*l)/k;return c}},function(p,u,a){var h=a(65);p.exports=function(f,c){void 0===c&&(c=new h);var b=f.x1,d=f.y1,g=f.x2,e=f.y2,l=f.x3;f=f.y3;var k=g-b,m=e-d,n=l-b,q=f-d,r=k*(b+g)+m*(d+e),t=n*(b+l)+q*(d+f),w=2*(k*(f-e)-m*(l-g));1E-6>Math.abs(w)?(k=Math.min(b,g,l),m=Math.min(d,e,f),b=.5*(Math.max(b,g,l)-k),d=.5*(Math.max(d,e,f)-m),c.x=k+b,c.y=m+d):(c.x=(q*r-m*t)/w,c.y=(k*t-n*r)/w,b=c.x-b,d=c.y-d);c.radius=Math.sqrt(b*b+d*d);return c}},function(p,u,
a){var h=a(82);p.exports=function(f){return new h(f.x1,f.y1,f.x2,f.y2,f.x3,f.y3)}},function(p,u,a){var h=a(115);p.exports=function(f,c){return h(f,c.x,c.y)}},function(p,u){p.exports=function(a,h){return h.setTo(a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)}},function(p,u){p.exports=function(a,h){return a.x1===h.x1&&a.y1===h.y1&&a.x2===h.x2&&a.y2===h.y2&&a.x3===h.x3&&a.y3===h.y3}},function(p,u,a){var h=a(67);p.exports=function(f){var c=f.getLineA(),b=f.getLineB();f=f.getLineC();return h(c)+h(b)+h(f)}},function(p,
u,a){var h=a(238),f=a(506);p.exports=function(c,b){var d=f(c);return h(c,d.x,d.y,b)}},function(p,u,a){var h=a(238);p.exports=function(f,c,b){return h(f,c.x,c.y,b)}},function(p,u,a){u=a(203);var h=a(17);a={CreatePixelPerfectHandler:a(507),CreateInteractiveObject:a(508),Events:a(51),Gamepad:a(1309),InputManager:a(409),InputPlugin:a(1321),InputPluginCache:a(153),Keyboard:a(1322),Mouse:a(1336),Pointer:a(412),Touch:a(1337)};a=h(!1,a,u);p.exports=a},function(p,u,a){p.exports={Axis:a(509),Button:a(510),
Events:a(239),Gamepad:a(511),GamepadPlugin:a(1316),Configs:a(1317)}},function(p,u){p.exports="down"},function(p,u){p.exports="up"},function(p,u){p.exports="connected"},function(p,u){p.exports="disconnected"},function(p,u){p.exports="down"},function(p,u){p.exports="up"},function(p,u,a){var h=a(0),f=a(9),c=a(239),b=a(511),d=a(6);u=a(153);var g=a(51);a=new h({Extends:f,initialize:function(e){f.call(this);this.scene=e.scene;this.settings=this.scene.sys.settings;this.sceneInputPlugin=e;this.enabled=!0;
this.gamepads=[];this.queue=[];e.pluginEvents.once(g.BOOT,this.boot,this);e.pluginEvents.on(g.START,this.start,this)},boot:function(){var e=this.scene.sys.game,l=this.settings.input,k=e.config;this.enabled=d(l,"gamepad",k.inputGamepad)&&e.device.input.gamepads;this.target=d(l,"gamepad.target",k.inputGamepadEventTarget);this.sceneInputPlugin.pluginEvents.once(g.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads());this.sceneInputPlugin.pluginEvents.once(g.SHUTDOWN,
this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var e=this,l=this.target,k=function(m){!m.defaultPrevented&&e.isActive()&&(e.refreshPads(),e.queue.push(m))};this.onGamepadHandler=k;l.addEventListener("gamepadconnected",k,!1);l.addEventListener("gamepaddisconnected",k,!1);this.sceneInputPlugin.pluginEvents.on(g.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler);
this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler);this.sceneInputPlugin.pluginEvents.off(g.UPDATE,this.update);for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].removeAllListeners()},disconnectAll:function(){for(var e=0;e<this.gamepads.length;e++)this.gamepads[e].pad.connected=!1},refreshPads:function(){var e=navigator.getGamepads();if(e)for(var l=this.gamepads,k=0;k<e.length;k++){var m=e[k];if(m){var n=m.id,q=m.index,r=l[q];r?r.id!==n?(r.destroy(),l[q]=new b(this,
m)):r.update(m):(m=new b(this,m),l[q]=m,this._pad1)?this._pad2?this._pad3?this._pad4||(this._pad4=m):this._pad3=m:this._pad2=m:this._pad1=m}}else this.disconnectAll()},getAll:function(){for(var e=[],l=this.gamepads,k=0;k<l.length;k++)l[k]&&e.push(l[k]);return e},getPad:function(e){for(var l=this.gamepads,k=0;k<l.length;k++)if(l[k]&&l[k].index===e)return l[k]},update:function(){if(this.enabled){this.refreshPads();var e=this.queue.length;if(0!==e)for(var l=this.queue.splice(0,e),k=0;k<e;k++){var m=
l[k],n=this.getPad(m.gamepad.index);"gamepadconnected"===m.type?this.emit(c.CONNECTED,n,m):"gamepaddisconnected"===m.type&&this.emit(c.DISCONNECTED,n,m)}}},shutdown:function(){this.stopListeners();this.removeAllListeners()},destroy:function(){this.shutdown();for(var e=0;e<this.gamepads.length;e++)this.gamepads[e]&&this.gamepads[e].destroy();this.gamepads=[];this.target=this.sceneInputPlugin=this.settings=this.scene=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},
pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});u.register("GamepadPlugin",a,"gamepad","gamepad","inputGamepad");p.exports=a},function(p,u,a){p.exports={DUALSHOCK_4:a(1318),SNES_USB:a(1319),XBOX_360:a(1320)}},function(p,u){p.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},
function(p,u){p.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(p,u){p.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(p,u,a){var h=a(65),f=a(66),c=a(0),b=a(203),d=a(508),g=a(507),e=a(50),l=a(111),k=a(112),m=a(51),n=a(9),q=a(2),r=a(56),t=a(153),w=a(7);u=a(24);var v=a(10),x=a(57),y=a(20),A=a(82),
B=a(115);a=new c({Extends:n,initialize:function(z){n.call(this);this.scene=z;this.systems=z.sys;this.settings=z.sys.settings;this.manager=z.sys.game.input;this.pluginEvents=new n;this.enabled=!0;t.install(this);this.mouse=this.manager.mouse;this.topOnly=!0;this.pollRate=-1;this._pollTimer=0;var C={cancelled:!1};this._eventContainer={stopPropagation:function(){C.cancelled=!0}};this._eventData=C;this.dragTimeThreshold=this.dragDistanceThreshold=0;this._temp=[];this._tempZones=[];this._list=[];this._pendingInsertion=
[];this._pendingRemoval=[];this._draggable=[];this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._dragState=[];this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]};this._validTypes="onDown onUp onOver onOut onMove onDragStart onDrag onDragEnd onDragEnter onDragLeave onDragOver onDrop".split(" ");this._updatedThisFrame=!1;z.sys.events.once(y.BOOT,this.boot,this);z.sys.events.on(y.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras;this.displayList=
this.systems.displayList;this.systems.events.once(y.DESTROY,this.destroy,this);this.pluginEvents.emit(m.BOOT)},start:function(){var z=this.systems.events;z.on(y.TRANSITION_START,this.transitionIn,this);z.on(y.TRANSITION_OUT,this.transitionOut,this);z.on(y.TRANSITION_COMPLETE,this.transitionComplete,this);z.on(y.PRE_UPDATE,this.preUpdate,this);z.once(y.SHUTDOWN,this.shutdown,this);this.manager.events.on(m.GAME_OUT,this.onGameOut,this);this.manager.events.on(m.GAME_OVER,this.onGameOver,this);this.enabled=
!0;this._dragState=[0,0,0,0,0,0,0,0,0,0];this.pluginEvents.emit(m.START)},onGameOver:function(z){this.isActive()&&this.emit(m.GAME_OVER,z.timeStamp,z)},onGameOut:function(z){this.isActive()&&this.emit(m.GAME_OUT,z.timeStamp,z)},preUpdate:function(){this.pluginEvents.emit(m.PRE_UPDATE);var z=this._pendingRemoval,C=this._pendingInsertion,E=z.length,G=C.length;if(0!==E||0!==G){G=this._list;for(var H=0;H<E;H++){var I=z[H],K=G.indexOf(I);-1<K&&(G.splice(K,1),this.clear(I,!0))}z.length=0;this._pendingRemoval.length=
0;this._list=G.concat(C.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(z,C){if(!this.isActive())return!1;this.pluginEvents.emit(m.UPDATE,z,C);if(this._updatedThisFrame)return this._updatedThisFrame=!1;var E,G=this.manager,H=G.pointers;G=G.pointersTotal;for(E=0;E<G;E++)H[E].updateMotion();if(0===this._list.length)return!1;E=this.pollRate;if(-1===E)return!1;if(0<E)if(this._pollTimer-=C,0>this._pollTimer)this._pollTimer=this.pollRate;else return!1;
C=!1;for(E=0;E<G;E++){var I=0,K=H[E];this._tempZones=[];this._temp=this.hitTestPointer(K);this.sortGameObjects(this._temp,K);this.sortDropZones(this._tempZones);this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1));I+=this.processOverOutEvents(K);2===this.getDragState(K)&&this.processDragThresholdEvent(K,z);0<I&&(C=!0)}return C},update:function(z,C){if(!this.isActive())return!1;for(var E=C.length,G=!1,H=0;H<E;H++){var I=0,K=C[H];this._tempZones=
[];this._temp=this.hitTestPointer(K);this.sortGameObjects(this._temp,K);this.sortDropZones(this._tempZones);this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1));switch(z){case b.MOUSE_DOWN:I+=this.processDragDownEvent(K);I+=this.processDownEvents(K);I+=this.processOverOutEvents(K);break;case b.MOUSE_UP:I+=this.processDragUpEvent(K);I+=this.processUpEvents(K);I+=this.processOverOutEvents(K);break;case b.TOUCH_START:I+=this.processDragDownEvent(K);
I+=this.processDownEvents(K);I+=this.processOverEvents(K);break;case b.TOUCH_END:case b.TOUCH_CANCEL:I+=this.processDragUpEvent(K);I+=this.processUpEvents(K);I+=this.processOutEvents(K);break;case b.MOUSE_MOVE:case b.TOUCH_MOVE:I+=this.processDragMoveEvent(K);I+=this.processMoveEvents(K);I+=this.processOverOutEvents(K);break;case b.MOUSE_WHEEL:I+=this.processWheelEvent(K)}0<I&&(G=!0)}this._updatedThisFrame=!0;return G},clear:function(z,C){void 0===C&&(C=!1);var E=z.input;if(E)return C||this.queueForRemoval(z),
E.gameObject=void 0,E.target=void 0,E.hitArea=void 0,E.hitAreaCallback=void 0,E.callbackContext=void 0,z.input=null,C=this._draggable.indexOf(z),-1<C&&this._draggable.splice(C,1),C=this._drag[0].indexOf(z),-1<C&&this._drag[0].splice(C,1),C=this._over[0].indexOf(z),-1<C&&(this._over[0].splice(C,1),this.manager.resetCursor(E)),z},disable:function(z){z.input.enabled=!1},enable:function(z,C,E,G){void 0===G&&(G=!1);z.input?z.input.enabled=!0:this.setHitArea(z,C,E);z.input&&G&&!z.input.dropZone&&(z.input.dropZone=
G);return this},hitTestPointer:function(z){for(var C=this.cameras.getCamerasBelowPointer(z),E=0;E<C.length;E++){for(var G=C[E],H=this.manager.hitTest(z,this._list,G),I=0;I<H.length;I++){var K=H[I];K.input.dropZone&&this._tempZones.push(K)}if(0<H.length)return z.camera=G,H}z.camera=C[0];return[]},processDownEvents:function(z){for(var C=0,E=this._temp,G=this._eventData,H=this._eventContainer,I=G.cancelled=!1,K=0;K<E.length;K++){var O=E[K];if(O.input){C++;O.emit(m.GAMEOBJECT_POINTER_DOWN,z,O.input.localX,
O.input.localY,H);if(G.cancelled||!O.input){I=!0;break}this.emit(m.GAMEOBJECT_DOWN,z,O,H);if(G.cancelled||!O.input){I=!0;break}}}!I&&this.manager&&(z.downElement===this.manager.game.canvas?this.emit(m.POINTER_DOWN,z,E):this.emit(m.POINTER_DOWN_OUTSIDE,z));return C},getDragState:function(z){return this._dragState[z.id]},setDragState:function(z,C){this._dragState[z.id]=C},processDragThresholdEvent:function(z,C){var E=!1,G=this.dragTimeThreshold,H=this.dragDistanceThreshold;0<H&&e(z.x,z.y,z.downX,z.downY)>=
H?E=!0:0<G&&C>=z.downTime+G&&(E=!0);if(E)return this.setDragState(z,3),this.processDragStartList(z)},processDragStartList:function(z){if(3!==this.getDragState(z))return 0;for(var C=this._drag[z.id],E=0;E<C.length;E++){var G=C[E],H=G.input;H.dragState=2;H.dragStartX=G.x;H.dragStartY=G.y;H.dragStartXGlobal=z.worldX;H.dragStartYGlobal=z.worldY;H.dragX=H.dragStartXGlobal-H.dragStartX;H.dragY=H.dragStartYGlobal-H.dragStartY;G.emit(m.GAMEOBJECT_DRAG_START,z,H.dragX,H.dragY);this.emit(m.DRAG_START,z,G)}this.setDragState(z,
4);return C.length},processDragDownEvent:function(z){var C=this._temp;if(0===this._draggable.length||0===C.length||!z.primaryDown||0!==this.getDragState(z))return 0;this.setDragState(z,1);for(var E=[],G=0;G<C.length;G++){var H=C[G];H.input.draggable&&0===H.input.dragState&&E.push(H)}if(0===E.length)return this.setDragState(z,0),0;1<E.length&&(this.sortGameObjects(E,z),this.topOnly&&E.splice(1));this._drag[z.id]=E;if(0===this.dragDistanceThreshold&&0===this.dragTimeThreshold)return this.setDragState(z,
3),this.processDragStartList(z);this.setDragState(z,2);return 0},processDragMoveEvent:function(z){2===this.getDragState(z)&&this.processDragThresholdEvent(z,this.manager.game.loop.now);if(4!==this.getDragState(z))return 0;for(var C=this._tempZones,E=this._drag[z.id],G=0;G<E.length;G++){var H=E[G],I=H.input,K=I.target;if(K){var O=C.indexOf(K);0===O?(H.emit(m.GAMEOBJECT_DRAG_OVER,z,K),this.emit(m.DRAG_OVER,z,H,K)):0<O?(H.emit(m.GAMEOBJECT_DRAG_LEAVE,z,K),this.emit(m.DRAG_LEAVE,z,H,K),I.target=C[0],
K=I.target,H.emit(m.GAMEOBJECT_DRAG_ENTER,z,K),this.emit(m.DRAG_ENTER,z,H,K)):(H.emit(m.GAMEOBJECT_DRAG_LEAVE,z,K),this.emit(m.DRAG_LEAVE,z,H,K),C[0]?(I.target=C[0],K=I.target,H.emit(m.GAMEOBJECT_DRAG_ENTER,z,K),this.emit(m.DRAG_ENTER,z,H,K)):I.target=null)}else!K&&C[0]&&(I.target=C[0],K=I.target,H.emit(m.GAMEOBJECT_DRAG_ENTER,z,K),this.emit(m.DRAG_ENTER,z,H,K));if(H.parentContainer){O=z.worldX-I.dragStartXGlobal;var R=z.worldY-I.dragStartYGlobal,F=H.getParentRotation();K=O*Math.cos(F)+R*Math.sin(F);
O=R*Math.cos(F)-O*Math.sin(F);K*=1/H.parentContainer.scaleX;O*=1/H.parentContainer.scaleY;K+=I.dragStartX;I=O+I.dragStartY}else K=z.worldX-I.dragX,I=z.worldY-I.dragY;H.emit(m.GAMEOBJECT_DRAG,z,K,I);this.emit(m.DRAG,z,H,K,I)}return E.length},processDragUpEvent:function(z){for(var C=this._drag[z.id],E=0;E<C.length;E++){var G=C[E],H=G.input;if(H&&2===H.dragState){H.dragState=0;H.dragX=H.localX-G.displayOriginX;H.dragY=H.localY-G.displayOriginY;var I=!1,K=H.target;K&&(G.emit(m.GAMEOBJECT_DROP,z,K),this.emit(m.DROP,
z,G,K),H.target=null,I=!0);G.input&&(G.emit(m.GAMEOBJECT_DRAG_END,z,H.dragX,H.dragY,I),this.emit(m.DRAG_END,z,G,I))}}this.setDragState(z,0);C.splice(0);return 0},processMoveEvents:function(z){for(var C=0,E=this._temp,G=this._eventData,H=this._eventContainer,I=G.cancelled=!1,K=0;K<E.length;K++){var O=E[K];if(O.input){C++;O.emit(m.GAMEOBJECT_POINTER_MOVE,z,O.input.localX,O.input.localY,H);if(G.cancelled||!O.input){I=!0;break}this.emit(m.GAMEOBJECT_MOVE,z,O,H);if(G.cancelled||!O.input){I=!0;break}if(this.topOnly)break}}I||
this.emit(m.POINTER_MOVE,z,E);return C},processWheelEvent:function(z){for(var C=0,E=this._temp,G=this._eventData,H=this._eventContainer,I=G.cancelled=!1,K=z.deltaX,O=z.deltaY,R=z.deltaZ,F=0;F<E.length;F++){var J=E[F];if(J.input){C++;J.emit(m.GAMEOBJECT_POINTER_WHEEL,z,K,O,R,H);if(G.cancelled||!J.input){I=!0;break}this.emit(m.GAMEOBJECT_WHEEL,z,J,K,O,R,H);if(G.cancelled||!J.input){I=!0;break}}}I||this.emit(m.POINTER_WHEEL,z,E,K,O,R);return C},processOverEvents:function(z){var C=this._temp,E=0,G=C.length,
H=[];if(0<G){for(var I=this.manager,K=this._eventData,O=this._eventContainer,R=K.cancelled=!1,F=0;F<G;F++){var J=C[F];if(J.input){H.push(J);I.setCursor(J.input);J.emit(m.GAMEOBJECT_POINTER_OVER,z,J.input.localX,J.input.localY,O);E++;if(K.cancelled||!J.input){R=!0;break}this.emit(m.GAMEOBJECT_OVER,z,J,O);if(K.cancelled||!J.input){R=!0;break}}}R||this.emit(m.POINTER_OVER,z,H)}this._over[z.id]=H;return E},processOutEvents:function(z){var C=this._over[z.id],E=0,G=C.length;if(0<G){var H=this.manager,I=
this._eventData,K=this._eventContainer;I.cancelled=!1;this.sortGameObjects(C,z);for(var O=0;O<G;O++){var R=C[O];if(R.input){H.resetCursor(R.input);R.emit(m.GAMEOBJECT_POINTER_OUT,z,K);E++;if(I.cancelled||!R.input)break;this.emit(m.GAMEOBJECT_OUT,z,R,K);if(I.cancelled||!R.input)break;this.emit(m.POINTER_OUT,z,C)}}this._over[z.id]=[]}return E},processOverOutEvents:function(z){var C=this._temp,E,G=[],H=[],I=[],K=this._over[z.id],O=this._drag[z.id],R=this.manager;for(E=0;E<K.length;E++){var F=K[E];-1===
C.indexOf(F)&&-1===O.indexOf(F)?G.push(F):I.push(F)}for(E=0;E<C.length;E++)F=C[E],-1===K.indexOf(F)&&H.push(F);K=G.length;C=0;O=this._eventData;var J=this._eventContainer,N=O.cancelled=!1;if(0<K){this.sortGameObjects(G,z);for(E=0;E<K;E++)if(F=G[E],F.input){R.resetCursor(F.input);F.emit(m.GAMEOBJECT_POINTER_OUT,z,J);C++;if(O.cancelled||!F.input){N=!0;break}this.emit(m.GAMEOBJECT_OUT,z,F,J);if(O.cancelled||!F.input){N=!0;break}}N||this.emit(m.POINTER_OUT,z,G)}K=H.length;N=O.cancelled=!1;if(0<K){this.sortGameObjects(H,
z);for(E=0;E<K;E++)if(F=H[E],F.input){R.setCursor(F.input);F.emit(m.GAMEOBJECT_POINTER_OVER,z,F.input.localX,F.input.localY,J);C++;if(O.cancelled||!F.input){N=!0;break}this.emit(m.GAMEOBJECT_OVER,z,F,J);if(O.cancelled||!F.input){N=!0;break}}N||this.emit(m.POINTER_OVER,z,H)}K=I.concat(H);this._over[z.id]=this.sortGameObjects(K,z);return C},processUpEvents:function(z){for(var C=this._temp,E=this._eventData,G=this._eventContainer,H=E.cancelled=!1,I=0;I<C.length;I++){var K=C[I];if(K.input){K.emit(m.GAMEOBJECT_POINTER_UP,
z,K.input.localX,K.input.localY,G);if(E.cancelled||!K.input){H=!0;break}this.emit(m.GAMEOBJECT_UP,z,K,G);if(E.cancelled||!K.input){H=!0;break}}}!H&&this.manager&&(z.upElement===this.manager.game.canvas?this.emit(m.POINTER_UP,z,C):this.emit(m.POINTER_UP_OUTSIDE,z));return C.length},queueForInsertion:function(z){-1===this._pendingInsertion.indexOf(z)&&-1===this._list.indexOf(z)&&this._pendingInsertion.push(z);return this},queueForRemoval:function(z){this._pendingRemoval.push(z);return this},setDraggable:function(z,
C){void 0===C&&(C=!0);Array.isArray(z)||(z=[z]);for(var E=0;E<z.length;E++){var G=z[E];G.input.draggable=C;var H=this._draggable.indexOf(G);C&&-1===H?this._draggable.push(G):!C&&-1<H&&this._draggable.splice(H,1)}return this},makePixelPerfect:function(z){void 0===z&&(z=1);return g(this.systems.textures,z)},setHitArea:function(z,C,E){if(void 0===C)return this.setHitAreaFromTexture(z);Array.isArray(z)||(z=[z]);var G=!1,H=!1,I=!1,K=!1,O=!1,R=!0;if(w(C)){var F=C;C=q(F,"hitArea",null);E=q(F,"hitAreaCallback",
null);G=q(F,"draggable",!1);H=q(F,"dropZone",!1);I=q(F,"cursor",!1);K=q(F,"useHandCursor",!1);O=q(F,"pixelPerfect",!1);F=q(F,"alphaTolerance",1);O&&(C={},E=this.makePixelPerfect(F));C&&E||(this.setHitAreaFromTexture(z),R=!1)}else"function"!==typeof C||E||(E=C,C={});for(F=0;F<z.length;F++){var J=z[F];if(O&&"Container"===J.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var N=J.input?J.input:d(J,C,E);N.customHitArea=R;N.dropZone=H;N.cursor=K?"pointer":I;J.input=
N;G&&this.setDraggable(J);this.queueForInsertion(J)}}return this},setHitAreaCircle:function(z,C,E,G,H){void 0===H&&(H=f);C=new h(C,E,G);return this.setHitArea(z,C,H)},setHitAreaEllipse:function(z,C,E,G,H,I){void 0===I&&(I=k);C=new l(C,E,G,H);return this.setHitArea(z,C,I)},setHitAreaFromTexture:function(z,C){void 0===C&&(C=x);Array.isArray(z)||(z=[z]);for(var E=0;E<z.length;E++){var G=z[E],H=G.frame,I=0,K=0;G.width?(I=G.width,K=G.height):H&&(I=H.realWidth,K=H.realHeight);"Container"!==G.type||0!==
I&&0!==K?0!==I&&0!==K&&(G.input=d(G,new v(0,0,I,K),C),this.queueForInsertion(G)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(z,C,E,G,H,I){void 0===I&&(I=x);C=new v(C,E,G,H);return this.setHitArea(z,C,I)},setHitAreaTriangle:function(z,C,E,G,H,I,K,O){void 0===O&&(O=B);C=new A(C,E,G,H,I,K);return this.setHitArea(z,C,O)},enableDebug:function(z,C){void 0===C&&(C=65280);var E=z.input;if(!E||!E.hitArea)return this;var G=
E.hitArea,H=G.type,I=E.hitAreaDebug,K=this.systems.add,O=this.systems.updateList;I&&(O.remove(I),I.destroy(),I=null);var R=0,F=0;switch(H){case r.CIRCLE:I=K.arc(0,0,G.radius);R=G.x-G.radius;F=G.y-G.radius;break;case r.ELLIPSE:I=K.ellipse(0,0,G.width,G.height);R=G.x-G.width/2;F=G.y-G.height/2;break;case r.LINE:I=K.line(0,0,G.x1,G.y1,G.x2,G.y2);break;case r.POLYGON:I=K.polygon(0,0,G.points);break;case r.RECTANGLE:I=K.rectangle(0,0,G.width,G.height);R=G.x;F=G.y;break;case r.TRIANGLE:I=K.triangle(0,0,
G.x1,G.y1,G.x2,G.y2,G.x3,G.y3)}I&&(I.isFilled=!1,I.preUpdate=function(){I.setStrokeStyle(1/z.scale,C);I.setDisplayOrigin(z.displayOriginX,z.displayOriginY);var J=z.x,N=z.y,Q=z.rotation,T=z.scaleX,S=z.scaleY;z.parentContainer&&(S=z.getWorldTransformMatrix(),J=S.tx,N=S.ty,Q=S.rotation,T=S.scaleX,S=S.scaleY);I.setRotation(Q);I.setScale(T,S);I.setPosition(J+R,N+F);I.setScrollFactor(z.scrollFactorX,z.scrollFactorY);I.setDepth(z.depth)},O.add(I),E.hitAreaDebug=I);return this},removeDebug:function(z){if((z=
z.input)&&z.hitAreaDebug){var C=z.hitAreaDebug;this.systems.updateList.remove(C);C.destroy();z.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(z){this.pollRate=z;this._pollTimer=0;return this},setGlobalTopOnly:function(z){this.manager.globalTopOnly=z;return this},setTopOnly:function(z){this.topOnly=z;return this},sortGameObjects:function(z,C){if(2>z.length)return z;var E=C.camera.renderList;
return z.sort(function(G,H){return E.indexOf(H)-E.indexOf(G)})},sortDropZones:function(z){if(2>z.length)return z;this.scene.sys.depthSort();return z.sort(this.sortDropZoneHandler.bind(this))},sortDropZoneHandler:function(z,C){if(z.parentContainer||C.parentContainer){if(z.parentContainer===C.parentContainer)return C.parentContainer.getIndex(C)-z.parentContainer.getIndex(z);if(z.parentContainer===C)return-1;if(C.parentContainer===z)return 1;z=z.getIndexList();C=C.getIndexList();for(var E=Math.min(z.length,
C.length),G=0;G<E;G++){var H=z[G],I=C[G];if(H!==I)return I-H}return C.length-z.length}return this.displayList.getIndex(C)-this.displayList.getIndex(z)},stopPropagation:function(){this.manager._tempSkip=!0;return this},addPointer:function(z){return this.manager.addPointer(z)},setDefaultCursor:function(z){this.manager.setDefaultCursor(z);return this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=
!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(m.SHUTDOWN);this._temp.length=0;this._list.length=0;this._draggable.length=0;this._pendingRemoval.length=0;this._pendingInsertion.length=0;for(var z=this._dragState.length=0;10>z;z++)this._drag[z]=[],this._over[z]=[];this.removeAllListeners();z=this.manager;z.canvas.style.cursor=z.defaultCursor;var C=this.systems.events;C.off(y.TRANSITION_START,this.transitionIn,this);C.off(y.TRANSITION_OUT,
this.transitionOut,this);C.off(y.TRANSITION_COMPLETE,this.transitionComplete,this);C.off(y.PRE_UPDATE,this.preUpdate,this);z.events.off(m.GAME_OUT,this.onGameOut,this);z.events.off(m.GAME_OVER,this.onGameOver,this);C.off(y.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.pluginEvents.emit(m.DESTROY);this.pluginEvents.removeAllListeners();this.scene.sys.events.off(y.START,this.start,this);this.mouse=this.events=this.manager=this.cameras=this.scene=null},x:{get:function(){return this.manager.activePointer.x}},
y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},
pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});u.register("InputPlugin",a,"input");p.exports=a},function(p,u,a){p.exports={Events:a(154),KeyboardManager:a(410),KeyboardPlugin:a(1330),Key:a(512),KeyCodes:a(143),KeyCombo:a(513),AdvanceKeyCombo:a(515),
ProcessKeyCombo:a(514),ResetKeyCombo:a(516),JustDown:a(1332),JustUp:a(1333),DownDuration:a(1334),UpDuration:a(1335)}},function(p,u){p.exports="keydown"},function(p,u){p.exports="keyup"},function(p,u){p.exports="keycombomatch"},function(p,u){p.exports="down"},function(p,u){p.exports="keydown-"},function(p,u){p.exports="keyup-"},function(p,u){p.exports="up"},function(p,u,a){var h=a(0),f=a(9),c=a(154),b=a(22),d=a(6),g=a(51);u=a(153);var e=a(512),l=a(143),k=a(513),m=a(1331),n=a(20),q=a(76);a=new h({Extends:f,
initialize:function(r){f.call(this);this.game=r.systems.game;this.scene=r.scene;this.settings=this.scene.sys.settings;this.sceneInputPlugin=r;this.manager=r.manager.keyboard;this.enabled=!0;this.keys=[];this.combos=[];this.prevCode=null;this.prevTime=0;this.prevType=null;r.pluginEvents.once(g.BOOT,this.boot,this);r.pluginEvents.on(g.START,this.start,this)},boot:function(){var r=this.settings.input;this.enabled=d(r,"keyboard",!0);(r=d(r,"keyboard.capture",null))&&this.addCaptures(r);this.sceneInputPlugin.pluginEvents.once(g.DESTROY,
this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(g.MANAGER_PROCESS,this.update,this);this.sceneInputPlugin.pluginEvents.once(g.SHUTDOWN,this.shutdown,this);this.game.events.on(b.BLUR,this.resetKeys,this);this.scene.sys.events.on(n.PAUSE,this.resetKeys,this);this.scene.sys.events.on(n.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(r){this.manager.addCapture(r);return this},removeCapture:function(r){this.manager.removeCapture(r);
return this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){this.manager.preventDefault=!0;return this},disableGlobalCapture:function(){this.manager.preventDefault=!1;return this},clearCaptures:function(){this.manager.clearCaptures();return this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(r,t,w){void 0===t&&(t=!0);void 0===w&&(w=!1);var v={};if("string"===typeof r){r=
r.split(",");for(var x=0;x<r.length;x++){var y=r[x].trim();y&&(v[y]=this.addKey(y,t,w))}}else for(x in r)v[x]=this.addKey(r[x],t,w);return v},addKey:function(r,t,w){void 0===t&&(t=!0);void 0===w&&(w=!1);var v=this.keys;if(r instanceof e){var x=v.indexOf(r);-1<x?v[x]=r:v[r.keyCode]=r;t&&this.addCapture(r.keyCode);r.setEmitOnRepeat(w);return r}"string"===typeof r&&(r=l[r.toUpperCase()]);v[r]||(v[r]=new e(this,r),t&&this.addCapture(r),v[r].setEmitOnRepeat(w));return v[r]},removeKey:function(r,t){void 0===
t&&(t=!1);var w=this.keys;if(r instanceof e){var v=w.indexOf(r);if(-1<v){var x=this.keys[v];this.keys[v]=void 0}}else"string"===typeof r&&(r=l[r.toUpperCase()]);w[r]&&(x=w[r],w[r]=void 0);x&&(x.plugin=null,t&&x.destroy());return this},removeAllKeys:function(r){for(var t=this.keys,w=0;w<t.length;w++){var v=t[w];v&&(t[w]=void 0,r&&v.destroy())}return this},createCombo:function(r,t){return new k(this,r,t)},checkDown:function(r,t){void 0===t&&(t=0);return this.enabled&&r.isDown&&(t=q(this.time-r.timeDown,
t),t>r._tick)?(r._tick=t,!0):!1},update:function(){var r=this.manager.queue,t=r.length;if(this.isActive()&&0!==t)for(var w=this.keys,v=0;v<t;v++){var x=r[v],y=x.keyCode,A=w[y],B=!1;void 0===x.cancelled&&(x.cancelled=0,x.stopImmediatePropagation=function(){x.cancelled=1},x.stopPropagation=function(){x.cancelled=-1});if(-1!==x.cancelled&&(y!==this.prevCode||x.timeStamp!==this.prevTime||x.type!==this.prevType)){this.prevCode=y;this.prevTime=x.timeStamp;this.prevType=x.type;if("keydown"===x.type)A&&(B=
A.isDown,A.onDown(x)),x.cancelled||A&&B||(m[y]&&this.emit(c.KEY_DOWN+m[y],x),x.cancelled||this.emit(c.ANY_KEY_DOWN,x));else{if(A)A.onUp(x);x.cancelled||(m[y]&&this.emit(c.KEY_UP+m[y],x),x.cancelled||this.emit(c.ANY_KEY_UP,x))}1===x.cancelled&&(x.cancelled=0)}}},resetKeys:function(){for(var r=this.keys,t=0;t<r.length;t++)r[t]&&r[t].reset();return this},shutdown:function(){this.removeAllKeys(!0);this.removeAllListeners();this.sceneInputPlugin.manager.events.off(g.MANAGER_PROCESS,this.update,this);this.game.events.off(b.BLUR,
this.resetKeys);this.scene.sys.events.off(n.PAUSE,this.resetKeys,this);this.scene.sys.events.off(n.SLEEP,this.resetKeys,this);this.queue=[]},destroy:function(){this.shutdown();for(var r=this.keys,t=0;t<r.length;t++)r[t]&&r[t].destroy();this.keys=[];this.combos=[];this.queue=[];this.manager=this.sceneInputPlugin=this.settings=this.scene=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});u.register("KeyboardPlugin",a,"keyboard","keyboard","inputKeyboard");p.exports=a},function(p,
u,a){u=a(143);a={};for(var h in u)a[u[h]]=h;p.exports=a},function(p,u){p.exports=function(a){return a._justDown?(a._justDown=!1,!0):!1}},function(p,u){p.exports=function(a){return a._justUp?(a._justUp=!1,!0):!1}},function(p,u){p.exports=function(a,h){void 0===h&&(h=50);var f=a.plugin.game.loop.time-a.timeDown;return a.isDown&&f<h}},function(p,u){p.exports=function(a,h){void 0===h&&(h=50);var f=a.plugin.game.loop.time-a.timeUp;return a.isUp&&f<h}},function(p,u,a){p.exports={MouseManager:a(411)}},function(p,
u,a){p.exports={TouchManager:a(413)}},function(p,u,a){u=a(21);var h=a(17);a={Events:a(95),FileTypes:a(1339),File:a(23),FileTypesManager:a(8),GetURL:a(155),LoaderPlugin:a(1365),MergeXHRSettings:a(240),MultiFile:a(49),XHRLoader:a(517),XHRSettings:a(156)};a=h(!1,a,u);p.exports=a},function(p,u,a){p.exports={AnimationJSONFile:a(1340),AsepriteFile:a(1341),AtlasJSONFile:a(1342),AtlasXMLFile:a(1343),AudioFile:a(518),AudioSpriteFile:a(1344),BinaryFile:a(1345),BitmapFontFile:a(1346),CSSFile:a(1347),GLSLFile:a(1348),
HTML5AudioFile:a(519),HTMLFile:a(1349),HTMLTextureFile:a(1350),ImageFile:a(71),JSONFile:a(61),MultiAtlasFile:a(1351),MultiScriptFile:a(1352),OBJFile:a(1353),PackFile:a(1354),PluginFile:a(1355),SceneFile:a(1356),ScenePluginFile:a(1357),ScriptFile:a(520),SpriteSheetFile:a(1358),SVGFile:a(1359),TextFile:a(242),TilemapCSVFile:a(1360),TilemapImpactFile:a(1361),TilemapJSONFile:a(1362),UnityAtlasFile:a(1363),VideoFile:a(1364),XMLFile:a(241)}},function(p,u,a){u=a(0);var h=a(8),f=a(61),c=a(95),b=new u({Extends:f,
initialize:function(d,g,e,l,k){f.call(this,d,g,e,l,k);this.type="animationJSON"},onProcess:function(){this.loader.once(c.POST_PROCESS,this.onLoadComplete,this);f.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});h.register("animation",function(d,g,e,l){if(Array.isArray(d))for(g=0;g<d.length;g++)this.addFile(new b(this,d[g]));else this.addFile(new b(this,d,g,l,e));return this});p.exports=b},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(71),b=
a(7),d=a(61),g=a(49),e=new u({Extends:g,initialize:function(l,k,m,n,q,r){b(k)?(n=k,k=f(n,"key"),m=new c(l,{key:k,url:f(n,"textureURL"),extension:f(n,"textureExtension","png"),normalMap:f(n,"normalMap"),xhrSettings:f(n,"textureXhrSettings")}),n=new d(l,{key:k,url:f(n,"atlasURL"),extension:f(n,"atlasExtension","json"),xhrSettings:f(n,"atlasXhrSettings")})):(m=new c(l,k,m,q),n=new d(l,k,n,r));m.linkFile?g.call(this,l,"atlasjson",k,[m,n,m.linkFile]):g.call(this,l,"atlasjson",k,[m,n])},addToCache:function(){if(this.isReadyToProcess()){var l=
this.files[0],k=this.files[1];this.loader.textureManager.addAtlas(l.key,l.data,k.data,this.files[2]?this.files[2].data:null);k.addToCache();this.complete=!0}}});h.register("aseprite",function(l,k,m,n,q){if(Array.isArray(l))for(m=0;m<l.length;m++)k=new e(this,l[m]),this.addFile(k.files);else k=new e(this,l,k,m,n,q),this.addFile(k.files);return this});p.exports=e},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(71),b=a(7),d=a(61),g=a(49),e=new u({Extends:g,initialize:function(l,k,m,n,q,r){b(k)?(n=k,k=
f(n,"key"),m=new c(l,{key:k,url:f(n,"textureURL"),extension:f(n,"textureExtension","png"),normalMap:f(n,"normalMap"),xhrSettings:f(n,"textureXhrSettings")}),n=new d(l,{key:k,url:f(n,"atlasURL"),extension:f(n,"atlasExtension","json"),xhrSettings:f(n,"atlasXhrSettings")})):(m=new c(l,k,m,q),n=new d(l,k,n,r));m.linkFile?g.call(this,l,"atlasjson",k,[m,n,m.linkFile]):g.call(this,l,"atlasjson",k,[m,n])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],k=this.files[1];this.loader.textureManager.addAtlas(l.key,
l.data,k.data,this.files[2]?this.files[2].data:null);k.pendingDestroy();this.complete=!0}}});h.register("atlas",function(l,k,m,n,q){if(Array.isArray(l))for(m=0;m<l.length;m++)k=new e(this,l[m]),this.addFile(k.files);else k=new e(this,l,k,m,n,q),this.addFile(k.files);return this});p.exports=e},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(71),b=a(7),d=a(49),g=a(241),e=new u({Extends:d,initialize:function(l,k,m,n,q,r){b(k)?(n=k,k=f(n,"key"),m=new c(l,{key:k,url:f(n,"textureURL"),extension:f(n,"textureExtension",
"png"),normalMap:f(n,"normalMap"),xhrSettings:f(n,"textureXhrSettings")}),n=new g(l,{key:k,url:f(n,"atlasURL"),extension:f(n,"atlasExtension","xml"),xhrSettings:f(n,"atlasXhrSettings")})):(m=new c(l,k,m,q),n=new g(l,k,n,r));m.linkFile?d.call(this,l,"atlasxml",k,[m,n,m.linkFile]):d.call(this,l,"atlasxml",k,[m,n])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],k=this.files[1];this.loader.textureManager.addAtlasXML(l.key,l.data,k.data,this.files[2]?this.files[2].data:null);k.pendingDestroy();
this.complete=!0}}});h.register("atlasXML",function(l,k,m,n,q){if(Array.isArray(l))for(m=0;m<l.length;m++)k=new e(this,l[m]),this.addFile(k.files);else k=new e(this,l,k,m,n,q),this.addFile(k.files);return this});p.exports=e},function(p,u,a){var h=a(518);p=a(0);u=a(8);var f=a(2),c=a(7),b=a(61),d=a(49),g=new p({Extends:d,initialize:function(e,l,k,m,n,q,r){c(l)&&(r=l,l=f(r,"key"),k=f(r,"jsonURL"),m=f(r,"audioURL"),n=f(r,"audioConfig"),q=f(r,"audioXhrSettings"),r=f(r,"jsonXhrSettings"));if(m){if(n=h.create(e,
l,m,n,q))k=new b(e,l,k,r),d.call(this,e,"audiosprite",l,[n,k]),this.config.resourceLoad=!1}else k=new b(e,l,k,r),d.call(this,e,"audiosprite",l,[k]),this.config.resourceLoad=!0,this.config.audioConfig=n,this.config.audioXhrSettings=q},onFileComplete:function(e){if(-1!==this.files.indexOf(e)&&(this.pending--,this.config.resourceLoad&&"json"===e.type&&e.data.hasOwnProperty("resources"))){var l=e.data.resources,k=f(this.config,"audioConfig"),m=f(this.config,"audioXhrSettings");if(e=h.create(this.loader,
e.key,l,k,m))this.addToMultiFile(e),this.loader.addFile(e)}},addToCache:function(){if(this.isReadyToProcess()){var e=this.files[1];this.files[0].addToCache();e.addToCache();this.complete=!0}}});u.register("audioSprite",function(e,l,k,m,n,q){var r=this.systems.game,t=r.config.audio;r=r.device.audio;if(t&&t.noAudio||!r.webAudio&&!r.audioData)return this;if(Array.isArray(e))for(k=0;k<e.length;k++)l=new g(this,e[k]),l.files&&this.addFile(l.files);else l=new g(this,e,l,k,m,n,q),l.files&&this.addFile(l.files);
return this})},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m,n){var q="bin";if(d(l)){var r=l;l=b(r,"key");k=b(r,"url");m=b(r,"xhrSettings");q=b(r,"extension",q);n=b(r,"dataType",n)}f.call(this,e,{type:"binary",cache:e.cacheManager.binary,extension:q,responseType:"arraybuffer",key:l,url:k,xhrSettings:m,config:{dataType:n}})},onProcess:function(){this.state=h.FILE_PROCESSING;var e=this.config.dataType;this.data=e?new e(this.xhrLoader.response):
this.xhrLoader.response;this.onProcessComplete()}});c.register("binary",function(e,l,k,m){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,m,k));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(71),b=a(7),d=a(49),g=a(212),e=a(241),l=new u({Extends:d,initialize:function(k,m,n,q,r,t){b(m)?(q=m,m=f(q,"key"),n=new c(k,{key:m,url:f(q,"textureURL"),extension:f(q,"textureExtension","png"),normalMap:f(q,"normalMap"),xhrSettings:f(q,
"textureXhrSettings")}),q=new e(k,{key:m,url:f(q,"fontDataURL"),extension:f(q,"fontDataExtension","xml"),xhrSettings:f(q,"fontDataXhrSettings")})):(n=new c(k,m,n,r),q=new e(k,m,q,t));n.linkFile?d.call(this,k,"bitmapfont",m,[n,q,n.linkFile]):d.call(this,k,"bitmapfont",m,[n,q])},addToCache:function(){if(this.isReadyToProcess()){var k=this.files[0],m=this.files[1];k.addToCache();m.pendingDestroy();var n=k.cache.get(k.key);m=g(m.data,k.cache.getFrame(k.key),0,0,n);this.loader.cacheManager.bitmapFont.add(k.key,
{data:m,texture:k.key,frame:null});this.complete=!0}}});h.register("bitmapFont",function(k,m,n,q,r){if(Array.isArray(k))for(n=0;n<k.length;n++)m=new l(this,k[n]),this.addFile(m.files);else m=new l(this,k,m,n,q,r),this.addFile(m.files);return this});p.exports=l},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m){var n="css";if(d(l)){var q=l;l=b(q,"key");k=b(q,"url");m=b(q,"xhrSettings");n=b(q,"extension",n)}f.call(this,e,{type:"script",cache:!1,
extension:n,responseType:"text",key:l,url:k,xhrSettings:m})},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=document.createElement("style");this.data.defer=!1;this.data.innerHTML=this.xhrLoader.responseText;document.head.appendChild(this.data);this.onProcessComplete()}});c.register("css",function(e,l,k){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=
a(8),b=a(2),d=a(7),g=a(396),e=new u({Extends:f,initialize:function(l,k,m,n,q){var r="glsl";if(d(k)){var t=k;k=b(t,"key");m=b(t,"url");n=b(t,"shaderType","fragment");q=b(t,"xhrSettings");r=b(t,"extension",r)}else void 0===n&&(n="fragment");f.call(this,l,{type:"glsl",cache:l.cacheManager.shader,extension:r,responseType:"text",key:k,url:m,config:{shaderType:n},xhrSettings:q})},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function(){var l=
this.data.split("\n"),k=this.extractBlock(l,0);if(k)for(;k;){var m=this.getShaderName(k.header),n=this.getShaderType(k.header),q=this.getShaderUniforms(k.header),r=k.shader;this.cache.has(m)?(m=this.cache.get(m),"fragment"===n?m.fragmentSrc=r:m.vertexSrc=r,m.uniforms||(m.uniforms=q)):"fragment"===n?this.cache.add(m,new g(m,r,"",q)):this.cache.add(m,new g(m,"",r,q));k=this.extractBlock(l,k.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new g(this.key,this.data)):this.cache.add(this.key,
new g(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(l){for(var k=0;k<l.length;k++){var m=l[k].trim();if("name:"===m.substring(0,5))return m.substring(5).trim()}return this.key},getShaderType:function(l){for(var k=0;k<l.length;k++){var m=l[k].trim();if("type:"===m.substring(0,5))return m.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(l){for(var k={},m=0;m<l.length;m++){var n=l[m].trim();if("uniform."===n.substring(0,8)){var q=n.indexOf(":");if(q){var r=
n.substring(8,q);try{k[r]=JSON.parse(n.substring(q+1))}catch(t){console.warn("Invalid uniform JSON: "+r)}}}}return k},extractBlock:function(l,k){for(var m=-1,n=-1,q=-1,r=!1,t=!1,w=[],v=[];k<l.length;k++){var x=l[k].trim();if("---"===x)if(-1===m)m=k,r=!0;else if(r)n=k,r=!1,t=!0;else break;else r?w.push(x):t&&(v.push(x),q=k)}return r||-1===n?null:{header:w,shader:v.join("\n"),offset:q}}});c.register("glsl",function(l,k,m,n){if(Array.isArray(l))for(k=0;k<l.length;k++)this.addFile(new e(this,l[k]));else this.addFile(new e(this,
l,k,m,n));return this});p.exports=e},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m){var n="html";if(d(l)){var q=l;l=b(q,"key");k=b(q,"url");m=b(q,"xhrSettings");n=b(q,"extension",n)}f.call(this,e,{type:"text",cache:e.cacheManager.html,extension:n,responseType:"text",key:l,url:k,xhrSettings:m})},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()}});c.register("html",function(e,
l,k){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m,n,q){void 0===m&&(m=512);void 0===n&&(n=512);var r="html";if(d(l)){var t=l;l=b(t,"key");k=b(t,"url");q=b(t,"xhrSettings");r=b(t,"extension",r);m=b(t,"width",m);n=b(t,"height",n)}f.call(this,e,{type:"html",cache:e.textureManager,extension:r,responseType:"text",
key:l,url:k,xhrSettings:q,config:{width:m,height:n}})},onProcess:function(){this.state=h.FILE_PROCESSING;var e=this.config.width,l=this.config.height,k=[];k.push('<svg width="'+e+'px" height="'+l+'px" viewBox="0 0 '+e+" "+l+'" xmlns="http://www.w3.org/2000/svg">');k.push('<foreignObject width="100%" height="100%">');k.push('<body xmlns="http://www.w3.org/1999/xhtml">');k.push(this.xhrLoader.responseText);k.push("</body>");k.push("</foreignObject>");k.push("</svg>");e=[k.join("\n")];var m=this;try{var n=
new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(q){m.state=h.FILE_ERRORED;m.onProcessComplete();return}this.data=new Image;this.data.crossOrigin=this.crossOrigin;this.data.onload=function(){f.revokeObjectURL(m.data);m.onProcessComplete()};this.data.onerror=function(){f.revokeObjectURL(m.data);m.onProcessError()};f.createObjectURL(this.data,n,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});c.register("htmlTexture",function(e,
l,k,m,n){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k,m,n));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(71),b=a(7),d=a(61),g=a(49),e=new u({Extends:g,initialize:function(l,k,m,n,q,r,t){b(k)&&(t=k,k=f(t,"key"),m=f(t,"url",!1)?f(t,"url"):f(t,"atlasURL"),r=f(t,"xhrSettings"),n=f(t,"path"),q=f(t,"baseURL"),t=f(t,"textureXhrSettings"));m=new d(l,k,m,r);g.call(this,l,"multiatlas",k,[m]);this.config.path=n;this.config.baseURL=
q;this.config.textureXhrSettings=t},onFileComplete:function(l){if(-1!==this.files.indexOf(l)&&(this.pending--,"json"===l.type&&l.data.hasOwnProperty("textures"))){l=l.data.textures;var k=this.config,m=this.loader,n=m.baseURL,q=m.path,r=m.prefix,t=f(k,"baseURL",this.baseURL),w=f(k,"path",this.path),v=f(k,"prefix",this.prefix);k=f(k,"textureXhrSettings");m.setBaseURL(t);m.setPath(w);m.setPrefix(v);for(t=0;t<l.length;t++)v=l[t].image,w="MA"+this.multiKeyIndex+"_"+v,v=new c(m,w,v,k),this.addToMultiFile(v),
m.addFile(v),l[t].normalMap&&(w=new c(m,w,l[t].normalMap,k),w.type="normalMap",v.setLink(w),this.addToMultiFile(w),m.addFile(w));m.setBaseURL(n);m.setPath(q);m.setPrefix(r)}},addToCache:function(){if(this.isReadyToProcess()){for(var l=this.files[0],k=[],m=[],n=[],q=1;q<this.files.length;q++){var r=this.files[q];if("normalMap"!==r.type){var t=r.key.indexOf("_");t=r.key.substr(t+1);for(var w=r.data,v=0;v<l.data.textures.length;v++){var x=l.data.textures[v];if(x.image===t){m.push(w);k.push(x);r.linkFile&&
n.push(r.linkFile.data);break}}}}0===n.length&&(n=void 0);this.loader.textureManager.addAtlasJSONArray(this.key,m,k,n);this.complete=!0;for(q=0;q<this.files.length;q++)this.files[q].pendingDestroy()}}});h.register("multiatlas",function(l,k,m,n,q){if(Array.isArray(l))for(m=0;m<l.length;m++)k=new e(this,l[m]),this.addFile(k.files);else k=new e(this,l,k,m,n,q),this.addFile(k.files);return this});p.exports=e},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(7),b=a(49),d=a(520),g=new u({Extends:b,initialize:function(e,
l,k,m){var n="js",q=[];if(c(l)){var r=l;l=f(r,"key");k=f(r,"url");m=f(r,"xhrSettings");n=f(r,"extension",n)}Array.isArray(k)||(k=[k]);for(r=0;r<k.length;r++){var t=new d(e,{key:l+"_"+r.toString(),url:k[r],extension:n,xhrSettings:m});t.onProcess=function(){this.onProcessComplete()};q.push(t)}b.call(this,e,"scripts",l,q)},addToCache:function(){if(this.isReadyToProcess()){for(var e=0;e<this.files.length;e++){var l=this.files[e];l.data=document.createElement("script");l.data.language="javascript";l.data.type=
"text/javascript";l.data.defer=!1;l.data.text=l.xhrLoader.responseText;document.head.appendChild(l.data)}this.complete=!0}}});h.register("scripts",function(e,l,k){if(Array.isArray(e))for(k=0;k<e.length;k++)l=new g(this,e[k]),this.addFile(l.files);else l=new g(this,e,l,k),this.addFile(l.files);return this});p.exports=g},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(7),b=a(49),d=a(498),g=a(499),e=a(242),l=new u({Extends:b,initialize:function(k,m,n,q,r,t){var w,v=k.cacheManager.obj;c(m)?(t=m,m=f(t,"key"),
r=new e(k,{key:m,type:"obj",cache:v,url:f(t,"url"),extension:f(t,"extension","obj"),xhrSettings:f(t,"xhrSettings"),config:{flipUV:f(t,"flipUV",r)}}),(q=f(t,"matURL"))&&(w=new e(k,{key:m,type:"mat",cache:v,url:q,extension:f(t,"matExtension","mat"),xhrSettings:f(t,"xhrSettings")}))):(r=new e(k,{key:m,url:n,type:"obj",cache:v,extension:"obj",xhrSettings:t,config:{flipUV:r}}),q&&(w=new e(k,{key:m,url:q,type:"mat",cache:v,extension:"mat",xhrSettings:t})));b.call(this,k,"obj",m,[r,w])},addToCache:function(){if(this.isReadyToProcess()){var k=
this.files[0],m=this.files[1],n=d(k.data,k.config.flipUV);m&&(n.materials=g(m.data));k.cache.add(k.key,n);this.complete=!0}}});h.register("obj",function(k,m,n,q,r){if(Array.isArray(k))for(n=0;n<k.length;n++)m=new l(this,k[n]),this.addFile(m.files);else m=new l(this,k,m,n,q,r),this.addFile(m.files);return this});p.exports=l},function(p,u,a){u=a(0);var h=a(21),f=a(8),c=a(61),b=new u({Extends:c,initialize:function(d,g,e,l,k){c.call(this,d,g,e,l,k);this.type="packfile"},onProcess:function(){this.state!==
h.FILE_POPULATED&&(this.state=h.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText));this.loader.addPack(this.data,this.config);this.onProcessComplete()}});f.register("pack",function(d,g,e,l){if(Array.isArray(d))for(g=0;g<d.length;g++)this.addFile(new b(this,d[g]));else this.addFile(new b(this,d,g,l,e));return this});p.exports=b},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m,n,q){var r="js";d(l)&&(n=l,l=b(n,"key"),k=b(n,
"url"),q=b(n,"xhrSettings"),r=b(n,"extension",r),m=b(n,"start"),n=b(n,"mapping"));f.call(this,e,{type:"plugin",cache:!1,extension:r,responseType:"text",key:l,url:k,xhrSettings:q,config:{start:m,mapping:n}});"function"===typeof k&&(this.data=k,this.state=h.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,l=this.config,k=b(l,"start",!1);l=b(l,"mapping",null);if(this.state===h.FILE_POPULATED)e.install(this.key,this.data,k,l);else if(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),
this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e=e.install(this.key,window[this.key],k,l),k||l)this.loader.systems[l]=e,this.loader.scene[l]=e;this.onProcessComplete()}});c.register("plugin",function(e,l,k,m,n){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k,m,n));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(21),
f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m){var n="js";if(d(l)){var q=l;l=b(q,"key");k=b(q,"url");m=b(q,"xhrSettings");n=b(q,"extension",n)}f.call(this,e,{type:"text",extension:n,responseType:"text",key:l,url:k,xhrSettings:m})},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},addToCache:function(){var e=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);");this.loader.sceneManager.add(this.key,
(0,eval)(e));this.complete=!0}});c.register("sceneFile",function(e,l,k){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m,n,q){var r="js";d(l)&&(n=l,l=b(n,"key"),k=b(n,"url"),q=b(n,"xhrSettings"),r=b(n,"extension",r),m=b(n,"systemKey"),n=b(n,"sceneKey"));f.call(this,e,{type:"scenePlugin",cache:!1,extension:r,
responseType:"text",key:l,url:k,xhrSettings:q,config:{systemKey:m,sceneKey:n}});"function"===typeof k&&(this.data=k,this.state=h.FILE_POPULATED)},onProcess:function(){var e=this.loader.systems.plugins,l=this.config,k=this.key,m=b(l,"systemKey",k);l=b(l,"sceneKey",k);this.state===h.FILE_POPULATED?e.installScenePlugin(m,this.data,l,this.loader.scene,!0):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=
!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),e.installScenePlugin(m,window[this.key],l,this.loader.scene,!0));this.onProcessComplete()}});c.register("scenePlugin",function(e,l,k,m,n){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,e,l,k,m,n));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(8),f=a(71),c=new u({Extends:f,initialize:function(b,d,g,e,l){f.call(this,b,d,g,l,e);this.type="spritesheet"},
addToCache:function(){var b=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(b)}});h.register("spritesheet",function(b,d,g,e){if(Array.isArray(b))for(d=0;d<b.length;d++)this.addFile(new c(this,b[d]));else this.addFile(new c(this,b,d,g,e));return this});p.exports=c},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=new u({Extends:f,initialize:function(e,l,k,m,n){var q="svg";if(d(l)){var r=l;l=b(r,"key");k=b(r,"url");m=b(r,"svgConfig",{});n=b(r,"xhrSettings");
q=b(r,"extension",q)}l={type:"svg",cache:e.textureManager,extension:q,responseType:"text",key:l,url:k,xhrSettings:n,config:{width:b(m,"width"),height:b(m,"height"),scale:b(m,"scale")}};f.call(this,e,l)},onProcess:function(){this.state=h.FILE_PROCESSING;var e=this.xhrLoader.responseText,l=[e],k=this.config.width,m=this.config.height,n=this.config.scale;a:if(k&&m||n){var q=null;q=(new DOMParser).parseFromString(e,"text/xml");e=q.getElementsByTagName("svg")[0];var r=e.hasAttribute("viewBox");q=parseFloat(e.getAttribute("width"));
var t=parseFloat(e.getAttribute("height"));!r&&q&&t?e.setAttribute("viewBox","0  0 "+q+" "+t):!r||q||t||(r=e.getAttribute("viewBox").split(/\s+|,/),q=r[2],t=r[3]);if(n)if(q&&t)k=q*n,m=t*n;else break a;e.setAttribute("width",k.toString()+"px");e.setAttribute("height",m.toString()+"px");l=[(new XMLSerializer).serializeToString(e)]}try{var w=new window.Blob(l,{type:"image/svg+xml;charset=utf-8"})}catch(y){this.onProcessError();return}this.data=new Image;this.data.crossOrigin=this.crossOrigin;var v=this,
x=!1;this.data.onload=function(){x||f.revokeObjectURL(v.data);v.onProcessComplete()};this.data.onerror=function(){if(x)v.onProcessError();else x=!0,f.revokeObjectURL(v.data),v.data.src="data:image/svg+xml,"+encodeURIComponent(l.join(""))};f.createObjectURL(this.data,w,"image/svg+xml")},addToCache:function(){var e=this.cache.addImage(this.key,this.data);this.pendingDestroy(e)}});c.register("svg",function(e,l,k,m){if(Array.isArray(e))for(l=0;l<e.length;l++)this.addFile(new g(this,e[l]));else this.addFile(new g(this,
e,l,k,m));return this});p.exports=g},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(2),d=a(7),g=a(40),e=new u({Extends:f,initialize:function(l,k,m,n){var q="csv";if(d(k)){var r=k;k=b(r,"key");m=b(r,"url");n=b(r,"xhrSettings");q=b(r,"extension",q)}f.call(this,l,{type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:q,responseType:"text",key:k,url:m,xhrSettings:n});this.tilemapFormat=g.CSV},onProcess:function(){this.state=h.FILE_PROCESSING;this.data=this.xhrLoader.responseText;this.onProcessComplete()},
addToCache:function(){var l={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,l);this.pendingDestroy(l)}});c.register("tilemapCSV",function(l,k,m){if(Array.isArray(l))for(k=0;k<l.length;k++)this.addFile(new e(this,l[k]));else this.addFile(new e(this,l,k,m));return this});p.exports=e},function(p,u,a){u=a(0);var h=a(8),f=a(61),c=a(40),b=new u({Extends:f,initialize:function(d,g,e,l){f.call(this,d,g,e,l);this.type="tilemapJSON";this.cache=d.cacheManager.tilemap},addToCache:function(){var d=
{format:c.WELTMEISTER,data:this.data};this.cache.add(this.key,d);this.pendingDestroy(d)}});h.register("tilemapImpact",function(d,g,e){if(Array.isArray(d))for(g=0;g<d.length;g++)this.addFile(new b(this,d[g]));else this.addFile(new b(this,d,g,e));return this});p.exports=b},function(p,u,a){u=a(0);var h=a(8),f=a(61),c=a(40),b=new u({Extends:f,initialize:function(d,g,e,l){f.call(this,d,g,e,l);this.type="tilemapJSON";this.cache=d.cacheManager.tilemap},addToCache:function(){var d={format:c.TILED_JSON,data:this.data};
this.cache.add(this.key,d);this.pendingDestroy(d)}});h.register("tilemapTiledJSON",function(d,g,e){if(Array.isArray(d))for(g=0;g<d.length;g++)this.addFile(new b(this,d[g]));else this.addFile(new b(this,d,g,e));return this});p.exports=b},function(p,u,a){u=a(0);var h=a(8),f=a(2),c=a(71),b=a(7),d=a(49),g=a(242),e=new u({Extends:d,initialize:function(l,k,m,n,q,r){b(k)?(n=k,k=f(n,"key"),m=new c(l,{key:k,url:f(n,"textureURL"),extension:f(n,"textureExtension","png"),normalMap:f(n,"normalMap"),xhrSettings:f(n,
"textureXhrSettings")}),n=new g(l,{key:k,url:f(n,"atlasURL"),extension:f(n,"atlasExtension","txt"),xhrSettings:f(n,"atlasXhrSettings")})):(m=new c(l,k,m,q),n=new g(l,k,n,r));m.linkFile?d.call(this,l,"unityatlas",k,[m,n,m.linkFile]):d.call(this,l,"unityatlas",k,[m,n])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],k=this.files[1];this.loader.textureManager.addUnityAtlas(l.key,l.data,k.data,this.files[2]?this.files[2].data:null);k.pendingDestroy();this.complete=!0}}});h.register("unityAtlas",
function(l,k,m,n,q){if(Array.isArray(l))for(m=0;m<l.length;m++)k=new e(this,l[m]),this.addFile(k.files);else k=new e(this,l,k,m,n,q),this.addFile(k.files);return this});p.exports=e},function(p,u,a){u=a(0);var h=a(21),f=a(23),c=a(8),b=a(155),d=a(2),g=a(7),e=new u({Extends:f,initialize:function(l,k,m,n,q,r,t){void 0===n&&(n="loadeddata");void 0===q&&(q=!1);void 0===r&&(r=!1);"loadeddata"!==n&&"canplay"!==n&&"canplaythrough"!==n&&(n="loadeddata");k={type:"video",cache:l.cacheManager.video,extension:m.type,
responseType:"blob",key:k,url:m.url,xhrSettings:t,config:{loadEvent:n,asBlob:q,noAudio:r}};this.onLoadCallback=this.onVideoLoadHandler.bind(this);this.onErrorCallback=this.onVideoErrorHandler.bind(this);f.call(this,l,k)},onProcess:function(){this.state=h.FILE_PROCESSING;if(this.config.asBlob){var l=this.createVideoElement();this.data=l;var k=this;this.data.onloadeddata=function(){k.onProcessComplete()};this.data.onerror=function(){f.revokeObjectURL(k.data);k.onProcessError()};f.createObjectURL(l,
this.xhrLoader.response,"");l.load()}else this.onProcessComplete()},createVideoElement:function(){var l=document.createElement("video");l.controls=!1;l.crossOrigin=this.loader.crossOrigin;this.config.noAudio&&(l.muted=!0,l.defaultMuted=!0,l.setAttribute("autoplay","autoplay"));l.setAttribute("playsinline","playsinline");l.setAttribute("preload","auto");return l},onVideoLoadHandler:function(l){l=l.target;l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0);l.removeEventListener("error",
this.onErrorCallback,!0);this.data=l;this.resetXHR();this.loader.nextFile(this,!0)},onVideoErrorHandler:function(l){if(l=l.target)l.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),l.removeEventListener("error",this.onErrorCallback,!0);this.resetXHR();this.loader.nextFile(this,!1)},load:function(){var l=this.config.loadEvent;if(this.config.asBlob)f.prototype.load.call(this);else{this.percentComplete=0;var k=this.createVideoElement();k.addEventListener(l,this.onLoadCallback,!0);k.addEventListener("error",
this.onErrorCallback,!0);k.src=b(this,this.loader.baseURL);k.load()}}});e.create=function(l,k,m,n,q,r,t){var w=l.systems.game;g(k)&&(m=d(k,"url",[]),n=d(k,"loadEvent","loadeddata"),q=d(k,"asBlob",!1),r=d(k,"noAudio",!1),t=d(k,"xhrSettings"),k=d(k,"key"));if(m=e.getVideoURL(w,m))return new e(l,k,m,n,q,r,t)};e.getVideoURL=function(l,k){Array.isArray(k)||(k=[k]);for(var m=0;m<k.length;m++){var n=d(k[m],"url",k[m]);if(0===n.indexOf("blob:"))return{url:n,type:""};var q=0===n.indexOf("data:")?n.split(",")[0].match(/\/(.*?);/):
n.match(/\.([a-zA-Z0-9]+)($|\?)/);q=d(k[m],"type",q?q[1]:"").toLowerCase();if(l.device.video[q])return{url:n,type:q}}return null};c.register("video",function(l,k,m,n,q,r){if(Array.isArray(l))for(m=0;m<l.length;m++)(k=e.create(this,l[m]))&&this.addFile(k);else(k=e.create(this,l,k,m,n,q,r))&&this.addFile(k);return this});p.exports=e},function(p,u,a){var h=a(0),f=a(21),c=a(149),b=a(9),d=a(95),g=a(8),e=a(2);u=a(24);var l=a(20),k=a(156);a=new h({Extends:b,initialize:function(m){b.call(this);var n=m.sys.game.config,
q=m.sys.settings.loader;this.scene=m;this.systems=m.sys;this.cacheManager=m.sys.cache;this.textureManager=m.sys.textures;this.sceneManager=m.sys.game.scene;g.install(this);this.baseURL=this.path=this.prefix="";this.setBaseURL(e(q,"baseURL",n.loaderBaseURL));this.setPath(e(q,"path",n.loaderPath));this.setPrefix(e(q,"prefix",n.loaderPrefix));this.maxParallelDownloads=e(q,"maxParallelDownloads",n.loaderMaxParallelDownloads);this.xhr=k(e(q,"responseType",n.loaderResponseType),e(q,"async",n.loaderAsync),
e(q,"user",n.loaderUser),e(q,"password",n.loaderPassword),e(q,"timeout",n.loaderTimeout),e(q,"withCredentials",n.loaderWithCredentials));this.crossOrigin=e(q,"crossOrigin",n.loaderCrossOrigin);this.progress=this.totalToLoad=0;this.list=new c;this.inflight=new c;this.queue=new c;this._deleteQueue=new c;this.totalComplete=this.totalFailed=0;this.state=f.LOADER_IDLE;this.multiKeyIndex=0;m.sys.events.once(l.BOOT,this.boot,this);m.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,
this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(m){void 0===m&&(m="");""!==m&&"/"!==m.substr(-1)&&(m=m.concat("/"));this.baseURL=m;return this},setPath:function(m){void 0===m&&(m="");""!==m&&"/"!==m.substr(-1)&&(m=m.concat("/"));this.path=m;return this},setPrefix:function(m){void 0===m&&(m="");this.prefix=m;return this},setCORS:function(m){this.crossOrigin=m;return this},addFile:function(m){Array.isArray(m)||(m=[m]);for(var n=
0;n<m.length;n++){var q=m[n];this.keyExists(q)||(this.list.set(q),this.emit(d.ADD,q.key,q.type,this,q),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(m){var n=m.hasCacheConflict();n||this.list.iterate(function(q){if(q.type===m.type&&q.key===m.key)return n=!0,!1});!n&&this.isLoading()&&(this.inflight.iterate(function(q){if(q.type===m.type&&q.key===m.key)return n=!0,!1}),this.queue.iterate(function(q){if(q.type===m.type&&q.key===m.key)return n=!0,!1}));return n},
addPack:function(m,n){n&&m.hasOwnProperty(n)&&(m={packKey:m[n]});n=0;var q=this.baseURL,r=this.path,t=this.prefix,w;for(w in m)if(Object.prototype.hasOwnProperty.call(m,w)){var v=m[w],x=e(v,"baseURL",q),y=e(v,"path",r),A=e(v,"prefix",t),B=e(v,"files",null);v=e(v,"defaultType","void");if(Array.isArray(B))for(this.setBaseURL(x),this.setPath(y),this.setPrefix(A),x=0;x<B.length;x++)y=B[x],A=y.hasOwnProperty("type")?y.type:v,this[A]&&(this[A](y),n++)}this.setBaseURL(q);this.setPath(r);this.setPrefix(t);
return 0<n},isLoading:function(){return this.state===f.LOADER_LOADING||this.state===f.LOADER_PROCESSING},isReady:function(){return this.state===f.LOADER_IDLE||this.state===f.LOADER_COMPLETE},start:function(){this.isReady()&&(this.totalComplete=this.totalFailed=this.progress=0,this.totalToLoad=this.list.size,this.emit(d.START,this),0===this.list.size?this.loadComplete():(this.state=f.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,
this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad;this.emit(d.PROGRESS,this.progress)},update:function(){this.state===f.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(m){if(m.state===f.FILE_POPULATED||m.state===f.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)this.inflight.set(m),this.list.delete(m),m.crossOrigin||(m.crossOrigin=
this.crossOrigin),m.load();if(this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(m,n){this.inflight&&(this.inflight.delete(m),this.updateProgress(),n?(this.totalComplete++,this.queue.set(m),this.emit(d.FILE_LOAD,m),m.onProcess()):(this.totalFailed++,this._deleteQueue.set(m),this.emit(d.FILE_LOAD_ERROR,m),this.fileProcessComplete(m)))},fileProcessComplete:function(m){if(this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy){if(m.state===f.FILE_ERRORED){if(m.multiFile)m.multiFile.onFileFailed(m)}else m.state===
f.FILE_COMPLETE&&(m.multiFile?m.multiFile.isReadyToProcess()&&m.multiFile.addToCache():m.addToCache());this.queue.delete(m);0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete()}},loadComplete:function(){this.emit(d.POST_PROCESS,this);this.list.clear();this.inflight.clear();this.queue.clear();this.progress=1;this.state=f.LOADER_COMPLETE;this.systems.events.off(l.UPDATE,this.update,this);this._deleteQueue.iterateLocal("destroy");this._deleteQueue.clear();this.emit(d.COMPLETE,
this,this.totalComplete,this.totalFailed)},flagForRemoval:function(m){this._deleteQueue.set(m)},saveJSON:function(m,n){return this.save(JSON.stringify(m),n)},save:function(m,n,q){void 0===n&&(n="file.json");void 0===q&&(q="application/json");m=new Blob([m],{type:q});m=URL.createObjectURL(m);q=document.createElement("a");q.download=n;q.textContent="Download "+n;q.href=m;q.click();return this},reset:function(){this.list.clear();this.inflight.clear();this.queue.clear();var m=this.systems.game.config,
n=this.systems.settings.loader;this.setBaseURL(e(n,"baseURL",m.loaderBaseURL));this.setPath(e(n,"path",m.loaderPath));this.setPrefix(e(n,"prefix",m.loaderPrefix));this.state=f.LOADER_IDLE},shutdown:function(){this.reset();this.state=f.LOADER_SHUTDOWN;this.systems.events.off(l.UPDATE,this.update,this);this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.state=f.LOADER_DESTROYED;this.systems.events.off(l.UPDATE,this.update,this);this.systems.events.off(l.START,
this.pluginStart,this);this.sceneManager=this.cacheManager=this.textureManager=this.systems=this.scene=this.queue=this.inflight=this.list=null}});u.register("Loader",a,"load");p.exports=a},function(p,u,a){u=a(62);var h=a(17);a={ArcadePhysics:a(1367),Body:a(527),Collider:a(528),Components:a(243),Events:a(245),Factory:a(521),GetOverlapX:a(246),GetOverlapY:a(247),SeparateX:a(537),SeparateY:a(538),Group:a(524),Image:a(522),Sprite:a(157),StaticBody:a(539),StaticGroup:a(525),Tilemap:a(1391),World:a(526)};
a=h(!1,a,u);p.exports=a},function(p,u,a){var h=a(0),f=a(36),c=a(50),b=a(353),d=a(521),g=a(2),e=a(127),l=a(523),k=a(244);u=a(24);var m=a(20),n=a(3),q=a(526);a=new h({initialize:function(r){this.scene=r;this.systems=r.sys;this.config=this.getConfig();r.sys.events.once(m.BOOT,this.boot,this);r.sys.events.on(m.START,this.start,this)},boot:function(){this.world=new q(this.scene,this.config);this.add=new d(this.world);this.systems.events.once(m.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=
new q(this.scene,this.config),this.add=new d(this.world));var r=this.systems.events;if(!g(this.config,"customUpdate",!1))r.on(m.UPDATE,this.world.update,this.world);r.on(m.POST_UPDATE,this.world.postUpdate,this.world);r.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function(){var r=this.systems.game.config.physics;return e(g(this.systems.settings.physics,
"arcade",{}),g(r,"arcade",{}))},overlap:function(r,t,w,v,x){void 0===w&&(w=null);void 0===v&&(v=null);void 0===x&&(x=w);return this.world.collideObjects(r,t,w,v,x,!0)},collide:function(r,t,w,v,x){void 0===w&&(w=null);void 0===v&&(v=null);void 0===x&&(x=w);return this.world.collideObjects(r,t,w,v,x,!1)},collideTiles:function(r,t,w,v,x){return this.world.collideTiles(r,t,w,v,x)},overlapTiles:function(r,t,w,v,x){return this.world.overlapTiles(r,t,w,v,x)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},
accelerateTo:function(r,t,w,v,x,y){void 0===v&&(v=60);t=Math.atan2(w-r.y,t-r.x);r.body.acceleration.setToPolar(t,v);void 0!==x&&void 0!==y&&r.body.maxVelocity.set(x,y);return t},accelerateToObject:function(r,t,w,v,x){return this.accelerateTo(r,t.x,t.y,w,v,x)},closest:function(r,t){t||(t=this.world.bodies.entries);for(var w=Number.MAX_VALUE,v=null,x=r.x,y=r.y,A=t.length,B=0;B<A;B++){var z=t[B],C=z.body||z;r!==z&&r!==C&&r!==C.gameObject&&r!==C.center&&(C=b(x,y,C.center.x,C.center.y),C<w&&(v=z,w=C))}return v},
furthest:function(r,t){t||(t=this.world.bodies.entries);for(var w=-1,v=null,x=r.x,y=r.y,A=t.length,B=0;B<A;B++){var z=t[B],C=z.body||z;r!==z&&r!==C&&r!==C.gameObject&&r!==C.center&&(C=b(x,y,C.center.x,C.center.y),C>w&&(v=z,w=C))}return v},moveTo:function(r,t,w,v,x){void 0===v&&(v=60);void 0===x&&(x=0);var y=Math.atan2(w-r.y,t-r.x);0<x&&(v=c(r.x,r.y,t,w)/(x/1E3));r.body.velocity.setToPolar(y,v);return y},moveToObject:function(r,t,w,v){return this.moveTo(r,t.x,t.y,w,v)},velocityFromAngle:function(r,
t,w){void 0===t&&(t=60);void 0===w&&(w=new n);return w.setToPolar(f(r),t)},velocityFromRotation:function(r,t,w){void 0===t&&(t=60);void 0===w&&(w=new n);return w.setToPolar(r,t)},overlapRect:function(r,t,w,v,x,y){return k(this.world,r,t,w,v,x,y)},overlapCirc:function(r,t,w,v,x){return l(this.world,r,t,w,v,x)},shutdown:function(){if(this.world){var r=this.systems.events;r.off(m.UPDATE,this.world.update,this.world);r.off(m.POST_UPDATE,this.world.postUpdate,this.world);r.off(m.SHUTDOWN,this.shutdown,
this);this.add.destroy();this.world.destroy();this.world=this.add=null}},destroy:function(){this.shutdown();this.scene.sys.events.off(m.START,this.start,this);this.systems=this.scene=null}});u.register("ArcadePhysics",a,"arcadePhysics");p.exports=a},function(p,u){p.exports={setAcceleration:function(a,h){this.body.acceleration.set(a,h);return this},setAccelerationX:function(a){this.body.acceleration.x=a;return this},setAccelerationY:function(a){this.body.acceleration.y=a;return this}}},function(p,
u){p.exports={setAngularVelocity:function(a){this.body.angularVelocity=a;return this},setAngularAcceleration:function(a){this.body.angularAcceleration=a;return this},setAngularDrag:function(a){this.body.angularDrag=a;return this}}},function(p,u){p.exports={setBounce:function(a,h){this.body.bounce.set(a,h);return this},setBounceX:function(a){this.body.bounce.x=a;return this},setBounceY:function(a){this.body.bounce.y=a;return this},setCollideWorldBounds:function(a,h,f){this.body.setCollideWorldBounds(a,
h,f);return this}}},function(p,u){p.exports={setDebug:function(a,h,f){this.debugShowBody=a;this.debugShowVelocity=h;this.debugBodyColor=f;return this},setDebugBodyColor:function(a){this.body.debugBodyColor=a;return this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(a){this.body.debugShowBody=a}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(a){this.body.debugShowVelocity=a}},debugBodyColor:{get:function(){return this.body.debugBodyColor},
set:function(a){this.body.debugBodyColor=a}}}},function(p,u){p.exports={setDrag:function(a,h){this.body.drag.set(a,h);return this},setDragX:function(a){this.body.drag.x=a;return this},setDragY:function(a){this.body.drag.y=a;return this},setDamping:function(a){this.body.useDamping=a;return this}}},function(p,u){p.exports={enableBody:function(a,h,f,c,b){a&&this.body.reset(h,f);c&&(this.body.gameObject.active=!0);b&&(this.body.gameObject.visible=!0);this.body.enable=!0;return this},disableBody:function(a,
h){void 0===a&&(a=!1);void 0===h&&(h=!1);this.body.stop();this.body.enable=!1;a&&(this.body.gameObject.active=!1);h&&(this.body.gameObject.visible=!1);return this},refreshBody:function(){this.body.updateFromGameObject();return this}}},function(p,u){p.exports={setFriction:function(a,h){this.body.friction.set(a,h);return this},setFrictionX:function(a){this.body.friction.x=a;return this},setFrictionY:function(a){this.body.friction.y=a;return this}}},function(p,u){p.exports={setGravity:function(a,h){this.body.gravity.set(a,
h);return this},setGravityX:function(a){this.body.gravity.x=a;return this},setGravityY:function(a){this.body.gravity.y=a;return this}}},function(p,u){p.exports={setImmovable:function(a){void 0===a&&(a=!0);this.body.immovable=a;return this}}},function(p,u){p.exports={setMass:function(a){this.body.mass=a;return this}}},function(p,u){p.exports={setPushable:function(a){void 0===a&&(a=!0);this.body.pushable=a;return this}}},function(p,u){p.exports={setOffset:function(a,h){this.body.setOffset(a,h);return this},
setSize:function(a,h,f){this.body.setSize(a,h,f);return this},setBodySize:function(a,h,f){this.body.setSize(a,h,f);return this},setCircle:function(a,h,f){this.body.setCircle(a,h,f);return this}}},function(p,u){p.exports={setVelocity:function(a,h){this.body.setVelocity(a,h);return this},setVelocityX:function(a){this.body.setVelocityX(a);return this},setVelocityY:function(a){this.body.setVelocityY(a);return this},setMaxVelocity:function(a,h){this.body.maxVelocity.set(a,h);return this}}},function(p,
u){p.exports="collide"},function(p,u){p.exports="overlap"},function(p,u){p.exports="pause"},function(p,u){p.exports="resume"},function(p,u){p.exports="tilecollide"},function(p,u){p.exports="tileoverlap"},function(p,u){p.exports="worldbounds"},function(p,u){p.exports="worldstep"},function(p,u){var a,h,f,c,b,d,g,e,l,k,m,n,q,r,t,w,v,x=function(){return k&&t&&h.blocked.right?(a.processX(-v,g,!1,!0),1):l&&w&&h.blocked.left?(a.processX(v,g,!0),1):q&&w&&a.blocked.right?(h.processX(-v,e,!1,!0),2):n&&t&&a.blocked.left?
(h.processX(v,e,!0),2):0},y=function(A){if(f&&c)v*=.5,0===A||3===A?(a.processX(v,b),h.processX(-v,d)):(a.processX(-v,b),h.processX(v,d));else if(f&&!c)0===A||3===A?a.processX(v,g,!0):a.processX(-v,g,!1,!0);else if(!f&&c)0===A||3===A?h.processX(-v,e,!1,!0):h.processX(v,e,!0);else{var B=.5*v;0===A?r?(a.processX(v,0,!0),h.processX(0,null,!1,!0)):q?(a.processX(B,0,!0),h.processX(-B,0,!1,!0)):(a.processX(B,h.velocity.x,!0),h.processX(-B,null,!1,!0)):1===A?m?(a.processX(0,null,!1,!0),h.processX(v,0,!0)):
k?(a.processX(-B,0,!1,!0),h.processX(B,0,!0)):(a.processX(-B,null,!1,!0),h.processX(B,a.velocity.x,!0)):2===A?r?(a.processX(-v,0,!1,!0),h.processX(0,null,!0)):n?(a.processX(-B,0,!1,!0),h.processX(B,0,!0)):(a.processX(-B,h.velocity.x,!1,!0),h.processX(B,null,!0)):3===A&&(m?(a.processX(0,null,!0),h.processX(-v,0,!1,!0)):l?(a.processX(B,0,!0),h.processX(-B,0,!1,!0)):(a.processX(B,h.velocity.y,!0),h.processX(-B,null,!1,!0)))}return!0};p.exports={BlockCheck:x,Check:function(){var A=a.velocity.x,B=h.velocity.x;
B=Math.sqrt(B*B*h.mass/a.mass)*(0<B?1:-1);A=Math.sqrt(A*A*a.mass/h.mass)*(0<A?1:-1);var z=.5*(B+A);b=z+(B-z)*a.bounce.x;d=z+(A-z)*h.bounce.x;return l&&w?y(0):n&&t?y(1):k&&t?y(2):q&&w?y(3):!1},Set:function(A,B,z){a=A;h=B;A=a.velocity.x;B=h.velocity.x;f=a.pushable;l=0>a._dx;k=0<a._dx;m=0===a._dx;t=Math.abs(a.right-h.x)<=Math.abs(h.right-a.x);g=B-A*a.bounce.x;c=h.pushable;n=0>h._dx;q=0<h._dx;r=0===h._dx;w=!t;e=A-B*h.bounce.x;v=Math.abs(z);return x()},Run:y,RunImmovableBody1:function(A){1===A?h.velocity.x=
0:t?h.processX(v,e,!0):h.processX(-v,e,!1,!0);a.moves&&(h.y+=(a.y-a.prev.y)*a.friction.y,h._dy=h.y-h.prev.y)},RunImmovableBody2:function(A){2===A?a.velocity.x=0:w?a.processX(v,g,!0):a.processX(-v,g,!1,!0);h.moves&&(a.y+=(h.y-h.prev.y)*h.friction.y,a._dy=a.y-a.prev.y)}}},function(p,u){var a,h,f,c,b,d,g,e,l,k,m,n,q,r,t,w,v,x=function(){return k&&t&&h.blocked.down?(a.processY(-v,g,!1,!0),1):l&&w&&h.blocked.up?(a.processY(v,g,!0),1):q&&w&&a.blocked.down?(h.processY(-v,e,!1,!0),2):n&&t&&a.blocked.up?(h.processY(v,
e,!0),2):0},y=function(A){if(f&&c)v*=.5,0===A||3===A?(a.processY(v,b),h.processY(-v,d)):(a.processY(-v,b),h.processY(v,d));else if(f&&!c)0===A||3===A?a.processY(v,g,!0):a.processY(-v,g,!1,!0);else if(!f&&c)0===A||3===A?h.processY(-v,e,!1,!0):h.processY(v,e,!0);else{var B=.5*v;0===A?r?(a.processY(v,0,!0),h.processY(0,null,!1,!0)):q?(a.processY(B,0,!0),h.processY(-B,0,!1,!0)):(a.processY(B,h.velocity.y,!0),h.processY(-B,null,!1,!0)):1===A?m?(a.processY(0,null,!1,!0),h.processY(v,0,!0)):k?(a.processY(-B,
0,!1,!0),h.processY(B,0,!0)):(a.processY(-B,null,!1,!0),h.processY(B,a.velocity.y,!0)):2===A?r?(a.processY(-v,0,!1,!0),h.processY(0,null,!0)):n?(a.processY(-B,0,!1,!0),h.processY(B,0,!0)):(a.processY(-B,h.velocity.y,!1,!0),h.processY(B,null,!0)):3===A&&(m?(a.processY(0,null,!0),h.processY(-v,0,!1,!0)):l?(a.processY(B,0,!0),h.processY(-B,0,!1,!0)):(a.processY(B,h.velocity.y,!0),h.processY(-B,null,!1,!0)))}return!0};p.exports={BlockCheck:x,Check:function(){var A=a.velocity.y,B=h.velocity.y;B=Math.sqrt(B*
B*h.mass/a.mass)*(0<B?1:-1);A=Math.sqrt(A*A*a.mass/h.mass)*(0<A?1:-1);var z=.5*(B+A);b=z+(B-z)*a.bounce.y;d=z+(A-z)*h.bounce.y;return l&&w?y(0):n&&t?y(1):k&&t?y(2):q&&w?y(3):!1},Set:function(A,B,z){a=A;h=B;A=a.velocity.y;B=h.velocity.y;f=a.pushable;l=0>a._dy;k=0<a._dy;m=0===a._dy;t=Math.abs(a.bottom-h.y)<=Math.abs(h.bottom-a.y);g=B-A*a.bounce.y;c=h.pushable;n=0>h._dy;q=0<h._dy;r=0===h._dy;w=!t;e=A-B*h.bounce.y;v=Math.abs(z);return x()},Run:y,RunImmovableBody1:function(A){1===A?h.velocity.y=0:t?h.processY(v,
e,!0):h.processY(-v,e,!1,!0);a.moves&&(h.x+=(a.x-a.prev.x)*a.friction.x,h._dx=h.x-h.prev.x)},RunImmovableBody2:function(A){2===A?a.velocity.y=0:w?a.processY(v,g,!0):a.processY(-v,g,!1,!0);h.moves&&(a.x+=(h.x-h.prev.x)*h.friction.x,a._dx=a.x-a.prev.x)}}},function(p,u,a){u={ProcessTileCallbacks:a(530),ProcessTileSeparationX:a(534),ProcessTileSeparationY:a(536),SeparateTile:a(532),TileCheckX:a(533),TileCheckY:a(535),TileIntersectsBody:a(248)};p.exports=u},function(p,u,a){u=a(0);var h=a(3);a=new u({initialize:function(){this.boundsCenter=
new h;this.centerDiff=new h},parseBody:function(f){f=f.hasOwnProperty("body")?f.body:f;if(!f.hasOwnProperty("bounds")||!f.hasOwnProperty("centerOfMass"))return!1;var c=this.boundsCenter,b=this.centerDiff,d=f.bounds.max.x-f.bounds.min.x,g=f.bounds.max.y-f.bounds.min.y,e=d*f.centerOfMass.x;f=g*f.centerOfMass.y;c.set(d/2,g/2);b.set(e-c.x,f-c.y);return!0},getTopLeft:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);if(this.parseBody(f)){f=this.boundsCenter;var d=this.centerDiff;return new h(c+f.x+d.x,
b+f.y+d.y)}return!1},getTopCenter:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);return this.parseBody(f)?(f=this.centerDiff,new h(c+f.x,b+this.boundsCenter.y+f.y)):!1},getTopRight:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);if(this.parseBody(f)){f=this.boundsCenter;var d=this.centerDiff;return new h(c-(f.x-d.x),b+f.y+d.y)}return!1},getLeftCenter:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);return this.parseBody(f)?(f=this.centerDiff,new h(c+this.boundsCenter.x+f.x,b+f.y)):!1},
getCenter:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);return this.parseBody(f)?(f=this.centerDiff,new h(c+f.x,b+f.y)):!1},getRightCenter:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);return this.parseBody(f)?(f=this.centerDiff,new h(c-(this.boundsCenter.x-f.x),b+f.y)):!1},getBottomLeft:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);if(this.parseBody(f)){f=this.boundsCenter;var d=this.centerDiff;return new h(c+f.x+d.x,b-(f.y-d.y))}return!1},getBottomCenter:function(f,c,b){void 0===
c&&(c=0);void 0===b&&(b=0);return this.parseBody(f)?(f=this.centerDiff,new h(c+f.x,b-(this.boundsCenter.y-f.y))):!1},getBottomRight:function(f,c,b){void 0===c&&(c=0);void 0===b&&(b=0);if(this.parseBody(f)){f=this.boundsCenter;var d=this.centerDiff;return new h(c-(f.x-d.x),b-(f.y-d.y))}return!1}});p.exports=a},function(p,u){function a(y,A,B,z){var C=A[0]-y[0];A=A[1]-y[1];var E=z[0]-B[0],G=z[1]-B[1];if(0===E*A-G*C)return!1;z=(C*(B[1]-y[1])+A*(y[0]-B[0]))/(E*A-G*C);y=(E*(y[1]-B[1])+G*(B[0]-y[0]))/(G*
C-E*A);return 0<=z&&1>=z&&0<=y&&1>=y}function h(y,A,B){return(A[0]-y[0])*(B[1]-y[1])-(B[0]-y[0])*(A[1]-y[1])}function f(y,A,B){return 0<h(y,A,B)}function c(y,A,B){return 0<=h(y,A,B)}function b(y,A,B){return 0>=h(y,A,B)}function d(y,A){var B=A[0]-y[0];y=A[1]-y[1];return B*B+y*y}function g(y,A){var B=y.length;return y[0>A?A%B+B:A%B]}function e(y,A,B,z){for(;B<z;B++)y.push(A[B])}function l(y,A){var B=g(y,A-1),z=g(y,A);y=g(y,A+1);return 0>h(B,z,y)}function k(y,A,B,z){z=z||[];z.length=0;if(A<B)for(var C=
A;C<=B;C++)z.push(y[C]);else{for(C=0;C<=B;C++)z.push(y[C]);for(C=A;C<y.length;C++)z.push(y[C])}return z}function m(y){for(var A=[],B,z,C=[],E=Number.MAX_VALUE,G=0;G<y.length;++G)if(l(y,G))for(var H=0;H<y.length;++H){a:{z=y;var I=G,K=H,O=v,R=x;if(c(g(z,I+1),g(z,I),g(z,K))&&b(g(z,I-1),g(z,I),g(z,K)))B=!1;else{B=d(g(z,I),g(z,K));for(var F=0;F!==z.length;++F)if((F+1)%z.length!==I&&F!==I&&c(g(z,I),g(z,K),g(z,F+1))&&b(g(z,I),g(z,K),g(z,F))){O[0]=g(z,I);O[1]=g(z,K);R[0]=g(z,F);R[1]=g(z,F+1);var J=[0,0];
var N=O[1][1]-O[0][1];var Q=O[0][0]-O[1][0];var T=N*O[0][0]+Q*O[0][1];var S=R[1][1]-R[0][1];var W=R[0][0]-R[1][0];var X=S*R[0][0]+W*R[0][1];var ba=N*W-S*Q;0>=Math.abs(ba-0)||(J[0]=(W*T-Q*X)/ba,J[1]=(N*X-S*T)/ba);ba=J;if(d(g(z,I),ba)<B){B=!1;break a}}B=!0}}if(B){B=m(k(y,G,H,C));z=m(k(y,H,G,C));for(I=0;I<z.length;I++)B.push(z[I]);B.length<E&&(A=B,E=B.length,A.push([g(y,G),g(y,H)]))}}return A}function n(y,A){if(0===A.length)return[y];if(A instanceof Array&&A.length&&A[0]instanceof Array&&2===A[0].length&&
A[0][0]instanceof Array){y=[y];for(var B=0;B<A.length;B++)for(var z=A[B],C=0;C<y.length;C++){var E=n(y[C],z);if(E){y.splice(C,1);y.push(E[0],E[1]);break}}return y}z=A;B=y.indexOf(z[0]);C=y.indexOf(z[1]);return-1!==B&&-1!==C?[k(y,B,C),k(y,C,B)]:!1}function q(y,A,B,z,C){var E=A[1]-y[1];A=y[0]-A[0];y=E*y[0]+A*y[1];var G=z[1]-B[1];z=B[0]-z[0];B=G*B[0]+z*B[1];var H=E*z-G*A;return Math.abs(H-0)<=(C||0)?[0,0]:[(z*y-A*B)/H,(E*B-G*y)/H]}function r(y,A,B,z,C,E,G){E=E||100;G=G||0;C=C||25;A="undefined"!==typeof A?
A:[];B=B||[];z=z||[];var H=[0,0],I=[0,0],K=[0,0],O,R=0,F=0,J=0,N=[],Q=[];if(3>y.length)return A;G++;if(G>E)return console.warn("quickDecomp: max level ("+E+") reached."),A;for(var T=0;T<y.length;++T)if(l(y,T)){B.push(y[T]);var S=O=Number.MAX_VALUE;for(var W=0;W<y.length;++W){if(f(g(y,T-1),g(y,T),g(y,W))&&b(g(y,T-1),g(y,T),g(y,W-1))){K=q(g(y,T-1),g(y,T),g(y,W),g(y,W-1));var X=g(y,T+1);var ba=g(y,T);0>h(X,ba,K)&&(X=d(y[T],K),X<O&&(O=X,I=K,F=W))}f(g(y,T+1),g(y,T),g(y,W+1))&&b(g(y,T+1),g(y,T),g(y,W))&&
(K=q(g(y,T+1),g(y,T),g(y,W),g(y,W+1)),f(g(y,T-1),g(y,T),K)&&(X=d(y[T],K),X<S&&(S=X,H=K,R=W)))}if(F===(R+1)%y.length)K[0]=(I[0]+H[0])/2,K[1]=(I[1]+H[1])/2,z.push(K),T<R?(e(N,y,T,R+1),N.push(K),Q.push(K),0!==F&&e(Q,y,F,y.length),e(Q,y,0,T+1)):(0!==T&&e(N,y,T,y.length),e(N,y,0,R+1),N.push(K),Q.push(K),e(Q,y,F,T+1));else{F>R&&(R+=y.length);H=Number.MAX_VALUE;if(R<F)return A;for(W=F;W<=R;++W)if(c(g(y,T-1),g(y,T),g(y,W))&&b(g(y,T+1),g(y,T),g(y,W))){X=d(g(y,T),g(y,W));if(F=X<H)a:{F=y;I=T;K=W;for(S=0;S!==
F.length;++S)if(S!==I&&S!==K&&(S+1)%F.length!==I&&(S+1)%F.length!==K&&a(g(F,I),g(F,K),g(F,S),g(F,S+1))){F=!1;break a}F=!0}F&&(H=X,J=W%y.length)}T<J?(e(N,y,T,J+1),0!==J&&e(Q,y,J,y.length),e(Q,y,0,T+1)):(0!==T&&e(N,y,T,y.length),e(N,y,0,J+1),e(Q,y,J,T+1))}N.length<Q.length?(r(N,A,B,z,C,E,G),r(Q,A,B,z,C,E,G)):(r(Q,A,B,z,C,E,G),r(N,A,B,z,C,E,G));return A}A.push(y);return A}p.exports={decomp:function(y){var A=m(y);return 0<A.length?n(y,A):[y]},quickDecomp:r,isSimple:function(y){var A;for(A=0;A<y.length-
1;A++)for(var B=0;B<A-1;B++)if(a(y[A],y[A+1],y[B],y[B+1]))return!1;for(A=1;A<y.length-2;A++)if(a(y[0],y[y.length-1],y[A],y[A+1]))return!1;return!0},removeCollinearPoints:function(y,A){for(var B=0,z=y.length-1;3<y.length&&0<=z;--z){var C=g(y,z-1);var E=g(y,z),G=g(y,z+1),H=A;if(H){var I=t,K=w;I[0]=E[0]-C[0];I[1]=E[1]-C[1];K[0]=G[0]-E[0];K[1]=G[1]-E[1];C=Math.acos((I[0]*K[0]+I[1]*K[1])/(Math.sqrt(I[0]*I[0]+I[1]*I[1])*Math.sqrt(K[0]*K[0]+K[1]*K[1])))<H}else C=0===h(C,E,G);C&&(y.splice(z%y.length,1),B++)}return B},
removeDuplicatePoints:function(y,A){for(var B=y.length-1;1<=B;--B)for(var z=y[B],C=B-1;0<=C;--C){var E=z,G=y[C],H=A;Math.abs(E[0]-G[0])<=(H||0)&&Math.abs(E[1]-G[1])<=(H||0)&&y.splice(B,1)}},makeCCW:function(y){for(var A=0,B=1;B<y.length;++B)if(y[B][1]<y[A][1]||y[B][1]===y[A][1]&&y[B][0]>y[A][0])A=B;if(f(g(y,A-1),g(y,A),g(y,A+1)))return!1;A=[];B=y.length;for(var z=0;z!==B;z++)A.push(y.pop());for(z=0;z!==B;z++)y[z]=A[z];return!0}};var t=[],w=[],v=[],x=[]},function(p,u,a){var h=a(86);u=a(0);var f=a(591),
c=a(128),b=a(592),d=a(1395),g=a(1396),e=a(1397),l=a(593),k=a(589),m=a(590),n=a(1398),q=a(64);a=new u({initialize:function(r){this.world=r;this.scene=r.scene;this.sys=r.scene.sys},rectangle:function(r,t,w,v,x){r=h.rectangle(r,t,w,v,x);this.world.add(r);return r},trapezoid:function(r,t,w,v,x,y){r=h.trapezoid(r,t,w,v,x,y);this.world.add(r);return r},circle:function(r,t,w,v,x){r=h.circle(r,t,w,v,x);this.world.add(r);return r},polygon:function(r,t,w,v,x){r=h.polygon(r,t,w,v,x);this.world.add(r);return r},
fromVertices:function(r,t,w,v,x,y,A){"string"===typeof w&&(w=q.fromPath(w));r=h.fromVertices(r,t,w,v,x,y,A);this.world.add(r);return r},fromPhysicsEditor:function(r,t,w,v,x){void 0===x&&(x=!0);r=k.parseBody(r,t,w,v);x&&!this.world.has(r)&&this.world.add(r);return r},fromSVG:function(r,t,w,v,x,y){void 0===v&&(v=1);void 0===x&&(x={});void 0===y&&(y=!0);w=w.getElementsByTagName("path");for(var A=[],B=0;B<w.length;B++){var z=b.pathToVertices(w[B],30);1!==v&&q.scale(z,v,v);A.push(z)}r=h.fromVertices(r,
t,A,x);y&&this.world.add(r);return r},fromJSON:function(r,t,w,v,x){void 0===v&&(v={});void 0===x&&(x=!0);(r=m.parseBody(r,t,w,v))&&x&&this.world.add(r);return r},imageStack:function(r,t,w,v,x,y,A,B,z){void 0===A&&(A=0);void 0===B&&(B=0);void 0===z&&(z={});var C=this.world,E=this.sys.displayList;z.addToWorld=!1;w=f.stack(w,v,x,y,A,B,function(G,H){G=new g(C,G,H,r,t,z);E.add(G);return G.body});C.add(w);return w},stack:function(r,t,w,v,x,y,A){r=f.stack(r,t,w,v,x,y,A);this.world.add(r);return r},pyramid:function(r,
t,w,v,x,y,A){r=f.pyramid(r,t,w,v,x,y,A);this.world.add(r);return r},chain:function(r,t,w,v,x,y){return f.chain(r,t,w,v,x,y)},mesh:function(r,t,w,v,x){return f.mesh(r,t,w,v,x)},newtonsCradle:function(r,t,w,v,x){r=f.newtonsCradle(r,t,w,v,x);this.world.add(r);return r},car:function(r,t,w,v,x){r=f.car(r,t,w,v,x);this.world.add(r);return r},softBody:function(r,t,w,v,x,y,A,B,z,C){r=f.softBody(r,t,w,v,x,y,A,B,z,C);this.world.add(r);return r},joint:function(r,t,w,v,x){return this.constraint(r,t,w,v,x)},spring:function(r,
t,w,v,x){return this.constraint(r,t,w,v,x)},constraint:function(r,t,w,v,x){void 0===v&&(v=1);void 0===x&&(x={});x.bodyA="body"===r.type?r:r.body;x.bodyB="body"===t.type?t:t.body;isNaN(w)||(x.length=w);x.stiffness=v;r=c.create(x);this.world.add(r);return r},worldConstraint:function(r,t,w,v){void 0===w&&(w=1);void 0===v&&(v={});v.bodyB="body"===r.type?r:r.body;isNaN(t)||(v.length=t);v.stiffness=w;r=c.create(v);this.world.add(r);return r},mouseSpring:function(r){return this.pointerConstraint(r)},pointerConstraint:function(r){void 0===
r&&(r={});r.hasOwnProperty("render")||(r.render={visible:!1});r=new n(this.scene,this.world,r);this.world.add(r.constraint);return r},image:function(r,t,w,v,x){r=new g(this.world,r,t,w,v,x);this.sys.displayList.add(r);return r},tileBody:function(r,t){return new l(this.world,r,t)},sprite:function(r,t,w,v,x){r=new e(this.world,r,t,w,v,x);this.sys.displayList.add(r);this.sys.updateList.add(r);return r},gameObject:function(r,t,w){return d(this.world,r,t,w)},destroy:function(){this.sys=this.scene=this.world=
null}});p.exports=a},function(p,u,a){var h=a(249),f=a(2),c=a(3);p.exports=function(b,d,g,e){void 0===g&&(g={});void 0===e&&(e=!0);var l=d.x,k=d.y;d.body={temp:!0,position:{x:l,y:k}};[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity].forEach(function(m){for(var n in m){var q=m[n];q.get&&"function"===typeof q.get||q.set&&"function"===typeof q.set?Object.defineProperty(d,n,{get:m[n].get,set:m[n].set}):Object.defineProperty(d,n,{value:m[n]})}});
d.world=b;d._tempVec2=new c(l,k);g.hasOwnProperty("type")&&"body"===g.type?d.setExistingBody(g,e):((b=f(g,"shape",null))||(b="rectangle"),g.addToWorld=e,d.setBody(b,g));return d}},function(p,u,a){u=a(0);var h=a(249),f=a(15),c=a(2),b=a(125),d=a(167),g=a(3);a=new u({Extends:b,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,d],initialize:function(e,l,k,m,n,q){f.call(this,e.scene,"Image");this._crop=this.resetCropObject();this.setTexture(m,
n);this.setSizeToFrame();this.setOrigin();this.world=e;this._tempVec2=new g(l,k);(e=c(q,"shape",null))?this.setBody(e,q):this.setRectangle(this.width,this.height,q);this.setPosition(l,k);this.initPipeline()}});p.exports=a},function(p,u,a){var h=a(164);u=a(0);var f=a(249),c=a(15),b=a(2),d=a(167),g=a(73),e=a(3);a=new u({Extends:g,Mixins:[f.Bounce,f.Collision,f.Force,f.Friction,f.Gravity,f.Mass,f.Sensor,f.SetBody,f.Sleep,f.Static,f.Transform,f.Velocity,d],initialize:function(l,k,m,n,q,r){c.call(this,
l.scene,"Sprite");this._crop=this.resetCropObject();this.anims=new h(this);this.setTexture(n,q);this.setSizeToFrame();this.setOrigin();this.world=l;this._tempVec2=new e(k,m);(l=b(r,"shape",null))?this.setBody(l,r):this.setRectangle(this.width,this.height,r);this.setPosition(k,m);this.initPipeline()}});p.exports=a},function(p,u,a){var h=a(84);u=a(0);var f=a(118),c=a(128),b=a(273),d=a(272),g=a(51),e=a(127),l=a(165),k=a(3),m=a(64);a=new u({initialize:function(n,q,r){void 0===r&&(r={});this.scene=n;this.world=
q;this.pointer=this.camera=null;this.active=!0;this.position=new k;this.part=this.body=null;this.constraint=c.create(e(r,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}}));this.world.on(d.BEFORE_UPDATE,this.update,this);n.sys.input.on(g.POINTER_DOWN,this.onDown,this);n.sys.input.on(g.POINTER_UP,this.onUp,this)},onDown:function(n){this.pointer||(this.pointer=n,this.camera=n.camera)},onUp:function(n){n===
this.pointer&&(this.pointer=null)},getBody:function(n){var q=this.position,r=this.constraint;this.camera.getWorldPoint(n.x,n.y,q);n=f.allBodies(this.world.localWorld);for(var t=0;t<n.length;t++){var w=n[t];if(!w.ignorePointer&&h.contains(w.bounds,q)&&b.canCollide(w.collisionFilter,r.collisionFilter)&&this.hitTestBody(w,q))return this.world.emit(d.DRAG_START,w,this.part,this),!0}return!1},hitTestBody:function(n,q){for(var r=this.constraint,t=n.parts.length,w=1<t?1:0;w<t;w++){var v=n.parts[w];if(m.contains(v.vertices,
q))return r.pointA=q,r.pointB={x:q.x-n.position.x,y:q.y-n.position.y},r.bodyB=n,r.angleB=n.angle,l.set(n,!1),this.part=v,this.body=n,!0}return!1},update:function(){var n=this.pointer,q=this.body;if(!this.active||!n)q&&this.stopDrag();else if(!n.isDown&&q)this.stopDrag();else if(n.isDown&&(q||this.getBody(n))){q=this.body;var r=this.position,t=this.constraint;this.camera.getWorldPoint(n.x,n.y,r);t.pointA.x=r.x;t.pointA.y=r.y;l.set(q,!1);this.world.emit(d.DRAG,q,this)}},stopDrag:function(){var n=this.body,
q=this.constraint;q.bodyB=null;this.part=this.body=this.pointer=q.pointB=null;n&&this.world.emit(d.DRAG_END,n,this)},destroy:function(){this.world.removeConstraint(this.constraint);this.part=this.body=this.constraint=this.pointer=null;this.world.off(d.BEFORE_UPDATE,this.update);this.scene.sys.input.off(g.POINTER_DOWN,this.onDown,this);this.scene.sys.input.off(g.POINTER_UP,this.onUp,this)}});p.exports=a},function(p,u,a){var h={};p.exports=h;var f=a(595),c=a(32);(function(){h.name="matter-js";h.version=
"0.14.2";h.uses=[];h.used=[];h.use=function(){f.use(h,Array.prototype.slice.call(arguments))};h.before=function(b,d){b=b.replace(/^Matter./,"");return c.chainPathBefore(h,b,d)};h.after=function(b,d){b=b.replace(/^Matter./,"");return c.chainPathAfter(h,b,d)}})()},function(p,u,a){var h={};p.exports=h;var f=a(83),c=a(274),b=a(84),d=a(86),g=a(64);(function(){h.collides=function(e,l){for(var k=[],m=0;m<l.length;m++){var n=l[m];if(e!==n&&b.overlaps(n.bounds,e.bounds))for(var q=1===n.parts.length?0:1;q<
n.parts.length;q++){var r=n.parts[q];if(b.overlaps(r.bounds,e.bounds)&&(r=c.collides(r,e),r.collided)){k.push(r);break}}}return k};h.ray=function(e,l,k,m){m=m||1E-100;var n=f.angle(l,k),q=f.magnitude(f.sub(l,k));l=d.rectangle(.5*(k.x+l.x),.5*(k.y+l.y),q,m,{angle:n});e=h.collides(l,e);for(l=0;l<e.length;l+=1)k=e[l],k.body=k.bodyB=k.bodyA;return e};h.region=function(e,l,k){for(var m=[],n=0;n<e.length;n++){var q=e[n],r=b.overlaps(q.bounds,l);(r&&!k||!r&&k)&&m.push(q)}return m};h.point=function(e,l){for(var k=
[],m=0;m<e.length;m++){var n=e[m];if(b.contains(n.bounds,l))for(var q=1===n.parts.length?0:1;q<n.parts.length;q++){var r=n.parts[q];if(b.contains(r.bounds,l)&&g.contains(r.vertices,l)){k.push(n);break}}}return k}})()},function(p,u,a){var h={};p.exports=h;var f=a(596),c=a(165),b=a(599),d=a(598),g=a(1523),e=a(597),l=a(166),k=a(118),m=a(128),n=a(32),q=a(41);(function(){h.create=function(r,t){t=n.isElement(r)?t:r;r=n.isElement(r)?r:null;t=t||{};(r||t.render)&&n.warn("Engine.create: engine.render is deprecated (see docs)");
r=n.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:e}},t);r.world=t.world||f.create(r.world);r.pairs=d.create();r.broadphase=r.broadphase.controller.create(r.broadphase);r.metrics=r.metrics||{extended:!1};r.metrics=g.create(r.metrics);return r};h.update=function(r,t,w){t=t||1E3/60;w=w||1;var v=r.world,x=r.timing,y=r.broadphase;x.timestamp+=t*x.timeScale;var A={timestamp:x.timestamp};
l.trigger(r,"beforeUpdate",A);var B=k.allBodies(v),z=k.allConstraints(v);g.reset(r.metrics);r.enableSleeping&&c.update(B,x.timeScale);h._bodiesApplyGravity(B,v.gravity);h._bodiesUpdate(B,t,x.timeScale,w,v.bounds);m.preSolveAll(B);for(t=0;t<r.constraintIterations;t++)m.solveAll(z,x.timeScale);m.postSolveAll(B);y.controller?(v.isModified&&y.controller.clear(y),y.controller.update(y,B,r,v.isModified),t=y.pairsList):t=B;v.isModified&&k.setModified(v,!1,!1,!0);y=y.detector(t,r);v=r.pairs;t=x.timestamp;
d.update(v,y,t);d.removeOld(v,t);r.enableSleeping&&c.afterCollisions(v.list,x.timeScale);0<v.collisionStart.length&&l.trigger(r,"collisionStart",{pairs:v.collisionStart});b.preSolvePosition(v.list);for(t=0;t<r.positionIterations;t++)b.solvePosition(v.list,B,x.timeScale);b.postSolvePosition(B);m.preSolveAll(B);for(t=0;t<r.constraintIterations;t++)m.solveAll(z,x.timeScale);m.postSolveAll(B);b.preSolveVelocity(v.list);for(t=0;t<r.velocityIterations;t++)b.solveVelocity(v.list,x.timeScale);0<v.collisionActive.length&&
l.trigger(r,"collisionActive",{pairs:v.collisionActive});0<v.collisionEnd.length&&l.trigger(r,"collisionEnd",{pairs:v.collisionEnd});g.update(r.metrics,r);h._bodiesClearForces(B);l.trigger(r,"afterUpdate",A);return r};h.merge=function(r,t){n.extend(r,t);if(t.world)for(r.world=t.world,h.clear(r),r=k.allBodies(r.world),t=0;t<r.length;t++){var w=r[t];c.set(w,!1);w.id=n.nextId()}};h.clear=function(r){var t=r.world;d.clear(r.pairs);var w=r.broadphase;w.controller&&(t=k.allBodies(t),w.controller.clear(w),
w.controller.update(w,t,r,!0))};h._bodiesClearForces=function(r){for(var t=0;t<r.length;t++){var w=r[t];w.force.x=0;w.force.y=0;w.torque=0}};h._bodiesApplyGravity=function(r,t){var w="undefined"!==typeof t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==w)for(var v=0;v<r.length;v++){var x=r[v];x.ignoreGravity||x.isStatic||x.isSleeping||(x.force.x+=x.mass*t.x*w*x.gravityScale.x,x.force.y+=x.mass*t.y*w*x.gravityScale.y)}};h._bodiesUpdate=function(r,t,w,v,x){for(x=0;x<r.length;x++){var y=r[x];y.isStatic||
y.isSleeping||q.update(y,t,w,v)}}})()},function(p,u,a){var h=a(86),f=a(41);u=a(0);var c=a(32),b=a(118),d=a(1401),g=a(9),e=a(272),l=a(2),k=a(6),m=a(41),n=a(166),q=a(593),r=a(596),t=a(83);a=new u({Extends:g,initialize:function(w,v){g.call(this);this.scene=w;this.engine=d.create(v);this.localWorld=this.engine.world;var x=k(v,"gravity",null);x?this.setGravity(x.x,x.y,x.scale):!1===x&&this.setGravity(0,0,0);this.walls={left:null,right:null,top:null,bottom:null};this.enabled=k(v,"enabled",!0);this.correction=
k(v,"correction",1);this.getDelta=k(v,"getDelta",this.update60Hz);x=l(v,"runner",{});var y=l(x,"fps",!1),A=l(x,"fps",60),B=l(x,"delta",1E3/A),z=l(x,"deltaMin",1E3/A),C=l(x,"deltaMax",1E3/(.5*A));y||(A=1E3/B);this.runner={fps:A,correction:l(x,"correction",1),deltaSampleSize:l(x,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:l(x,"isFixed",!1),delta:B,deltaMin:z,deltaMax:C};this.autoUpdate=k(v,"autoUpdate",!0);x=k(v,"debug",
!1);this.drawDebug="object"===typeof x?!0:x;this.debugConfig={showAxes:l(x,"showAxes",!1),showAngleIndicator:l(x,"showAngleIndicator",!1),angleColor:l(x,"angleColor",15208787),showBroadphase:l(x,"showBroadphase",!1),broadphaseColor:l(x,"broadphaseColor",16757760),showBounds:l(x,"showBounds",!1),boundsColor:l(x,"boundsColor",16777215),showVelocity:l(x,"showVelocity",!1),velocityColor:l(x,"velocityColor",44783),showCollisions:l(x,"showCollisions",!1),collisionColor:l(x,"collisionColor",16094476),showSeparations:l(x,
"showSeparations",!1),separationColor:l(x,"separationColor",16753920),showBody:l(x,"showBody",!0),showStaticBody:l(x,"showStaticBody",!0),showInternalEdges:l(x,"showInternalEdges",!1),renderFill:l(x,"renderFill",!1),renderLine:l(x,"renderLine",!0),fillColor:l(x,"fillColor",1075465),fillOpacity:l(x,"fillOpacity",1),lineColor:l(x,"lineColor",2678297),lineOpacity:l(x,"lineOpacity",1),lineThickness:l(x,"lineThickness",1),staticFillColor:l(x,"staticFillColor",857979),staticLineColor:l(x,"staticLineColor",
1255396),showSleeping:l(x,"showSleeping",!1),staticBodySleepOpacity:l(x,"staticBodySleepOpacity",.7),sleepFillColor:l(x,"sleepFillColor",4605510),sleepLineColor:l(x,"sleepLineColor",10066585),showSensors:l(x,"showSensors",!0),sensorFillColor:l(x,"sensorFillColor",857979),sensorLineColor:l(x,"sensorLineColor",1255396),showPositions:l(x,"showPositions",!0),positionSize:l(x,"positionSize",4),positionColor:l(x,"positionColor",14697178),showJoint:l(x,"showJoint",!0),jointColor:l(x,"jointColor",14737474),
jointLineOpacity:l(x,"jointLineOpacity",1),jointLineThickness:l(x,"jointLineThickness",2),pinSize:l(x,"pinSize",4),pinColor:l(x,"pinColor",4382944),springColor:l(x,"springColor",14697184),anchorColor:l(x,"anchorColor",15724527),anchorSize:l(x,"anchorSize",4),showConvexHulls:l(x,"showConvexHulls",!1),hullColor:l(x,"hullColor",14091216)};this.drawDebug&&this.createDebugGraphic();this.setEventsProxy();if(l(v,"setBounds",!1))if(A=v.setBounds,"boolean"===typeof A)this.setBounds();else{v=l(A,"x",0);x=l(A,
"y",0);y=l(A,"width",w.sys.scale.width);w=l(A,"height",w.sys.scale.height);B=l(A,"thickness",64);z=l(A,"left",!0);C=l(A,"right",!0);var E=l(A,"top",!0);A=l(A,"bottom",!0);this.setBounds(v,x,y,w,B,z,C,E,A)}},setCompositeRenderStyle:function(w){var v=w.bodies,x=w.constraints;w=w.composites;var y;for(y=0;y<v.length;y++){var A=v[y];var B=A.render;this.setBodyRenderStyle(A,B.lineColor,B.lineOpacity,B.lineThickness,B.fillColor,B.fillOpacity)}for(y=0;y<x.length;y++)A=x[y],B=A.render,this.setConstraintRenderStyle(A,
B.lineColor,B.lineOpacity,B.lineThickness,B.pinSize,B.anchorColor,B.anchorSize);for(y=0;y<w.length;y++)A=w[y],this.setCompositeRenderStyle(A);return this},setBodyRenderStyle:function(w,v,x,y,A,B){var z=w.render,C=this.debugConfig;if(!z)return this;if(void 0===v||null===v)v=w.isStatic?C.staticLineColor:C.lineColor;if(void 0===x||null===x)x=C.lineOpacity;if(void 0===y||null===y)y=C.lineThickness;if(void 0===A||null===A)A=w.isStatic?C.staticFillColor:C.fillColor;if(void 0===B||null===B)B=C.fillOpacity;
!1!==v&&(z.lineColor=v);!1!==x&&(z.lineOpacity=x);!1!==y&&(z.lineThickness=y);!1!==A&&(z.fillColor=A);!1!==B&&(z.fillOpacity=B);return this},setConstraintRenderStyle:function(w,v,x,y,A,B,z){w=w.render;var C=this.debugConfig;if(!w)return this;if(void 0===v||null===v){var E=w.type;"line"===E?v=C.jointColor:"pin"===E?v=C.pinColor:"spring"===E&&(v=C.springColor)}if(void 0===x||null===x)x=C.jointLineOpacity;if(void 0===y||null===y)y=C.jointLineThickness;if(void 0===A||null===A)A=C.pinSize;if(void 0===
B||null===B)B=C.anchorColor;if(void 0===z||null===z)z=C.anchorSize;!1!==v&&(w.lineColor=v);!1!==x&&(w.lineOpacity=x);!1!==y&&(w.lineThickness=y);!1!==A&&(w.pinSize=A);!1!==B&&(w.anchorColor=B);!1!==z&&(w.anchorSize=z);return this},setEventsProxy:function(){var w=this,v=this.engine,x=this.localWorld;this.drawDebug&&(n.on(x,"compositeModified",function(y){w.setCompositeRenderStyle(y)}),n.on(x,"beforeAdd",function(y){y=[].concat(y.object);for(var A=0;A<y.length;A++){var B=y[A],z=B.render;"body"===B.type?
w.setBodyRenderStyle(B,z.lineColor,z.lineOpacity,z.lineThickness,z.fillColor,z.fillOpacity):"composite"===B.type?w.setCompositeRenderStyle(B):"constraint"===B.type&&w.setConstraintRenderStyle(B,z.lineColor,z.lineOpacity,z.lineThickness,z.pinSize,z.anchorColor,z.anchorSize)}}));n.on(x,"beforeAdd",function(y){w.emit(e.BEFORE_ADD,y)});n.on(x,"afterAdd",function(y){w.emit(e.AFTER_ADD,y)});n.on(x,"beforeRemove",function(y){w.emit(e.BEFORE_REMOVE,y)});n.on(x,"afterRemove",function(y){w.emit(e.AFTER_REMOVE,
y)});n.on(v,"beforeUpdate",function(y){w.emit(e.BEFORE_UPDATE,y)});n.on(v,"afterUpdate",function(y){w.emit(e.AFTER_UPDATE,y)});n.on(v,"collisionStart",function(y){var A=y.pairs;if(0<A.length){var B=A[0].bodyA;var z=A[0].bodyB}w.emit(e.COLLISION_START,y,B,z)});n.on(v,"collisionActive",function(y){var A=y.pairs;if(0<A.length){var B=A[0].bodyA;var z=A[0].bodyB}w.emit(e.COLLISION_ACTIVE,y,B,z)});n.on(v,"collisionEnd",function(y){var A=y.pairs;if(0<A.length){var B=A[0].bodyA;var z=A[0].bodyB}w.emit(e.COLLISION_END,
y,B,z)})},setBounds:function(w,v,x,y,A,B,z,C,E){void 0===w&&(w=0);void 0===v&&(v=0);void 0===x&&(x=this.scene.sys.scale.width);void 0===y&&(y=this.scene.sys.scale.height);void 0===A&&(A=64);void 0===B&&(B=!0);void 0===z&&(z=!0);void 0===C&&(C=!0);void 0===E&&(E=!0);this.updateWall(B,"left",w-A,v-A,A,y+2*A);this.updateWall(z,"right",w+x,v-A,A,y+2*A);this.updateWall(C,"top",w,v-A,x,A);this.updateWall(E,"bottom",w,v+y,x,A);return this},updateWall:function(w,v,x,y,A,B){var z=this.walls[v];w?(z&&r.remove(this.localWorld,
z),this.walls[v]=this.create(x+A/2,y+B/2,A,B,{isStatic:!0,friction:0,frictionStatic:0})):(z&&r.remove(this.localWorld,z),this.walls[v]=null)},createDebugGraphic:function(){var w=this.scene.sys.add.graphics({x:0,y:0});w.setDepth(Number.MAX_VALUE);this.debugGraphic=w;this.drawDebug=!0;return w},disableGravity:function(){this.localWorld.gravity.x=0;this.localWorld.gravity.y=0;this.localWorld.gravity.scale=0;return this},setGravity:function(w,v,x){void 0===w&&(w=0);void 0===v&&(v=1);this.localWorld.gravity.x=
w;this.localWorld.gravity.y=v;void 0!==x&&(this.localWorld.gravity.scale=x);return this},create:function(w,v,x,y,A){w=h.rectangle(w,v,x,y,A);r.add(this.localWorld,w);return w},add:function(w){r.add(this.localWorld,w);return this},remove:function(w,v){Array.isArray(w)||(w=[w]);for(var x=0;x<w.length;x++){var y=w[x];b.remove(this.localWorld,y.body?y.body:y,v)}return this},removeConstraint:function(w,v){b.remove(this.localWorld,w,v);return this},convertTilemapLayer:function(w,v){var x=w.layer;w=w.getTilesWithin(0,
0,x.width,x.height,{isColliding:!0});this.convertTiles(w,v);return this},convertTiles:function(w,v){if(0===w.length)return this;for(var x=0;x<w.length;x++)new q(this,w[x],v);return this},nextGroup:function(w){return m.nextGroup(w)},nextCategory:function(){return m.nextCategory()},pause:function(){this.enabled=!1;this.emit(e.PAUSE);return this},resume:function(){this.enabled=!0;this.emit(e.RESUME);return this},update:function(w,v){if(this.enabled&&this.autoUpdate){var x=this.engine,y=this.runner,A=
x.timing,B=this.correction;y.isFixed?v=this.getDelta(w,v):(v=w-y.timePrev||y.delta,y.timePrev=w,y.deltaHistory.push(v),y.deltaHistory=y.deltaHistory.slice(-y.deltaSampleSize),v=Math.min.apply(null,y.deltaHistory),v=v<y.deltaMin?y.deltaMin:v,v=v>y.deltaMax?y.deltaMax:v,B=v/y.delta,y.delta=v);0!==y.timeScalePrev&&(B*=A.timeScale/y.timeScalePrev);0===A.timeScale&&(B=0);y.timeScalePrev=A.timeScale;y.correction=B;y.frameCounter+=1;1E3<=w-y.counterTimestamp&&(y.fps=(w-y.counterTimestamp)/1E3*y.frameCounter,
y.counterTimestamp=w,y.frameCounter=0);d.update(x,v,B)}},step:function(w,v){d.update(this.engine,w,v)},update60Hz:function(){return 1E3/60},update30Hz:function(){return 1E3/30},has:function(w){w=w.hasOwnProperty("body")?w.body:w;return null!==b.get(this.localWorld,w.id,w.type)},getAllBodies:function(){return b.allBodies(this.localWorld)},getAllConstraints:function(){return b.allConstraints(this.localWorld)},getAllComposites:function(){return b.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var w=
this.debugConfig,v=this.engine,x=this.debugGraphic,y=b.allBodies(this.localWorld);this.debugGraphic.clear();w.showBroadphase&&v.broadphase.controller&&this.renderGrid(v.broadphase,x,w.broadphaseColor,.5);w.showBounds&&this.renderBodyBounds(y,x,w.boundsColor,.5);(w.showBody||w.showStaticBody)&&this.renderBodies(y);w.showJoint&&this.renderJoints();(w.showAxes||w.showAngleIndicator)&&this.renderBodyAxes(y,x,w.showAxes,w.angleColor,.5);w.showVelocity&&this.renderBodyVelocity(y,x,w.velocityColor,1,2);
w.showSeparations&&this.renderSeparations(v.pairs.list,x,w.separationColor);w.showCollisions&&this.renderCollisions(v.pairs.list,x,w.collisionColor)}},renderGrid:function(w,v,x,y){v.lineStyle(1,x,y);x=c.keys(w.buckets);for(y=0;y<x.length;y++){var A=x[y];2>w.buckets[A].length||(A=A.split(/C|R/),v.strokeRect(parseInt(A[1],10)*w.bucketWidth,parseInt(A[2],10)*w.bucketHeight,w.bucketWidth,w.bucketHeight))}return this},renderSeparations:function(w,v,x){v.lineStyle(1,x,1);for(x=0;x<w.length;x++){var y=w[x];
if(y.isActive){var A=y.collision;y=A.bodyA;var B=A.bodyB,z=y.position,C=B.position;A=A.penetration;var E=y.isStatic||B.isStatic?1:4;B.isStatic&&(E=0);v.lineBetween(C.x,C.y,C.x-A.x*E,C.y-A.y*E);E=y.isStatic||B.isStatic?1:4;y.isStatic&&(E=0);v.lineBetween(z.x,z.y,z.x-A.x*E,z.y-A.y*E)}}return this},renderCollisions:function(w,v,x){v.lineStyle(1,x,.5);v.fillStyle(x,1);for(x=0;x<w.length;x++){var y=w[x];if(y.isActive)for(var A=0;A<y.activeContacts.length;A++){var B=y.activeContacts[A].vertex;v.fillRect(B.x-
2,B.y-2,5,5)}}for(x=0;x<w.length;x++)if(y=w[x],y.isActive&&(A=y.collision,y=y.activeContacts,0<y.length)){B=y[0].vertex.x;var z=y[0].vertex.y;2===y.length&&(B=(y[0].vertex.x+y[1].vertex.x)/2,z=(y[0].vertex.y+y[1].vertex.y)/2);A.bodyB===A.supports[0].body||A.bodyA.isStatic?v.lineBetween(B-8*A.normal.x,z-8*A.normal.y,B,z):v.lineBetween(B+8*A.normal.x,z+8*A.normal.y,B,z)}return this},renderBodyBounds:function(w,v,x,y){v.lineStyle(1,x,y);for(x=0;x<w.length;x++)if(y=w[x],y.render.visible){var A=y.bounds;
if(A)v.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(y=y.parts,A=1<y.length?1:0;A<y.length;A++){var B=y[A];v.strokeRect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}return this},renderBodyAxes:function(w,v,x,y,A){v.lineStyle(1,y,A);for(y=0;y<w.length;y++){var B=w[y];A=B.parts;if(B.render.visible){var z,C;if(x)for(z=1<A.length?1:0;z<A.length;z++)for(B=A[z],C=0;C<B.axes.length;C++){var E=B.axes[C];v.lineBetween(B.position.x,B.position.y,
B.position.x+20*E.x,B.position.y+20*E.y)}else for(z=1<A.length?1:0;z<A.length;z++)for(B=A[z],C=0;C<B.axes.length;C++)v.lineBetween(B.position.x,B.position.y,(B.vertices[0].x+B.vertices[B.vertices.length-1].x)/2,(B.vertices[0].y+B.vertices[B.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(w,v,x,y,A){v.lineStyle(A,x,y);for(x=0;x<w.length;x++)y=w[x],y.render.visible&&v.lineBetween(y.position.x,y.position.y,y.position.x+2*(y.position.x-y.positionPrev.x),y.position.y+2*(y.position.y-
y.positionPrev.y));return this},renderBodies:function(w){var v=this.debugGraphic,x=this.debugConfig,y=x.showBody,A=x.showStaticBody,B=x.showSleeping,z=x.showInternalEdges,C=x.showConvexHulls,E=x.renderFill,G=x.renderLine,H=x.staticBodySleepOpacity,I=x.sleepFillColor,K=x.sleepLineColor;x=x.hullColor;for(var O=0;O<w.length;O++){var R=w[O];if(R.render.visible&&(A||!R.isStatic)&&(y||R.isStatic)){var F=R.render.lineColor,J=R.render.lineOpacity,N=R.render.lineThickness,Q=R.render.fillColor,T=R.render.fillOpacity;
B&&R.isSleeping&&(R.isStatic?(J*=H,T*=H):(F=K,Q=I));E||(Q=null);G||(F=null);this.renderBody(R,v,z,F,J,N,Q,T);F=R.parts.length;C&&1<F&&this.renderConvexHull(R,v,x,N)}}},renderBody:function(w,v,x,y,A,B,z,C){void 0===y&&(y=null);void 0===A&&(A=null);void 0===B&&(B=1);void 0===z&&(z=null);void 0===C&&(C=null);for(var E=this.debugConfig,G=E.sensorFillColor,H=E.sensorLineColor,I=w.parts,K=I.length,O=1<K?1:0;O<K;O++){var R=I[O],F=R.render,J=F.opacity;if(F.visible&&0!==J&&(!R.isSensor||E.showSensors)){F=
R.circleRadius;v.beginPath();R.isSensor?(null!==z&&v.fillStyle(G,C*J),null!==y&&v.lineStyle(B,H,A*J)):(null!==z&&v.fillStyle(z,C*J),null!==y&&v.lineStyle(B,y,A*J));if(F)v.arc(R.position.x,R.position.y,F,0,2*Math.PI);else{R=R.vertices;J=R.length;v.moveTo(R[0].x,R[0].y);for(F=1;F<J;F++){var N=R[F];!R[F-1].isInternal||x?v.lineTo(N.x,N.y):v.moveTo(N.x,N.y);F<J&&N.isInternal&&!x&&(N=(F+1)%J,v.moveTo(R[N].x,R[N].y))}v.closePath()}null!==z&&v.fillPath();null!==y&&v.strokePath()}}E.showPositions&&!w.isStatic&&
(x=w.position.x,w=w.position.y,y=Math.ceil(E.positionSize/2),v.fillStyle(E.positionColor,1),v.fillRect(x-y,w-y,E.positionSize,E.positionSize));return this},renderConvexHull:function(w,v,x,y){void 0===y&&(y=1);if(1<w.parts.length){w=w.vertices;v.lineStyle(y,x);v.beginPath();v.moveTo(w[0].x,w[0].y);for(x=1;x<w.length;x++)v.lineTo(w[x].x,w[x].y);v.lineTo(w[0].x,w[0].y);v.strokePath()}return this},renderJoints:function(){for(var w=this.debugGraphic,v=b.allConstraints(this.localWorld),x=0;x<v.length;x++){var y=
v[x].render;this.renderConstraint(v[x],w,y.lineColor,y.lineOpacity,y.lineThickness,y.pinSize,y.anchorColor,y.anchorSize)}},renderConstraint:function(w,v,x,y,A,B,z,C){var E=w.render;if(!E.visible||!w.pointA||!w.pointB)return this;v.lineStyle(A,x,y);x=w.bodyA;y=w.bodyB;x=x?t.add(x.position,w.pointA):w.pointA;if("pin"===E.type)v.strokeCircle(x.x,x.y,B);else{var G=y?t.add(y.position,w.pointB):w.pointB;v.beginPath();v.moveTo(x.x,x.y);if("spring"===E.type){B=t.sub(G,x);y=t.perp(t.normalise(B));w=Math.ceil(c.clamp(w.length/
5,12,20));for(var H=1;H<w;H+=1)A=0===H%2?1:-1,v.lineTo(x.x+H/w*B.x+y.x*A*4,x.y+H/w*B.y+y.y*A*4)}v.lineTo(G.x,G.y)}v.strokePath();E.anchors&&0<C&&(v.fillStyle(z),v.fillCircle(x.x,x.y,C),v.fillCircle(G.x,G.y,C));return this},resetCollisionIDs:function(){f._nextCollidingGroupId=1;f._nextNonCollidingGroupId=-1;f._nextCategory=1;return this},shutdown:function(){n.off(this.engine);this.removeAllListeners();r.clear(this.localWorld,!1);d.clear(this.engine);this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});
p.exports=a},function(p,u,a){p.exports={BasePlugin:a(540),DefaultPlugins:a(197),PluginCache:a(24),PluginManager:a(414),ScenePlugin:a(1404)}},function(p,u,a){var h=a(540);u=a(0);var f=a(20);a=new u({Extends:h,initialize:function(c,b,d){h.call(this,b);this.scene=c;this.systems=c.sys;this.pluginKey=d;c.sys.events.once(f.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.systems=this.scene=this.game=this.pluginManager=null}});p.exports=a},function(p,u,a){p.exports={Canvas:a(1406),Events:a(91),
Snapshot:a(1407),WebGL:a(1408)}},function(p,u,a){p.exports={CanvasRenderer:a(368),GetBlendModes:a(370),SetTransform:a(30)}},function(p,u,a){p.exports={Canvas:a(369),WebGL:a(383)}},function(p,u,a){u=a(107);var h=a(17);a={PipelineManager:a(372),Pipelines:a(1409),RenderTarget:a(141),Utils:a(12),WebGLPipeline:a(58),WebGLRenderer:a(371),WebGLShader:a(375)};a=h(!1,a,u);p.exports=a},function(p,u,a){u=a(92);var h=a(17);a={BitmapMaskPipeline:a(373),Events:a(374),GraphicsPipeline:a(376),LightPipeline:a(377),
MultiPipeline:a(108),PointLightPipeline:a(378),PostFXPipeline:a(1410),RopePipeline:a(379),SinglePipeline:a(380),UtilityPipeline:a(381)};a=h(!1,a,u);p.exports=a},function(p,u,a){u=a(0);var h=a(198),f=a(2),c=a(1411),b=a(382),d=a(58);a=new u({Extends:d,initialize:function(g){g.renderTarget=f(g,"renderTarget",1);g.fragShader=f(g,"fragShader",c);g.vertShader=f(g,"vertShader",b);g.attributes=f(g,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]);g.batchSize=1;g.vertices=[-1,-1,0,0,-1,
1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0];d.call(this,g);this.isPostFX=!0;this.colorMatrix=new h;this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){d.prototype.boot.call(this);var g=this.manager.UTILITY_PIPELINE;this.fullFrame1=g.fullFrame1;this.fullFrame2=g.fullFrame2;this.halfFrame1=g.halfFrame1;this.halfFrame2=g.halfFrame2;this.set1i("uMainSampler",0)},onDraw:function(g){this.bindAndDraw(g)},copyFrame:function(g,e,l,k,m){this.manager.copyFrame(g,e,l,k,m)},
copyToGame:function(g){this.manager.copyToGame(g)},drawFrame:function(g,e,l){this.manager.drawFrame(g,e,l,this.colorMatrix)},blendFrames:function(g,e,l,k,m){this.manager.blendFrames(g,e,l,k,m)},blendFramesAdditive:function(g,e,l,k,m){this.manager.blendFramesAdditive(g,e,l,k,m)},clearFrame:function(g,e){this.manager.clearFrame(g,e)},blitFrame:function(g,e,l,k,m,n){this.manager.blitFrame(g,e,l,k,m,n)},copyFrameRect:function(g,e,l,k,m,n,q,r){this.manager.copyFrameRect(g,e,l,k,m,n,q,r)},bindAndDraw:function(g,
e,l,k,m){void 0===l&&(l=!0);void 0===k&&(k=!0);var n=this.gl,q=this.renderer;this.bind(m);this.set1i("uMainSampler",0);e?(n.viewport(0,0,e.width,e.height),n.bindFramebuffer(n.FRAMEBUFFER,e.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e.texture,0),l&&(k?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT))):(q.popFramebuffer(!1,!1,!1),q.currentFramebuffer||n.viewport(0,0,q.width,q.height));n.activeTexture(n.TEXTURE0);n.bindTexture(n.TEXTURE_2D,
g.texture);n.bufferData(n.ARRAY_BUFFER,this.vertexData,n.STATIC_DRAW);n.drawArrays(n.TRIANGLES,0,6);e?(n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null)):q.resetTextures()}});p.exports=a},function(p,u){p.exports="#define SHADER_NAME PHASER_POSTFX_FS\n\nprecision mediump float;\n\nuniform sampler2D uMainSampler;\n\nvarying vec2 outTexCoord;\n\nvoid main ()\n{\n    gl_FragColor = texture2D(uMainSampler, outTexCoord);\n}\n"},function(p,u,a){u=a(17);var h=a(201);a={Center:a(403),
Events:a(104),Orientation:a(404),ScaleManager:a(415),ScaleModes:a(405),Zoom:a(406)};a=u(!1,a,h.CENTER);a=u(!1,a,h.ORIENTATION);a=u(!1,a,h.SCALE_MODE);a=u(!1,a,h.ZOOM);p.exports=a},function(p,u,a){u=a(144);var h=a(17);a={Events:a(20),GetPhysicsPlugins:a(419),GetScenePlugins:a(420),SceneManager:a(417),ScenePlugin:a(1414),Settings:a(421),Systems:a(204)};a=h(!1,a,u);p.exports=a},function(p,u,a){var h=a(18);u=a(0);var f=a(20),c=a(2);a=a(24);u=new u({initialize:function(b){this.scene=b;this.systems=b.sys;
this.settings=b.sys.settings;this.key=b.sys.settings.key;this.manager=b.sys.game.scene;this._elapsed=this.transitionProgress=0;this._target=null;this._duration=0;this._willRemove=this._willSleep=!1;b.sys.events.once(f.BOOT,this.boot,this);b.sys.events.on(f.START,this.pluginStart,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null;this.systems.events.once(f.SHUTDOWN,this.shutdown,this)},start:function(b,d){void 0===b&&(b=this.key);
this.manager.queueOp("stop",this.key);this.manager.queueOp("start",b,d);return this},restart:function(b){var d=this.key;this.manager.queueOp("stop",d);this.manager.queueOp("start",d,b);return this},transition:function(b){void 0===b&&(b={});var d=c(b,"target",!1),g=this.manager.getScene(d);if(!d||!this.checkValidTransition(g))return!1;var e=c(b,"duration",1E3);this._elapsed=0;this._target=g;this._duration=e;this._willSleep=c(b,"sleep",!1);this._willRemove=c(b,"remove",!1);var l=c(b,"onUpdate",null);
l&&(this._onUpdate=l,this._onUpdateScope=c(b,"onUpdateScope",this.scene));l=c(b,"allowInput",!1);this.settings.transitionAllowInput=l;var k=g.sys.settings;k.isTransition=!0;k.transitionFrom=this.scene;k.transitionDuration=e;k.transitionAllowInput=l;c(b,"moveAbove",!1)?this.manager.moveAbove(this.key,d):c(b,"moveBelow",!1)&&this.manager.moveBelow(this.key,d);g.sys.isSleeping()?g.sys.wake(c(b,"data")):this.manager.start(d,c(b,"data"));this.systems.events.emit(f.TRANSITION_OUT,g,e);this.systems.events.on(f.UPDATE,
this.step,this);return!0},checkValidTransition:function(b){return!b||b.sys.isActive()||b.sys.isTransitioning()||b===this.scene||this.systems.isTransitioning()?!1:!0},step:function(b,d){this._elapsed+=d;this.transitionProgress=h(this._elapsed/this._duration,0,1);this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress);this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var b=this._target.sys,d=this._target.sys.settings;this.systems.events.off(f.UPDATE,
this.step,this);b.events.emit(f.TRANSITION_COMPLETE,this.scene);d.isTransition=!1;d.transitionFrom=null;this._duration=0;this._onUpdateScope=this._onUpdate=this._target=null;this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(b,d,g,e){return this.manager.add(b,d,g,e)},launch:function(b,d){b&&b!==this.key&&this.manager.queueOp("start",b,d);return this},run:function(b,d){b&&b!==this.key&&this.manager.queueOp("run",b,d);return this},
pause:function(b,d){void 0===b&&(b=this.key);this.manager.queueOp("pause",b,d);return this},resume:function(b,d){void 0===b&&(b=this.key);this.manager.queueOp("resume",b,d);return this},sleep:function(b,d){void 0===b&&(b=this.key);this.manager.queueOp("sleep",b,d);return this},wake:function(b,d){void 0===b&&(b=this.key);this.manager.queueOp("wake",b,d);return this},switch:function(b){b!==this.key&&this.manager.queueOp("switch",this.key,b);return this},stop:function(b,d){void 0===b&&(b=this.key);this.manager.queueOp("stop",
b,d);return this},setActive:function(b,d,g){void 0===d&&(d=this.key);(d=this.manager.getScene(d))&&d.sys.setActive(b,g);return this},setVisible:function(b,d){void 0===d&&(d=this.key);(d=this.manager.getScene(d))&&d.sys.setVisible(b);return this},isSleeping:function(b){void 0===b&&(b=this.key);return this.manager.isSleeping(b)},isActive:function(b){void 0===b&&(b=this.key);return this.manager.isActive(b)},isPaused:function(b){void 0===b&&(b=this.key);return this.manager.isPaused(b)},isVisible:function(b){void 0===
b&&(b=this.key);return this.manager.isVisible(b)},swapPosition:function(b,d){void 0===d&&(d=this.key);b!==d&&this.manager.swapPosition(b,d);return this},moveAbove:function(b,d){void 0===d&&(d=this.key);b!==d&&this.manager.moveAbove(b,d);return this},moveBelow:function(b,d){void 0===d&&(d=this.key);b!==d&&this.manager.moveBelow(b,d);return this},remove:function(b){void 0===b&&(b=this.key);this.manager.remove(b);return this},moveUp:function(b){void 0===b&&(b=this.key);this.manager.moveUp(b);return this},
moveDown:function(b){void 0===b&&(b=this.key);this.manager.moveDown(b);return this},bringToTop:function(b){void 0===b&&(b=this.key);this.manager.bringToTop(b);return this},sendToBack:function(b){void 0===b&&(b=this.key);this.manager.sendToBack(b);return this},get:function(b){return this.manager.getScene(b)},getIndex:function(b){void 0===b&&(b=this.key);return this.manager.getIndex(b)},shutdown:function(){var b=this.systems.events;b.off(f.SHUTDOWN,this.shutdown,this);b.off(f.POST_UPDATE,this.step,
this);b.off(f.TRANSITION_OUT)},destroy:function(){this.shutdown();this.scene.sys.events.off(f.START,this.start,this);this.manager=this.settings=this.systems=this.scene=null}});a.register("ScenePlugin",u,"scenePlugin");p.exports=u},function(p,u,a){p.exports={Events:a(438),List:a(110),Map:a(102),ProcessQueue:a(211),RTree:a(531),Set:a(149),Size:a(416)}},function(p,u,a){u=a(17);var h=a(1417);a={CanvasTexture:a(423),Events:a(106),FilterMode:h,Frame:a(109),Parsers:a(425),Texture:a(206),TextureManager:a(422),
TextureSource:a(424)};a=u(!1,a,h);p.exports=a},function(p,u){p.exports={LINEAR:0,NEAREST:1}},function(p,u,a){u=a(17);var h=a(1419);a={Components:a(251),Parsers:a(1452),Formats:a(40),ImageCollection:a(576),ParseToTilemap:a(262),Tile:a(85),Tilemap:a(580),TilemapCreator:a(1459),TilemapFactory:a(1460),Tileset:a(122),TilemapLayer:a(581),Orientation:a(29),LayerData:a(120),MapData:a(121),ObjectLayer:a(572)};a=u(!1,a,h.ORIENTATION);p.exports=a},function(p,u,a){u={ORIENTATION:a(29)};p.exports=u},function(p,
u,a){var h=a(26),f=a(63);p.exports=function(c,b,d,g,e,l,k,m){void 0===k&&(k=!0);0>c&&(c=0);0>b&&(b=0);var n=h(c,b,d,g,null,m);c=e-c;b=l-b;for(var q=0;q<n.length;q++){var r=n[q].x+c,t=n[q].y+b;0<=r&&r<m.width&&0<=t&&t<m.height&&m.data[t][r]&&m.data[t][r].copy(n[q])}k&&f(e-1,l-1,d+2,g+2,m)}},function(p,u,a){var h=a(26),f=a(542);p.exports=function(c,b,d,g,e,l){d||(d={});Array.isArray(c)||(c=[c]);var k=l.tilemapLayer;g||(g=k.scene);e||(e=g.cameras.main);var m=h(0,0,l.width,l.height,null,l),n=[],q;for(q=
0;q<m.length;q++){var r=m[q];-1!==c.indexOf(r.index)&&(r=k.tileToWorldXY(r.x,r.y,void 0,e,l),d.x=r.x,d.y=r.y,n.push(g.make.sprite(d)))}if("number"===typeof b)for(q=0;q<c.length;q++)f(c[q],b,0,0,l.width,l.height,l);else if(Array.isArray(b))for(q=0;q<c.length;q++)f(c[q],b[q],0,0,l.width,l.height,l);return n}},function(p,u,a){var h=a(26),f=a(63),c=a(72);p.exports=function(b,d,g,e,l,k,m){for(var n=-1!==m.collideIndexes.indexOf(b),q=h(d,g,e,l,null,m),r=0;r<q.length;r++)q[r].index=b,c(q[r],n);k&&f(d-1,
g-1,e+2,l+2,m)}},function(p,u,a){var h=a(26);p.exports=function(f,c,b,d,g,e,l,k){return h(b,d,g,e,l,k).filter(f,c)}},function(p,u){p.exports=function(a,h,f,c){void 0===h&&(h=0);void 0===f&&(f=!1);var b=0,d,g;if(f)for(d=c.height-1;0<=d;d--)for(f=c.width-1;0<=f;f--){if((g=c.data[d][f])&&g.index===a){if(b===h)return g;b+=1}}else for(d=0;d<c.height;d++)for(f=0;f<c.width;f++)if((g=c.data[d][f])&&g.index===a){if(b===h)return g;b+=1}return null}},function(p,u,a){var h=a(26);p.exports=function(f,c,b,d,g,
e,l,k){return h(b,d,g,e,l,k).find(f,c)||null}},function(p,u,a){var h=a(26);p.exports=function(f,c,b,d,g,e,l,k){h(b,d,g,e,l,k).forEach(f,c)}},function(p,u,a){var h=a(29),f=a(544),c=a(545),b=a(547),d=a(1),g=a(548);p.exports=function(e){return e===h.ORTHOGONAL?f:e===h.HEXAGONAL?c:e===h.STAGGERED?g:e===h.ISOMETRIC?b:d}},function(p,u,a){var h=a(158),f=new (a(3));p.exports=function(c,b,d,g,e){e.tilemapLayer.worldToTileXY(c,b,!0,f,g);return h(f.x,f.y,d,e)}},function(p,u,a){var h=a(483),f=a(26),c=a(484),
b=a(1);u=a(3);var d=function(k,m){return c.RectangleToTriangle(m,k)},g=new u,e=new u,l=new u;p.exports=function(k,m,n,q){if(void 0===k)return[];var r=b;k instanceof h.Circle?r=c.CircleToRectangle:k instanceof h.Rectangle?r=c.RectangleToRectangle:k instanceof h.Triangle?r=d:k instanceof h.Line&&(r=c.LineToRectangle);q.tilemapLayer.worldToTileXY(k.left,k.top,!0,e,n);var t=e.x,w=e.y;q.tilemapLayer.worldToTileXY(k.right,k.bottom,!0,l,n);m=f(t,w,Math.max(Math.ceil(l.x)-t,1),Math.max(Math.ceil(l.y)-w,1),
m,q);w=q.tileWidth;var v=q.tileHeight;q.tilemapLayer&&(w*=q.tilemapLayer.scaleX,v*=q.tilemapLayer.scaleY);t=[];w=new h.Rectangle(0,0,w,v);for(v=0;v<m.length;v++){var x=m[v];q.tilemapLayer.tileToWorldXY(x.x,x.y,g,n);w.x=g.x;w.y=g.y;r(k,w)&&t.push(x)}return t}},function(p,u,a){var h=a(29),f=a(1),c=a(253);p.exports=function(b){return b===h.ORTHOGONAL?c:f}},function(p,u,a){var h=a(29),f=a(550),c=a(551),b=a(1),d=a(552),g=a(553);p.exports=function(e){return e===h.ORTHOGONAL?g:e===h.ISOMETRIC?c:e===h.HEXAGONAL?
f:e===h.STAGGERED?d:b}},function(p,u,a){var h=a(29),f=a(554),c=a(1),b=a(555),d=a(254);p.exports=function(g){return g===h.ORTHOGONAL?d:g===h.HEXAGONAL?f:g===h.STAGGERED?b:c}},function(p,u,a){var h=a(29),f=a(1),c=a(255);p.exports=function(b){return b===h.ORTHOGONAL?c:f}},function(p,u,a){var h=a(29),f=a(556),c=a(557),b=a(1),d=a(558),g=a(559);p.exports=function(e){return e===h.ORTHOGONAL?g:e===h.ISOMETRIC?c:e===h.HEXAGONAL?f:e===h.STAGGERED?d:b}},function(p,u,a){var h=a(29),f=a(560),c=a(1),b=a(561),d=
a(256);p.exports=function(g){return g===h.ORTHOGONAL?d:g===h.HEXAGONAL?f:g===h.STAGGERED?b:c}},function(p,u,a){var h=a(562),f=new (a(3));p.exports=function(c,b,d,g){g.tilemapLayer.worldToTileXY(c,b,!0,f,d);return h(f.x,f.y,g)}},function(p,u,a){var h=a(257),f=new (a(3));p.exports=function(c,b,d,g,e,l){l.tilemapLayer.worldToTileXY(b,d,!0,f,e,l);return h(c,f.x,f.y,g,l)}},function(p,u,a){var h=a(63),f=a(257);p.exports=function(c,b,d,g,e){void 0===g&&(g=!0);if(!Array.isArray(c))return null;Array.isArray(c[0])||
(c=[c]);for(var l=c.length,k=c[0].length,m=0;m<l;m++)for(var n=0;n<k;n++)f(c[m][n],b+n,d+m,!1,e);g&&h(b-1,d-1,k+2,l+2,e)}},function(p,u,a){var h=a(26),f=a(210);p.exports=function(c,b,d,g,e,l){b=h(c,b,d,g,{},l);if(!e)for(e=[],c=0;c<b.length;c++)-1===e.indexOf(b[c].index)&&e.push(b[c].index);for(c=0;c<b.length;c++)b[c].index=f(e)}},function(p,u,a){var h=a(563),f=new (a(3));p.exports=function(c,b,d,g,e,l){l.tilemapLayer.worldToTileXY(c,b,!0,f,e,l);return h(f.x,f.y,d,g,l)}},function(p,u,a){var h=a(26);
u=a(397);var f=new u(105,210,231,150),c=new u(243,134,48,200),b=new u(40,39,37,150);p.exports=function(d,g,e){void 0===g&&(g={});var l=void 0!==g.tileColor?g.tileColor:f,k=void 0!==g.collidingTileColor?g.collidingTileColor:c;g=void 0!==g.faceColor?g.faceColor:b;var m=h(0,0,e.width,e.height,null,e);d.translateCanvas(e.tilemapLayer.x,e.tilemapLayer.y);d.scaleCanvas(e.tilemapLayer.scaleX,e.tilemapLayer.scaleY);for(e=0;e<m.length;e++){var n=m[e],q=n.width,r=n.height,t=n.pixelX,w=n.pixelY,v=n.collides?
k:l;null!==v&&(d.fillStyle(v.color,v.alpha/255),d.fillRect(t,w,q,r));t+=1;w+=1;q-=2;r-=2;null!==g&&(d.lineStyle(1,g.color,g.alpha/255),n.faceTop&&d.lineBetween(t,w,t+q,w),n.faceRight&&d.lineBetween(t+q,w,t+q,w+r),n.faceBottom&&d.lineBetween(t,w+r,t+q,w+r),n.faceLeft&&d.lineBetween(t,w,t,w+r))}}},function(p,u,a){var h=a(72),f=a(63),c=a(160);p.exports=function(b,d,g,e,l){void 0===d&&(d=!0);void 0===g&&(g=!0);void 0===l&&(l=!0);Array.isArray(b)||(b=[b]);for(var k=0;k<b.length;k++)c(b[k],d,e);if(l)for(l=
0;l<e.height;l++)for(k=0;k<e.width;k++){var m=e.data[l][k];m&&-1!==b.indexOf(m.index)&&h(m,d)}g&&f(0,0,e.width,e.height,e)}},function(p,u,a){var h=a(72),f=a(63),c=a(160);p.exports=function(b,d,g,e,l,k){void 0===g&&(g=!0);void 0===e&&(e=!0);void 0===k&&(k=!0);if(!(b>d)){for(var m=b;m<=d;m++)c(m,g,l);if(k)for(k=0;k<l.height;k++)for(m=0;m<l.width;m++){var n=l.data[k][m];n&&n.index>=b&&n.index<=d&&h(n,g)}e&&f(0,0,l.width,l.height,l)}}},function(p,u,a){var h=a(72),f=a(63),c=a(160);p.exports=function(b,
d,g,e){void 0===d&&(d=!0);void 0===g&&(g=!0);Array.isArray(b)||(b=[b]);for(var l=0;l<e.height;l++)for(var k=0;k<e.width;k++){var m=e.data[l][k];m&&-1===b.indexOf(m.index)&&(h(m,d),c(m.index,d,e))}g&&f(0,0,e.width,e.height,e)}},function(p,u,a){var h=a(72),f=a(63),c=a(126);p.exports=function(b,d,g,e){void 0===d&&(d=!0);void 0===g&&(g=!0);for(var l=0;l<e.height;l++)for(var k=0;k<e.width;k++){var m=e.data[l][k];if(m)for(var n in b)if(c(m.properties,n)){var q=b[n];Array.isArray(q)||(q=[q]);for(var r=0;r<
q.length;r++)m.properties[n]===q[r]&&h(m,d)}}g&&f(0,0,e.width,e.height,e)}},function(p,u,a){var h=a(72),f=a(63);p.exports=function(c,b,d){void 0===c&&(c=!0);void 0===b&&(b=!0);for(var g=0;g<d.height;g++)for(var e=0;e<d.width;e++){var l=d.data[g][e];if(l){var k=l.getCollisionGroup();k&&k.objects&&0<k.objects.length&&h(l,c)}}b&&f(0,0,d.width,d.height,d)}},function(p,u){p.exports=function(a,h,f,c){if("number"===typeof a)c.callbacks[a]=null!==h?{callback:h,callbackContext:f}:void 0;else for(var b=0,d=
a.length;b<d;b++)c.callbacks[a[b]]=null!==h?{callback:h,callbackContext:f}:void 0}},function(p,u,a){var h=a(26);p.exports=function(f,c,b,d,g,e,l){f=h(f,c,b,d,null,l);for(c=0;c<f.length;c++)f[c].setCollisionCallback(g,e)}},function(p,u,a){var h=a(26),f=a(131);p.exports=function(c,b,d,g,e){c=h(c,b,d,g,null,e);b=c.map(function(l){return l.index});f(b);for(d=0;d<c.length;d++)c[d].index=b[d]}},function(p,u,a){var h=a(26);p.exports=function(f,c,b,d,g,e,l){b=h(b,d,g,e,null,l);for(d=0;d<b.length;d++)b[d]&&
(b[d].index===f?b[d].index=c:b[d].index===c&&(b[d].index=f))}},function(p,u,a){var h=a(26);p.exports=function(f,c,b,d,g,e){if(g){c=h(f,c,b,d,null,e);for(f=b=0;f<g.length;f++)b+=g[f].weight;if(!(0>=b))for(f=0;f<c.length;f++){d=Math.random()*b;e=0;for(var l=-1,k=0;k<g.length;k++)if(e+=g[k].weight,d<=e){d=g[k].index;l=Array.isArray(d)?d[Math.floor(Math.random()*d.length)]:d;break}c[f].index=l}}}},function(p,u,a){p.exports={FromOrientationString:a(258),Parse:a(564),Parse2DArray:a(259),ParseCSV:a(565),
Impact:a(1454),Tiled:a(1455)}},function(p,u){p.exports=function(a,h){for(var f=0;f<a.length;f++){var c=a[f],b=f;c.name&&""!==c.name&&(b=c.name);if(Array.isArray(c.wangtiles)&&0<c.wangtiles.length){var d={},g={},e;if(Array.isArray(c.edgecolors))for(e=0;e<c.edgecolors.length;e++){var l=1+e;var k=c.edgecolors[e];""!==k.name&&(d[l]=k.name)}if(Array.isArray(c.cornercolors))for(e=0;e<c.cornercolors.length;e++)l=1+e,k=c.cornercolors[e],""!==k.name&&(g[l]=k.name);if(Array.isArray(c.colors))for(e=0;e<c.colors.length;e++)k=
c.colors[e],l=1+e,""!==k.name&&(d[l]=g[l]=k.name);d=[d,g,d,g,d,g,d,g];for(g=0;g<c.wangtiles.length;g++){e=c.wangtiles[g];l=h[e.tileid]||(h[e.tileid]={});l=l.wangid||(l.wangid={});for(var m=[],n=0;n<Math.min(d.length,e.wangid.length);n++)if(k=e.wangid[n],0===k)m.push(void 0);else{var q=d[n][k];void 0!==q?m.push(q):m.push(k)}l[b]=m}}}}},function(p,u,a){p.exports={ParseTileLayers:a(578),ParseTilesets:a(579),ParseWeltmeister:a(577)}},function(p,u,a){p.exports={AssignTileProperties:a(567),Base64Decode:a(574),
BuildTilesetIndex:a(568),CreateGroupLayer:a(161),ParseGID:a(261),ParseImageLayers:a(569),ParseJSONTiled:a(566),ParseObject:a(260),ParseObjectLayers:a(570),ParseTileLayers:a(573),ParseTilesets:a(575)}},function(p,u,a){a(1);a(1);u=a(1457);a=a(1458);p.exports={renderWebGL:u,renderCanvas:a}},function(p,u,a){var h=a(12);p.exports=function(f,c,b){var d=c.cull(b),g=d.length,e=b.alpha*c.alpha;if(!(0===g||0>=e)){var l=c.gidMap,k=f.pipelines.set(c.pipeline,c),m=h.getTintAppendFloatAlpha,n=c.scrollFactorX,q=
c.scrollFactorY,r=c.x,t=c.y,w=c.scaleX,v=c.scaleY;f.pipelines.preBatch(c);for(var x=0;x<g;x++){var y=d[x],A=l[y.index];if(A){var B=A.getTileTextureCoordinates(y.index);if(null!==B){var z=A.glTexture,C=k.setTexture2D(z,c),E=A.tileWidth,G=A.tileHeight,H=B.x;B=B.y;var I=.5*A.tileWidth;A=.5*A.tileHeight;var K=m(y.tint,e*y.alpha);k.batchTexture(c,z,z.width,z.height,r+(I+y.pixelX)*w,t+(A+y.pixelY)*v,y.width,y.height,w,v,y.rotation,y.flipX,y.flipY,n,q,I,A,H,B,E,G,K,K,K,K,!1,0,0,b,null,!0,C)}}}f.pipelines.postBatch(c)}}},
function(p,u,a){u=a(25);var h=new u,f=new u,c=new u;p.exports=function(b,d,g,e){var l=d.cull(g),k=l.length,m=g.alpha*d.alpha;if(!(0===k||0>=m)){f.applyITRS(d.x,d.y,d.rotation,d.scaleX,d.scaleY);h.copyFrom(g.matrix);var n=b.currentContext,q=d.gidMap;n.save();e?(h.multiplyWithOffset(e,-g.scrollX*d.scrollFactorX,-g.scrollY*d.scrollFactorY),f.e=d.x,f.f=d.y,h.multiply(f,c),c.copyToContext(n)):(f.e-=g.scrollX*d.scrollFactorX,f.f-=g.scrollY*d.scrollFactorY,f.copyToContext(n));if(!b.antialias||1<d.scaleX||
1<d.scaleY)n.imageSmoothingEnabled=!1;for(b=0;b<k;b++){d=l[b];var r=q[d.index];if(r&&(g=r.image.getSourceImage(),e=r.getTileTextureCoordinates(d.index),null!==e)){var t=r.tileWidth;r=r.tileHeight;var w=.5*t,v=.5*r;n.save();n.translate(d.pixelX+w,d.pixelY+v);0!==d.rotation&&n.rotate(d.rotation);(d.flipX||d.flipY)&&n.scale(d.flipX?-1:1,d.flipY?-1:1);n.globalAlpha=m*d.alpha;n.drawImage(g,e.x,e.y,t,r,-w,-v,t,r);n.restore()}}n.restore()}}},function(p,u,a){p=a(16);var h=a(262);p.register("tilemap",function(f){f=
void 0!==f?f:{};return h(this.scene,f.key,f.tileWidth,f.tileHeight,f.width,f.height,f.data,f.insertNull)})},function(p,u,a){p=a(5);var h=a(262);p.register("tilemap",function(f,c,b,d,g,e,l){null===f&&(f=void 0);null===c&&(c=void 0);null===b&&(b=void 0);null===d&&(d=void 0);null===g&&(g=void 0);return h(this.scene,f,c,b,d,g,e,l)})},function(p,u,a){p.exports={Clock:a(1462),TimerEvent:a(582)}},function(p,u,a){var h=a(0);u=a(24);var f=a(20),c=a(582),b=a(93);a=new h({initialize:function(d){this.scene=d;
this.systems=d.sys;this.now=0;this.timeScale=1;this.paused=!1;this._active=[];this._pendingInsertion=[];this._pendingRemoval=[];d.sys.events.once(f.BOOT,this.boot,this);d.sys.events.on(f.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time;this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){var d=this.systems.events;d.on(f.PRE_UPDATE,this.preUpdate,this);d.on(f.UPDATE,this.update,this);d.once(f.SHUTDOWN,this.shutdown,this)},addEvent:function(d){d instanceof
c?(this.removeEvent(d),d.elapsed=d.startAt,d.hasDispatched=!1,d.repeatCount=-1===d.repeat||d.loop?999999999999:d.repeat):d=new c(d);this._pendingInsertion.push(d);return d},delayedCall:function(d,g,e,l){return this.addEvent({delay:d,callback:g,args:e,callbackScope:l})},clearPendingEvents:function(){this._pendingInsertion=[];return this},removeEvent:function(d){Array.isArray(d)||(d=[d]);for(var g=0;g<d.length;g++){var e=d[g];b(this._pendingRemoval,e);b(this._pendingInsertion,e);b(this._active,e)}return this},
removeAllEvents:function(){this._pendingRemoval=this._pendingRemoval.concat(this._active);return this},preUpdate:function(){var d=this._pendingRemoval.length,g=this._pendingInsertion.length;if(0!==d||0!==g){var e;for(e=0;e<d;e++){var l=this._pendingRemoval[e];var k=this._active.indexOf(l);-1<k&&this._active.splice(k,1);l.destroy()}for(e=0;e<g;e++)l=this._pendingInsertion[e],this._active.push(l);this._pendingRemoval.length=0;this._pendingInsertion.length=0}},update:function(d,g){this.now=d;if(!this.paused)for(g*=
this.timeScale,d=0;d<this._active.length;d++){var e=this._active[d];if(!e.paused&&(e.elapsed+=g*e.timeScale,e.elapsed>=e.delay)){var l=e.elapsed-e.delay;e.elapsed=e.delay;!e.hasDispatched&&e.callback&&(e.hasDispatched=!0,e.callback.apply(e.callbackScope,e.args));0<e.repeatCount?(e.repeatCount--,e.elapsed=l,e.hasDispatched=!1):this._pendingRemoval.push(e)}}},shutdown:function(){var d;for(d=0;d<this._pendingInsertion.length;d++)this._pendingInsertion[d].destroy();for(d=0;d<this._active.length;d++)this._active[d].destroy();
for(d=0;d<this._pendingRemoval.length;d++)this._pendingRemoval[d].destroy();this._active.length=0;this._pendingRemoval.length=0;this._pendingInsertion.length=0;d=this.systems.events;d.off(f.PRE_UPDATE,this.preUpdate,this);d.off(f.UPDATE,this.update,this);d.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(f.START,this.start,this);this.systems=this.scene=null}});u.register("Clock",a,"time");p.exports=a},function(p,u,a){u=a(100);var h=a(17);a={Builders:a(1464),
Events:a(267),TweenManager:a(1480),Tween:a(266),TweenData:a(268),Timeline:a(588)};a=h(!1,a,u);p.exports=a},function(p,u,a){p.exports={GetBoolean:a(99),GetEaseFunction:a(80),GetNewValue:a(162),GetProps:a(583),GetTargets:a(263),GetTweens:a(584),GetValueOp:a(264),NumberTweenBuilder:a(585),StaggerBuilder:a(586),TimelineBuilder:a(587),TweenBuilder:a(163)}},function(p,u){p.exports="callbackScope completeDelay delay duration ease easeParams flipX flipY hold loop loopDelay offset onActive onActiveParams onActiveScope onComplete onCompleteParams onCompleteScope onLoop onLoopParams onLoopScope onRepeat onRepeatParams onRepeatScope onStart onStartParams onStartScope onStop onStopParams onStopScope onUpdate onUpdateParams onUpdateScope onYoyo onYoyoParams onYoyoScope paused props repeat repeatDelay targets useFrames yoyo".split(" ")},
function(p,u){p.exports="complete"},function(p,u){p.exports="loop"},function(p,u){p.exports="pause"},function(p,u){p.exports="resume"},function(p,u){p.exports="start"},function(p,u){p.exports="update"},function(p,u){p.exports="active"},function(p,u){p.exports="complete"},function(p,u){p.exports="loop"},function(p,u){p.exports="repeat"},function(p,u){p.exports="start"},function(p,u){p.exports="stop"},function(p,u){p.exports="update"},function(p,u){p.exports="yoyo"},function(p,u,a){var h=a(93),f=a(0),
c=a(585);u=a(24);var b=a(20),d=a(586),g=a(587),e=a(100),l=a(163);a=new f({initialize:function(k){this.scene=k;this.systems=k.sys;this.timeScale=1;this._add=[];this._pending=[];this._active=[];this._destroy=[];this._toProcess=0;k.sys.events.once(b.BOOT,this.boot,this);k.sys.events.on(b.START,this.start,this)},boot:function(){this.systems.events.once(b.DESTROY,this.destroy,this)},start:function(){var k=this.systems.events;k.on(b.PRE_UPDATE,this.preUpdate,this);k.on(b.UPDATE,this.update,this);k.once(b.SHUTDOWN,
this.shutdown,this);this.timeScale=1},createTimeline:function(k){return g(this,k)},timeline:function(k){k=g(this,k);k.paused||(this._add.push(k),this._toProcess++);return k},create:function(k){return l(this,k)},add:function(k){k=l(this,k);this._add.push(k);this._toProcess++;return k},existing:function(k){this._add.push(k);this._toProcess++;return this},addCounter:function(k){k=c(this,k);this._add.push(k);this._toProcess++;return k},stagger:function(k,m){return d(k,m)},preUpdate:function(){if(0!==
this._toProcess){var k=this._destroy,m=this._active,n=this._pending,q;for(q=0;q<k.length;q++){var r=k[q];var t=m.indexOf(r);-1===t?(t=n.indexOf(r),-1<t&&(r.state=e.REMOVED,n.splice(t,1))):(r.state=e.REMOVED,m.splice(t,1))}k.length=0;k=this._add;for(q=0;q<k.length;q++)r=k[q],r.state===e.PENDING_ADD&&(r.init()?(r.play(),this._active.push(r)):this._pending.push(r));this._toProcess=k.length=0}},update:function(k,m){var n=this._active;m*=this.timeScale;for(var q=0;q<n.length;q++){var r=n[q];r.update(k,
m)&&(this._destroy.push(r),this._toProcess++)}},remove:function(k){h(this._add,k);h(this._pending,k);h(this._active,k);h(this._destroy,k);k.state=e.REMOVED;return this},makeActive:function(k){if(-1!==this._add.indexOf(k)||-1!==this._active.indexOf(k))return this;var m=this._pending.indexOf(k);-1!==m&&this._pending.splice(m,1);this._add.push(k);k.state=e.PENDING_ADD;this._toProcess++;return this},each:function(k,m){for(var n=[null],q=1;q<arguments.length;q++)n.push(arguments[q]);for(var r in this.list)n[0]=
this.list[r],k.apply(m,n)},getAllTweens:function(){for(var k=this._active,m=[],n=0;n<k.length;n++)m.push(k[n]);return m},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(k,m){void 0===m&&(m=!1);var n=this._active,q=[],r,t;Array.isArray(k)||(k=[k]);for(r=0;r<n.length;r++){var w=n[r];for(t=0;t<k.length;t++)w.hasTarget(k[t])&&q.push(w)}if(m)for(n=this._pending,r=0;r<n.length;r++)for(w=n[r],t=0;t<k.length;t++)w.hasTarget(k[t])&&q.push(w);return q},isTweening:function(k){for(var m=
this._active,n,q=0;q<m.length;q++)if(n=m[q],n.hasTarget(k)&&n.isPlaying())return!0;return!1},killAll:function(){for(var k=this.getAllTweens(),m=0;m<k.length;m++)k[m].stop();return this},killTweensOf:function(k){k=this.getTweensOf(k);for(var m=0;m<k.length;m++)k[m].stop();return this},pauseAll:function(){for(var k=this._active,m=0;m<k.length;m++)k[m].pause();return this},resumeAll:function(){for(var k=this._active,m=0;m<k.length;m++)k[m].resume();return this},setGlobalTimeScale:function(k){this.timeScale=
k;return this},shutdown:function(){this.killAll();this._add=[];this._pending=[];this._active=[];this._destroy=[];this._toProcess=0;var k=this.systems.events;k.off(b.PRE_UPDATE,this.preUpdate,this);k.off(b.UPDATE,this.update,this);k.off(b.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown();this.scene.sys.events.off(b.START,this.start,this);this.systems=this.scene=null}});u.register("TweenManager",a,"tweens");p.exports=a},function(p,u,a){p.exports={Array:a(208),Base64:a(1482),Objects:a(1484),
String:a(1488),NOOP:a(1)}},function(p,u,a){p.exports={ArrayBufferToBase64:a(1483),Base64ToArrayBuffer:a(433)}},function(p,u){p.exports=function(a,h){a=new Uint8Array(a);var f=a.length;h=h?"data:"+h+";base64,":"";for(var c=0;c<f;c+=3)h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[c]>>2],h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(a[c]&3)<<4|a[c+1]>>4],h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(a[c+1]&15)<<2|a[c+2]>>6],
h+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a[c+2]&63];2===f%3?h=h.substring(0,h.length-1)+"=":1===f%3&&(h=h.substring(0,h.length-2)+"==");return h}},function(p,u,a){p.exports={Clone:a(77),DeepCopy:a(175),Extend:a(17),GetAdvancedValue:a(13),GetFastValue:a(2),GetMinMaxValue:a(1485),GetValue:a(6),HasAll:a(1486),HasAny:a(455),HasValue:a(126),IsPlainObject:a(7),Merge:a(127),MergeRight:a(1487),Pick:a(571),SetValue:a(478)}},function(p,u,a){var h=a(6),f=a(18);p.exports=function(c,
b,d,g,e){void 0===e&&(e=d);c=h(c,b,e);return f(c,d,g)}},function(p,u){p.exports=function(a,h){for(var f=0;f<h.length;f++)if(!a.hasOwnProperty(h[f]))return!1;return!0}},function(p,u,a){var h=a(77);p.exports=function(f,c){f=h(f);for(var b in c)f.hasOwnProperty(b)&&(f[b]=c[b]);return f}},function(p,u,a){p.exports={Format:a(1489),Pad:a(186),RemoveAt:a(1490),Reverse:a(1491),UppercaseFirst:a(205),UUID:a(222)}},function(p,u){p.exports=function(a,h){return a.replace(/%([0-9]+)/g,function(f,c){return h[Number(c)-
1]})}},function(p,u){p.exports=function(a,h){return 0===h?a.slice(1):a.slice(0,h-1)+a.slice(h)}},function(p,u){p.exports=function(a){return a.split("").reverse().join("")}},function(p,u,a){p.exports={SoundManagerCreator:a(426),Events:a(70),BaseSound:a(146),BaseSoundManager:a(145),WebAudioSound:a(434),WebAudioSoundManager:a(432),HTML5AudioSound:a(429),HTML5AudioSoundManager:a(427),NoAudioSound:a(431),NoAudioSoundManager:a(430)}},function(p,u,a){p.exports={Arcade:a(1366),Matter:a(1494)}},function(p,
u,a){p.exports={BodyBounds:a(1392),Components:a(249),Events:a(272),Factory:a(1394),MatterGameObject:a(1395),Image:a(1396),Matter:a(594),MatterPhysics:a(1524),PolyDecomp:a(1393),Sprite:a(1397),TileBody:a(593),PhysicsEditorParser:a(589),PhysicsJSONParser:a(590),PointerConstraint:a(1398),World:a(1402)}},function(p,u){p.exports={setBounce:function(a){this.body.restitution=a;return this}}},function(p,u){p.exports={setCollisionCategory:function(a){this.body.collisionFilter.category=a;return this},setCollisionGroup:function(a){this.body.collisionFilter.group=
a;return this},setCollidesWith:function(a){var h=0;if(Array.isArray(a))for(var f=0;f<a.length;f++)h|=a[f];else h=a;this.body.collisionFilter.mask=h;return this},setOnCollide:function(a){this.body.onCollideCallback=a;return this},setOnCollideEnd:function(a){this.body.onCollideEndCallback=a;return this},setOnCollideActive:function(a){this.body.onCollideActiveCallback=a;return this},setOnCollideWith:function(a,h){Array.isArray(a)||(a=[a]);for(var f=0;f<a.length;f++){var c=a[f].hasOwnProperty("body")?
a[f].body:a[f];this.body.setOnCollideWith(c,h)}return this}}},function(p,u,a){var h=a(41);p.exports={applyForce:function(f){this._tempVec2.set(this.body.position.x,this.body.position.y);h.applyForce(this.body,this._tempVec2,f);return this},applyForceFrom:function(f,c){h.applyForce(this.body,f,c);return this},thrust:function(f){var c=this.body.angle;this._tempVec2.set(f*Math.cos(c),f*Math.sin(c));h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustLeft:function(f){var c=
this.body.angle-Math.PI/2;this._tempVec2.set(f*Math.cos(c),f*Math.sin(c));h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustRight:function(f){var c=this.body.angle+Math.PI/2;this._tempVec2.set(f*Math.cos(c),f*Math.sin(c));h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this},thrustBack:function(f){var c=this.body.angle-Math.PI;this._tempVec2.set(f*Math.cos(c),f*Math.sin(c));h.applyForce(this.body,
{x:this.body.position.x,y:this.body.position.y},this._tempVec2);return this}}},function(p,u){p.exports={setFriction:function(a,h,f){this.body.friction=a;void 0!==h&&(this.body.frictionAir=h);void 0!==f&&(this.body.frictionStatic=f);return this},setFrictionAir:function(a){this.body.frictionAir=a;return this},setFrictionStatic:function(a){this.body.frictionStatic=a;return this}}},function(p,u){p.exports={setIgnoreGravity:function(a){this.body.ignoreGravity=a;return this}}},function(p,u,a){var h=a(41),
f=a(3);p.exports={setMass:function(c){h.setMass(this.body,c);return this},setDensity:function(c){h.setDensity(this.body,c);return this},centerOfMass:{get:function(){return new f(this.body.centerOfMass.x,this.body.centerOfMass.y)}}}},function(p,u){p.exports={setSensor:function(a){this.body.isSensor=a;return this},isSensor:function(){return this.body.isSensor}}},function(p,u,a){var h=a(86),f=a(41),c=a(124),b=a(2),d=a(589),g=a(590),e=a(64);p.exports={setRectangle:function(l,k,m){return this.setBody({type:"rectangle",
width:l,height:k},m)},setCircle:function(l,k){return this.setBody({type:"circle",radius:l},k)},setPolygon:function(l,k,m){return this.setBody({type:"polygon",sides:k,radius:l},m)},setTrapezoid:function(l,k,m,n){return this.setBody({type:"trapezoid",width:l,height:k,slope:m},n)},setExistingBody:function(l,k){void 0===k&&(k=!0);this.body&&this.world.remove(this.body,!0);this.body=l;for(var m=0;m<l.parts.length;m++)l.parts[m].gameObject=this;var n=this;l.destroy=function(){n.world.remove(n.body,!0);
n.body.gameObject=null};k&&(this.world.has(l)&&this.world.remove(l,!0),this.world.add(l));if(this._originComponent){k=l.render.sprite.xOffset;m=l.render.sprite.yOffset;var q=l.centerOfMass.y;c(l.centerOfMass.x,.5)&&c(q,.5)?this.setOrigin(k+.5,m+.5):this.setOrigin(k+l.centerOffset.x/this.displayWidth,m+l.centerOffset.y/this.displayHeight)}return this},setBody:function(l,k){if(!l)return this;"string"===typeof l&&(l={type:l});var m=b(l,"type","rectangle"),n=b(l,"x",this._tempVec2.x),q=b(l,"y",this._tempVec2.y),
r=b(l,"width",this.width),t=b(l,"height",this.height);switch(m){case "rectangle":var w=h.rectangle(n,q,r,t,k);break;case "circle":r=b(l,"radius",Math.max(r,t)/2);t=b(l,"maxSides",25);w=h.circle(n,q,r,k,t);break;case "trapezoid":w=b(l,"slope",.5);w=h.trapezoid(n,q,r,t,w,k);break;case "polygon":w=b(l,"sides",5);r=b(l,"radius",Math.max(r,t)/2);w=h.polygon(n,q,w,r,k);break;case "fromVertices":case "fromVerts":if(r=b(l,"verts",null))"string"===typeof r&&(r=e.fromPath(r)),this.body&&!this.body.hasOwnProperty("temp")?
(f.setVertices(this.body,r),w=this.body):(t=b(l,"flagInternal",!1),w=b(l,"removeCollinear",.01),m=b(l,"minimumArea",10),w=h.fromVertices(n,q,r,k,t,w,m));break;case "fromPhysicsEditor":w=d.parseBody(n,q,l,k);break;case "fromPhysicsTracer":w=g.parseBody(n,q,l,k)}w&&this.setExistingBody(w,l.addToWorld);return this}}},function(p,u,a){var h=a(272),f=a(165),c=a(166);p.exports={setToSleep:function(){f.set(this.body,!0);return this},setAwake:function(){f.set(this.body,!1);return this},setSleepThreshold:function(b){void 0===
b&&(b=60);this.body.sleepThreshold=b;return this},setSleepEvents:function(b,d){this.setSleepStartEvent(b);this.setSleepEndEvent(d);return this},setSleepStartEvent:function(b){if(b){var d=this.world;c.on(this.body,"sleepStart",function(g){d.emit(h.SLEEP_START,g,this)})}else c.off(this.body,"sleepStart");return this},setSleepEndEvent:function(b){if(b){var d=this.world;c.on(this.body,"sleepEnd",function(g){d.emit(h.SLEEP_END,g,this)})}else c.off(this.body,"sleepEnd");return this}}},function(p,u){p.exports=
"afteradd"},function(p,u){p.exports="afterremove"},function(p,u){p.exports="afterupdate"},function(p,u){p.exports="beforeadd"},function(p,u){p.exports="beforeremove"},function(p,u){p.exports="beforeupdate"},function(p,u){p.exports="collisionactive"},function(p,u){p.exports="collisionend"},function(p,u){p.exports="collisionstart"},function(p,u){p.exports="dragend"},function(p,u){p.exports="drag"},function(p,u){p.exports="dragstart"},function(p,u){p.exports="pause"},function(p,u){p.exports="resume"},
function(p,u){p.exports="sleepend"},function(p,u){p.exports="sleepstart"},function(p,u,a){var h=a(41);p.exports={setStatic:function(f){h.setStatic(this.body,f);return this},isStatic:function(){return this.body.isStatic}}},function(p,u,a){var h=a(41),f=a(14),c=a(269),b=a(270);p.exports={x:{get:function(){return this.body.position.x},set:function(d){this._tempVec2.set(d,this.y);h.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(d){this._tempVec2.set(this.x,
d);h.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(d){var g=1/this._scaleX,e=1/this._scaleY;this._scaleX=d;this.renderFlags=0===this._scaleX?this.renderFlags&-5:this.renderFlags|4;h.scale(this.body,g,e);h.scale(this.body,d,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(d){var g=1/this._scaleX,e=1/this._scaleY;this._scaleY=d;this.renderFlags=0===this._scaleY?this.renderFlags&-5:this.renderFlags|4;h.scale(this.body,g,e);h.scale(this.body,
this._scaleX,d)}},angle:{get:function(){return b(this.body.angle*f.RAD_TO_DEG)},set:function(d){this.rotation=b(d)*f.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(d){this._rotation=c(d);h.setAngle(this.body,this._rotation)}},setPosition:function(d,g){void 0===d&&(d=0);void 0===g&&(g=d);this._tempVec2.set(d,g);h.setPosition(this.body,this._tempVec2);return this},setRotation:function(d){void 0===d&&(d=0);this._rotation=c(d);h.setAngle(this.body,d);return this},setFixedRotation:function(){h.setInertia(this.body,
Infinity);return this},setAngle:function(d){void 0===d&&(d=0);this.angle=d;h.setAngle(this.body,this.rotation);return this},setScale:function(d,g,e){void 0===d&&(d=1);void 0===g&&(g=d);var l=1/this._scaleX,k=1/this._scaleY;this._scaleX=d;this._scaleY=g;h.scale(this.body,l,k,e);h.scale(this.body,d,g,e);return this}}},function(p,u,a){var h=a(41);p.exports={setAngularVelocity:function(f){h.setAngularVelocity(this.body,f);return this},setVelocityX:function(f){this._tempVec2.set(f,this.body.velocity.y);
h.setVelocity(this.body,this._tempVec2);return this},setVelocityY:function(f){this._tempVec2.set(this.body.velocity.x,f);h.setVelocity(this.body,this._tempVec2);return this},setVelocity:function(f,c){this._tempVec2.set(f,c);h.setVelocity(this.body,this._tempVec2);return this}}},function(p,u,a){var h={};p.exports=h;var f=a(118),c=a(32);(function(){h.create=function(b){return c.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,
narrowEff:1E-4,midEff:1E-4,broadEff:1E-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,b)};h.reset=function(b){b.extended&&(b.narrowDetections=0,b.narrowphaseTests=0,b.narrowReuse=0,b.narrowReuseCount=0,b.midphaseTests=0,b.broadphaseTests=0,b.narrowEff=0,b.midEff=0,b.broadEff=0,b.collisions=0,b.buckets=0,b.pairs=0,b.bodies=0)};h.update=function(b,d){if(b.extended){var g=f.allBodies(d.world);b.collisions=b.narrowDetections;b.pairs=d.pairs.list.length;b.bodies=g.length;b.midEff=(b.narrowDetections/(b.midphaseTests||
1)).toFixed(2);b.narrowEff=(b.narrowDetections/(b.narrowphaseTests||1)).toFixed(2);b.broadEff=(1-b.broadphaseTests/(g.length||1)).toFixed(2);b.narrowReuse=(b.narrowReuseCount/(b.narrowphaseTests||1)).toFixed(2)}}})()},function(p,u,a){var h=a(123),f=a(271),c=a(86),b=a(41),d=a(1392),g=a(84),e=a(0),l=a(118),k=a(591),m=a(128),n=a(273),q=a(50),r=a(1394),t=a(2),w=a(6),v=a(597),x=a(1525),y=a(1526),A=a(1399),B=a(1527),z=a(127),C=a(250),E=a(598),G=a(595);u=a(24);var H=a(1400),I=a(599),K=a(274),O=a(20),R=a(592),
F=a(83),J=a(64),N=a(1402);a=new e({initialize:function(Q){this.scene=Q;this.systems=Q.sys;this.config=this.getConfig();this.body=b;this.composite=l;this.detector=n;this.grid=v;this.pair=C;this.pairs=E;this.query=H;this.resolver=I;this.sat=K;this.constraint=m;this.bodies=c;this.composites=k;this.axes=f;this.bounds=g;this.svg=R;this.vector=F;this.verts=this.vertices=J;this._tempVec2=F.create();w(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin();w(this.config,"plugins.attractors",
!1)&&this.enableAttractorPlugin();w(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin();I._restingThresh=w(this.config,"restingThresh",4);I._restingThreshTangent=w(this.config,"restingThreshTangent",6);I._positionDampen=w(this.config,"positionDampen",.9);I._positionWarming=w(this.config,"positionWarming",.8);I._frictionNormalMultiplier=w(this.config,"frictionNormalMultiplier",5);Q.sys.events.once(O.BOOT,this.boot,this);Q.sys.events.on(O.START,this.start,this)},boot:function(){this.world=new N(this.scene,
this.config);this.add=new r(this.world);this.bodyBounds=new d;this.systems.events.once(O.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new N(this.scene,this.config),this.add=new r(this.world));var Q=this.systems.events;Q.on(O.UPDATE,this.world.update,this.world);Q.on(O.POST_UPDATE,this.world.postUpdate,this.world);Q.once(O.SHUTDOWN,this.shutdown,this)},getConfig:function(){var Q=this.systems.game.config.physics;return z(t(this.systems.settings.physics,"matter",{}),t(Q,"matter",
{}))},enableAttractorPlugin:function(){G.register(x);G.use(A,x);return this},enableWrapPlugin:function(){G.register(B);G.use(A,B);return this},enableCollisionEventsPlugin:function(){G.register(y);G.use(A,y);return this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){this.world.getDelta=this.world.update60Hz;this.world.autoUpdate=!0;return this},set30Hz:function(){this.world.getDelta=this.world.update30Hz;this.world.autoUpdate=!0;return this},
step:function(Q,T){this.world.step(Q,T)},containsPoint:function(Q,T,S){Q=this.getMatterBodies(Q);T=F.create(T,S);return 0<H.point(Q,T).length?!0:!1},intersectPoint:function(Q,T,S){S=this.getMatterBodies(S);Q=F.create(Q,T);var W=[];H.point(S,Q).forEach(function(X){-1===W.indexOf(X)&&W.push(X)});return W},intersectRect:function(Q,T,S,W,X,ba){void 0===X&&(X=!1);ba=this.getMatterBodies(ba);var fa=[];H.region(ba,{min:{x:Q,y:T},max:{x:Q+S,y:T+W}},X).forEach(function(la){-1===fa.indexOf(la)&&fa.push(la)});
return fa},intersectRay:function(Q,T,S,W,X,ba){void 0===X&&(X=1);ba=this.getMatterBodies(ba);var fa=[];Q=H.ray(ba,F.create(Q,T),F.create(S,W),X);for(T=0;T<Q.length;T++)fa.push(Q[T].body);return fa},intersectBody:function(Q,T){T=this.getMatterBodies(T);var S=[];T=H.collides(Q,T);for(var W=0;W<T.length;W++){var X=T[W];X.bodyA===Q?S.push(X.bodyB):S.push(X.bodyA)}return S},overlap:function(Q,T,S,W,X){void 0===S&&(S=null);void 0===W&&(W=null);void 0===X&&(X=S);Array.isArray(Q)||(Q=[Q]);Q=this.getMatterBodies(Q);
T=this.getMatterBodies(T);for(var ba=!1,fa=0;fa<Q.length;fa++)for(var la=Q[fa],na=H.collides(la,T),pa=0;pa<na.length;pa++){var ma=na[pa],ta=ma.bodyA.id===la.id?ma.bodyB:ma.bodyA;if(!W||W.call(X,la,ta,ma))if(ba=!0,S)S.call(X,la,ta,ma);else if(!W)return!0}return ba},setCollisionCategory:function(Q,T){Q=this.getMatterBodies(Q);Q.forEach(function(S){S.collisionFilter.category=T});return this},setCollisionGroup:function(Q,T){Q=this.getMatterBodies(Q);Q.forEach(function(S){S.collisionFilter.group=T});return this},
setCollidesWith:function(Q,T){Q=this.getMatterBodies(Q);var S=0;if(Array.isArray(T))for(var W=0;W<T.length;W++)S|=T[W];else S=T;Q.forEach(function(X){X.collisionFilter.mask=S});return this},getMatterBodies:function(Q){if(!Q)return this.world.getAllBodies();Array.isArray(Q)||(Q=[Q]);for(var T=[],S=0;S<Q.length;S++){var W=Q[S].hasOwnProperty("body")?Q[S].body:Q[S];T.push(W)}return T},setVelocity:function(Q,T,S){Q=this.getMatterBodies(Q);var W=this._tempVec2;W.x=T;W.y=S;Q.forEach(function(X){b.setVelocity(X,
W)});return this},setVelocityX:function(Q,T){Q=this.getMatterBodies(Q);var S=this._tempVec2;S.x=T;Q.forEach(function(W){S.y=W.velocity.y;b.setVelocity(W,S)});return this},setVelocityY:function(Q,T){Q=this.getMatterBodies(Q);var S=this._tempVec2;S.y=T;Q.forEach(function(W){S.x=W.velocity.x;b.setVelocity(W,S)});return this},setAngularVelocity:function(Q,T){Q=this.getMatterBodies(Q);Q.forEach(function(S){b.setAngularVelocity(S,T)});return this},applyForce:function(Q,T){Q=this.getMatterBodies(Q);var S=
this._tempVec2;Q.forEach(function(W){S.x=W.position.x;S.y=W.position.y;b.applyForce(W,S,T)});return this},applyForceFromPosition:function(Q,T,S,W){Q=this.getMatterBodies(Q);var X=this._tempVec2;Q.forEach(function(ba){void 0===W&&(W=ba.angle);X.x=S*Math.cos(W);X.y=S*Math.sin(W);b.applyForce(ba,T,X)});return this},applyForceFromAngle:function(Q,T,S){Q=this.getMatterBodies(Q);var W=this._tempVec2;Q.forEach(function(X){void 0===S&&(S=X.angle);W.x=T*Math.cos(S);W.y=T*Math.sin(S);b.applyForce(X,{x:X.position.x,
y:X.position.y},W)});return this},getConstraintLength:function(Q){var T=Q.pointA.x,S=Q.pointA.y,W=Q.pointB.x,X=Q.pointB.y;Q.bodyA&&(T+=Q.bodyA.position.x,S+=Q.bodyA.position.y);Q.bodyB&&(W+=Q.bodyB.position.x,X+=Q.bodyB.position.y);return q(T,S,W,X)},alignBody:function(Q,T,S,W){Q=Q.hasOwnProperty("body")?Q.body:Q;switch(W){case h.TOP_LEFT:case h.LEFT_TOP:var X=this.bodyBounds.getTopLeft(Q,T,S);break;case h.TOP_CENTER:X=this.bodyBounds.getTopCenter(Q,T,S);break;case h.TOP_RIGHT:case h.RIGHT_TOP:X=
this.bodyBounds.getTopRight(Q,T,S);break;case h.LEFT_CENTER:X=this.bodyBounds.getLeftCenter(Q,T,S);break;case h.CENTER:X=this.bodyBounds.getCenter(Q,T,S);break;case h.RIGHT_CENTER:X=this.bodyBounds.getRightCenter(Q,T,S);break;case h.LEFT_BOTTOM:case h.BOTTOM_LEFT:X=this.bodyBounds.getBottomLeft(Q,T,S);break;case h.BOTTOM_CENTER:X=this.bodyBounds.getBottomCenter(Q,T,S);break;case h.BOTTOM_RIGHT:case h.RIGHT_BOTTOM:X=this.bodyBounds.getBottomRight(Q,T,S)}X&&b.setPosition(Q,X);return this},shutdown:function(){var Q=
this.systems.events;this.world&&(Q.off(O.UPDATE,this.world.update,this.world),Q.off(O.POST_UPDATE,this.world.postUpdate,this.world));Q.off(O.SHUTDOWN,this.shutdown,this);this.add&&this.add.destroy();this.world&&this.world.destroy();this.world=this.add=null},destroy:function(){this.shutdown();this.scene.sys.events.off(O.START,this.start,this);this.systems=this.scene=null}});u.register("MatterPhysics",a,"matterPhysics");p.exports=a},function(p,u,a){var h=a(594),f={name:"matter-attractors",version:"0.1.7",
for:"matter-js@^0.14.2",silent:!0,install:function(c){c.after("Body.create",function(){f.Body.init(this)});c.before("Engine.update",function(b){f.Engine.update(b)})},Body:{init:function(c){c.plugin.attractors=c.plugin.attractors||[]}},Engine:{update:function(c){c=h.Composite.allBodies(c.world);for(var b=0;b<c.length;b++){var d=c[b],g=d.plugin.attractors;if(g&&0<g.length)for(var e=0;e<c.length;e++){var l=c[e];if(b!==e)for(var k=0;k<g.length;k++){var m=g[k],n=m;h.Common.isFunction(m)&&(n=m(d,l));n&&
h.Body.applyForce(l,l.position,n)}}}}},Attractors:{gravityConstant:.001,gravity:function(c,b){var d=h.Vector.sub(b.position,c.position),g=h.Vector.magnitudeSquared(d)||1E-4;d=h.Vector.normalise(d);g=h.Vector.mult(d,c.mass*b.mass/g*-f.Attractors.gravityConstant);h.Body.applyForce(c,c.position,h.Vector.neg(g));h.Body.applyForce(b,b.position,g)}}};p.exports=f},function(p,u){p.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(a){a.after("Engine.create",
function(){a.Events.on(this,"collisionStart",function(h){h.pairs.map(function(f){var c=f.bodyA,b=f.bodyB;c.gameObject&&c.gameObject.emit("collide",c,b,f);b.gameObject&&b.gameObject.emit("collide",b,c,f);a.Events.trigger(c,"onCollide",{pair:f});a.Events.trigger(b,"onCollide",{pair:f});if(c.onCollideCallback)c.onCollideCallback(f);if(b.onCollideCallback)b.onCollideCallback(f);if(c.onCollideWith[b.id])c.onCollideWith[b.id](b,f);if(b.onCollideWith[c.id])b.onCollideWith[c.id](c,f)})});a.Events.on(this,
"collisionActive",function(h){h.pairs.map(function(f){var c=f.bodyA,b=f.bodyB;c.gameObject&&c.gameObject.emit("collideActive",c,b,f);b.gameObject&&b.gameObject.emit("collideActive",b,c,f);a.Events.trigger(c,"onCollideActive",{pair:f});a.Events.trigger(b,"onCollideActive",{pair:f});if(c.onCollideActiveCallback)c.onCollideActiveCallback(f);if(b.onCollideActiveCallback)b.onCollideActiveCallback(f)})});a.Events.on(this,"collisionEnd",function(h){h.pairs.map(function(f){var c=f.bodyA,b=f.bodyB;c.gameObject&&
c.gameObject.emit("collideEnd",c,b,f);b.gameObject&&b.gameObject.emit("collideEnd",b,c,f);a.Events.trigger(c,"onCollideEnd",{pair:f});a.Events.trigger(b,"onCollideEnd",{pair:f});if(c.onCollideEndCallback)c.onCollideEndCallback(f);if(b.onCollideEndCallback)b.onCollideEndCallback(f)})})})}}},function(p,u,a){var h=a(594),f={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(c){c.after("Engine.update",function(){f.Engine.update(this)})},Engine:{update:function(c){var b=
c.world;c=h.Composite.allBodies(b);b=h.Composite.allComposites(b);for(var d=0;d<c.length;d+=1){var g=c[d];g.plugin.wrap&&f.Body.wrap(g,g.plugin.wrap)}for(d=0;d<b.length;d+=1)c=b[d],c.plugin.wrap&&f.Composite.wrap(c,c.plugin.wrap)}},Bounds:{wrap:function(c,b){var d=null,g=null;"undefined"!==typeof b.min.x&&"undefined"!==typeof b.max.x&&(c.min.x>b.max.x?d=b.min.x-c.max.x:c.max.x<b.min.x&&(d=b.max.x-c.min.x));"undefined"!==typeof b.min.y&&"undefined"!==typeof b.max.y&&(c.min.y>b.max.y?g=b.min.y-c.max.y:
c.max.y<b.min.y&&(g=b.max.y-c.min.y));if(null!==d||null!==g)return{x:d||0,y:g||0}}},Body:{wrap:function(c,b){(b=f.Bounds.wrap(c.bounds,b))&&h.Body.translate(c,b);return b}},Composite:{bounds:function(c){c=h.Composite.allBodies(c);for(var b=[],d=0;d<c.length;d+=1){var g=c[d];b.push(g.bounds.min,g.bounds.max)}return h.Bounds.create(b)},wrap:function(c,b){(b=f.Bounds.wrap(f.Composite.bounds(c),b))&&h.Composite.translate(c,b);return b}}};p.exports=f},function(p,u,a){u=a(600);var h=a(33),f=a(17),c={Actions:a(275),
Animations:a(723),BlendModes:a(35),Cache:a(735),Cameras:a(738),Core:a(806),Class:a(0),Create:a(888),Curves:a(894),Data:a(896),Display:a(898),DOM:a(917),Events:a(918),Game:a(920),GameObjects:a(1011),Geom:a(483),Input:a(1308),Loader:a(1338),Math:a(193),Physics:a(1493),Plugins:a(1403),Renderer:a(1405),Scale:a(1412),ScaleModes:a(168),Scene:a(418),Scenes:a(1413),Structs:a(1415),Textures:a(1416),Tilemaps:a(1418),Time:a(1461),Tweens:a(1463),Utils:a(1481)};c.Sound=a(1492);c=f(!1,c,h);p.exports=c;u.Phaser=
c}])})}},ca={};(function(){aa.n=function(ea){var p=ea&&ea.__esModule?function(){return ea["default"]}:function(){return ea};aa.d(p,{a:p});return p}})();(function(){aa.d=function(ea,p){for(var u in p)aa.o(p,u)&&!aa.o(ea,u)&&Object.defineProperty(ea,u,{enumerable:!0,get:p[u]})}})();(function(){aa.o=function(ea,p){return Object.prototype.hasOwnProperty.call(ea,p)}})();(function(){function ea(U,P){if(null==P||P>U.length)P=U.length;for(var V=0,D=Array(P);V<P;V++)D[V]=U[V];return D}function p(U,P,V){var D=
3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,L=window.location.search.substring(1),M=new URLSearchParams(L),Y="#b7b7b7ff";L="#ffffff";var Z=function(ia){return parseInt(ia.repeat(2/ia.length),16)},ja=function(ia,ua){if(!/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(ia))throw Error("Invalid HEX");var oa=Math.floor((ia.length-1)/3);ia=ia.slice(1).match(new RegExp(".{".concat(oa,"}"),"g")).map(Z);var ra;oa=Array.isArray(ia)?ia:void 0;if(!oa)if(oa=null==ia?null:"undefined"!==typeof Symbol&&ia[Symbol.iterator]||
ia["@@iterator"],null!=oa){var sa=[],wa=!0,za=!1;try{for(oa=oa.call(ia);!(wa=(ra=oa.next()).done)&&(sa.push(ra.value),4!==sa.length);wa=!0);}catch(Xa){za=!0;var Ya=Xa}finally{try{if(!wa&&null!=oa["return"])oa["return"]()}finally{if(za)throw Ya;}}oa=sa}else oa=void 0;if(!(ra=oa))a:{if(ia){if("string"===typeof ia){ra=ea(ia,4);break a}ra=Object.prototype.toString.call(ia).slice(8,-1);"Object"===ra&&ia.constructor&&(ra=ia.constructor.name);if("Map"===ra||"Set"===ra){ra=Array.from(ia);break a}if("Arguments"===
ra||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ra)){ra=ea(ia,4);break a}}ra=void 0}if(!(ia=ra))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");ia=ia[3];return"undefined"!==typeof ia?ia/255:"number"!=typeof ua||0>ua||1<ua?1:ua};M.get("loaderBG")&&(Y="#"+M.get("loaderBG"),L="#"+M.get("progressBarColor"));D=null===D?ja(Y):D;Y=Y.slice(0,7);Y=Y.replace("#","0x");Y=parseInt(Y);L=L.replace("#",
"0x");L=parseInt(L);V.add.rectangle(U/2,P/2,U,P,Y,D).setDepth(-1);D=[];Y=.1*U;M=.5*Y;ja=.2*M;for(var ka=-90,ha=0;12>ha;++ha){var qa=Phaser.Math.RotateAround({x:U/2,y:P/2-(Y-.6*M)},U/2,P/2,Phaser.Math.DEG_TO_RAD*ka);qa=V.add.rectangle(qa.x,qa.y,ja,M,L,1).setAngle(ka).setAlpha(.2);D.push(qa);ka+=30}return D}function u(U,P,V){var D=0;var L=null==V?[]:[V];U.time.addEvent({delay:70,loop:!0,callback:function(){if(D<L.length)L[D].restart();else{var M=P[D],Y=U.tweens.add({targets:M,alpha:.2,duration:400,
onStart:function(){M.alpha=1}});L.push(Y)}++D;D>=P.length&&(D=0)}});if(null==V)return L[0]}function a(U){"@babel/helpers - typeof";a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return a(U)}function h(U,P,V){P in U?Object.defineProperty(U,P,{value:V,enumerable:!0,configurable:!0,writable:!0}):U[P]=V;return U}function f(U,P){for(var V=0;V<P.length;V++){var D=
P[V];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function c(U,P,V){P&&f(U.prototype,P);V&&f(U,V);return U}function b(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&d(U,P)}function d(U,P){d=Object.setPrototypeOf||function(V,D){V.__proto__=D;return V};return d(U,P)}function g(U){var P=
e();return function(){var V=l(U);if(P){var D=l(this).constructor;V=Reflect.construct(V,arguments,D)}else V=V.apply(this,arguments);if(!V||"object"!==a(V)&&"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function e(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(U){return!1}}function l(U){l=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)};return l(U)}function k(U){"@babel/helpers - typeof";k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return k(U)}function m(U,P){var V=Array.isArray(U)?U:void 0;if(!V)if(V=null==U?null:
"undefined"!==typeof Symbol&&U[Symbol.iterator]||U["@@iterator"],null==V)V=void 0;else{var D=[],L=!0,M=!1,Y;try{for(V=V.call(U);!(L=(Y=V.next()).done)&&(D.push(Y.value),!P||D.length!==P);L=!0);}catch(ja){M=!0;var Z=ja}finally{try{if(!L&&null!=V["return"])V["return"]()}finally{if(M)throw Z;}}V=D}if(!(Y=V))a:{if(U){if("string"===typeof U){Y=n(U,P);break a}Y=Object.prototype.toString.call(U).slice(8,-1);"Object"===Y&&U.constructor&&(Y=U.constructor.name);if("Map"===Y||"Set"===Y){Y=Array.from(U);break a}if("Arguments"===
Y||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Y)){Y=n(U,P);break a}}Y=void 0}if(!(U=Y))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return U}function n(U,P){if(null==P||P>U.length)P=U.length;for(var V=0,D=Array(P);V<P;V++)D[V]=U[V];return D}function q(U,P){for(var V=0;V<P.length;V++){var D=P[V];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,
D.key,D)}}function r(U,P,V){P&&q(U.prototype,P);V&&q(U,V);return U}function t(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&w(U,P)}function w(U,P){w=Object.setPrototypeOf||function(V,D){V.__proto__=D;return V};return w(U,P)}function v(U){var P=x();return function(){var V=y(U);if(P){var D=y(this).constructor;V=Reflect.construct(V,arguments,
D)}else V=V.apply(this,arguments);if(!V||"object"!==k(V)&&"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function x(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}function y(U){y=Object.setPrototypeOf?Object.getPrototypeOf:
function(P){return P.__proto__||Object.getPrototypeOf(P)};return y(U)}function A(U){U=U.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");U=decodeURIComponent(atob(U).split("").map(function(P){return"%"+("00"+P.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(U)}function B(U,P){for(var V=0;V<P.length;V++){var D=P[V];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function z(U,P,V){P&&B(U.prototype,P);V&&B(U,V);return U}
function C(U){"@babel/helpers - typeof";C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return C(U)}function E(U,P){var V="undefined"!==typeof Symbol&&U[Symbol.iterator]||U["@@iterator"];if(!V){if(Array.isArray(U)||(V=G(U))||P&&U&&"number"===typeof U.length){V&&(U=V);var D=0;P=function(){};return{s:P,n:function(){return D>=U.length?{done:!0}:
{done:!1,value:U[D++]}},e:function(Z){throw Z;},f:P}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var L=!0,M=!1,Y;return{s:function(){V=V.call(U)},n:function(){var Z=V.next();L=Z.done;return Z},e:function(Z){M=!0;Y=Z},f:function(){try{L||null==V.return||V.return()}finally{if(M)throw Y;}}}}function G(U,P){if(U){if("string"===typeof U)return H(U,P);var V=Object.prototype.toString.call(U).slice(8,
-1);"Object"===V&&U.constructor&&(V=U.constructor.name);if("Map"===V||"Set"===V)return Array.from(U);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return H(U,P)}}function H(U,P){if(null==P||P>U.length)P=U.length;for(var V=0,D=Array(P);V<P;V++)D[V]=U[V];return D}function I(U,P){for(var V=0;V<P.length;V++){var D=P[V];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function K(U,P,V){P&&I(U.prototype,P);V&&I(U,V);
return U}function O(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&R(U,P)}function R(U,P){R=Object.setPrototypeOf||function(V,D){V.__proto__=D;return V};return R(U,P)}function F(U){var P=J();return function(){var V=N(U);if(P){var D=N(this).constructor;V=Reflect.construct(V,arguments,D)}else V=V.apply(this,arguments);if(!V||"object"!==C(V)&&
"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function J(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}function N(U){N=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)};
return N(U)}function Q(U){"@babel/helpers - typeof";Q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return Q(U)}function T(U,P){var V="undefined"!==typeof Symbol&&U[Symbol.iterator]||U["@@iterator"];if(!V){if(Array.isArray(U)||(V=S(U))||P&&U&&"number"===typeof U.length){V&&(U=V);var D=0;P=function(){};return{s:P,n:function(){return D>=U.length?
{done:!0}:{done:!1,value:U[D++]}},e:function(Z){throw Z;},f:P}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var L=!0,M=!1,Y;return{s:function(){V=V.call(U)},n:function(){var Z=V.next();L=Z.done;return Z},e:function(Z){M=!0;Y=Z},f:function(){try{L||null==V.return||V.return()}finally{if(M)throw Y;}}}}function S(U,P){if(U){if("string"===typeof U)return W(U,P);var V=Object.prototype.toString.call(U).slice(8,
-1);"Object"===V&&U.constructor&&(V=U.constructor.name);if("Map"===V||"Set"===V)return Array.from(U);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return W(U,P)}}function W(U,P){if(null==P||P>U.length)P=U.length;for(var V=0,D=Array(P);V<P;V++)D[V]=U[V];return D}function X(U,P,V){P in U?Object.defineProperty(U,P,{value:V,enumerable:!0,configurable:!0,writable:!0}):U[P]=V;return U}function ba(U,P){for(var V=0;V<P.length;V++){var D=P[V];D.enumerable=D.enumerable||!1;D.configurable=
!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function fa(U,P,V){P&&ba(U.prototype,P);V&&ba(U,V);return U}function la(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&na(U,P)}function na(U,P){na=Object.setPrototypeOf||function(V,D){V.__proto__=D;return V};return na(U,P)}function pa(U){var P=ma();return function(){var V=
ta(U);if(P){var D=ta(this).constructor;V=Reflect.construct(V,arguments,D)}else V=V.apply(this,arguments);if(!V||"object"!==Q(V)&&"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function ma(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}
function ta(U){ta=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)};return ta(U)}function xa(U){"@babel/helpers - typeof";xa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return xa(U)}function ya(U,P){for(var V=0;V<P.length;V++){var D=P[V];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in
D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function Aa(U,P,V){P&&ya(U.prototype,P);V&&ya(U,V);return U}function Da(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&Ba(U,P)}function Ba(U,P){Ba=Object.setPrototypeOf||function(V,D){V.__proto__=D;return V};return Ba(U,P)}function Ea(U){var P=Fa();return function(){var V=Ha(U);if(P){var D=
Ha(this).constructor;V=Reflect.construct(V,arguments,D)}else V=V.apply(this,arguments);if(!V||"object"!==xa(V)&&"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function Fa(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}function Ha(U){Ha=
Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)};return Ha(U)}function La(U){"@babel/helpers - typeof";La="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return La(U)}function Sa(U,P){if(null==P||P>U.length)P=U.length;for(var V=0,D=Array(P);V<P;V++)D[V]=U[V];return D}function Ta(U,P){for(var V=
0;V<P.length;V++){var D=P[V];D.enumerable=D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function Za(U,P,V){P&&Ta(U.prototype,P);V&&Ta(U,V);return U}function $a(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&Ma(U,P)}function Ma(U,P){Ma=Object.setPrototypeOf||function(V,D){V.__proto__=D;
return V};return Ma(U,P)}function ab(U){var P=bb();return function(){var V=Ia(U);if(P){var D=Ia(this).constructor;V=Reflect.construct(V,arguments,D)}else V=V.apply(this,arguments);if(!V||"object"!==La(V)&&"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function bb(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(U){return!1}}function Ia(U){Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)};return Ia(U)}function Na(U){"@babel/helpers - typeof";Na="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return Na(U)}function Ua(U,P){for(var V=0;V<P.length;V++){var D=P[V];D.enumerable=
D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function cb(U,P,V){P&&Ua(U.prototype,P);V&&Ua(U,V);return U}function db(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&Oa(U,P)}function Oa(U,P){Oa=Object.setPrototypeOf||function(V,D){V.__proto__=D;return V};return Oa(U,P)}function eb(U){var P=
fb();return function(){var V=Ja(U);if(P){var D=Ja(this).constructor;V=Reflect.construct(V,arguments,D)}else V=V.apply(this,arguments);if(!V||"object"!==Na(V)&&"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function fb(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(U){return!1}}function Ja(U){Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)};return Ja(U)}function Pa(U){"@babel/helpers - typeof";Pa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"===typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P};return Pa(U)}function Va(U,P){for(var V=0;V<P.length;V++){var D=P[V];D.enumerable=
D.enumerable||!1;D.configurable=!0;"value"in D&&(D.writable=!0);Object.defineProperty(U,D.key,D)}}function gb(U,P,V){P&&Va(U.prototype,P);V&&Va(U,V);return U}function hb(U,P){if("function"!==typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");U.prototype=Object.create(P&&P.prototype,{constructor:{value:U,writable:!0,configurable:!0}});P&&Qa(U,P)}function Qa(U,P){Qa=Object.setPrototypeOf||function(V,D){V.__proto__=D;return V};return Qa(U,P)}function ib(U){var P=
jb();return function(){var V=Ka(U);if(P){var D=Ka(this).constructor;V=Reflect.construct(V,arguments,D)}else V=V.apply(this,arguments);if(!V||"object"!==Pa(V)&&"function"!==typeof V){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");V=this}return V}}function jb(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,
[],function(){})),!0}catch(U){return!1}}function Ka(U){Ka=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)};return Ka(U)}function Wa(){Ca.scene.isActive("orientationGestion")||(Ca.scene.pause("AssetsLoad"),Ca.scene.pause("GameScene"),Ca.scene.pause("StartScene"),Ca.scene.pause("PauseScene"),Ca.scene.run("orientationGestion",{isReboot:!1}))}var Ga=aa(260),va=aa.n(Ga);(function(U,P){var V=parseInt(U.slice(1,3),16),D=parseInt(U.slice(3,5),16);U=parseInt(U.slice(5,
7),16);return P?"rgba("+V+", "+D+", "+U+", "+P+")":"rgb("+V+", "+D+", "+U+")"})("#FF0000",.5);var kb=function(U,P){(new FontFace(U,"url(".concat(P,")"))).load().then(function(V){document.fonts.add(V)}).catch(function(V){return V})};Ga=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,"AssetsLoad")}b(P,U);var V=g(P);c(P,[{key:"init",value:function(D){this.parseData=D.parseData;this.backurl=D.backurl;this.inWidth=document.documentElement.clientWidth;
this.inHeight=document.documentElement.clientHeight;D=this.cache.json.get("level-pack");D.section1&&D.section1.location?this.urlLocation=D.section1.location:D.location&&(this.urlLocation=D.location);this.JsonParse(D);this.JsonParseObjects(D);void 0===this.backgroundWidthHeight&&(this.backgroundWidthHeight=this.backgroundWidth/this.backgroundHeight);void 0===this.intermediateBGWidthHeight&&(this.intermediateBGWidthHeight=this.intermediateBGWidth/this.intermediateBgHeight);void 0===this.cloudFrontWidthHeight&&
(this.cloudFrontWidthHeight=this.cloudFrontWidth/this.cloudFrontHeight);void 0===this.cloudBackWidthHeight&&(this.cloudBackWidthHeight=this.cloudBackWidth/this.cloudBackHeight)}},{key:"preload",value:function(){this.game.scene.bringToTop(this.scene.key);this.game.scene.stop("Preload");kb("font",this.fonturl);var D=p(this.inWidth,this.inHeight,this),L=null;this.load.on("progress",function(){null===L?L=u(this,D,L):setTimeout(L,400)},this);this.windowProportion=this.inHeight*this.intermediateBGWindowProportion;
!0===this.isImmobileBackground&&(this.backgroundScale=this.inHeight/this.backgroundHeight);this.platformHeight=this.inHeight*this.platformProp;!1===this.isPlatformTransparent&&this.load.image("platform",this.platformAdress);this.powerValue=null;this.calculateProportionBG(this.intermediateBGType);this.loadformatImage(this.intermediateBGType,this.intermediateBG1Adress,this.intermediateBGWidthHeight,null,null,"intermediateBG1",this.powerValue,this);!0===this.isImmobileBackground&&this.loadformatImage(this.backgroundType,
this.background1Adress,this.backgroundWidthHeight,null,null,"bg1",this.powerValue,this);this.intermediateBG2Adress&&(this.loadformatImage(this.intermediateBGType,this.intermediateBG2Adress,this.intermediateBGWidthHeight,null,null,"intermediateBG2",this.powerValue,this),this.loadformatImage(this.backgroundType,this.background2Adress,this.backgroundWidthHeight,null,null,"bg2",this.powerValue,this));!0===this.isCloud&&(null===this.powerValue&&(this.inHeight<=Math.pow(2,Math.round(Math.log2(this.inHeight)))?
(this.powerValue=Math.pow(2,Math.floor(Math.log2(this.inHeight))),this.inHeight<=this.powerValue&&(this.powerValue=Math.pow(2,Math.floor(Math.log2(this.inHeight))-1))):this.powerValue=Math.pow(2,Math.round(Math.log2(this.inHeight)))),this.loadformatImage(this.cloudType,this.cloudFrontAdress,this.cloudFrontWidthHeight,null,null,"cloudFront",this.powerValue,this));this.cloudBackAdress&&this.loadformatImage(this.cloudType,this.cloudBackAdress,this.cloudBackWidthHeight,null,null,"cloudBack",this.powerValue,
this);this.backCloudNightAdress&&this.loadformatImage(this.cloudType,this.backCloudNightAdress,this.cloudBackWidthHeight,null,null,"backCloudNight",this.powerValue,this);this.loadformatImage(this.startButtonType,this.startButtonAdress,this.startButtonProp,this.startButtonWidth,this.startButtonHeight,"startButton",this.powerValue,this);this.loadformatImage(this.tutorialDesktopType,this.tutorialDesktopAdress,this.tutoDesktopProp,this.tutoDesktopWidth,this.tutoDesktopHeight,"tutoDesktop",this.powerValue,
this);this.loadformatImage(this.tutorialMobilType,this.tutorialMobilAdress,this.tutoMobilProp,this.tutoMobilWidth,this.tutoMobilHeight,"tutoMobil",this.powerValue,this);!0===this.isImageInGameOverScene&&this.loadformatImage(this.gameOverType,this.gameOverAdress,this.gameOverProp,this.gameOverWidth,this.gameOverHeight,"gameOver",this.powerValue,this);!0===this.isPauseButton&&this.loadformatImage(this.typePauseButton,this.pauseButtonAdress,null,null,null,"pauseButton",this.powerValue,this);if(this.globalmusic||
this.pickUpBonus||this.jumpSound||this.hurtSound||this.dyingSound||this.selectSound)this.loadformatImage(this.soundType,this.soundOnAdress,null,null,null,"soundOn",this.powerValue,this),this.loadformatImage(this.soundType,this.soundOffAdress,null,null,null,"soundOff",this.powerValue,this);!0===this.isJump&&this.loadformatImage(this.mobileButtonType,this.upButtonAdress,null,null,null,"upButton",this.powerValue,this);!0!==this.isSlide&&!0!==this.isDashAllow||this.loadformatImage(this.mobileButtonType,
this.downButtonAdress,null,null,null,"downButton",this.powerValue,this);this.loadformatImage(this.optionImageType,this.optionImageAdress,null,null,null,"optionImage",this.powerValue,this);this.inHeight>this.inWidth?(this.windowProportion=this.inWidth,this.playerScale=this.windowProportion*this.runPercentageWidth):this.playerScale=this.windowProportion*this.runPercentageHeight;this.playerLoad();this.objectsLoad();this.globalmusic&&this.load.audio("global Music",this.globalmusic);this.pickUpBonus&&
this.load.audio("Pickup_Coin",this.pickUpBonus);this.jumpSound&&this.load.audio("Jump",this.jumpSound);this.hurtSound&&this.load.audio("Hit_Hurt",this.hurtSound);this.dyingSound&&this.load.audio("GameOver",this.dyingSound);this.selectSound&&this.load.audio("Blip_Select",this.selectSound);if(this.inWidth>this.inHeight){var M=document.createElement("img");M.src="./assets/studio_graphics_library/no_landscape_mode.svg";M.width=.9*document.documentElement.clientWidth;M.height=.9*document.documentElement.clientHeight;
document.getElementById("turnNoLandscape").appendChild(M);M=document.createElement("img");M.src="./assets/studio_graphics_library/no_portrait_mode2.svg";M.width=.9*document.documentElement.clientHeight;M.height=.9*document.documentElement.clientWidth;document.getElementById("turnNoPortrait").appendChild(M)}else M=document.createElement("img"),M.src="./assets/studio_graphics_library/no_landscape_mode.svg",M.width=.9*document.documentElement.clientHeight,M.height=.9*document.documentElement.clientWidth,
document.getElementById("turnNoLandscape").appendChild(M),M=document.createElement("img"),M.src="./assets/studio_graphics_library/no_portrait_mode2.svg",M.width=.9*document.documentElement.clientWidth,M.height=.9*document.documentElement.clientHeight,document.getElementById("turnNoPortrait").appendChild(M)}},{key:"create",value:function(){"ontouchstart"in document.documentElement?!0===this.isLandscape&&this.inWidth<this.inHeight||!1===this.isLandscape&&this.inWidth>this.inHeight?this.scene.run("orientationGestion",
{isReboot:!0}):this.startGame():this.startGame()}},{key:"startGame",value:function(){var D;this.AnimationCreate();this.game.scene.start("StartScene",(D={data:this.parseData,backurl:this.backurl,BgScale:this.BgScale,isImmobileBackground:this.isImmobileBackground,backgroundHeight:this.backgroundHeight,backgroundScale:this.backgroundScale,backgroundWidthHeight:this.backgroundWidthHeight,platformHeight:this.platformHeight,platformPosition:this.platformPosition},h(D,"backurl",this.backurl),h(D,"powerValue",
this.powerValue),h(D,"malusType",this.malusType),h(D,"airMalusScale",this.airMalusScale),h(D,"airMalusWidthOnHeight",this.airMalusWidthOnHeight),h(D,"groundMalusScale",this.groundMalusScale),h(D,"groundMalusWidthOnHeight",this.groundMalusWidthOnHeight),h(D,"bonusType",this.bonusType),h(D,"coinScale",this.coinScale),h(D,"coinWidthOnHeight",this.coinWidthOnHeight),h(D,"playerType",this.playerType),h(D,"playerScale",this.playerScale),h(D,"playerWidthOnHeight",this.playerWidthOnHeight),h(D,"playerSlideHeightprop",
this.playerSlideHeightprop),h(D,"slideWidthOnHeight",this.slideWidthOnHeight),h(D,"playerJumpProp",this.playerJumpProp),h(D,"jumpWidthOnHeight",this.jumpWidthOnHeight),h(D,"playerDieHeightProp",this.playerDieHeightProp),h(D,"dieWidthOnHeight",this.dieWidthOnHeight),h(D,"objectsType",this.objectsType),h(D,"objectScale",this.objectScale),h(D,"objectsWithOnHeight",this.objectsWithOnHeight),h(D,"objectsKey",this.objectsKey),h(D,"objectsScore",this.objectsScore),h(D,"objectsIsGrounded",this.objectsIsGrounded),
h(D,"spawnPercentages",this.spawnPercentages),h(D,"objectsAdress",this.objectsAdress),h(D,"globalMusicVolume",this.globalMusicVolume),h(D,"gameOverSoundVolume",this.gameOverSoundVolume),h(D,"guiSoundVolume",this.guiSoundVolume),h(D,"hitHurtVolume",this.hitHurtVolume),h(D,"pickUpVolume",this.pickUpVolume),h(D,"jumpVolume",this.jumpVolume),D))}},{key:"calculeWidthOnHeightFrameSize",value:function(D,L,M){D=Math.fround(D/M);return Math.fround(D/L)}},{key:"calculatePlayerFrameProportion",value:function(D,
L){return Math.fround(D/L)}},{key:"AnimationFactory",value:function(D,L,M,Y,Z,ja,ka){D=this.textures.get(D).getSourceImage();this.textures.addSpriteSheet(L,D,{frameWidth:Math.fround(D.width/M),frameHeight:Math.fround(D.height)});L={key:ka,frames:this.anims.generateFrameNumbers(L),frameRate:Y,yoyo:Z,repeat:ja};this.anims.create(L)}},{key:"AnimationCreate",value:function(){var D=0;this.objectsAnimName=[];for(this.objectsKey=[];D<this.objNumber;){var L="anim"+(parseInt([D])+1);this.objectsAnimName.push(L.toString());
L="objKey"+(parseInt([D])+1);this.objectsKey.push(L.toString());this.AnimationFactory(this.objectsName[D],this.objectsAnimName[D],this.objectsFramesNumber[D],this.objectsAnimConfig[D].frameRate,this.objectsAnimConfig[D].yoyo,this.objectsAnimConfig[D].repeat,this.objectsKey[D]);D++}this.AnimationFactory("playerR","runanim",this.runFrameNumber,this.playerRunFrameRate,this.playerRunYoyo,this.playerRunRepeat,"playerRun");!0===this.isJump&&this.AnimationFactory("playerJ","jumpanim",this.jumpFrameNumber,
this.playerJumpFrameRate,this.playerJumpYoyo,this.playerJumpRepeat,"playerJump");!0===this.isSlide&&this.AnimationFactory("playerS","slideanim",this.slideFrameNumber,this.playerSlideFrameRate,this.playerSlideYoyo,this.playerSlideRepeat,"playerSlide");this.isPlayerinGOScene&&this.AnimationFactory("playerD","deadanim",this.dieFrameNumber,this.playerDieFrameRate,this.playerDieYoyo,this.playerDieRepeat,"playerDead")}},{key:"calculateProportionBG",value:function(D){"svg"!==D?this.BgScale=this.windowProportion/
this.intermediateBgHeight:this.inHeight<=Math.pow(2,Math.round(Math.log2(this.inHeight)))?(this.powerValue=Math.pow(2,Math.floor(Math.log2(this.inHeight))),this.inHeight<=this.powerValue?(this.powerValue=Math.pow(2,Math.floor(Math.log2(this.inHeight))-1),this.BgScale=Math.fround(Math.pow(2,Math.floor(Math.log2(this.inHeight))-1)/this.windowProportion)):this.BgScale=Math.fround(Math.pow(2,Math.floor(Math.log2(this.inHeight)))/this.windowProportion)):(this.powerValue=Math.pow(2,Math.round(Math.log2(this.inHeight))),
this.BgScale=Math.fround(Math.pow(2,Math.round(Math.log2(this.inHeight)))/this.windowProportion))}},{key:"playerLoad",value:function(){this.playerWidthOnHeight=this.calculeWidthOnHeightFrameSize(this.playerRunFrameWidth,this.playerRunFrameHeight,this.runFrameNumber);!0===this.isJump&&(this.jumpWidthOnHeight=this.calculeWidthOnHeightFrameSize(this.playerJumpFrameWidth,this.playerRunFrameHeight,this.jumpFrameNumber));!0===this.isSlide&&(this.slideWidthOnHeight=this.calculeWidthOnHeightFrameSize(this.playerSlideFrameWidth,
this.playerSlideFrameHeight,this.slideFrameNumber));this.dieWidthOnHeight=this.calculeWidthOnHeightFrameSize(this.playerDieFrameWidth,this.playerDieFrameHeight,this.dieFrameNumber);!0===this.isSlide&&(this.playerSlideHeightprop=this.calculatePlayerFrameProportion(this.playerSlideFrameHeight,this.playerRunFrameHeight));!0===this.isJump&&(this.playerJumpProp=this.calculatePlayerFrameProportion(this.playerJumpFrameHeight,this.playerRunFrameHeight));this.playerDieHeightProp=this.calculatePlayerFrameProportion(this.playerDieFrameHeight,
this.playerRunFrameHeight);"svg"!==this.playerType?(this.load.image("playerR",this.playerRunAdress),!0===this.isJump&&this.load.image("playerJ",this.playerJumpAdress),!0===this.isSlide&&this.load.image("playerS",this.playerSlideAdress),this.playerDieAdress&&this.load.image("playerD",this.playerDieAdress)):(this.load.svg("playerR",this.playerRunAdress,{width:Math.fround(this.playerScale*this.playerWidthOnHeight*this.runFrameNumber),height:Math.fround(this.playerScale)}),!0===this.isJump&&this.load.svg("playerJ",
this.playerJumpAdress,{width:Math.fround(this.playerScale*this.playerJumpProp*this.jumpWidthOnHeight*this.jumpFrameNumber),height:Math.fround(this.playerScale*this.playerJumpProp)}),!0===this.isSlide&&this.load.svg("playerS",this.playerSlideAdress,{width:Math.fround(this.playerScale*this.playerSlideHeightprop*this.slideWidthOnHeight*this.slideFrameNumber),height:Math.fround(this.playerScale*this.playerSlideHeightprop)}),this.playerDieAdress&&this.load.svg("playerD",this.playerDieAdress,{width:Math.fround(this.playerScale*
this.playerDieHeightProp*this.dieWidthOnHeight*this.dieFrameNumber),height:Math.fround(this.playerScale*this.playerDieHeightProp)}))}},{key:"objectsLoad",value:function(){var D=0;this.objectScale=[];for(this.objectsWithOnHeight=[];D<this.objNumber;){this.inHeight>this.inWidth?(this.windowProportion=this.inWidth,this.objectScale.push(Math.fround(this.windowProportion*this.objectsWidthProp[D]))):this.objectScale.push(Math.fround(this.windowProportion*this.objectsHeihgtProp[D]));this.objectsWithOnHeight.push(this.calculeWidthOnHeightFrameSize(this.objectsWidth[D],
this.objectsHeight[D],this.objectsFramesNumber[D]));var L="obj"+(parseInt([D])+1);this.objectsName.push(L.toString());"image"===this.objectsType[D]?this.load.image(this.objectsName[D],this.objectsAdress[D]):this.load.svg(this.objectsName[D],this.objectsAdress[D],{width:Math.fround(this.objectScale[D]*this.objectsWithOnHeight[D]*this.objectsFramesNumber[D]),height:Math.fround(this.objectScale[D])});D++}}},{key:"loadformatImage",value:function(D,L,M,Y,Z,ja,ka,ha){"svg"!==D?ha.load.image(ja,L):L===ha.intermediateBG1Adress||
L===ha.intermediateBG2Adress?ha.load.svg(ja,L,{height:ha.powerValue,width:Math.fround(ka*M)}):L===ha.background1Adress||L===ha.background2Adress?ha.load.svg(ja,L,{height:ha.inHeight,width:ha.inHeight*M}):L===ha.cloudFrontAdress||L===ha.cloudBackAdress||L===ha.backCloudNightAdress?ha.load.svg(ja,L,{height:Math.pow(2,Math.min(Math.log2(ka)-1)),width:Math.pow(2,Math.min(Math.log2(ka)-1))*ha.cloudFrontWidthHeight}):L===ha.tutorialDesktopAdress||L===ha.tutorialMobilAdress||L===ha.gameOverAdress?null===
M?ha.load.svg(ja,L):this.inHeight<this.inWidth?ha.load.svg(ja,L,{width:Y/Z*M*this.inHeight,height:this.inHeight*M}):ha.load.svg(ja,L,{width:this.inWidth*M,height:this.inWidth*M/(Y/Z)}):L===ha.startButtonAdress?null===M?ha.load.svg(ja,L):ha.load.svg(ja,L,{width:this.inWidth*M,height:this.inWidth*M/(Y/Z)}):ha.load.svg(ja,L)}},{key:"JsonParseObjects",value:function(D){this.objectsName=[];this.objectsType=[];this.objectsAdress=[];this.objectsWidth=[];this.objectsHeight=[];this.objectsHeihgtProp=[];this.objectsWidthProp=
[];this.objectsAnimConfig=[];this.objectsFramesNumber=[];this.spawnPercentages=[];this.objectsScore=[];this.objectsIsGrounded=[];D=D.section1?D.section1.files:D.files;for(var L in D){for(var M=0,Y=Object.entries(D[L]);M<Y.length;M++)if("objects"===D[L].key&&this.objectsAdress.length<this.objNumber)for(var Z=0;Z<this.objNumber;)this.urlLocation?this.objectsAdress.push(this.urlLocation+D[L].list[Z].url):this.objectsAdress.push(D[L].list[Z].url),this.objectsType.push(D[L].list[Z].type),this.objectsWidth.push(D[L].list[Z].width),
this.objectsHeight.push(D[L].list[Z].height),this.objectsHeihgtProp.push(D[L].list[Z].percentPropHeightCompareToBG),this.objectsWidthProp.push(D[L].list[Z].percentPropWidthCompareToGameWidth),this.objectsFramesNumber.push(D[L].list[Z].frameNumber),this.objectsAnimConfig.push(D[L].list[Z].config),this.objectsScore.push(D[L].list[Z].score),this.spawnPercentages.push(D[L].list[Z].chanceToSpawnInPercent),this.objectsIsGrounded.push(D[L].list[Z].isGround),Z++;L++}}},{key:"JsonParse",value:function(D){D=
D.section1?D.section1.files:D.files;var L={background2:"background2Adress",intermediateBG2:"intermediateBG2Adress","back-clouds2":"backCloudNightAdress",optionImage:"optionImageAdress"},M;for(M in D){for(var Y=0,Z=Object.entries(D[M]);Y<Z.length;Y++)if(L.hasOwnProperty(D[M].key))this[L[D[M].key]]=this.urlLocation?this.urlLocation+D[M].url:D[M].url;else switch(D[M].key){case "gameOption":this.isCloud=D[M].isCloud;this.isPlatformTransparent=D[M].isPlatformTransparent;this.isImmobileBackground=D[M].isImmobileBackground;
this.fonturl=this.urlLocation?this.urlLocation+D[M].fonturl:D[M].fonturl;this.isPlayerinGOScene=D[M].isPlayerinGOScene;this.isDayNightAllow=D[M].isDayNightAllow;this.isDashAllow=D[M].isDashAllow;this.isImageInGameOverScene=D[M].isImageInGameOverScene;this.isPauseButton=D[M].isPauseButton;this.isLandscape=void 0!==D[M].isLandscape?D[M].isLandscape:!1;this.isPortrait=void 0!==D[M].isPortrait?D[M].isPortrait:!0;this.isJump=void 0!=D[M].isJump?D[M].isJump:!0;this.isSlide=void 0!==D[M].isSlide?D[M].isSlide:
!0;break;case "objects":this.objNumber=D[M].list.length;break;case "platform":this.platformAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.platformProp=D[M].percentPropHeightCompareToBG;break;case "background1":this.backgroundType=D[M].type;this.background1Adress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.backgroundHeight=D[M].height;D[M].width&&(this.backgroundWidth=D[M].width);D[M].widthOnHeight&&(this.backgroundWidthHeight=D[M].widthOnHeight);break;case "intermediateBG1":this.intermediateBG1Adress=
this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.intermediateBGType=D[M].type;this.intermediateBGWindowProportion=D[M].heightPropFromWindoweight;this.intermediateBgHeight=D[M].height;D[M].width&&(this.intermediateBGWidth=D[M].width);D[M].widthOnHeight&&(this.intermediateBGWidthHeight=D[M].widthOnHeight);break;case "front-clouds":this.cloudType=D[M].type;this.cloudFrontAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;D[M].widthOnHeight&&(this.cloudFrontWidthHeight=D[M].widthOnHeight);
this.cloudFrontWidth=D[M].width;this.cloudFrontHeight=D[M].height;break;case "back-clouds-day":this.cloudBackAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;D[M].widthOnHeight&&(this.cloudBackWidthHeight=D[M].widthOnHeight);this.cloudBackWidth=D[M].width;this.cloudBackHeight=D[M].height;break;case "bonus":this.bonusType=D[M].type;this.coinAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.coinFrameWidth=D[M].width;this.coinFrameHeight=D[M].height;this.coinHeightPercentage=
D[M].percentPropHeightCompareToBG;this.coinWidthPercentage=D[M].percentPropWidthCompareToGameWidth;this.coinFrameNumber=D[M].frameNumber;this.coinFrameRate=D[M].config.frameRate;this.coinYoyo=D[M].config.yoyo;this.coinRepeat=D[M].config.repeat;break;case "run":this.playerType=D[M].type;this.playerRunAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.playerRunFrameWidth=D[M].width;this.playerRunFrameHeight=D[M].height;this.runPercentageHeight=D[M].percentPropHeightCompareToBG;this.runPercentageWidth=
D[M].percentPropWidthCompareToGameWidth;this.runFrameNumber=D[M].frameNumber;this.playerRunFrameRate=D[M].config.frameRate;this.playerRunYoyo=D[M].config.yoyo;this.playerRunRepeat=D[M].config.repeat;break;case "jump":this.playerJumpAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.playerJumpFrameWidth=D[M].width;this.playerJumpFrameHeight=D[M].height;this.jumpFrameNumber=D[M].frameNumber;this.playerJumpFrameRate=D[M].config.frameRate;this.playerJumpYoyo=D[M].config.yoyo;this.playerJumpRepeat=
D[M].config.repeat;break;case "slide":this.playerSlideAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.playerSlideFrameWidth=D[M].width;this.playerSlideFrameHeight=D[M].height;this.slideFrameNumber=D[M].frameNumber;this.playerSlideFrameRate=D[M].config.frameRate;this.playerSlideYoyo=D[M].config.yoyo;this.playerSlideRepeat=D[M].config.repeat;break;case "dead":this.playerDieAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.playerDieFrameWidth=D[M].width;this.playerDieFrameHeight=
D[M].height;this.dieFrameNumber=D[M].frameNumber;this.playerDieFrameRate=D[M].config.frameRate;this.playerDieYoyo=D[M].config.yoyo;this.playerDieRepeat=D[M].config.repeat;break;case "air-malus":this.malusType=D[M].type;this.enemiesAirAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.enemiesAirFrameWidth=D[M].width;this.enemiesAirFrameHeight=D[M].height;this.airHeightPercentage=D[M].percentPropHeightCompareToBG;this.airWidthPercentage=D[M].percentPropWidthCompareToGameWidth;this.airFrameNumber=
D[M].frameNumber;this.enemiesAirFrameRate=D[M].config.frameRate;this.enemiesAirYoyo=D[M].config.yoyo;this.enemiesAirRepeat=D[M].config.repeat;break;case "ground-malus":this.enemiesGroundAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.enemiesGroundFrameWidth=D[M].width;this.enemiesgroundFrameHeight=D[M].height;this.groundHeightPercentage=D[M].percentPropHeightCompareToBG;this.groundWidthPercentage=D[M].percentPropWidthCompareToGameWidth;this.groundFrameNumber=D[M].frameNumber;this.enemiesgroundFrameRate=
D[M].config.frameRate;this.enemiesgroundYoyo=D[M].config.yoyo;this.enemiesgroundRepeat=D[M].config.repeat;break;case "background-music":this.globalmusic=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.globalMusicVolume=D[M].volume?D[M].volume:1;break;case "bonus-sound":this.pickUpBonus=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.pickUpVolume=D[M].volume?D[M].volume:.5;break;case "jump-sound":this.jumpSound=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.jumpVolume=D[M].volume?
D[M].volume:.3;break;case "hurt-sound":this.hurtSound=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.hitHurtVolume=D[M].volume?D[M].volume:.5;break;case "gameover-sound":this.dyingSound=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.gameOverSoundVolume=D[M].volume?D[M].volume:1;break;case "select-sound":this.selectSound=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.guiSoundVolume=D[M].volume?D[M].volume:1;break;case "pauseButton":this.typePauseButton=D[M].type;this.pauseButtonAdress=
this.urlLocation?this.urlLocation+D[M].url:D[M].url;break;case "btn-jump":this.upButtonAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.mobileButtonType=D[M].type;break;case "btn-slide":this.downButtonAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.mobileButtonType=D[M].type;break;case "btn-start":this.startButtonAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.startButtonType=D[M].type;this.startButtonWidth=D[M].width;this.startButtonHeight=D[M].height;
this.startButtonProp=D[M].percentPropWidthCompareToGameWidth;break;case "btn-sound-off":this.soundOffAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.soundType=D[M].type;break;case "btn-sound-on":this.soundOnAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.soundType=D[M].type;break;case "pannel-gameover":this.gameOverAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.gameOverType=D[M].type;this.gameOverWidth=D[M].width;this.gameOverHeight=D[M].height;this.gameOverProp=
this.inHeight>this.inWidth?D[M].percentPropHeightCompareToGameHeight:D[M].percentPropWidthCompareToGameWidth;break;case "pannel-tuto-mobile":this.tutorialMobilAdress=this.urlLocation?this.urlLocation+D[M].url:D[M].url;this.tutorialMobilType=D[M].type;this.tutoMobilWidth=D[M].width;this.tutoMobilHeight=D[M].height;this.tutoMobilProp=this.inHeight<this.inWidth?D[M].percentPropHeightCompareToGameHeight:D[M].percentPropWidthCompareToGameWidth;break;case "pannel-tuto-desktop":this.tutorialDesktopAdress=
this.urlLocation?this.urlLocation+D[M].url:D[M].url,this.tutorialDesktopType=D[M].type,this.tutoDesktopWidth=D[M].width,this.tutoDesktopHeight=D[M].height,this.tutoDesktopProp=this.inHeight<this.inWidth?D[M].percentPropHeightCompareToGameHeight:D[M].percentPropWidthCompareToGameWidth}M++}}}]);return P}(va().Scene);var lb=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,"Preload")}t(P,U);var V=v(P);r(P,[{key:"init",value:function(D){this.nextScene=
D.scene;this.inWidth=D.inWidth;this.inHeight=D.inHeight;void 0===this.inWidth&&(this.inWidth=window.innerWidth);void 0===this.inHeight&&(this.inHeight=window.innerHeight)}},{key:"preload",value:function(){var D=window.location.search.substring(1),L=new URLSearchParams(D);D="#b7b7b7ff";var M="#ffffff";if(L.get("token")){this.gettoken=L.get("token");this.parseData=A(this.gettoken);var Y=function(oa){return parseInt(oa.repeat(2/oa.length),16)};L.get("loaderBG")&&(D="#"+L.get("loaderBG"),M="#"+L.get("progressBarColor"));
L=0;for(var Z=Object.entries(this.parseData);L<Z.length;L++){var ja=m(Z[L],2),ka=ja[1];switch(ja[0]){case "JsonAdress":this.JsonAdress=ka;break;case "config_location":if(void 0==this.JsonAdress||null==this.JsonAdress)this.JsonAdress=ka;break;case "config_override":this.backurl=ka.postURL;case "landscape":this.landscape=ka}}this.load.json("level-pack",this.JsonAdress);var ha=this.inWidth,qa=this.inHeight;L=this.add.graphics();var ia=this.add.graphics();Z=this.add.graphics();var ua=this.make.text({x:ha/
2,y:qa/2+15,text:"0%",style:{font:"18px monospace",fill:D}});ja=function(oa,ra){if(!/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(oa))throw Error("Invalid HEX");var sa=Math.floor((oa.length-1)/3);oa=oa.slice(1).match(new RegExp(".{".concat(sa,"}"),"g")).map(Y);oa=m(oa,4)[3];return"undefined"!==typeof oa?oa/255:"number"!=typeof ra||0>ra||1<ra?1:ra}(D);D=D.slice(0,7);D=D.replace("#","0x");D=parseInt(D);M=M.replace("#","0x");M=parseInt(M);ua.setOrigin(.5,.5);Z.fillRect(ha/4-10,qa/2-10,ha/2,50);Z.fillStyle(D);ha>
qa?L.fillPoint(ha/2,qa/2,ha):L.fillPoint(ha/2,qa/2,qa);L.fillStyle(M);L.setAlpha(ja);this.load.on("progress",function(oa){ia.clear();ia.fillStyle(M,.5);ia.fillRect(ha/4,qa/2,(ha/2-20)*oa,30);ua.setText(parseInt(100*oa)+"%")});this.flagMissingJWT=!1}else this.flagMissingJWT=!0}},{key:"create",value:function(){this.flagMissingJWT?(this.text=this.add.text(window.innerWidth/2,window.innerHeight/2,"The JWT and config are missing. \nThe game cannot start.",{fontSize:"30px",color:"#FFFFFF",stroke:"#696969"}),
this.text.displayWidth>this.inWidth&&text.setDisplaySize(this.inWidth-10,text.displayHeight),this.text.setPosition(window.innerWidth/2-this.text.displayWidth/2,window.innerHeight/2)):this.game.scene.start(this.nextScene,{data:this.parseData,backurl:this.backurl,inWidth:this.inWidth,inHeight:this.inHeight})}}]);return P}(va().Scene),Ra=function(){function U(P){if(!(this instanceof U))throw new TypeError("Cannot call a class as a function");}z(U,[{key:"create",value:function(P,V){this.scene=P;var D=
P.add.image(0,0,"soundOn");D.setDepth(499);D.setPosition(V-5-D.displayWidth/2,5+D.displayHeight/2);D.setInteractive({cursor:"pointer"});D.on("pointerover",function(L){D.setAlpha(.8)},P);D.on("pointerout",function(L){D.setAlpha(1)},P);D.on("pointerdown",this.musicMute,P);P.fMusicButton=D;!1===P.sound.mute?P.fMusicButton.setTexture("soundOn"):P.fMusicButton.setTexture("soundOff");return D}},{key:"getMusicButtonPosition",value:function(){return this.scene.fMusicButton.y}},{key:"musicMute",value:function(){1==
this.sound.mute?(this.sound.mute=!1,this.fMusicButton.setTexture("soundOn")):(this.sound.mute=!0,this.fMusicButton.setTexture("soundOff"))}}]);return U}(),mb=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,"GameScene")}O(P,U);var V=F(P);K(P,[{key:"init",value:function(D){var L={data:"gameoption",flagClouds:"flagClouds",isImmobileBackground:"isImmobileBackground",inWidth:"inWidth",inHeight:"inHeight",BgScale:"BgScale",backgroundHeight:"backgroundHeight",
backgroundWidthHeight:"backgroundWidthHeight",backgroundScale:"backgroundScale",platformHeight:"platformHeight",platformPosition:"platformPosition",backurl:"backurl",powerValue:"powerValue",playerScale:"playerScale",playerSlideHeightprop:"playerSlideHeightprop",slideWidthOnHeight:"slideWidthOnHeight",playerWidthOnHeight:"playerWidthOnHeight",playerJumpProp:"playerJumpProp",jumpWidthOnHeight:"jumpWidthOnHeight",playerDieHeightProp:"playerDieHeightProp",dieWidthOnHeight:"dieWidthOnHeight",playerType:"playerType",
objectsType:"objectsType",objectScale:"objectScale",objectsWithOnHeight:"objectsWithOnHeight",objectsKey:"objectsKey",objectsScore:"objectsScore",objectsIsGrounded:"objectsIsGrounded",spawnPercentages:"spawnPercentages",objectsAdress:"objectsAdress",globalMusicVolume:"globalMusicVolume",gameOverSoundVolume:"gameOverSoundVolume",guiSoundVolume:"guiSoundVolume",hitHurtVolume:"hitHurtVolume",pickUpVolume:"pickUpVolume",jumpVolume:"jumpVolume"},M=0;for(D=Object.entries(D);M<D.length;M++){var Y=D[M];var Z=
Y;Z=Array.isArray(Z)?Z:void 0;if(!Z){var ja=Z=void 0,ka=null==Y?null:"undefined"!==typeof Symbol&&Y[Symbol.iterator]||Y["@@iterator"];if(null!=ka){var ha=[],qa=!0,ia=!1;try{for(ka=ka.call(Y);!(qa=(ja=ka.next()).done)&&(ha.push(ja.value),2!==ha.length);qa=!0);}catch(ua){ia=!0,Z=ua}finally{try{if(!qa&&null!=ka["return"])ka["return"]()}finally{if(ia)throw Z;}}Z=ha}else Z=void 0}if(!(Y=Z||G(Y,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
Z=Y;Y=Z[0];Z=Z[1];L.hasOwnProperty(Y)&&(this[L[Y]]=Z)}L=this.cache.json.get("level-pack");this.JsonParse(L);this.cache.audio.exists("global Music")&&(this.globalMusic=this.game.sound.add("global Music",{loop:!0,volume:this.globalMusicVolume}))}},{key:"preload",value:function(){this.startScene=this.scene.get("StartScene")}},{key:"create",value:function(){this.scene.bringToTop("GameScene");this.startTime=(new Date).getTime();this.cameras.main.fadeIn(2E3,0,0,0);this.cache.audio.exists("global Music")&&
this.globalMusic.play();this.automaticScoreIncreaseSetUp();this.keysGestionSetUp();this.numScore=0;this.isIntermediateBG1=!0;this.dashFlag=this.slideFlag=!1;this.canJump=!0===this.isJump?!0:!1;this.jumpCount=0;this.physics.world.setBounds(0,0,this.inWidth,this.inHeight,!0,!0,!0,!0);this.cache.audio.exists("Pickup_Coin")&&(this.coinSound=this.sound.add("Pickup_Coin"));!0===this.isJump&&this.cache.audio.exists("Jump")&&(this.jumpSound=this.sound.add("Jump"));this.cache.audio.exists("Hit_Hurt")&&(this.hurtSound=
this.sound.add("Hit_Hurt"));this.cache.audio.exists("GameOver")&&(this.gameOverSound=this.sound.add("GameOver"));var D=this.startScene.setUpScene(this,this.isDayNightAllow,this.isImmobileBackground,this.backgroundType,this.backgroundScale,this.backgroundWidthHeight,this.intermediateBGType,this.BgScale,this.flagClouds,this.cloudType,this.cloudFrontWidthHeight,this.cloudBackWidthHeight,this.powerValue,this.inWidth,this.inHeight);this.fParallax=D[0];this.fClouds=D[1];this.fBackground=D[2];this.fIntermediateBG=
D[3];this.fPlatform=D[4];this.game.scene.stop("StartScene");"ontouchstart"in document.documentElement?this.touchOptionSetUp(this.fPlatform):this.isTouchScreen=!1;this.GUISetUp();this.playerSetUp();this.jumpForceCalcul();this.fObjects=this.add.group([]);this.fBonus=this.add.group([]);this.fMalus=this.add.group([]);this.fGround=this.add.group([]);this.objectsList=[];this.objectPosition=!0===this.isJump?[this.platformPosition-this.fPlayer.displayHeight-this.fPlayer.displayHeight/2,this.platformPosition-
this.fPlayer.displayHeight,this.platformPosition-(this.fPlayer.displayHeight-this.fPlayer.displayHeight/2)]:[this.platformPosition-this.fPlayer.body.height];this.requestNewObject();1==this.isDayNightAllow&&this.requestdayNight()}},{key:"update",value:function(){var D=this.input.activePointer;if(this.fPlayer&&(!0===this.isLife&&0!==this.playerLifes||!0===this.isTimer&&0<this.gameTimer)&&this.fPlayer.body.onFloor()){!0===this.isJump&&(this.canJump=!0,this.jumpCount=0);if(this.wasd.down.isUp&&!D.isDown||
D.isUp)if(this.runAnimation(),this.slideFlag||this.dashFlag)this.slideFlag=!1,this.fPlayer.setPosition(this.playerPosX,this.fPlatform.getTopCenter().y-this.fPlayer.displayHeight/2),this.dashFlag=!1;this.fPlayer.y>this.platformPosition&&this.fPlayer.setPosition(this.playerPosX,this.platformPosition-this.fPlayer.body.height/2-this.fPlayer.body.height/5)}this.isTouchScreen?!0===this.dashFlag&&this.fPlayer.body.onFloor()&&(this.isSlide&&this.slide(),this.dashFlag=!1):this.playerMove();this.objectsPoolManagment();
this.backgroundParallax()}},{key:"backgroundParallax",value:function(){var D=E(this.fParallax.children.entries),L;try{for(D.s();!(L=D.n()).done;){var M=L.value;this.flagClouds&&this.fClouds.contains(M)&&(M.tilePositionX="cloudsFront"===M.name?M.tilePositionX+this.frontCloudSpeed:M.tilePositionX+this.backCloudSpeed);this.fIntermediateBG.contains(M)&&(M.tilePositionX+=this.intermediateBGSpeed)}}catch(Y){D.e(Y)}finally{D.f()}}},{key:"objectsPoolManagment",value:function(){var D=E(this.fObjects.children.entries),
L;try{for(D.s();!(L=D.n()).done;){var M=L.value;(M.active&&0>M.x+M.width||!1===M.visible)&&M.destroy()}}catch(Y){D.e(Y)}finally{D.f()}}},{key:"objectsSpeedUp",value:function(){.5>=Math.random()&&this.enemiesSpeed>this.maxSpeed&&(this.enemiesSpeed-=30,this.intermediateBGSpeed+=.1)}},{key:"automaticScoreIncreaseSetUp",value:function(){var D=this;if(!0===this.isAutomaticScoreIncrease||void 0===this.isAutomaticScoreIncrease){if(void 0===this.automaticScoreIncrease||null===this.automaticScoreIncrease)this.automaticScoreIncrease=
75;if(void 0===this.automaticScoreUpdateTimeCount||null===this.automaticScoreUpdateTimeCount)this.automaticScoreUpdateTimeCount=300;this.timeCount=0;this.time.addEvent({callback:function(){D.timeCount+=1;D.timeCount>=D.automaticScoreUpdateTimeCount&&(D.timeCount=0,D.numScore+=D.automaticScoreIncrease,D.fScore.text=D.numScore)},callbackScope:this,delay:1,repeat:-1})}}},{key:"playerSetUp",value:function(){var D=this.add.sprite(142,284,"playerRun",0);"svg"!==this.playerType&&D.setSize(this.playerScale*
this.playerWidthOnHeight,this.playerScale);D.anims.play("playerRun",!0,0);this.fPlayer=D;this.physics.add.existing(this.fPlayer);"svg"!==this.playerType&&this.fPlayer.setDisplaySize(this.playerScale*this.playerWidthOnHeight,this.playerScale);this.fPlayer.body.setSize();this.fPlayer.body.setSize(this.fPlayer.body.width/2,this.fPlayer.body.height-10);this.setObjectsStartSpeed();this.fPlayer.setPosition(this.playerPosX,this.platformPosition-this.playerScale);this.fPlayer.body.onOverlap=!0;this.fPlayer.body.setCollideWorldBounds(!0);
this.fPlayer.body.allowGravity=!0;this.physics.add.collider(this.fPlatform,this.fPlayer,null,null,this)}},{key:"GUISetUp",value:function(){var D=this;this.textures.exists("soundOn")&&(this.musicGestion=new Ra(this),this.fMusicButton=this.musicGestion.create(this,this.inWidth));!0===this.isPauseButton&&(this.pauseButton,this.pauseButton=this.add.image(0,0,"pauseButton"),this.fMusicButton?this.pauseButton.setPosition(this.inWidth-5-1.5*this.fMusicButton.displayWidth,5+this.fMusicButton.displayHeight/
2):this.pauseButton.setPosition(this.inWidth-5-1.5*this.pauseButton.displayWidth,5+this.pauseButton.displayHeight/2),this.pauseButton.setInteractive(),this.pauseButton.on("pointerdown",function(){this.scene.launch("PauseScene");this.scene.pause()},this));var L=this.add.text(16,16,"0",{fontFamily:"font",fontSize:this.scoreTextConfig.fontSize,color:this.scoreTextConfig.color}).setDepth(5),M=this.textures.get("optionImage").getSourceImage(),Y=5+M.width/2;this.fMusicButton?(this.optionPosY=5+this.fMusicButton.displayHeight/
2,this.fMusicButton.setPosition(this.inWidth-5-this.fMusicButton.displayWidth/2,5+this.fMusicButton.displayHeight/2)):this.optionPosY=5+M.height/2;this.optionImage=this.add.image(Y,this.optionPosY,"optionImage").setDepth(5);!0===this.isLife?(this.lifeCount=this.add.text(0,0,this.playerLifes,{fontFamily:"font",fontSize:this.scoreTextConfig.fontSize,color:this.scoreTextConfig.color}).setDepth(5),this.lifeCount.setPosition(Y+this.optionImage.displayWidth/2+5,this.optionPosY-this.lifeCount.displayHeight/
2)):this.isTimer&&(this.timerText=this.add.text(5+this.optionImage.displayWidth,10+this.optionImage.displayHeight/2,this.millisecToMinutesAndSeconds(this.gameTimer),{fontFamily:"font",fontSize:this.scoreTextConfig.fontSize,color:this.scoreTextConfig.color}),this.timerText.setPosition(10+this.optionImage.displayWidth,this.optionImage.y-this.timerText.displayHeight/2),this.timerText.setDepth(5),this.timerEvent=this.time.addEvent({callback:function(){D.gameTimer-=1E3;0>=D.gameTimer&&(D.gameTimer=0,D.gameOver());
D.timerText.text=D.millisecToMinutesAndSeconds(D.gameTimer)},args:[1E3],callbackScope:this,delay:1E3,loop:!0}));L.setPosition(this.inWidth/2,this.optionPosY);L.text=this.numScore;L.setOrigin(.5,.5);this.fScore=L}},{key:"setObjectsStartSpeed",value:function(){this.playerPosX;400>this.inWidth?(this.maxSpeed=-700,this.enemiesSpeed=-250,this.playerPosX=this.fPlayer.displayWidth/2+10):400<this.inWidth&&800>this.inWidth?(this.maxSpeed=-800,this.enemiesSpeed=-350,this.playerPosX=!1===this.isLandscape?this.fPlayer.displayWidth/
2+10:this.inWidth/2-this.fPlayer.displayWidth/2-10):800<=this.inWidth&&1200>this.inWidth?(this.maxSpeed=-1E3,this.enemiesSpeed=-550,this.playerPosX=this.inWidth/2):1200<=this.inWidth&&(this.maxSpeed=-1200,this.enemiesSpeed=-750,this.playerPosX=this.inWidth/2)}},{key:"millisecToMinutesAndSeconds",value:function(D){var L=Math.floor(D/6E4);D=(D%6E4/1E3).toFixed(0);return L+":"+(10>D?"0":"")+D}},{key:"jumpForceCalcul",value:function(){350>this.inHeight?this.jumpForce=400:350<=this.inHeight&&450>this.inHeight?
this.jumpForce=450:450<=this.inHeight&&550>this.inHeight?this.jumpForce=500:550<=this.inHeight&&650>this.inHeight?this.jumpForce=550:650<=this.inHeight&&750>this.inHeight?this.jumpForce=600:750<=this.inHeight&&850>this.inHeight?this.jumpForce=650:850<=this.inHeight&&950>this.inHeight?this.jumpForce=700:950<=this.inHeight&&1200>this.inHeight?this.jumpForce=750:1200<=this.inHeight&&(this.jumpForce=800)}},{key:"requestdayNight",value:function(){this.time.addEvent({callback:this.dayNightTransition,callbackScope:this,
delay:2E4})}},{key:"dayNightTransition",value:function(){var D=this.fIntermediateBG.getFirst(!0),L=this.fIntermediateBG.getLast(!0);if(!0===this.isImmobileBackground){var M=this.fBackground.getFirst(!0);var Y=this.fBackground.getLast(!0)}if(this.isIntermediateBG1){this.tweens.add({targets:D,alphaBottomRight:{value:0,duration:2E3},alphaTopRight:{value:0,duration:2E3},alphaBottomLeft:{value:0,duration:500},alphaTopLeft:{value:0,duration:500},loop:!1,ease:"Power0",duration:2E3});!0===this.isImmobileBackground&&
(this.tweens.add({targets:M,alphaBottomRight:{value:0,duration:2E3},alphaTopRight:{value:0,duration:2E3},alphaBottomLeft:{value:0,duration:500},alphaTopLeft:{value:0,duration:500},loop:!1,ease:"Power0",duration:2E3}),this.tweens.add({targets:Y,alphaBottomRight:{value:1,duration:2E3},alphaTopRight:{value:1,duration:2E3},alphaBottomLeft:{value:1,duration:500},alphaTopLeft:{value:1,duration:500},loop:!1,ease:"Power0",duration:2E3}));this.tweens.add({targets:L,alphaBottomRight:{value:1,duration:2E3},
alphaTopRight:{value:1,duration:2E3},alphaBottomLeft:{value:1,duration:500},alphaTopLeft:{value:1,duration:500},loop:!1,ease:"Power0",duration:2E3});this.fScore.setColor(this.scoreTextNightColor);!0===this.isLife&&this.lifeCount.setColor(this.scoreTextNightColor);if(this.flagClouds){var Z=E(this.fClouds.children.entries),ja;try{for(Z.s();!(ja=Z.n()).done;){var ka=ja.value;"cloudsBackNight"==ka.name?ka.setAlpha(1):ka.setAlpha(0)}}catch(qa){Z.e(qa)}finally{Z.f()}}this.isIntermediateBG1=!1}else if(!this.isIntermediateBG1){this.tweens.add({targets:D,
alphaBottomRight:{value:1,duration:2E3},alphaTopRight:{value:1,duration:2E3},alphaBottomLeft:{value:1,duration:500},alphaTopLeft:{value:1,duration:500},loop:!1,ease:"Power0",duration:2E3});!0===this.isImmobileBackground&&(this.tweens.add({targets:M,alphaBottomRight:{value:1,duration:2E3},alphaTopRight:{value:1,duration:2E3},alphaBottomLeft:{value:1,duration:500},alphaTopLeft:{value:1,duration:500},loop:!1,ease:"Power0",duration:2E3}),this.tweens.add({targets:Y,alphaBottomRight:{value:0,duration:2E3},
alphaTopRight:{value:0,duration:2E3},alphaBottomLeft:{value:0,duration:500},alphaTopLeft:{value:0,duration:500},loop:!1,ease:"Power0",duration:2E3}));this.tweens.add({targets:L,alphaBottomRight:{value:0,duration:2E3},alphaTopRight:{value:0,duration:2E3},alphaBottomLeft:{value:0,duration:500},alphaTopLeft:{value:0,duration:500},loop:!1,ease:"Power0",duration:2E3});this.fScore.setColor(this.scoreTextDayColor);!0===this.isLife&&this.lifeCount.setColor(this.scoreTextDayColor);if(this.flagClouds){ja=E(this.fClouds.children.entries);
try{for(ja.s();!(Z=ja.n()).done;){var ha=Z.value;"cloudsBackNight"===ha.name?ha.setAlpha(0):ha.setAlpha(1)}}catch(qa){ja.e(qa)}finally{ja.f()}}this.isIntermediateBG1=!0}this.requestdayNight()}},{key:"requestNewObject",value:function(){this.time.addEvent({callback:this.spawnObject,callbackScope:this,delay:va().Math.Between(this.minDelaySpawnObject,this.maxDelaySpawnObject)});.5>=Math.random()&&50<this.minDelaySpawnObject&&(this.maxDelaySpawnObject-=50,this.minDelaySpawnObject-=50)}},{key:"spawnObject",
value:function(){var D=this.chooseObjectToSpawn();if(void 0===D)this.spawnObject();else{2<=this.objectsList.length&&this.objectsAdress[this.objectsList[this.objectsList.length-1]]===this.objectsAdress[this.objectsList[this.objectsList.length-2]]&&this.objectsAdress[D]===this.objectsAdress[this.objectsList[this.objectsList.length-1]]&&(D=D<this.objectsAdress.length-1?this.objectsAdress[D]!=this.objectsAdress[D+1]?D+1:D<this.objectsAdress.length-2?D+2:0:0,this.objectsList=[]);var L=this.add.sprite(this.inWidth,
0,this.objectsKey[D],0);L.anims.play(this.objectsKey[D]);"svg"!==this.objectsType[D]&&L.setDisplaySize(this.objectScale[D]*this.objectsWithOnHeight[D],this.objectScale[D]);0<this.objectsScore[D]?this.fBonus.add(L):this.fMalus.add(L);this.setObjects(L);!0===this.objectsIsGrounded[D]&&this.fGround.add(L);this.fObjects.add(L);this.objectsList.push(D);this.fGround.contains(L)?L.y=this.platformPosition-L.displayHeight/2:(L.y=this.objectPosition[va().Math.Between(0,this.objectPosition.length-1)]-L.displayHeight/
2,!1===this.isJump&&!0===this.isSlide?L.y+L.displayHeight>=this.inHeight-this.platformHeight-this.anims.get("playerSlide").getLastFrame().frame.height&&(L.y=this.inHeight-this.platformHeight-this.anims.get("playerRun").getLastFrame().frame.height-L.displayHeight/2):!0===this.isJump&&!1===this.isSlide&&L.y+L.displayHeight>=this.inHeight-this.platformHeight-this.anims.get("playerRun").getLastFrame().frame.height&&(L.y=this.inHeight-this.platformHeight-this.anims.get("playerRun").getLastFrame().frame.height-
L.displayHeight/2));L&&(L.active=!0,L.visible=!0,L.setData("score",this.objectsScore[D]),"svg"!==this.objectsType[D]&&(L.body.width=this.objectScale[D]*this.objectsWithOnHeight[D],L.body.height=this.objectScale[D]),L.body.velocity.x=this.enemiesSpeed,L.x=this.inWidth+L.width-L.displayOriginX,L.body.position.x=this.inWidth+L.width-L.displayOriginX,this.requestNewObject());this.objectsSpeedUp()}}},{key:"setObjects",value:function(D){this.physics.add.existing(D,!1);D.body.allowGravity=!1;this.fBonus.contains(D)?
this.physics.add.overlap(this.fPlayer,this.fBonus,this.scoreIncrease,null,this):this.physics.add.overlap(this.fPlayer,this.fMalus,this.scoreDecrease,null,this);D.body.setSize(D.displayWidth-D.displayWidth/5,D.displayHeight-D.displayHeight/5);D.body.setOffset(D.displayWidth/5/4,D.displayHeight/5/4)}},{key:"chooseObjectToSpawn",value:function(){for(var D=Math.random().toFixed(2),L=0;L<this.spawnPercentages.length;L++)if(this.spawnPercentages[L]>D)if(this.spawnPercentages.length-1!==L){if(this.spawnPercentages[L+
1]>D)return L}else return L}},{key:"scoreIncrease",value:function(D,L){var M=L.body.enable=!1;this.cache.audio.exists("Pickup_Coin")&&this.coinSound.play({loop:!1,volume:this.pickUpVolume}),this.numScore+=L.getData("score"),this.fScore.text=this.numScore,M=!0,this.tweens.add({targets:L,y:this.fPlayer.body.position.y-3*L.displayHeight,x:this.fPlayer.body.position.x-L.displayWidth,ease:"Power1",loop:!1,duration:300,onComplete:function(){L.active=!1;M=L.visible=!1}})}},{key:"scoreDecrease",value:function(D,
L){L.active=!1;L.visible=!1;L.body.enable=!1;this.fPlayer.setAlpha(1);var M=!1;this.tweens.add({targets:this.fPlayer,alpha:{value:0,duration:200},yoyo:!0,loop:!0,duration:800,onComplete:function(){M=!1}}),M=!0,this.cache.audio.exists("Hit_Hurt")&&this.hurtSound.play({loop:!1,volume:this.hitHurtVolume}),this.numScore+=L.getData("score"),0>this.numScore&&(this.numScore=0),this.fScore.text=this.numScore,!0===this.isLife&&(--this.playerLifes,this.lifeCount.text=this.playerLifes);!0===this.isLife&&0>=
this.playerLifes&&this.gameOver()}},{key:"gameOver",value:function(){var D=(new Date).getTime();this.isPauseButton&&(this.pauseButton.disableInteractive(),this.pauseButton.setAlpha(0));!0===this.isFadeOutGameOver&&this.cameras.main.fadeIn(10,0,0,0);this.cache.audio.exists("GameOver")&&this.gameOverSound.play({loop:!1,volume:this.gameOverSoundVolume});!0===this.isLife&&(this.lifeCount.setAlpha(0),this.optionImage.setAlpha(0));this.fScore.setAlpha(0);this.fPlayer.setAlpha(0);for(var L=0;L<this.fObjects.length;L++)this.fObjects[L].setAlpha(0);
this.fMusicButton&&this.fMusicButton.setAlpha(0);!0===this.isTouchScreen&&(!0!==this.isSlide&&!0!==this.isDashAllow||this.downButton.setAlpha(0),!0===this.isJump&&this.upButton.setAlpha(0));this.game.scene.start("GameOverScene",{score:this.numScore,saveDataWaitTime:this.saveDataWaitTime,isIntermediateBG1:this.isIntermediateBG1,inWidth:this.inWidth,inHeight:this.inHeight,runTime:Math.abs(this.startTime-D),time:Math.abs(this.startTime-D),platformHeight:this.platformHeight,platformPosition:this.platformPosition,
backurl:this.backurl,playerDieHeightProp:this.playerDieHeightProp,dieWidthOnHeight:this.dieWidthOnHeight,playerType:this.playerType});this.game.scene.bringToTop("GameOverScene");!1===this.sound.mute&&this.game.sound.setVolume(.5);this.game.scene.pause("GameScene")}},{key:"keysGestionSetUp",value:function(){var D=this.input.keyboard.createCursorKeys();this.wasd={jump:D.space,up:D.up,down:D.down}}},{key:"touchOptionSetUp",value:function(D){!0===this.isJump&&(this.upButton=this.add.image(0,this.inHeight-
D.displayHeight,"upButton"),!0===this.isSlide||!0===this.isDashAllow?this.upButton.setPosition(this.inWidth-this.upButton.displayWidth,this.inHeight-this.upButton.displayHeight/2):this.upButton.setPosition(this.inWidth/2,this.inHeight-this.upButton.displayHeight/2));if(!0===this.isSlide||!0===this.isDashAllow)this.downButton=this.add.image(0,this.inHeight-D.displayHeight,"downButton"),!0===this.isJump?this.downButton.setPosition(this.downButton.displayWidth,this.inHeight-this.downButton.displayHeight/
2):this.downButton.setPosition(this.inWidth/2,this.inHeight-this.downButton.displayHeight/2);this.isTouchScreen=!0;if(!0===this.isJump&&(!0===this.isSlide||!0===this.isDashAllow)){var L=this.add.zone(this.inWidth/2,this.inHeight/2,this.inWidth/2,this.inHeight/2).setOrigin(0).setName("Up").setInteractive(),M=this.add.zone(0,this.inHeight/2,this.inWidth/2,this.inHeight/2).setOrigin(0).setName("Down").setInteractive();this.input.on("gameobjectdown",function(ja){this.fPlayer&&(0!==this.playerLifes&&!0===
this.isLife||!0===this.isTimer&&0<=this.gameTimer)&&(ja.x>=L.displayWidth&&ja.y>L.displayHeight?(!va().Input.Keyboard.JustDown(this.wasd.jump)||!this.wasd.up.isUp)&&this.canJump&&this.jumpCount<this.jumpNumberAllow&&this.jump():ja.x<=M.displayWidth&&(this.fPlayer.body.onFloor()?this.isSlide&&this.slide():this.fPlayer.body.onFloor()||1!=this.isDashAllow||(this.dash(),this.dashFlag=!0)))},this)}else if(!0===this.isJump&&!1===this.isSlide&&!1===this.isDashAllow){var Y=this.add.zone(0,this.inHeight/2,
this.inWidth,this.inHeight/2).setOrigin(0).setName("Up").setInteractive();this.input.on("gameobjectdown",function(ja){this.fPlayer&&(0!==this.playerLifes&&!0===this.isLife||!0===this.isTimer&&0<=this.gameTimer)&&ja.y>Y.displayHeight&&!(!0!==this.isJump||va().Input.Keyboard.JustDown(this.wasd.jump)&&this.wasd.up.isUp)&&this.canJump&&this.jumpCount<this.jumpNumberAllow&&this.jump()},this)}else if(!1===this.isJump&&!0===this.isSlide&&!1===this.isDashAllow){var Z=this.add.zone(0,this.inHeight/2,this.inWidth,
this.inHeight/2).setOrigin(0).setName("Up").setInteractive();this.input.on("gameobjectdown",function(ja){this.fPlayer&&(0!==this.playerLifes&&!0===this.isLife||!0===this.isTimer&&0<=this.gameTimer)&&ja.y>Z.displayHeight&&this.fPlayer.body.onFloor()&&this.isSlide&&this.slide()},this)}}},{key:"playerMove",value:function(){this.fPlayer&&(0!==this.playerLifes&&!0===this.isLife||!0===this.isTimer&&0<=this.gameTimer)&&(this.fPlayer.body.onFloor()&&this.wasd.down.isDown&&this.isSlide&&this.slide(),!0===
this.isJump&&(va().Input.Keyboard.JustDown(this.wasd.jump)&&this.wasd.up.isUp||va().Input.Keyboard.JustDown(this.wasd.up)&&this.wasd.jump.isUp)&&this.canJump&&this.jumpCount<this.jumpNumberAllow?this.jump():va().Input.Keyboard.JustDown(this.wasd.down)&&1==this.isDashAllow&&this.dash())}},{key:"runAnimation",value:function(){"playerRun"!==this.fPlayer.anims.currentAnim.key&&(this.fPlayer.anims.play("playerRun",!0),"svg"===this.playerType?(this.fPlayer.body.setSize(),this.fPlayer.body.setSize(this.fPlayer.body.width/
2,this.fPlayer.body.height-10)):(this.fPlayer.body.width=Math.fround(this.playerScale*this.playerWidthOnHeight)/2,this.fPlayer.body.height=Math.fround(this.playerScale)-10,this.fPlayer.body.offset.x=Math.fround(this.playerScale*this.playerWidthOnHeight)/8,this.fPlayer.body.offset.y=5))}},{key:"slide",value:function(){"playerSlide"!==this.fPlayer.anims.currentAnim.key&&(this.fPlayer.anims.play("playerSlide",!0),"svg"===this.playerType?(this.fPlayer.body.setSize(),this.fPlayer.body.setSize(this.fPlayer.body.width-
10,this.fPlayer.body.height-10)):(this.fPlayer.body.width=Math.fround(this.playerScale*this.playerSlideHeightprop*this.slideWidthOnHeight)-10,this.fPlayer.body.height=Math.fround(this.playerScale*this.playerSlideHeightprop)-10,this.fPlayer.body.offset.x=5,this.fPlayer.body.offset.y=5),this.slideFlag=!0)}},{key:"dash",value:function(){this.fPlayer.body.velocity.y=2*this.jumpForce}},{key:"jump",value:function(){this.slideFlag=!1;this.fPlayer.body.setVelocityY(-1*this.jumpForce);this.cache.audio.exists("Jump")&&
this.jumpSound.play({loop:!1,volume:this.jumpVolume});this.fPlayer.anims.play("playerJump");"svg"===this.playerType?(this.fPlayer.body.setSize(),this.fPlayer.body.setSize(this.fPlayer.body.width/2,this.fPlayer.body.height-10)):(this.fPlayer.body.width=Math.fround(this.playerScale*this.playerJumpProp*this.jumpWidthOnHeight)/2,this.fPlayer.body.height=Math.fround(this.playerScale*this.playerJumpProp),this.fPlayer.body.offset.x=Math.fround(this.playerScale*this.playerJumpProp*this.jumpWidthOnHeight)/
8,this.fPlayer.body.offset.y=5);this.jumpCount===this.jumpNumberAllow&&(this.canJump=!1);this.jumpCount++}},{key:"JsonParse",value:function(D){D=D.section1?D.section1.files:D.files;for(var L in D)for(var M=0,Y=Object.entries(D);M<Y.length;M++)switch(D[L].key){case "scoreConfigGameScene":this.scoreTextConfig=D[L].textConfig;this.scoreTextDayColor=D[L].dayColor?D[L].dayColor:D[L].textConfig.color;this.scoreTextNightColor=D[L].nightColor?D[L].nightColor:this.scoreTextDayColor;break;case "background1":this.backgroundType=
D[L].type;break;case "intermediateBG1":this.intermediateBGType=D[L].type;this.intermediateBGSpeed=D[L].speed;break;case "front-clouds":this.cloudType=D[L].type;this.cloudFrontWidthHeight=D[L].widthOnHeight;this.frontCloudSpeed=D[L].speed;break;case "back-clouds-day":this.cloudBackWidthHeight=D[L].widthOnHeight;this.backCloudSpeed=D[L].speed;break;case "automaticScoreIncrease":this.automaticScoreUpdateTimeCount=D[L].timeCountInMillisecond;this.automaticScoreIncrease=D[L].scoreValue;break;case "gameOption":this.isPauseButton=
D[L].isPauseButton,this.isAutomaticScoreIncrease=D[L].isAutomaticScoreIncrease,this.isLandscape=void 0!==D[L].isLandscape?D[L].isLandscape:!1,this.isSlide=void 0!==D[L].isSlide?D[L].isSlide:!0,this.isJump=void 0!=D[L].isJump?D[L].isJump:!0,this.minDelaySpawnObject=void 0!=D[L].minDelaySpawnObject?D[L].minDelaySpawnObject:1E3,this.maxDelaySpawnObject=void 0!=D[L].maxDelaySpawnObject?D[L].maxDelaySpawnObject:4E3,this.isLife=void 0!==D[L].isLife?D[L].isLife:!0,this.isTimer=void 0!==D[L].isTimer?D[L].isTimer:
!1,this.gameTimer=!0===this.isTimer?D[L].gameTimer:null,this.playerLifes=!0===this.isLife?Math.max(1,parseInt(D[L].life,10)):null,this.isDashAllow=D[L].isDashAllow,this.jumpNumberAllow=Math.max(1,parseInt(D[L].jumpNumber,10)),this.isDayNightAllow=D[L].isDayNightAllow,this.isFadeOutGameOver=D[L].isFadeOutGameOver,this.saveDataWaitTime=D[L].saveDataWaitTime}}}]);return P}(va().Scene),nb=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,
"StartScene")}la(P,U);var V=pa(P);fa(P,[{key:"init",value:function(D){var L,M=(L={parse:"data",backurl:"backurl",flagClouds:"flagClouds",isImmobileBackground:"isImmobileBackground",BgScale:"BgScale",backgroundHeight:"backgroundHeight",backgroundWidthHeight:"backgroundWidthHeight",backgroundScale:"backgroundScale",platformHeight:"platformHeight",platformPosition:"platformPosition"},X(L,"backurl","backurl"),X(L,"powerValue","powerValue"),X(L,"malusType","malusType"),X(L,"airMalusScale","airMalusScale"),
X(L,"airMalusWidthOnHeight","airMalusWidthOnHeight"),X(L,"groundMalusScale","groundMalusScale"),X(L,"groundMalusWidthOnHeight","groundMalusWidthOnHeight"),X(L,"bonusType","bonusType"),X(L,"coinScale","coinScale"),X(L,"coinWidthOnHeight","coinWidthOnHeight"),X(L,"playerScale","playerScale"),X(L,"playerSlideHeightprop","playerSlideHeightprop"),X(L,"slideWidthOnHeight","slideWidthOnHeight"),X(L,"playerWidthOnHeight","playerWidthOnHeight"),X(L,"playerJumpProp","playerJumpProp"),X(L,"jumpWidthOnHeight",
"jumpWidthOnHeight"),X(L,"playerDieHeightProp","playerDieHeightProp"),X(L,"dieWidthOnHeight","dieWidthOnHeight"),X(L,"playerType","playerType"),X(L,"objectsType","objectsType"),X(L,"objectScale","objectScale"),X(L,"objectsWithOnHeight","objectsWithOnHeight"),X(L,"objectsKey","objectsKey"),X(L,"objectsScore","objectsScore"),X(L,"objectsIsGrounded","objectsIsGrounded"),X(L,"spawnPercentages","spawnPercentages"),X(L,"objectsAdress","objectsAdress"),X(L,"globalMusicVolume","globalMusicVolume"),X(L,"gameOverSoundVolume",
"gameOverSoundVolume"),X(L,"guiSoundVolume","guiSoundVolume"),X(L,"hitHurtVolume","hitHurtVolume"),X(L,"pickUpVolume","pickUpVolume"),X(L,"jumpVolume","jumpVolume"),L);this.inWidth=document.documentElement.clientWidth;this.inHeight=document.documentElement.clientHeight;L=0;for(D=Object.entries(D);L<D.length;L++){var Y=D[L];var Z=Y;Z=Array.isArray(Z)?Z:void 0;if(!Z){var ja=Z=void 0,ka=null==Y?null:"undefined"!==typeof Symbol&&Y[Symbol.iterator]||Y["@@iterator"];if(null!=ka){var ha=[],qa=!0,ia=!1;try{for(ka=
ka.call(Y);!(qa=(ja=ka.next()).done)&&(ha.push(ja.value),2!==ha.length);qa=!0);}catch(ua){ia=!0,Z=ua}finally{try{if(!qa&&null!=ka["return"])ka["return"]()}finally{if(ia)throw Z;}}Z=ha}else Z=void 0}if(!(Y=Z||S(Y,2)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");Z=Y;Y=Z[0];Z=Z[1];M.hasOwnProperty(Y)&&(this[M[Y]]=Z)}M=this.cache.json.get("level-pack");this.JsonParse(M)}},{key:"create",
value:function(){this.game.scene.bringToTop("StartScene");this.game.scene.stop("Preload");this.game.scene.stop("AssetsLoad");this.pointer=this.input.activePointer;this.flagStartGame=!1;this.physics.world.setBounds(0,0,this.inWidth,this.inHeight,!0,!0,!0,!0);this.setUpScene(this,this.isDayNightAllow,this.isImmobileBackground,this.backgroundType,this.backgroundScale,this.backgroundWidthHeight,this.intermediateBGType,this.BgScale,this.isCloud,this.cloudType,this.cloudFrontWidthHeight,this.cloudBackWidthHeight,
this.powerValue,this.inWidth,this.inHeight);this.startAndTutorialSetUp();this.spawnPercentages=this.spawnPercentagesCalculation();this.textures.exists("soundOn")&&(this.musicGestion=new Ra(this),this.fMusicButton=this.musicGestion.create(this,this.inWidth))}},{key:"update",value:function(){if(!this.flagStartGame&&this.isCloud){var D=T(this.fClouds.children.entries),L;try{for(D.s();!(L=D.n()).done;){var M=L.value;this.fClouds.contains(M)&&(M.tilePositionX="cloudsFront"==M.name?M.tilePositionX+.5:M.tilePositionX+
2)}}catch(Y){D.e(Y)}finally{D.f()}}}},{key:"startGame",value:function(D){0==this.flagStartGame&&(this.flagStartGame=!0,D.setInteractive(!1),this.cache.audio.exists("Blip_Select")&&this.game.sound.play("Blip_Select",{volume:this.guiSoundVolume}),this.cameras.main.once("camerafadeoutcomplete",function(L){this.game.scene.start("GameScene",{data:this.parse,flagClouds:this.flagClouds,inWidth:this.inWidth,inHeight:this.inHeight,BgScale:this.BgScale,isImmobileBackground:this.isImmobileBackground,backgroundHeight:this.backgroundHeight,
backgroundScale:this.backgroundScale,backgroundWidthHeight:this.backgroundWidthHeight,platformHeight:this.platformHeight,platformPosition:this.platformPosition,backurl:this.backurl,powerValue:this.powerValue,malusType:this.malusType,airMalusScale:this.airMalusScale,airMalusWidthOnHeight:this.airMalusWidthOnHeight,groundMalusScale:this.groundMalusScale,groundMalusWidthOnHeight:this.groundMalusWidthOnHeight,bonusType:this.bonusType,coinScale:this.coinScale,coinWidthOnHeight:this.coinWidthOnHeight,playerType:this.playerType,
playerScale:this.playerScale,playerWidthOnHeight:this.playerWidthOnHeight,playerSlideHeightprop:this.playerSlideHeightprop,slideWidthOnHeight:this.slideWidthOnHeight,playerJumpProp:this.playerJumpProp,jumpWidthOnHeight:this.jumpWidthOnHeight,playerDieHeightProp:this.playerDieHeightProp,dieWidthOnHeight:this.dieWidthOnHeight,objectsType:this.objectsType,objectScale:this.objectScale,objectsWithOnHeight:this.objectsWithOnHeight,objectsKey:this.objectsKey,objectsScore:this.objectsScore,objectsIsGrounded:this.objectsIsGrounded,
spawnPercentages:this.spawnPercentages,objectsAdress:this.objectsAdress,globalMusicVolume:this.globalMusicVolume,gameOverSoundVolume:this.gameOverSoundVolume,guiSoundVolume:this.guiSoundVolume,hitHurtVolume:this.hitHurtVolume,pickUpVolume:this.pickUpVolume,jumpVolume:this.jumpVolume},!1);L.fadeIn(2E3,0,0,0)},this),this.cameras.main.fadeOut(1E3,0,0,0))}},{key:"spawnPercentagesCalculation",value:function(){for(var D=[],L=0;L<this.spawnPercentages.length;L++){var M=this.spawnPercentages[L];0===L?D.push(M):
D.push(D[L-1]+M)}return D}},{key:"setUpScene",value:function(D,L,M,Y,Z,ja,ka,ha,qa,ia,ua,oa,ra,sa,wa){D.fParallax=D.add.group([]);D.fIntermediateBG=D.add.group([]);D.fClouds=D.add.group([]);D.fBackground=D.add.group([]);1==M&&(M=D.add.sprite(sa/2,wa/2,"bg1"),"svg"!=Y&&(M.setDisplaySize(M.width*Z*ja,M.height*Z),M.setDisplayOrigin(0,0),M.setPosition(0,0)),D.fBackground.add(M),1==L&&(M=D.add.image(sa/2,wa/2,"bg2"),M.setAlpha(0),"svg"!==Y&&(M.setDisplaySize(M.width*Z*ja,M.height*Z),M.setDisplayOrigin(0,
0),M.setPosition(0,0)),D.fBackground.add(M)));1==qa?(Y=D.add.tileSprite(sa/2,wa/2,sa,0,"cloudBack"),Z=D.add.tileSprite(sa/2,wa/2,sa,0,"cloudFront"),"svg"!==ia&&(Y.setDisplaySize(Math.pow(2,Math.min(Math.log2(ra)-1))*ua,Math.pow(2,Math.min(Math.log2(ra)-1))),Z.setDisplaySize(Math.pow(2,Math.min(Math.log2(ra)-1))*oa,Math.pow(2,Math.min(Math.log2(ra)-1)))),Z.setName("cloudsFront"),Z.setDisplayOrigin(0,0),Z.setPosition(0,0),Y.setName("cloudsBack"),Y.setDisplayOrigin(0,0),Y.setPosition(0,0),1==L&&(ua=
D.add.tileSprite(sa/2,wa/2,sa,0,"backCloudNight"),D.fParallax.add(ua),ua.setAlpha(0),"svg"!==ia&&ua.setDisplaySize(Math.pow(2,Math.min(Math.log2(ra)-1))*oa,Math.pow(2,Math.min(Math.log2(ra)-1))),ua.setName("cloudsBackNight"),ua.setDisplayOrigin(0,0),ua.setPosition(0,0),D.fClouds.add(ua)),D.fParallax.add(Z),D.fParallax.add(Y),D.fClouds.add(Z),D.fClouds.add(Y),D.flagClouds=!0):D.flagClouds=!1;ia=D.add.sprite(0,0,"platform");ia.setDisplaySize(sa+100,D.platformHeight);ia.setSize(sa+200,D.platformHeight);
ia.setOrigin(0);ia.setAlpha(0);D.platformPosition=wa-ia.displayHeight;ia.setPosition(-50,D.platformPosition);if("svg"===ka){if(ha=D.textures.get("intermediateBG1"),ka=D.add.tileSprite(sa/2,wa/2,sa,ha.height,ha),1==L){var za=D.textures.get("intermediateBG2");za=D.add.tileSprite(sa/2,wa/2,sa,za.height,za);D.fParallax.add(ka);D.fIntermediateBG.add(ka);za.setAlpha(0)}}else ka=D.add.tileSprite(sa/2,wa/2,0,0,"intermediateBG1").setScale(ha),!0===L&&(za=D.add.tileSprite(sa/2,wa/2,0,0,"intermediateBG2").setScale(ha),
D.fParallax.add(za),D.fIntermediateBG.add(za),za.setAlpha(0));wa=D.platformPosition-ka.displayHeight/2;!0===this.isPlatformTransparent&&(wa=this.inHeight-ka.displayHeight/2);ka.setPosition(sa/2,wa);!0===L&&za.setPosition(sa/2,wa);D.fParallax.add(ka);D.fIntermediateBG.add(ka);L&&(D.fParallax.add(za),D.fIntermediateBG.add(za));!1===this.isPlatformTransparent&&(L=D.add.image(0,0,"platform"),L.setDisplaySize(sa+200,D.platformHeight+2),L.setPosition(sa/2,D.platformPosition-1+L.displayHeight/2));D.physics.add.existing(ia,
!0);return[D.fParallax,D.fClouds,D.fBackground,D.fIntermediateBG,ia]}},{key:"startAndTutorialSetUp",value:function(){if(!0===this.isTransparentPannel&&void 0!==this.transPannelColor){this.transPannelColor=this.transPannelColor.replace("#","0x");var D=this.add.graphics();D.fillStyle(this.transPannelColor,this.transPannelAlpha);D.fillRect(0,0,this.inWidth,this.inHeight)}var L=this.add.sprite(this.inWidth/2,this.inHeight/2,"startButton");"svg"===this.startButtonType||null==this.startButtonProp&&void 0==
this.startButtonProp||L.setDisplaySize(this.inWidth*this.startButtonProp,this.inWidth*this.startButtonProp/(this.startButtonWidth/this.startButtonHeight));void 0===this.instructionConfig&&(this.instructionConfig={fontSize:"25",color:"#ffffff"});var M=this.add.text(0,0,this.jumpInstruction,{fontFamily:"font",fontSize:this.instructionConfig.fontSize,color:this.instructionConfig.color}),Y=this.add.text(0,0,this.slideInstruction,{fontFamily:"font",fontSize:this.instructionConfig.fontSize,color:this.instructionConfig.color});
void 0!=M&&M.displayWidth>this.inWidth&&M.setDisplaySize(this.inWidth-10,M.displayHeight);void 0!=Y&&Y.displayWidth>this.inWidth&&Y.setDisplaySize(this.inWidth-10,Y.displayHeight);"ontouchstart"in document.documentElement?(D=this.add.sprite(0,0,"tutoMobil"),"svg"===this.tutorialMobilType||null==this.tutoMobilProp&&void 0==this.tutoMobilProp||(this.inHeight<this.inWidth?D.setDisplaySize(this.tutoMobilWidth/this.tutoMobilHeight*this.tutoMobilProp*this.inHeight,this.inHeight*this.tutoMobilProp):D.setDisplaySize(this.inWidth*
this.tutoMobilProp,this.inWidth*this.tutoMobilProp/(this.tutoMobilWidth/this.tutoMobilHeight)))):(D=this.add.sprite(0,0,"tutoDesktop"),"svg"===this.tutorialDesktopType||null==this.tutoDesktopProp&&void 0==this.tutoDesktopProp||(this.inHeight<this.inWidth?D.setDisplaySize(this.tutoDesktopWidth/this.tutoDesktopHeight*this.tutoDesktopProp*this.inHeight,this.inHeight*this.tutoDesktopProp):D.setDisplaySize(this.inWidth*this.tutoDesktopProp,this.inWidth*this.tutoDesktopProp/(this.tutoDesktopWidth/this.tutoDesktopHeight))));
D.displayHeight+L.displayHeight+2*Y.displayHeight>this.inHeight-40?(D.setPosition(10+D.displayWidth/2,this.inHeight/2),M.setPosition(10+D.displayWidth+15,D.y-D.displayHeight/2+M.displayHeight+5),Y.setPosition(10+D.displayWidth+15,D.y-D.displayHeight/2+M.displayHeight+5+Y.displayHeight+5),L.setPosition(10+D.displayWidth+L.displayWidth/2+15,D.y-D.displayHeight/2+M.displayHeight+5+Y.displayHeight+5+L.displayHeight)):(0>this.inHeight/2-D.displayHeight?D.setPosition(this.inWidth/2,20+D.displayHeight/2):
D.setPosition(this.inWidth/2,this.inHeight/2-D.displayHeight/2),M.setPosition(this.inWidth/2-M.displayWidth/2,D.y+D.displayHeight/2+5),Y.setPosition(this.inWidth/2-Y.displayWidth/2,D.y+D.displayHeight/2+5+M.displayHeight+2),L.setPosition(this.inWidth/2,D.y+D.displayHeight/2+M.displayHeight+15+Y.displayHeight+L.displayHeight/2));L.setInteractive({cursor:"pointer"});L.on("pointerdown",function(){this.startGame(L)},this);L.on("pointerover",function(Z){L.setAlpha(.8)},this);L.on("pointerout",function(Z){L.setAlpha(1)},
this)}},{key:"JsonParse",value:function(D){D=D.section1?D.section1.files:D.files;for(var L=0;L<D.length;L++)switch(D[L].key){case "gameOption":this.isCloud=D[L].isCloud;this.isPlatformTransparent=D[L].isPlatformTransparent;this.isImmobileBackground=D[L].isImmobileBackground;this.isPlayerinGOScene=D[L].isPlayerinGOScene;this.isDayNightAllow=D[L].isDayNightAllow;this.isTransparentPannel=D[L].isTransparentPannel;break;case "tutorialText":"ontouchstart"in document.documentElement?(this.jumpInstruction=
D[L].jumpInstructionMobile,this.slideInstruction=D[L].slideInstructionMobile):(this.jumpInstruction=D[L].jumpInstructionDesktop,this.slideInstruction=D[L].slideInstructionDesktop);this.instructionConfig=D[L].textConfig;break;case "intermediateBG1":this.intermediateBGType=D[L].type;break;case "front-clouds":this.cloudType=D[L].type;this.cloudFrontWidthHeight=D[L].widthOnHeight;break;case "back-clouds-day":this.cloudBackWidthHeight=D[L].widthOnHeight;break;case "transparentPannelOption":this.transPannelColor=
D[L].transparentPannelColor;this.transPannelAlpha=D[L].transparentPannelAlpha;break;case "btn-start":this.startButtonType=D[L].type;this.startButtonWidth=D[L].width;this.startButtonHeight=D[L].height;this.startButtonProp=D[L].percentPropWidthCompareToGameWidth;break;case "pannel-tuto-mobile":this.tutorialMobilType=D[L].type;this.tutoMobilWidth=D[L].width;this.tutoMobilHeight=D[L].height;this.tutoMobilProp=this.inHeight<this.inWidth?D[L].percentPropHeightCompareToGameHeight:D[L].percentPropWidthCompareToGameWidth;
break;case "pannel-tuto-desktop":this.tutorialDesktopType=D[L].type,this.tutoDesktopWidth=D[L].width,this.tutoDesktopHeight=D[L].height,this.tutoDesktopProp=this.inHeight<this.inWidth?D[L].percentPropHeightCompareToGameHeight:D[L].percentPropWidthCompareToGameWidth}}}]);return P}(va().Scene),ob=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,"PauseScene")}Da(P,U);var V=Ea(P);Aa(P,[{key:"init",value:function(D){this.inWidth=
D.inWidth;this.inHeight=D.inHeight;void 0===this.inWidth&&(this.inWidth=window.innerWidth);void 0===this.inHeight&&(this.inHeight=window.innerHeight)}},{key:"preload",value:function(){var D=this.cache.json.get("level-pack");this.JsonParse(D)}},{key:"create",value:function(){this.cameras.main.backgroundColor.transparent();this.scene.bringToTop("PauseScene");this.guiRect=this.add.graphics();this.guiRect.fillStyle(this.rectColor,this.rectAlpha);this.guiRect.fillRect(0,0,this.inWidth,this.inHeight);this.pauseText=
this.add.text(this.inWidth/2,this.inHeight/2,this.text,{fontFamily:"font",fontSize:this.textSize,color:this.textColor});this.pauseText.displayWidth>=.8*this.inWidth-20&&this.pauseText.setDisplaySize(.8*this.inWidth-30,this.pauseText.displayHeight);this.pauseText.setPosition(this.inWidth/2-this.pauseText.displayWidth/2,this.inHeight/2-2*this.pauseText.displayHeight);this.input.on("pointerdown",function(){this.scene.isActive("pauseScene")&&(this.scene.resume("GameScene"),this.scene.stop("pauseScene"))},
this)}},{key:"update",value:function(){}},{key:"JsonParse",value:function(D){D=D.section1?D.section1.files:D.files;for(var L in D)for(var M=0,Y=Object.entries(D[L]);M<Y.length;M++)switch(D[L].key){case "pauseConfig":this.textSize=D[L].textSize,this.textColor=D[L].textColor,this.text=D[L].text,this.rectColor=D[L].rectColor,this.rectAlpha=D[L].rectAlpha}}}]);return P}(va().Scene),pb=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,
"GameOverScene")}$a(P,U);var V=ab(P);Za(P,[{key:"init",value:function(D){var L=this.cache.json.get("level-pack");this.data=D;L=L.section1?L.section1.files:L.files;for(var M in L)for(var Y=0,Z=Object.entries(L);Y<Z.length;Y++)switch(L[M].key){case "scoreConfigGameOverScene":this.scoreFontConfig=L[M].textConfig;this.scoreTextConfig=L[M].currentScoreText;this.additionnalText=L[M].additionnalText;break;case "gameOption":this.isImageInGameOverScene=L[M].isImageInGameOverScene;this.isAdditionnalTextGameOverScene=
L[M].isAdditionnalTextGameOverScene;this.isPlayerinGOScene=L[M].isPlayerinGOScene;this.isTransparentPannel=L[M].isTransparentPannel;break;case "transparentPannelOption":this.transPannelColor=L[M].transparentPannelColor;this.transPannelAlpha=L[M].transparentPannelAlpha;break;case "pannel-gameover":this.gameOverType=L[M].type,this.gameOverWidth=L[M].width,this.gameOverHeight=L[M].height,this.gameOverProp=this.inHeight<this.inWidth?L[M].percentPropHeightCompareToGameHeight:L[M].percentPropWidthCompareToGameWidth}M=
{data:"gameoption",runTime:"runTime",time:"runTime",score:"score",isIntermediateBG1:"isIntermediateBG1",flagClouds:"flagClouds",inWidth:"inWidth",inHeight:"inHeight",platformHeight:"platformHeight",platformPosition:"platformPosition",backurl:"backurl",saveDataWaitTime:"saveDataWaitTime",playerScale:"playerScale",playerDieHeightProp:"playerDieHeightProp",dieWidthOnHeight:"dieWidthOnHeight",playerType:"playerType"};L=0;for(D=Object.entries(D);L<D.length;L++){Y=D[L];Z=Y;Z=Array.isArray(Z)?Z:void 0;if(!Z){var ja=
Z=void 0,ka=null==Y?null:"undefined"!==typeof Symbol&&Y[Symbol.iterator]||Y["@@iterator"];if(null!=ka){var ha=[],qa=!0,ia=!1;try{for(ka=ka.call(Y);!(qa=(ja=ka.next()).done)&&(ha.push(ja.value),2!==ha.length);qa=!0);}catch(ua){ia=!0,Z=ua}finally{try{if(!qa&&null!=ka["return"])ka["return"]()}finally{if(ia)throw Z;}}Z=ha}else Z=void 0}if(!Z)a:{if(Y){if("string"===typeof Y){Z=Sa(Y,2);break a}Z=Object.prototype.toString.call(Y).slice(8,-1);"Object"===Z&&Y.constructor&&(Z=Y.constructor.name);if("Map"===
Z||"Set"===Z){Z=Array.from(Y);break a}if("Arguments"===Z||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z)){Z=Sa(Y,2);break a}}Z=void 0}if(!(Y=Z))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");Z=Y;Y=Z[0];Z=Z[1];M.hasOwnProperty(Y)&&(this[M[Y]]=Z)}this.textColor=this.scoreFontConfig.color}},{key:"create",value:function(){this.cameras.main.transparent=!0;this.scene.pause("GameScene");
if(void 0===this.saveDataWaitTime||null===this.saveDataWaitTime)this.saveDataWaitTime=1E3;if(this.isPlayerinGOScene){var D=this.add.image(0,0,"platform").setAlpha(0);D.setDisplaySize(this.inWidth,this.platformHeight);D.setOrigin(0);D.setPosition(0,this.platformPosition);this.physics.add.existing(D,!0);var L=this.add.sprite(this.inWidth/2,this.inHeight,"playerDead",0);"svg"!==this.playerType&&(L.setDisplaySize(Math.fround(this.playerScale*this.playerDieHeightProp*this.dieWidthOnHeight),Math.fround(this.playerScale*
this.playerDieHeightProp)),L.setSize(Math.fround(this.playerScale*this.playerDieHeightProp*this.dieWidthOnHeight),Math.fround(this.playerScale*this.playerDieHeightProp)));L.anims.play("playerDead");this.physics.add.existing(L);this.physics.add.collider(D,L,null,null,this);L.setPosition(this.inWidth/2,this.platformPosition-2*L.displayHeight);L.body.allowGravity=!0}!0===this.isTransparentPannel&&(this.transPannelColor=this.transPannelColor.replace("#","0x"),D=this.add.graphics(),D.fillStyle(this.transPannelColor,
this.transPannelAlpha),D.fillRect(0,0,this.inWidth,this.inHeight));var M;D=this.add.text(0,0,this.scoreTextConfig+this.score,{fontFamily:"font",fontSize:this.scoreFontConfig.fontSize,color:this.scoreFontConfig.color});!0===this.isAdditionnalTextGameOverScene&&(M=this.add.text(0,0,this.additionnalText,{fontFamily:"font",fontSize:this.scoreFontConfig.fontSize,color:this.scoreFontConfig.color}));if(1==this.isImageInGameOverScene){var Y=this.add.image(this.inWidth/2,this.inHeight/2,"gameOver");"svg"===
this.gameOverType||null==this.gameOverProp&&void 0==this.gameOverProp||(this.inHeight<this.inWidth?Y.setDisplaySize(this.gameOverWidth/this.gameOverHeight*this.gameOverProp*this.inHeight,this.inHeight*this.gameOverProp):Y.setDisplaySize(this.inWidth*this.gameOverProp,this.inWidth*this.gameOverProp/(this.gameOverWidth/this.gameOverHeight)));L=this.inHeight/2-Y.displayHeight/2-D.displayHeight-20;Y=this.inHeight/2+Y.displayHeight/2+20}else L=this.inHeight/2-D.displayHeight-20,Y=this.inHeight/2+D.displayHeight+
20;D.setColor(this.textColor);D.displayWidth>this.inWidth&&D.setDisplaySize(this.inWidth-10,D.displayHeight);void 0!==M&&M.displayWidth>this.inWidth&&M.setDisplaySize(this.inWidth-10,D.displayHeight);D.setPosition(this.inWidth/2-D.displayWidth/2,L);void 0!==M&&M.setPosition(this.inWidth/2-M.displayWidth/2,Y);this.saveData(this.saveDataWaitTime)}},{key:"update",value:function(){void 0!==this.tweensArray&&null===this.tweensArray?this.tweensArray=u(this,this.bars,this.tweensArray):void 0!==this.tweensArray&&
window.setTimeout(this.tweensArray,400)}},{key:"postDataAfter",value:function(D,L,M){window.setTimeout(function(){parent.postMessage({type:"runnerGameOver",payload:L,url:D},"*")},M)}},{key:"getJWT2",value:function(D,L,M){var Y=this,Z=new XMLHttpRequest;Z.open("POST","../games/api/submit",!0);Z.setRequestHeader("Access-Control-Allow-Credentials",!0);Z.setRequestHeader("Content-Type","application/json; charset=UTF-8");Z.setRequestHeader("Authorization",D);Z.send(JSON.stringify(L));Z.onload=function(){Y.postDataAfter(Y.backurl,
this.responseText,M)}}},{key:"saveData",value:function(){var D=this,L=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500,M=window.location.search.substring(1);M=new URLSearchParams(M);this.getbackURL=M.get("backurl");this.jwt1=M.get("token");this.getbackURL&&(this.backurl=this.getbackURL);this.jwt2=this.getJWT2(this.jwt1,Object.entries(this.data),L);this.time.addEvent({callback:function(){D.bars=p(D.inWidth,D.inHeight,D,0);D.tweensArray=null},callbackScope:this,delay:L,loop:!1})}}]);return P}(va().Scene),
qb=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,"orientationGestion")}db(P,U);var V=eb(P);cb(P,[{key:"init",value:function(D){this.isReboot=D.isReboot;this.inWidth=D.inWidth;this.inHeight=D.inHeight;void 0===this.inWidth&&(this.inWidth=window.innerWidth);void 0===this.inHeight&&(this.inHeight=window.innerHeight);D=this.cache.json.get("level-pack");this.JsonParse(D)}},{key:"preload",value:function(){}},{key:"create",value:function(){this.cameras.main.backgroundColor.transparent();
this.scene.bringToTop("orientationGestion");for(var D in this.scene.manager.scenes)this.scene.isPaused(this.scene.manager.getAt(D).scene.key)&&(this.isPausedScene=this.scene.manager.getAt(D).scene.key);this.guiRect=this.add.graphics();this.guiRect.fillStyle(16777215,1);this.guiRect.fillRect(0,0,window.innerWidth,window.innerHeight);this.isLandscapeSupported()&&"portrait"===this.getOrientation()&&this.isMobile()&&this.displayNoPortrait(this.imageRotation());this.isPortraitSupported()&&"landscape"===
this.getOrientation()&&this.isMobile()&&this.displayNoLandscape(this.imageRotation());this.isReload=this.canContinue=!1}},{key:"update",value:function(){if(this.isPortraitSupported()&&"portrait"===this.getOrientation()||this.isLandscapeSupported()&&"landscape"===this.getOrientation())this.canContinue=!0,!1===this.isReboot?(document.getElementById("turnNoLandscape").style.display="none",document.getElementById("turnNoPortrait").style.display="none",this.scene.resume(this.isPausedScene),this.scene.bringToTop(this.isPausedScene),
this.scene.stop("orientationGestion")):(this.canContinue=!1,!1===this.isReload&&(this.isReload=!0,location.reload()))}},{key:"isMobile",value:function(){return"ontouchstart"in document.documentElement?!0:!1}},{key:"imageRotation",value:function(){return!0!==this.isReboot||this.isLandscapeSupported()||this.isPortraitSupported()?0:90}},{key:"displayNoPortrait",value:function(D){document.getElementById("turnNoPortrait").style.rotate=D+"deg";document.getElementById("turnNoPortrait").style.display="block";
document.getElementById("turnNoLandscape").style.display="none"}},{key:"displayNoLandscape",value:function(D){document.getElementById("turnNoLandscape").style.rotate=D+"deg";document.getElementById("turnNoLandscape").style.display="block";document.getElementById("turnNoPortrait").style.display="none"}},{key:"isLandscapeSupported",value:function(){return this.isLandscape}},{key:"isPortraitSupported",value:function(){return this.isPortrait}},{key:"getOrientation",value:function(){var D="portrait";window.innerWidth>
window.innerHeight&&(D="landscape");return D}},{key:"JsonParse",value:function(D){var L;D&&(L=D.section1?D.section1.files:D.files);for(var M in L){D=0;for(var Y=Object.entries(L[M]);D<Y.length;D++)switch(L[M].key){case "gameOption":this.isLandscape=void 0!==L[M].isLandscape?L[M].isLandscape:!1,this.isPortrait=void 0!==L[M].isPortrait?L[M].isPortrait:!0}}}}]);return P}(va().Scene),rb=function(U){function P(){if(!(this instanceof P))throw new TypeError("Cannot call a class as a function");return V.call(this,
"Runner")}hb(P,U);var V=ib(P);gb(P,[{key:"create",value:function(){window.addEventListener("focus",function(){Ca.scene.isActive("PauseScene")&&(Ca.scene.resume("GameScene"),Ca.scene.stop("PauseScene"))});window.addEventListener("blur",function(){Ca.scene.isActive("GameScene")&&(Ca.scene.pause("GameScene"),Ca.scene.run("PauseScene"))});window.onload=Wa;window.addEventListener("resize",Wa);this.scene.start("Preload",{scene:"AssetsLoad"})}}]);return P}(va().Scene);Ga={title:"Runner",width:document.documentElement.clientWidth,
height:document.documentElement.clientHeight,type:va().AUTO,transparent:!0,parent:"game-container",physics:{default:"arcade",arcade:{gravity:{x:0,y:1E3},debug:!1}},scale:{mode:va().Scale.FIT,autoCenter:va().Scale.CENTER_BOTH},autoFocus:!0,scene:[rb,Ga,lb,mb,nb,ob,pb,qb,Ra]};var Ca=new (va().Game)(Ga)})()})();}).call(this || window)
